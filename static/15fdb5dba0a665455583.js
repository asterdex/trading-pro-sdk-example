"use strict";(self.webpackChunkaden_trade_sdk=self.webpackChunkaden_trade_sdk||[]).push([[6334],{63152:(e,t,n)=>{n.d(t,{C:()=>m,Z:()=>x});var a=n(58138),i=n(45313),o=n(49247),r=n(10600),s=n(18637),l=n(65871),d=n(71882),c=(n(96832),n(4337)),u=n(49241),p=n(3470);const h={className:"amount-input-container",sx:{height:"48px",width:"100%",bg:"bg3",mb:"20px","&.bn-input-status-error":{border:"none"},".bn-input-helper-text":{color:"errors",fontSize:"14px"}}};var m;!function(e){e[e.Deposit=1]="Deposit",e[e.Withdraw=2]="Withdraw"}(m||(m={}));const x=({value:e,onChange:t,available:n,maxWithdraw:x,realizedPnl:b,asset:g,type:f,precision:v=8,getI18n:j})=>{var w;const y=(0,u.w)({oldValue:e,precision:v}),C=Number(-1===x?n:Math.min(x,Number(n))),O=Number(e)>C,S=(null===(w=x.toString().split(".")[1])||void 0===w?void 0:w.length)||0;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",Object.assign({className:"amount-label"},{children:[(0,a.jsx)(i.Z,Object.assign({width:"auto"},{children:j("Amount")})),(0,a.jsxs)(o.Z,Object.assign({variant:"body2",color:"t.third"},{children:[j("Available"),(0,a.jsxs)(o.Z,Object.assign({ml:"4px",as:"span",variant:"subtitle2",color:"t.primary"},{children:[n," ",g]}))]}))]})),(0,a.jsx)(s.Z,{value:e,onChange:e=>t(y(e.currentTarget.value)),boxProps:h,variant:"outlineLarge",className:"amount-input",labelFixed:!0,error:O,suffix:(0,a.jsx)(r.Z,Object.assign({variant:"quiet",onClick:()=>{t((0,d.GW)(C,v).toString())}},{children:j("MAX")})),errorText:f===m.Withdraw?j("wallet-withdraw-amount-error",{defaultValue:"Please enter an amount less than the max withdrawal amount."}):j("wallet-deposit-amount-error",{defaultValue:"Please enter an amount less than the max deposit amount."})}),-1!==b&&g===c.J$&&(0,a.jsxs)("div",Object.assign({className:"amount-info",style:-1!==x?{marginBottom:"8px"}:{}},{children:[(0,a.jsx)(l.Z,Object.assign({arrow:!0,tip:j("wallet-withdraw-amount-24h-pnl-tip",{defaultValue:"Realized profits within 24 hours will be temporarily frozen and will be automatically unlocked over time."}),placement:"top",enablePortal:!0},{children:(0,a.jsx)(o.Z,Object.assign({color:"t.third",variant:"body2",sx:{cursor:"pointer",borderBottom:"1px dotted",borderColor:"t.third"}},{children:j("wallet-withdraw-amount-24h-pnl",{defaultValue:"24-hour realized profit"})}))})),(0,a.jsx)(o.Z,Object.assign({color:"t.primary",variant:"body2",sx:{textAlign:"right"}},{children:`${(0,p.Bz)(b,v).toString()} ${g}`}))]})),-1!==x&&(0,a.jsxs)("div",Object.assign({className:"amount-info"},{children:[(0,a.jsx)(o.Z,Object.assign({color:"t.third",variant:"body2",sx:{maxWidth:"186px"}},{children:j("wallet-remaining-withdraw-info-remaining",{defaultValue:"Daily withdrawal amount remaining"})})),(0,a.jsx)(o.Z,Object.assign({color:"t.primary",variant:"body2",sx:{textAlign:"right"}},{children:`${(0,p.uf)(x,S>8?8:S,3)} USD`}))]}))]})}},32187:(e,t,n)=>{n.d(t,{m:()=>r});var a=n(58138),i=(n(96832),n(27005));const o=new i.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}}),r=({children:e})=>(0,a.jsx)(i.QueryClientProvider,Object.assign({client:o},{children:e}))},86334:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(92336),i=n(58138),o=n(88927),r=n(49247),s=n(736),l=n(35116),d=n(77837),c=n.n(d),u=n(96832),p=n(29543),h=n(57110),m=n(214),x=n(63152),b=n(4337),g=n(32187),f=n(56265),v=n(80880),j=n(37025),w=n(9500),y=n(41018),C=n(26262),O=n(58732);const S=({visible:e,onClose:t,defaultCoin:n,getI18n:d,sx:g={},dialogSx:S={},t:N,disabled:Z,onTransactionStart:k=(()=>null),top:D})=>{var V;const T=(0,h.h)(),[$]=(0,j.WS)(),I=(0,u.useRef)(n||b.J$),[M,W]=(0,u.useState)("0"),_=(()=>{const[,e]=u.useState({});return u.useCallback((()=>e({})),[])})(),B=(0,C.r9)(),A=(0,C.fF)(),z=(0,m._n)(),{approveButton:E,allowance:F,needApprove:P}=(0,O.j)({getI18n:d,coin:I.current,visible:e}),{data:R,refetch:U}=(0,v.i)(A&&z,I.current),{data:J,refetch:L}=(0,v.I)(A&&z),G=(null===(V=null==J?void 0:J.data)||void 0===V?void 0:V.reduce(((e,t)=>(e[t.asset]=Number(t.walletBalance),e)),{}))||{},H=(0,u.useCallback)((({coin:e,amount:n})=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){if($){k({coin:e,amount:n});try{const a=yield $.getWalletBalance(I.current);if(W(a),Number(a)<Number(n))return void(0,l.i)({message:d("wallet-deposit-amount-error",{defaultValue:"Please enter an amount less than the max deposit amount."}),okText:d("dex-dialog-ok","Ok"),cancelText:""});$.deposit(e,n),t()}finally{}}}))),[$,d,t,k]),Y=(0,u.useMemo)((()=>c()((()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){if(!$)return;const e=yield $.getWalletBalance(I.current);W(e)}))),500)),[I,$]),q=(0,u.useCallback)((e=>{I.current=e,e?(Y(),_()):W("0")}),[Y,_]);(0,u.useEffect)((()=>{z&&e&&(Y(),A&&(U(),L()))}),[e,z,A,Y,U,L]),(0,u.useEffect)((()=>{I.current=n,e&&Y()}),[n,e]);const Q=(0,u.useMemo)((()=>B?[(0,i.jsx)(y.Y,{label:d("dex-deposit-to","Deposit to"),getI18n:d},"tradeType")]:[]),[d,B]);return(0,i.jsxs)(o.Z,Object.assign({sx:Object.assign(Object.assign({},w.i),S),visible:e},{children:[(0,i.jsxs)(r.Z,Object.assign({variant:"headline6",className:"title"},{children:[d("Deposit",{defaultValue:"Deposit"}),(0,i.jsx)(s.Z,{className:"close",onClick:t})]})),(0,i.jsx)(f.Z,{top:D,suffixFields:Q,available:M,defaultCoin:n,type:x.C.Deposit,onConfirm:H,onChangeCoin:q,getI18n:d,sx:g,residualDeposit:R,bottom:R&&R>=0?(0,i.jsx)(r.Z,Object.assign({variant:"body2",color:"t.secondary",mt:"16px"},{children:(0,i.jsx)(p.c,{t:N,i18nKey:"deposit-residual-hint",defaults:"You can have a maximum of {{maxDeposit}} {{coin}} in your account as margin asset.",values:{maxDeposit:R+G[I.current],coin:(0,h.D)(I.current,T)}})})):null,disabled:Z||P&&0===Number(F),confirmLabel:(null==$?void 0:$.supportTreasuryV2)?d("Deposit","Deposit"):void 0,prefixButtons:P&&0===Number(F)?[E]:[]})]}))},N=e=>{var{tradeType:t=C.v3.Futures,isSupportSpot:n=!0,sourceCode:o}=e,r=(0,a.__rest)(e,["tradeType","isSupportSpot","sourceCode"]);return(0,i.jsx)(g.m,{children:(0,i.jsx)(C.B9,Object.assign({tradeType:t,isSupportSpot:n,sourceCode:o},{children:(0,i.jsx)(S,Object.assign({},r))}))})}},58732:(e,t,n)=>{n.d(t,{j:()=>f});var a=n(92336),i=n(58138),o=n(96832),r=n(10600),s=n(73246),l=n(86282);const d={xl:{width:"18px",height:"48px",mr:"5px"},l:{width:"18px",height:"24px",mr:"5px"},m:{width:"18px",height:"24px",mr:"5px"},xs:{width:"18px",height:"12px",mr:"5px"}},c={":disabled:not(.inactive),:hover:not(:disabled):not(:active)":{backgroundColor:"button.defaultBg",backgroundImage:"none",borderColor:"t.third",color:"button.disableColor"}},u=(0,o.forwardRef)((({loading:e,children:t,sz:n="m",sx:a={},spinnerProps:i={},...u},p)=>{const h=d[n]||{},m=e?c:{},{sx:x={},...b}=i,g=(0,o.useCallback)(((...t)=>e?null:u.onClick&&u.onClick(...t)),[u.onClick,e]);return o.createElement(r.Z,{ref:p,sx:{...m,...a},disabled:e,sz:n,...u,onClick:g},e&&o.createElement(s.Z,{itemsColor:"button.disableColor",sx:{...h,...x},...b}),o.createElement(l.Z,{display:"inherit"},t))}));u.displayName="LoadingButton";const p=u;var h=n(93112),m=n(51285),x=n(37025),b=n(26262),g=n(59712);const f=({getI18n:e,coin:t,visible:n})=>{const{allowance:r,status:s,approve:l,needApprove:d}=((e,t)=>{const[n,i]=(0,o.useState)("0"),[r,s]=(0,o.useState)(1),[l,d]=(0,o.useState)(!0),[c,{isReady:u}]=(0,x.WS)(),p=(0,b.fF)(),f=(0,o.useRef)(),v=(0,h.D)((()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){if(!c||!p||!u)return;if(2===r)return window.clearTimeout(f.current),void(f.current=setTimeout(v,100));const t=yield c.isOrigin(e);if((0,m.unstable_batchedUpdates)((()=>{d(t),!t&&s(2)})),!t)try{const t=yield c.getOrInitAllowance(e);(0,m.unstable_batchedUpdates)((()=>{i(t),s(3)}))}catch(e){g.error("fetch allowance failed",e),s(3)}}))));(0,o.useEffect)((()=>{e&&u&&t&&(null==c?void 0:c.supportTreasuryV2)&&v()}),[e,u,v,t,null==c?void 0:c.supportTreasuryV2]);const j=(0,h.D)((()=>(0,a.__awaiter)(void 0,void 0,void 0,(function*(){if(c&&!l&&(null==c?void 0:c.supportTreasuryV2)){s(2);try{yield c.approveAllowance(e);const t=yield c.getOrInitAllowance(e,!0);(0,m.unstable_batchedUpdates)((()=>{i(t),s(3)}))}catch(e){g.error("doApprove failed",e),s(3)}}}))));return window.reset=(0,h.D)((()=>null==c?void 0:c.approveAllowance(e,"0"))),(0,o.useMemo)((()=>({status:r,allowance:n,needApprove:p&&!l&&(null==c?void 0:c.supportTreasuryV2),approve:j})),[r,n,p,l,j,null==c?void 0:c.supportTreasuryV2])})(t,n);return(0,o.useMemo)((()=>({approveButton:0===Number(r)&&d&&(0,i.jsx)(p,Object.assign({loading:2===s,onClick:l},{children:e("deposit-approveEnableSymbol",{defaultValue:"Enable {{coin}}",coin:t})}),"approve-button"),allowance:r,needApprove:d})),[r,d,s,l,e,t])}},56265:(e,t,n)=>{n.d(t,{Z:()=>w});var a=n(58138),i=n(86282),o=n(10600),r=n(96832),s=n(57110),l=n(63152),d=n(16537),c=n(69612),u=n(37025),p=n(72249),h=n(51934);const m={color:"t.primary",justifyContent:"flex-start",alignItems:"center",flex:1,height:"100%",fontSize:"14px",".asset-code":{ml:"4px"},".asset-name":{ml:"4px",color:"t.third"}},x=({logo:e,code:t,name:n})=>(0,a.jsxs)(p.Z,Object.assign({sx:m},{children:[(0,a.jsx)(h.Z,{variant:"avatar",src:e,alt:"",width:16,height:16}),(0,a.jsx)("div",Object.assign({className:"asset-code"},{children:t})),(0,a.jsx)("div",Object.assign({className:"asset-name"},{children:n}))]}));var b=n(4337);const g=({value:e,onChange:t,getI18n:n})=>{const i=(0,u.v8)(),o=(0,s.h)(),l=(0,r.useCallback)((e=>{const t=i.find((t=>t.code===e));if(!t)return null;const n=(0,s.D)(t.code,o);return(0,a.jsx)(x,Object.assign({},t,{code:n,name:n}))}),[i,o]);return(0,r.useEffect)((function(){i.length&&!i.find((t=>t.code===e))&&t(i.find((e=>e.code===b.J$))?b.J$:i[0].code)}),[e,i,t]),(0,a.jsx)(d.Z,Object.assign({label:n("Coin",{defaultValue:"Coin"}),hideSearch:!0,onChange:e=>{t(e)},size:"lg",value:e,renderValue:l},{children:i.map((e=>{const t=(0,s.D)(e.code,o);return(0,a.jsx)(c.W,Object.assign({value:e.code},{children:(0,a.jsx)(x,Object.assign({},e,{name:t,code:t}))}),e.code)}))}))};var f=n(3470);const v={display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1,".footer":{mt:"52px",textAlign:"right"},".confirm":{height:40,width:["100%",164]},".bn-sdd-noResults":{color:"t.secondary"},".amount-label":{justifyContent:"space-between",alignItems:"center",mb:"4px",lineHeight:"32px",display:"flex"},".amount-info":{display:"flex",flexDirection:"row",justifyContent:"space-between"}},j={display:"flex",justifyContent:"space-between",gap:"16px",button:{width:"100% !important"}},w=({available:e,maxWithdraw:t=-1,residualDeposit:n=-1,realizedPnl:d=-1,onChangeCoin:c,onConfirm:p,defaultCoin:h=b.J$,bottom:m=null,top:x=null,suffixFields:w=[],type:y,getI18n:C,sx:O={},disabled:S,confirmLabel:N,prefixButtons:Z=[]})=>{const k=(0,s.h)(),[D,V]=(0,r.useState)(""),[T,$]=(0,r.useState)(h),I=(0,u.W4)(T),M=(0,f.GW)(e,I).toString();let W=Number(M);t>=0?W=Math.min(Number(M),t):n>=0&&(W=Math.min(W,n));const _=S||!t||!Number(e)||!Number(D)||Number(D||0)>W;return(0,a.jsxs)(i.Z,Object.assign({sx:Object.assign(Object.assign({},v),O)},{children:[x,(0,a.jsxs)("div",{children:[w.map(((e,t)=>(0,a.jsx)(i.Z,Object.assign({mt:"24px"},{children:e}),t))),(0,a.jsx)(i.Z,Object.assign({mt:"24px"},{children:(0,a.jsx)(g,{value:T,onChange:e=>{c(e),$(e)},getI18n:C})})),(0,a.jsx)(i.Z,Object.assign({mt:"24px"},{children:(0,a.jsx)(l.Z,{realizedPnl:d,maxWithdraw:t,value:D,onChange:V,available:M,asset:(0,s.D)(T,k),type:y,getI18n:C,precision:I})}))]}),m,(0,a.jsxs)(i.Z,Object.assign({className:"footer",sx:Z.length>0?j:null},{children:[Z.length>0&&Z,(0,a.jsx)(o.Z,Object.assign({disabled:_,onClick:()=>p({coin:T,amount:D}),className:"confirm"},{children:N||C("Confirm")}))]}))]}))}},41018:(e,t,n)=>{n.d(t,{Y:()=>l});var a=n(58138),i=n(96832),o=n(16537),r=n(69612),s=n(26262);const l=({label:e,getI18n:t,onChangeType:n})=>{const{tradeType:l,setTradeType:d}=(0,s.Gt)(),c=(0,i.useMemo)((()=>[{label:t("dex-trade-type-spot",{defaultValue:"Spot"}),value:`${s.v3.Spot}`},{label:t("dex-trade-type-futures",{defaultValue:"Futures"}),value:`${s.v3.Futures}`}]),[t]),u=(0,i.useCallback)((e=>{const t=c.find((t=>t.value===e));return t&&t.label||""}),[c]),p=(0,i.useCallback)((e=>{d(Number(e)),setTimeout((()=>{n&&n()}))}),[]);return(0,a.jsx)(o.Z,Object.assign({size:"lg",renderValue:u,value:`${l}`,onChange:p,hideSearch:!0,label:e},{children:c.map((({value:e,label:t})=>(0,a.jsx)(r.W,Object.assign({value:`${e}`},{children:t}),`${e}`)))}))}},9500:(e,t,n)=>{n.d(t,{i:()=>a});const a={padding:"18px 24px 24px",width:["100%",420],height:["100%","auto"],minHeight:"400px",display:"flex",flexDirection:"column",bg:"modalBg",".title":{color:"t.primary",display:"flex",alignItems:"center",justifyContent:"space-between",pb:18,".close":{color:"icons.close",width:24,height:24,cursor:"pointer","&:hover":{color:"t.third"}}}}},49241:(e,t,n)=>{n.d(t,{w:()=>r});var a=n(3470);const i=/^\d+\.?\d*|%$/,o=/^0+(?=\d)/,r=({oldValue:e,maxValue:t,maxLength:n,precision:r})=>s=>!i.test(s)&&""!==s||isNaN(Number(s))?e:(s=s.replace(o,""),(0,a.N3)(s)>r&&(s=s.replace(new RegExp(`^(\\d*\\.\\d{${r}})\\d*`),"$1")),n&&s.split(".")[0].length>n&&(s=e),0===r&&(s=s.replace(".","")),t&&Number(s)>t&&(s=t.toString()),s)},3470:(e,t,n)=>{n.d(t,{Bz:()=>p,GW:()=>c,HV:()=>u,N3:()=>l,uf:()=>d});var a=n(71882),i=n(97269),o=n(67997);const r=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,s=n.n(o)()(((e,t)=>new RegExp(`\\d(?=(\\d{${t||3}})+${e>0?"\\.":"$"})`,"g")),((...e)=>e.join(","))),l=e=>{const t=`${e}`.match(r);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},d=(e,t,n=3)=>{e="number"==typeof e?e:+e;const a=s(t,n);return e.toFixed(Math.max(0,~~t)).replace(a,"$&,")},c=(e,t=2,n)=>((e,t,n="round",a=!1)=>{const i=e||0;let o;const r=Math.pow(10,t);let s=(+i+1/Math.pow(10,t+3))*r;if("string"==typeof n){const e=2;s=parseInt(""+s*Math.pow(10,e),10)/Math.pow(10,e),l=n,o=(()=>{if(Math[l])return Math[l];throw new Error("getRoundFunc called with unknown type")})()}else o=n;var l;if("function"!=typeof o)throw new Error("decRound unknown rounding func");return a?d(o(s)/r,t):(o(s)/r).toFixed(t)})(e,t,"floor",n),u=(e,t)=>(0,a.Jp)(e).toFixed(Math.min(8,t),1),p=(e,t=2)=>new i.Z(e).toFixed(t,3)},57110:(e,t,n)=>{n.d(t,{D:()=>u,h:()=>d});var a=n(96832),i=n(61975);const o={USDC:"USDC.e"},r={USDBC:"USDbC"},s={[i.yX.id]:o,421614:o,[i.J0.id]:r,8453:r};var l=n(52367);const d=()=>{const{chainId:e}=(0,l.dc)();return(0,a.useMemo)((()=>s[e]||{}),[e])},c=new Map,u=(e,t={})=>{var n;const a=e?null!==(n=c.get(e))&&void 0!==n?n:e:"";return t[a]||a}}}]);