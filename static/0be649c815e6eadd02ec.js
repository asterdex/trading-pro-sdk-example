"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[8101,6041],{39359:(e,t,i)=>{i.d(t,{AD:()=>p,Cf:()=>h,Du:()=>W,F4:()=>c,G6:()=>g,HO:()=>Z,Je:()=>z,Ld:()=>_,ML:()=>T,Ms:()=>u,OW:()=>f,P1:()=>r,PE:()=>R,Pl:()=>I,Q$:()=>o,QB:()=>H,Qq:()=>b,T3:()=>n,Tw:()=>k,UC:()=>d,VL:()=>x,Vn:()=>P,Y4:()=>N,Z4:()=>U,_f:()=>D,_q:()=>E,aE:()=>$,bM:()=>S,cW:()=>A,cY:()=>V,d0:()=>F,dS:()=>O,gg:()=>w,hD:()=>B,k0:()=>a,ln:()=>C,mB:()=>M,nj:()=>l,pJ:()=>v,qY:()=>L,qg:()=>m,rk:()=>K,uO:()=>y,zM:()=>s});const r='<svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M5.34981 3V1H3.6501V3H1.94995V13H3.65015V15H5.34981V13H7.05V3H5.34981ZM5.34981 11.3H3.6501V4.7H5.34981V11.3Z" fill="currentColor"/>\n<path d="M12.3499 3V1H10.6502V3H8.95001V13H10.6502V15H12.3499V13H14.0501V3H12.3499ZM12.3499 11.3H10.6502V4.7H12.3499V11.3Z" fill="currentColor"/>\n</svg>',o='<svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n<path d="M13 2.7H8.94998L12.04 5.8L10.84 7L8.83998 5V10.98L10.82 9L12.03 10.2L8.92998 13.3H13V15H2.97998V13.3H7.02998L3.93998 10.2L5.13998 9L7.13998 11V5.02L5.15998 7L3.94998 5.8L7.04998 2.7H2.97998V1H13V2.7Z" fill="currentColor"/>\n</svg>',n='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 9C20.433 9 22 7.433 22 5.5C22 3.567 20.433 2 18.5 2C16.567 2 15 3.567 15 5.5C15 6.1028 15.1524 6.67 15.4207 7.1652L7.1652 15.4207C6.67 15.1524 6.1028 15 5.5 15C3.567 15 2 16.567 2 18.5C2 20.433 3.567 22 5.5 22C7.433 22 9 20.433 9 18.5C9 17.8973 8.84765 17.3301 8.57936 16.835L16.835 8.57936C17.3301 8.84765 17.8973 9 18.5 9ZM18.5 7C19.3284 7 20 6.32843 20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7ZM5.5 20C6.32843 20 7 19.3284 7 18.5C7 17.6716 6.32843 17 5.5 17C4.67157 17 4 17.6716 4 18.5C4 19.3284 4.67157 20 5.5 20Z" fill="currentColor"/>\n</svg>\n',s='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.5794 5.835L22.2072 3.20718L20.793 1.79297L18.1652 4.42074C17.67 4.15239 17.1028 4 16.5 4C14.567 4 13 5.567 13 7.5C13 8.1028 13.1524 8.67 13.4207 9.1652L9.1652 13.4207C8.67 13.1524 8.1028 13 7.5 13C5.567 13 4 14.567 4 16.5C4 17.1028 4.15239 17.67 4.42074 18.1652L1.79297 20.793L3.20718 22.2072L5.835 19.5794C6.33015 19.8477 6.89728 20 7.5 20C9.433 20 11 18.433 11 16.5C11 15.8973 10.8477 15.3301 10.5794 14.835L14.835 10.5794C15.3301 10.8477 15.8973 11 16.5 11C18.433 11 20 9.433 20 7.5C20 6.89728 19.8477 6.33015 19.5794 5.835ZM16.5 9C17.3284 9 18 8.32843 18 7.5C18 6.67157 17.3284 6 16.5 6C15.6716 6 15 6.67157 15 7.5C15 8.32843 15.6716 9 16.5 9ZM7.5 18C8.32843 18 9 17.3284 9 16.5C9 15.6716 8.32843 15 7.5 15C6.67157 15 6 15.6716 6 16.5C6 17.3284 6.67157 18 7.5 18Z" fill="currentColor"/>\n</svg>\n',a='<svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 4.25H16.1449C16.5752 2.80425 17.9145 1.75 19.5 1.75C21.433 1.75 23 3.317 23 5.25C23 7.183 21.433 8.75 19.5 8.75C17.9145 8.75 16.5752 7.69574 16.1449 6.25H7.5V4.25ZM18 5.25C18 4.42157 18.6716 3.75 19.5 3.75C20.3284 3.75 21 4.42157 21 5.25C21 6.07843 20.3284 6.75 19.5 6.75C18.6716 6.75 18 6.07843 18 5.25Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 19.75H7.85506C7.42479 21.1957 6.08551 22.25 4.5 22.25C2.567 22.25 1 20.683 1 18.75C1 16.817 2.567 15.25 4.5 15.25C6.08551 15.25 7.42479 16.3043 7.85506 17.75H16.5V19.75ZM6 18.75C6 19.5784 5.32843 20.25 4.5 20.25C3.67157 20.25 3 19.5784 3 18.75C3 17.9216 3.67157 17.25 4.5 17.25C5.32843 17.25 6 17.9216 6 18.75Z" fill="currentColor"/>\n<path d="M16.5 10.75H7.5V8.75H16.5V10.75Z" fill="currentColor"/>\n<path d="M16.5 15.25H7.5V13.25H16.5V15.25Z" fill="currentColor"/>\n</svg>\n',l='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2 2V13H13V2H2ZM11 4H4V6.5H11V4ZM11 8.5H4V11H11V8.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M19.5 14C21.433 14 23 12.433 23 10.5C23 8.567 21.433 7 19.5 7C17.567 7 16 8.567 16 10.5C16 11.1028 16.1524 11.67 16.4207 12.1652L12.1652 16.4207C11.67 16.1524 11.1028 16 10.5 16C8.567 16 7 17.567 7 19.5C7 21.433 8.567 23 10.5 23C12.433 23 14 21.433 14 19.5C14 18.8973 13.8477 18.3301 13.5794 17.835L17.835 13.5794C18.3301 13.8477 18.8973 14 19.5 14ZM19.5 12C20.3284 12 21 11.3284 21 10.5C21 9.67157 20.3284 9 19.5 9C18.6716 9 18 9.67157 18 10.5C18 11.3284 18.6716 12 19.5 12ZM10.5 21C11.3284 21 12 20.3284 12 19.5C12 18.6716 11.3284 18 10.5 18C9.67157 18 9 18.6716 9 19.5C9 20.3284 9.67157 21 10.5 21Z" fill="currentColor"/>\n</svg>\n',c='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.874 11C15.4299 9.27477 13.8638 8 12 8C10.1362 8 8.57006 9.27477 8.12602 11L2 11V13L8.12602 13C8.57006 14.7252 10.1362 16 12 16C13.8638 16 15.4299 14.7252 15.874 13L22 13V11L15.874 11ZM14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12Z" fill="currentColor"/>\n</svg>\n',h='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 8.12602C9.27477 8.57006 8 10.1362 8 12C8 13.8638 9.27477 15.4299 11 15.874L11 22L13 22L13 15.874C14.7252 15.4299 16 13.8638 16 12C16 10.1362 14.7252 8.57006 13 8.12602L13 2L11 2L11 8.12602ZM12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10Z" fill="currentColor"/>\n</svg>\n',d='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18 5.5C18 7.433 16.433 9 14.5 9C13.8973 9 13.3301 8.84765 12.835 8.57936L8.57936 12.835C8.84765 13.3301 9 13.8973 9 14.5C9 16.433 7.433 18 5.5 18C3.567 18 2 16.433 2 14.5C2 12.567 3.567 11 5.5 11C6.1028 11 6.67 11.1524 7.1652 11.4207L11.4207 7.1652C11.1524 6.67 11 6.1028 11 5.5C11 3.567 12.567 2 14.5 2C16.433 2 18 3.567 18 5.5ZM16 5.5C16 6.32843 15.3284 7 14.5 7C13.6716 7 13 6.32843 13 5.5C13 4.67157 13.6716 4 14.5 4C15.3284 4 16 4.67157 16 5.5ZM7 14.5C7 15.3284 6.32843 16 5.5 16C4.67157 16 4 15.3284 4 14.5C4 13.6716 4.67157 13 5.5 13C6.32843 13 7 13.6716 7 14.5Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 19C17.433 19 19 17.433 19 15.5C19 14.8973 18.8477 14.3301 18.5794 13.835L22.7072 9.70718L21.293 8.29297L17.1652 12.4207C16.67 12.1524 16.1028 12 15.5 12C13.567 12 12 13.567 12 15.5C12 16.1027 12.1523 16.6699 12.4206 17.165L8.29282 21.2928L9.70703 22.707L13.8348 18.5793C14.33 18.8476 14.8972 19 15.5 19ZM15.5 17C16.3284 17 17 16.3284 17 15.5C17 14.6716 16.3284 14 15.5 14C14.6716 14 14 14.6716 14 15.5C14 16.3284 14.6716 17 15.5 17Z" fill="currentColor"/>\n</svg>\n',u='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.5859 11.4142L19.0001 10L12.0001 3L5 10.0001L6.41421 11.4143L11.0002 6.82835L11.0002 21.9997H13.0002L13.0002 6.8285L17.5859 11.4142Z" fill="currentColor"/>\n</svg>\n',g='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M17.5859 12.5858L19.0001 14L12.0001 21L5 13.9999L6.41421 12.5857L11.0002 17.1716L11.0002 2.00026H13.0002L13.0002 17.1715L17.5859 12.5858Z" fill="currentColor"/>\n</svg>\n',m='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11.4142 17.5859L10 19.0001L3 12.0001L10.0001 5L11.4143 6.41421L6.82835 11.0002L21.9997 11.0002L21.9997 13.0002L6.8285 13.0002L11.4142 17.5859Z" fill="currentColor"/>\n</svg>\n',p='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.5858 17.5859L14 19.0001L21 12.0001L13.9999 5L12.5857 6.41421L17.1716 11.0002L2.00026 11.0002L2.00026 13.0002L17.1715 13.0002L12.5858 17.5859Z" fill="currentColor"/>\n</svg>\n',y='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 2H13V8.12602C14.4056 8.4878 15.5122 9.59439 15.874 11H22V13H15.874C15.5122 14.4056 14.4056 15.5122 13 15.874V22H11V15.874C9.59439 15.5122 8.4878 14.4056 8.12602 13H2V11H8.12602C8.4878 9.59439 9.59439 8.4878 11 8.12602V2ZM14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12Z" fill="currentColor"/>\n</svg>\n',x='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 5V7H10V21H8V7H3V5H15Z" fill="currentColor"/>\n<rect width="2" height="20" transform="matrix(1 0 0 -1 18 22)" fill="currentColor"/>\n</svg>\n',f='<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.85506 4.5C8.42479 3.05426 7.08551 2 5.5 2C3.567 2 2 3.567 2 5.5C2 7.08551 3.05426 8.42479 4.5 8.85506V15.1449C3.05426 15.5752 2 16.9145 2 18.5C2 20.433 3.567 22 5.5 22C7.08551 22 8.42479 20.9457 8.85506 19.5H15.1449C15.5752 20.9457 16.9145 22 18.5 22C20.433 22 22 20.433 22 18.5C22 16.9145 20.9457 15.5752 19.5 15.1449V8.85506C20.9457 8.42479 22 7.08551 22 5.5C22 3.567 20.433 2 18.5 2C16.9145 2 15.5752 3.05426 15.1449 4.5L8.85506 4.5ZM5.5 4C6.32843 4 7 4.67157 7 5.5C7 6.32843 6.32843 7 5.5 7C4.67157 7 4 6.32843 4 5.5C4 4.67157 4.67157 4 5.5 4ZM15.1449 6.5L8.85506 6.5C8.51909 7.62889 7.62889 8.51909 6.5 8.85506V15.1449C7.62889 15.4809 8.51909 16.3711 8.85506 17.5H15.1449C15.4809 16.3711 16.3711 15.4809 17.5 15.1449V8.85506C16.3711 8.51909 15.4809 7.62889 15.1449 6.5ZM5.5 17C6.32843 17 7 17.6716 7 18.5C7 19.3284 6.32843 20 5.5 20C4.67157 20 4 19.3284 4 18.5C4 17.6716 4.67157 17 5.5 17ZM20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7C19.3284 7 20 6.32843 20 5.5ZM18.5 17C19.3284 17 20 17.6716 20 18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5C17 17.6716 17.6716 17 18.5 17Z" fill="currentColor"/>\n</svg>\n',C='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17.5794 7.835C17.8477 8.33014 18 8.89728 18 9.5C18 11.433 16.433 13 14.5 13C13.8973 13 13.3301 12.8477 12.835 12.5794L8.57936 16.835C8.84765 17.3301 9 17.8973 9 18.5C9 20.433 7.433 22 5.5 22C3.567 22 2 20.433 2 18.5C2 16.567 3.567 15 5.5 15C6.1028 15 6.67 15.1524 7.1652 15.4207L11.4207 11.1652C11.1524 10.67 11 10.1028 11 9.5C11 7.567 12.567 6 14.5 6C15.1028 6 15.67 6.15239 16.1652 6.42074L20.793 1.79297L22.2072 3.20718L17.5794 7.835ZM16 9.5C16 10.3284 15.3284 11 14.5 11C13.6716 11 13 10.3284 13 9.5C13 8.67157 13.6716 8 14.5 8C15.3284 8 16 8.67157 16 9.5ZM7 18.5C7 19.3284 6.32843 20 5.5 20C4.67157 20 4 19.3284 4 18.5C4 17.6716 4.67157 17 5.5 17C6.32843 17 7 17.6716 7 18.5Z" fill="currentColor"/>\n</svg>\n',b='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.4817 12.5007C12.4254 12.5007 12.3878 12.4631 12.3878 12.4067V11.1479C12.3878 11.0916 12.3972 11.0634 12.4348 11.0164L14.6799 8.6773C14.9148 8.43306 14.9993 8.23578 14.9993 7.99154C14.9993 7.68153 14.8396 7.50305 14.5672 7.50305C14.2948 7.50305 14.0975 7.66275 14.0599 8.17002C14.0599 8.22639 14.0224 8.26397 13.9566 8.25457L12.4817 8.0573C12.4254 8.0479 12.3972 8.01033 12.3972 7.95396C12.4442 6.77031 13.4023 6 14.6611 6C15.9199 6 16.8218 6.79849 16.8218 7.90699C16.8218 8.62094 16.5306 9.11882 16.0609 9.59792L14.7457 10.9413V10.9601H16.7278C16.7842 10.9601 16.8218 10.9976 16.8218 11.054V12.4067C16.8218 12.4631 16.7842 12.5007 16.7278 12.5007H12.4817Z" fill="currentColor"/>\n<path d="M9.18598 12.5007C9.12962 12.5007 9.09204 12.4631 9.09204 12.4067V8.08548H9.07326L7.93658 8.82761C7.88021 8.86518 7.81445 8.8464 7.81445 8.77124V7.14607C7.81445 7.08971 7.83324 7.05213 7.88021 7.01456L9.10144 6.16909C9.1578 6.13152 9.21417 6.11273 9.27992 6.11273H10.8769C10.9333 6.11273 10.9709 6.1503 10.9709 6.20667V12.4067C10.9709 12.4631 10.9333 12.5007 10.8769 12.5007H9.18598Z" fill="currentColor"/>\n<path d="M17.7171 10.9131C17.8487 11.937 18.7035 12.6134 20.0093 12.6134C21.3714 12.6134 22.2733 11.7867 22.2733 10.6219C22.2733 9.76701 21.8881 9.33489 21.4466 9.09064V9.07185C21.8881 8.78064 22.1699 8.33912 22.1699 7.76608C22.1699 6.77971 21.3808 6 19.9999 6C18.6753 6 17.9144 6.70455 17.7453 7.70972C17.7359 7.76608 17.7641 7.80366 17.8205 7.81305L19.3141 8.01033C19.3705 8.01972 19.4081 7.98214 19.4175 7.93517C19.4738 7.67214 19.6241 7.50305 19.8872 7.50305C20.1596 7.50305 20.3475 7.68153 20.3475 7.99154C20.3475 8.31094 20.1596 8.49882 19.8402 8.49882H19.6054C19.549 8.49882 19.5114 8.53639 19.5114 8.59276V9.87974C19.5114 9.93611 19.549 9.97368 19.6054 9.97368H19.859C20.2254 9.97368 20.4508 10.171 20.4508 10.5467C20.4508 10.9131 20.2535 11.1104 19.9435 11.1104C19.6523 11.1104 19.4644 10.9413 19.3987 10.6782C19.3893 10.6219 19.3517 10.5843 19.286 10.5937L17.7923 10.8004C17.7359 10.8098 17.7078 10.8567 17.7171 10.9131Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 15.5C1.5 13.567 3.067 12 5 12C6.58551 12 7.92479 13.0543 8.35506 14.5H22V16.5H8.35506C7.92479 17.9457 6.58551 19 5 19C3.067 19 1.5 17.433 1.5 15.5ZM5 14C4.17157 14 3.5 14.6716 3.5 15.5C3.5 16.3284 4.17157 17 5 17C5.82843 17 6.5 16.3284 6.5 15.5C6.5 14.6716 5.82843 14 5 14Z" fill="currentColor"/>\n</svg>\n',w='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.5 9C20.433 9 22 7.433 22 5.5C22 3.567 20.433 2 18.5 2C16.567 2 15 3.567 15 5.5C15 6.0368 15.1208 6.54537 15.3368 7H8V9H13.5859L7.1652 15.4207C6.67 15.1524 6.1028 15 5.5 15C3.567 15 2 16.567 2 18.5C2 20.433 3.567 22 5.5 22C7.433 22 9 20.433 9 18.5C9 17.8973 8.84765 17.3301 8.57936 16.835L15 10.4144V16H17V8.66318C17.4546 8.87915 17.9632 9 18.5 9ZM18.5 7C19.3284 7 20 6.32843 20 5.5C20 4.67157 19.3284 4 18.5 4C17.6716 4 17 4.67157 17 5.5C17 6.32843 17.6716 7 18.5 7ZM5.5 20C6.32843 20 7 19.3284 7 18.5C7 17.6716 6.32843 17 5.5 17C4.67157 17 4 17.6716 4 18.5C4 19.3284 4.67157 20 5.5 20Z" fill="currentColor"/>\n</svg>\n',v='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V7H15V18H13Z" fill="currentColor"/>\n<path d="M9 7V18H11V7H9Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11 3V1H13V3H22V5H20V22H4V5H2V3H11ZM6 5V20H18V5H6Z" fill="currentColor"/>\n</svg>\n',L='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM6.22447 7.38053L5.89752 8.36106H4.10089L3.77388 7.38053L3.55068 7.25134L2.53733 7.45842L1.639 5.90259L2.32344 5.13094V4.86895L1.639 4.0973L2.53733 2.54148L3.55071 2.74855L3.77391 2.61936L4.10086 1.63883H5.89752L6.22447 2.61936L6.44768 2.74855L7.46102 2.54148L8.35936 4.0973L7.67491 4.86895V5.13094L8.35936 5.90259L7.46102 7.45842L6.44768 7.25134L6.22447 7.38053ZM7.12387 6.70908L6.33297 6.54746L5.67192 6.93005L5.41707 7.69439H4.58132L4.32641 6.93004L3.66539 6.54746L2.87448 6.70908L2.45665 5.98543L2.99011 5.384V4.61589L2.45665 4.01446L2.87448 3.29081L3.66542 3.45244L4.32646 3.06984L4.58132 2.3055H5.41707L5.67192 3.06984L6.33297 3.45244L7.12387 3.29082L7.54171 4.01446L7.00824 4.61589V5.384L7.54171 5.98543L7.12387 6.70908ZM4.99998 6.33333C4.2636 6.33333 3.66665 5.73638 3.66665 5C3.66665 4.26362 4.2636 3.66667 4.99998 3.66667C5.73636 3.66667 6.33331 4.26362 6.33331 5C6.33331 5.73638 5.73636 6.33333 4.99998 6.33333ZM4.99998 5.66667C4.63179 5.66667 4.33331 5.36819 4.33331 5C4.33331 4.63181 4.63179 4.33333 4.99998 4.33333C5.36817 4.33333 5.66665 4.63181 5.66665 5C5.66665 5.36819 5.36817 5.66667 4.99998 5.66667Z" fill="red"/>\n</svg>\n',S='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM9 5.00002L7.00006 3.00008C5.89547 1.8955 4.10456 1.89547 2.99996 3.00007L1 5.00002L2.99996 7.0001C4.10456 8.1047 5.89547 8.10466 7.00006 7.00008L9 5.00002ZM3.47134 3.47147C4.31559 2.62723 5.68439 2.62725 6.52864 3.47149L8.05717 5.00002L6.52864 6.52867C5.68439 7.37291 4.31559 7.37293 3.47134 6.52869L1.94279 5.00002L3.47134 3.47147ZM5.83331 5.00008C5.83331 5.46032 5.46022 5.83341 4.99998 5.83341C4.53974 5.83341 4.16665 5.46032 4.16665 5.00008C4.16665 4.53984 4.53974 4.16675 4.99998 4.16675C5.46022 4.16675 5.83331 4.53984 5.83331 5.00008ZM4.99998 6.50008C5.82841 6.50008 6.49998 5.82851 6.49998 5.00008C6.49998 4.17165 5.82841 3.50008 4.99998 3.50008C4.17155 3.50008 3.49998 4.17165 3.49998 5.00008C3.49998 5.82851 4.17155 6.50008 4.99998 6.50008Z" fill="currentColor"/>\n</svg>\n',E='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM7.66663 8.13789L1.86194 2.3332L2.33334 1.86179L3.2494 2.77785C4.35955 1.90096 5.97521 1.97497 7.00006 2.99982L9 4.99976L7.2357 6.76415L8.13803 7.66648L7.66663 8.13789ZM6.76429 6.29274L3.72511 3.25356C4.57079 2.63457 5.76455 2.70714 6.52864 3.47122L8.05717 4.99976L6.76429 6.29274ZM5.64849 7.0625L6.16433 7.57834C5.12306 8.0483 3.8556 7.85548 2.99996 6.99983L1 4.99976L2.29287 3.70688L2.76427 4.17828L1.94279 4.99976L3.47134 6.52843C4.06046 7.11754 4.905 7.29556 5.64849 7.0625Z" fill="currentColor"/>\n</svg>\n',k='<svg width="14" height="14" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10 0H0V10H10V0ZM2.43066 2.90258L4.5283 5.00019L2.43064 7.09782L2.66634 7.33352L2.90204 7.56923L4.9997 5.47159L7.09727 7.56916L7.56867 7.09776L5.47111 5.00019L7.56869 2.90256L7.33299 2.66685L7.09728 2.43115L4.9997 4.52879L2.90207 2.43118L2.66637 2.66688L2.43066 2.90258Z" fill="currentColor"/>\n</svg>\n',V='<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M17 13.9999L18.7107 13.2964L32.7107 27.4382L32 29.1417H24.2162L18.7107 34.7034L17 33.9999V13.9999ZM19 16.4314V31.5683L23.3819 27.1417H29.6029L19 16.4314Z" fill="currentColor"/>\n</svg>\n',A='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 2H11V9H13V2Z" fill="currentColor"/>\n<path d="M15 11V13H22V11H15Z" fill="currentColor"/>\n<path d="M13 15H11V22H13V15Z" fill="currentColor"/>\n<path d="M9 13V11H2V13H9Z" fill="currentColor"/>\n</svg>\n',T='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.3431 3 9 4.34315 9 6V9H20V22H4V9H7V6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H15C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>\n',M='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 6V9H4V22H20V9H17V6C17 3.23858 14.7614 1 12 1C9.23858 1 7 3.23858 7 6ZM12 3C10.3431 3 9 4.34315 9 6V9H15V6C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>\n',D='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.9999 14.5002C13.3807 14.5002 14.4999 13.381 14.4999 12.0002C14.4999 10.6195 13.3807 9.50024 11.9999 9.50024C10.6192 9.50024 9.49995 10.6195 9.49995 12.0002C9.49995 13.381 10.6192 14.5002 11.9999 14.5002ZM16.4999 12.0002C16.4999 14.4855 14.4852 16.5002 11.9999 16.5002C9.51466 16.5002 7.49995 14.4855 7.49995 12.0002C7.49995 9.51496 9.51466 7.50024 11.9999 7.50024C14.4852 7.50024 16.4999 9.51496 16.4999 12.0002Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M18.0002 6.00025L24 12.0001L18.0002 18.0002C14.6864 21.314 9.31368 21.3141 5.99988 18.0003L0 12.0001L5.99988 6.0002C9.31368 2.6864 14.6864 2.6865 18.0002 6.00025ZM16.5859 7.41447C14.0532 4.88174 9.94676 4.88168 7.41403 7.41441L2.82837 12.0001L7.41403 16.5861C9.94676 19.1188 14.0532 19.1187 16.5859 16.586L21.1715 12.0001L16.5859 7.41447Z" fill="currentColor"/>\n</svg>\n',I='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M2.58582 3.99966L19.9999 21.4137L21.4141 19.9995L18.7071 17.2925L24 11.9993L18.0002 5.99952C14.9256 2.92499 10.0787 2.70295 6.74819 5.33361L4.00003 2.58545L2.58582 3.99966ZM8.17533 6.76075L17.2929 15.8783L21.1715 11.9993L16.5859 7.41373C14.2937 5.12148 10.7124 4.90379 8.17533 6.76075Z" fill="currentColor"/>\n<path d="M15.493 19.7351L13.9455 18.1876C11.715 18.8867 9.18138 18.3527 7.41403 16.5853L2.82837 11.9993L5.29281 9.5349L3.87862 8.12072L0 11.9993L5.99988 17.9996C8.56681 20.5665 12.3692 21.145 15.493 19.7351Z" fill="currentColor"/>\n</svg>\n',_='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16.3997L17.4001 2L22.0001 6.6L7.6 20.9997H3V16.3997ZM5 18.9997H6.8L16.0676 9.79587L14.2859 8.01421L5 17.2997V18.9997ZM15.7001 6.6L17.4902 8.39005L19.3001 6.6L17.5001 4.8L15.7001 6.6Z" fill="currentColor"/>\n<path d="M10 3L3 3V10H5V5L10 5V3Z" fill="currentColor"/>\n<path d="M14 21V19H19V14H21V21H14Z" fill="currentColor"/>\n</svg>\n',P='<svg width="6" height="12" viewBox="0 0 6 12" fill="none">\n<rect width="2" height="2" fill="currentColor" />\n<rect y="5" width="2" height="2" fill="currentColor" />\n<rect y="10" width="2" height="2" fill="currentColor" />\n<rect x="4" width="2" height="2" fill="currentColor" />\n<rect x="4" y="5" width="2" height="2" fill="currentColor" />\n<rect x="4" y="10" width="2" height="2" fill="currentColor" />\n</svg>',W='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7.07114 6.34315C8.59945 4.81484 9.88191 4 12 4C16.4182 4 20 7.58172 20 12H22C22 6.47715 17.5228 2 12 2C9.14747 2 7.38599 3.19988 5.65693 4.92893L4 6.58586V3H2V10H9V8L5.41429 8L7.07114 6.34315Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.9289 17.6569C15.4006 19.1852 14.1181 20 12 20C7.58175 20 4.00003 16.4183 4.00003 12H2.00003C2.00003 17.5228 6.47718 22 12 22C14.8525 22 16.614 20.8001 18.3431 19.0711L20 17.4141V21H22V14H15V16H18.5857L16.9289 17.6569Z" fill="currentColor"/>\n</svg>\n',R='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M3 16.3997L17.4001 2L22.0001 6.6L7.60004 20.9997L3 20.9997V16.3997ZM5 18.9997H6.8L16.0676 9.79587L14.2859 8.01421L5 17.2997V18.9997ZM15.7001 6.6L17.4902 8.39005L19.3001 6.6L17.5001 4.8L15.7001 6.6Z" fill="currentColor"/>\n</svg>\n',B='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14 14V9H21V21H9V14H14Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M13 5H5V13H13V5ZM3 3V15H15V3H3Z" fill="currentColor"/>\n</svg>\n',H='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M12 3C10.3431 3 9 4.34315 9 6V9H20V22H4V9H7V6C7 3.23858 9.23858 1 12 1C14.7614 1 17 3.23858 17 6H15C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>',Z='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13 18V13H11V18H13Z" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M7 6V9H4V22H20V9H17V6C17 3.23858 14.7614 1 12 1C9.23858 1 7 3.23858 7 6ZM12 3C10.3431 3 9 4.34315 9 6V9H15V6C15 4.34315 13.6569 3 12 3ZM6 11H18V20H6V11Z" fill="currentColor"/>\n</svg>\n',O='<svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n<path d="M15.4 3L5.40002 13V17.6H10L20 7.6L15.4 3ZM9.20002 15.6H7.40002V13.9L15.5 5.8L17.3 7.6L9.20002 15.6Z" fill="currentColor"/>\n<path d="M16.9 4.4L15.4 3L16.9 4.4Z" fill="currentColor"/>\n<path d="M21 18.8999H3V20.8999H21V18.8999Z" fill="currentColor"/>\n</svg>\n',N='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M11 6.63184V8.03184L8.20002 10.9998L5.40002 8.03184V6.63184H11Z" fill="currentColor"/>\n</svg>\n',F='<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="#EAECEF"/>\n</svg>\n',K='<svg width="300" height="60" viewBox="0 0 300 60" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M13.6096 30L6.83425 36.7383L0 30L6.83425 23.2031L13.6096 30ZM30.165 13.5352L41.8303 25.1367L48.6646 18.3398L30.165 0L11.6654 18.3984L18.4996 25.1953L30.165 13.5352ZM53.4957 23.2031L46.7203 30L53.5546 36.7969L60.3888 30L53.4957 23.2031ZM30.165 46.4648L18.4996 34.8047L11.6654 41.6016L30.165 60L48.6646 41.6016L41.8303 34.8047L30.165 46.4648ZM30.165 36.7383L36.9992 29.9414L30.165 23.2031L23.3307 30L30.165 36.7383ZM102.042 37.4414V37.3242C102.042 32.9297 99.6858 30.7031 95.8562 29.2383C98.2129 27.9492 100.216 25.8398 100.216 22.1484V22.0312C100.216 16.875 96.033 13.5352 89.3166 13.5352H73.9395V46.4062H89.6701C97.1524 46.4648 102.042 43.418 102.042 37.4414ZM92.9694 23.3789C92.9694 25.8398 90.9662 26.8359 87.7258 26.8359H81.0094V19.8633H88.1972C91.2608 19.8633 92.9694 21.0938 92.9694 23.2617V23.3789ZM94.7957 36.5039C94.7957 38.9648 92.8515 40.0781 89.6701 40.0781H81.0094V32.8711H89.4344C93.1461 32.8711 94.7957 34.2188 94.7957 36.4453V36.5039ZM117.302 46.4648V13.5352H109.996V46.4062H117.302V46.4648ZM156.422 46.4648V13.5352H149.234V33.8086L133.739 13.5352H127.023V46.4062H134.211V25.5469L150.236 46.4648H156.422ZM196.72 46.4648L182.522 13.3594H175.805L161.606 46.4648H169.089L172.093 39.082H186.057L189.061 46.4648H196.72ZM183.464 32.6953H174.686L179.104 22.0312L183.464 32.6953ZM231.422 46.4648V13.5352H224.234V33.8086L208.739 13.5352H202.023V46.4062H209.211V25.5469L225.236 46.4648H231.422ZM268.951 41.1328L264.297 36.5039C261.705 38.8477 259.407 40.3711 255.577 40.3711C249.921 40.3711 245.974 35.6836 245.974 30.0586V29.8828C245.974 24.2578 249.98 19.6289 255.577 19.6289C258.877 19.6289 261.469 21.0352 264.061 23.3203L268.716 17.9883C265.652 15 261.94 12.8906 255.695 12.8906C245.562 12.8906 238.433 20.5664 238.433 29.8828V30C238.433 39.4336 245.679 46.9336 255.401 46.9336C261.764 46.9922 265.534 44.7656 268.951 41.1328ZM300 46.4648V40.0195H282.031V33.1055H297.643V26.6602H282.031V19.9805H299.764V13.5352H274.843V46.4062H300V46.4648Z" fill="#1E2329"/>\n</svg>\n',U="M0 .5h2v2H0zM0 5.5h2v2H0zM0 10.5h2v2H0zM4 .5h2v2H4zM4 5.5h2v2H4zM4 10.5h2v2H4z",$="M6.7 6.5L10 9.8L9.3 10.5L6 7.2L2.7 10.5L2 9.8L5.3 6.5L2 3.2L2.7 2.5L6 5.8L9.3 2.5L10 3.2L6.7 6.5Z",z='<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="30" height="30" rx="4" fill="currentColor"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M0 0H6V6H0V0ZM12 6H6V12H0V18H6V24H0V30H6V24H12V30H18V24H24V30H30V24H24V18H30V12H24V6H30V0H24V6H18V0H12V6ZM12 12V6H18V12H12ZM12 18V24H18V18H24V12H18V18H12ZM12 18H6V12H12V18Z" fill="currentColor"/>\n</svg>\n'},82669:(e,t,i)=>{i.d(t,{Z:()=>A});var r=i(72249),o=i(77991),n=i(86282),s=i(49247),a=i(96832),l=i(415);const c=e=>a.createElement(l.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},a.createElement("path",{d:"M14.5 10.29a1 1 0 011 1v.353a1 1 0 01-.273.686l-2.5 2.65a1 1 0 01-1.454 0l-2.5-2.65a1 1 0 01-.273-.686v-.353a1 1 0 011-1h5z"}));var h=i(81913),d=i(39359),u=i(44458),g=i(24997),m=i(43559),p=i(36825),y=i(9704),x=i(10066),f=i(21316);const C={height:"40px",alignItems:"center",cursor:"pointer",justifyContent:"center",textAlign:"center",color:"t.third","&:hover":{bg:"line",color:"t.primary"},"&:hover path, &:hover rect":{fill:"t.primary"},"&:not(:first-of-type)":{width:"40px",borderLeftWidth:"1px",borderLeftStyle:"solid",borderLeftColor:"line"},".active path":{fill:"primary"}},b=[10,11,12,14,16,18,20,24,28,36],w=e=>{const{r:t,g:i,b:r}=(0,x.P7)(e);return`rgb(${t}, ${i}, ${r})`},v=({isLock:e=!1,setLock:t,getI18n:i=(()=>"")})=>(0,a.useMemo)((()=>a.createElement(h.Z,{tip:e?i(p.Wi.ANNOTATION_UNLOCK,"Unlock"):i(p.Wi.ANNOTATION_LOCK,"Lock"),placement:"top",arrow:!0,sx:C},a.createElement(r.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:e?d.HO:d.QB},sx:{"&:hover path, &:hover rect":{fill:e?"primary":"t.primary"}},onClick:()=>t({isLock:!e})}))),[e,t]),L=a.memo((function({tip:e="",children:t=[],overlay:i=[]}){return a.createElement(o.ZP,{trigger:"click",placement:"bottom",height:"100%",overlay:i,overlayProps:{mt:"minor"},enablePortal:!0,sx:C},a.createElement(h.Z,{tip:e,placement:"top",arrow:!0,height:"100%"},t))})),S=e=>{const{isActive:t,clickHandle:i}=e;return(0,a.useMemo)((()=>a.createElement(r.Z,{width:1,onClick:()=>i(),height:28,alignItems:"center",px:"sm",py:"minor",sx:{cursor:"pointer",fontSize:"14px",color:t?"t.primary":"t.third","&:hover":{bg:"line"}}},e.children)),[t,i])},E=({isActive:e,clickHandle:t,boxStyle:i={}})=>a.createElement(r.Z,{width:1,onClick:()=>t(),height:32,alignItems:"center",px:"xs",sx:{cursor:"pointer",bg:e?"line":"","&:hover":{bg:"line"},"&:hover .annotation-dropdown-item":{borderBottomColor:"t.primary"}}},a.createElement(n.Z,{className:"annotation-dropdown-item",sx:{width:"100%",height:"0",...i}})),k=({width:e=1,onWidthChange:t})=>{const i=(0,a.useCallback)((i=>{i!==e&&t({lineWidth:i})}),[e,t]);return(0,a.useMemo)((()=>a.createElement(r.Z,{width:80,flexDirection:"column",bg:"modalBg",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},[1,2,3,4].map((t=>a.createElement(E,{key:t,clickHandle:()=>i(t),isActive:t===e,boxStyle:{borderBottomStyle:y.TD.SOLID,borderBottomWidth:`${t}px`,borderBottomColor:t===e?"t.primary":"t.third"}}))))),[i])},V=({lineStyle:e=y.TD.SOLID,onStyleChange:t})=>{const i=(0,a.useCallback)((i=>{i!==e&&t({lineStyle:i})}),[e,t]);return(0,a.useMemo)((()=>a.createElement(r.Z,{width:80,flexDirection:"column",bg:"modalBg",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},[y.TD.SOLID,y.TD.DOTTED,y.TD.DASHED].map((t=>a.createElement(E,{key:t,clickHandle:()=>i(t),isActive:t===e,boxStyle:{borderBottomStyle:t,borderBottomWidth:"1px",borderBottomColor:t===e?"t.primary":"t.third"}}))))),[i])},A=({candlestickInstance:e,wrapRef:t})=>{const[{showColor:i,color:o,showWidth:l,lineWidth:E,showStyle:A,lineStyle:T,showTextColor:M,textColor:D,showFontSize:I,textFontSize:_,showTextBold:P,isTextBold:W,showTextEdit:R,isTextEdit:B,showBg:H,background:Z,isLock:O,showLock:N,showDelete:F},{updateValue:K}]=(0,m.O)({showColor:!0,color:"",showWidth:!0,lineWidth:1,showStyle:!0,lineStyle:y.TD.SOLID,showBg:!1,background:"",showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:10,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,isLock:!1,showLock:!1,showDelete:!1}),U=(0,a.useRef)({tx:0,ty:0}),$=(0,a.useRef)(),[{visible:z,annotation:X,cacheKey:G},{updateValue:Y}]=(0,m.O)({visible:!1,annotation:void 0,cacheKey:""}),j=(0,a.useCallback)((()=>{if(X){const e=X.getDefaultStyle();X.applyAttributes(e),K(X.getEditAttribute());const t=X.getCacheStyleKey();u.Z.updateCacheStyle(t,e)}else if(G){const e=g.Z[G]||{};K({...e,showTextEdit:!1}),u.Z.updateCacheStyle(G,e)}}),[G,X]),q=(0,a.useCallback)((e=>{if(K(e),X){X.applyAttributes(e);const t=X.getCacheStyleKey();u.Z.updateCacheStyle(t,e)}else G&&u.Z.updateCacheStyle(G,e)}),[G,X]),Q=(0,a.useCallback)(((t,i)=>e?.getI18n(t,i)||i),[e]),J=(0,a.useCallback)((()=>{X&&X.remove()}),[X]),ee=(0,a.useCallback)((e=>{const i=t.current;if(!i)return;const{left:r,top:o,width:n,height:s}=i.getBoundingClientRect();let{clientX:a,clientY:l}=e;const c=e=>{const{clientX:t,clientY:i}=e;let c=t-a,h=i-l;if($.current){const{left:e,top:t,width:i,height:a}=$.current.getBoundingClientRect(),[l,d]=[e-r,t-o];(l+c<=0&&c<=0||l+i+c>=n&&c>=0)&&(c=0),(d+h<=0&&h<=0||d+a+h>=s&&h>=0)&&(h=0),U.current.tx+=c,U.current.ty+=h,(0,x.AS)($.current,{transform:`translate(${U.current.tx}px, ${U.current.ty}px)`})}a=t,l=i},h=e=>{d(),e.stopPropagation()},d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h)};return document.addEventListener("mousemove",c),document.addEventListener("mouseup",h),e.stopPropagation(),()=>{d()}}),[t]);return(0,a.useEffect)((()=>{X?K(X.getEditAttribute()):G&&K(u.Z.getPreEditAttributes(G))}),[G,X]),(0,a.useEffect)((()=>{const t="AnnotationTool";if(e){const i=e.editor.getSelectAnnotation();Y(i?{annotation:i,visible:!0,cacheKey:i.getAttr("type")}:{annotation:void 0,visible:!1}),e.on("selectAnnotation",t,(({data:e,action:t})=>{Y({annotation:e,visible:!0,cacheKey:t})})),e.on("unSelectAnnotation",t,(()=>{Y({annotation:void 0,visible:!1})}))}return()=>{e?.editor.clearSelectAnnotation(),e?.off("selectAnnotation",t),e?.off("unSelectAnnotation",t)}}),[e]),(0,a.useMemo)((()=>a.createElement(n.Z,{ref:$,display:z?"flex":"none",bg:"modalBg",sx:{position:"absolute",height:"40px",right:0,top:0,zIndex:9999,alignItems:"center",borderColor:"line",borderWidth:"1px",borderStyle:"solid",userSelect:"none"}},a.createElement(r.Z,{dangerouslySetInnerHTML:{__html:d.Vn},px:"minor",onMouseDown:ee,sx:{...C,cursor:"grab"}}),a.createElement(h.Z,{tip:Q(p.Wi.ANNOTATION_DEFAULT,"Back to Default"),placement:"top",arrow:!0,sx:C},a.createElement(r.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:d.Du},px:"xs",onClick:()=>j()})),M&&a.createElement(L,{tip:Q(p.Wi.ANNOTATION_COLOR,"Color"),overlay:a.createElement(f.Z,{color:D,onChange:e=>q({textColor:e}),getI18n:Q})},a.createElement(r.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},a.createElement(r.Z,{dangerouslySetInnerHTML:{__html:d.VL}}),a.createElement(r.Z,{bg:w(D),height:"3px",width:18}))),i&&a.createElement(L,{tip:Q(p.Wi.ANNOTATION_COLOR,"Color"),overlay:a.createElement(f.Z,{color:o,onChange:e=>q({color:e}),getI18n:Q})},a.createElement(r.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},a.createElement(r.Z,{dangerouslySetInnerHTML:{__html:d.PE}}),a.createElement(r.Z,{bg:w(o),height:"3px",width:1}))),l&&a.createElement(L,{tip:Q(p.Wi.ANNOTATION_LINE_WIDTH,"Width"),overlay:a.createElement(k,{width:E,onWidthChange:q})},a.createElement(r.Z,{height:"100%",pl:"minor",justifyContent:"center",alignItems:"center"},a.createElement(r.Z,{height:E,sx:{width:"18px",background:"#76808F",borderRadius:"4px",bg:"t.third"}}),a.createElement(c,{size:17,color:"t.third"}))),A&&a.createElement(L,{tip:Q(p.Wi.ANNOTATION_LINE_STYLE,"Style"),overlay:a.createElement(V,{lineStyle:T,onStyleChange:q})},a.createElement(r.Z,{height:"100%",width:1,pl:"minor",justifyContent:"center",alignItems:"center",sx:{".annotation-tools-line-style":{height:"1px",borderBottomColor:"t.third",borderBottomWidth:"1px",borderBottomStyle:T},"&:hover .annotation-tools-line-style":{borderBottomColor:"t.primary"}}},a.createElement(r.Z,{className:"annotation-tools-line-style",width:"18px"}),a.createElement(c,{size:17,color:"t.third"}))),H&&a.createElement(L,{tip:Q(p.Wi.ANNOTATION_BACKGROUND,"Background Color"),overlay:a.createElement(f.Z,{color:Z,onChange:e=>q({background:e}),getI18n:Q})},a.createElement(r.Z,{height:"100%",px:"xs",flexDirection:"column",justifyContent:"center"},a.createElement(r.Z,{dangerouslySetInnerHTML:{__html:d.hD}}),a.createElement(r.Z,{bg:w(Z),height:"3px",width:1,mt:"minor"}))),I&&a.createElement(L,{tip:Q(p.Wi.ANNOTATION_FONT_SIZE,"Font Size"),overlay:a.createElement(r.Z,{flexDirection:"column",bg:"modalBg"},b.map((e=>a.createElement(S,{key:e,isActive:_===e,clickHandle:()=>{q({textFontSize:e})}},a.createElement(s.Z,null,e)))))},a.createElement(r.Z,{height:"100%",width:1,pl:"minor",justifyContent:"center",alignItems:"center"},a.createElement(s.Z,{fontSize:16},_),a.createElement(c,{size:17,color:"t.third"}))),P&&a.createElement(h.Z,{tip:Q(p.Wi.ANNOTATION_FONT_BOLD,"Bold"),placement:"top",arrow:!0,sx:C},a.createElement(r.Z,{height:"100%",justifyContent:"center",alignItems:"center",px:"xs",onClick:()=>q({isTextBold:!W})},a.createElement(s.Z,{fontSize:16,fontWeight:"bold",color:W?"primary":""},"B"))),R&&a.createElement(h.Z,{tip:Q(p.Wi.ANNOTATION_EDIT_TEXT,"Edit Text"),placement:"top",arrow:!0,sx:C},a.createElement(r.Z,{className:B?"active":"",height:"100%",justifyContent:"center",alignItems:"center",px:"xs",dangerouslySetInnerHTML:{__html:d.dS},onClick:()=>q({isTextEdit:!B})})),N&&a.createElement(v,{isLock:O,setLock:q,getI18n:Q}),F&&a.createElement(h.Z,{tip:Q(p.Wi.ANNOTATION_DELETE,"Delete"),placement:"top",arrow:!0,sx:C},a.createElement(r.Z,{height:"100%",justifyContent:"center",alignItems:"center",dangerouslySetInnerHTML:{__html:d.pJ},px:"xs",onClick:()=>J()})))),[z,o,E,T,D,Z,_,W,B,O,i,l,A,M,H,I,P,R,N,F,q,J,j,Q])}},21316:(e,t,i)=>{i.d(t,{Z:()=>y});var r=i(96832),o=i(72249),n=i(44713),s=i(86282),a=i(10600),l=i(10066);const c={"&::after":{content:'""',display:"inline-block",borderWidth:"1px",borderStyle:"solid",borderTopWidth:0,borderRightWidth:0,width:"10px",height:"4px",WebkitTransform:"rotate(-50deg)",position:"absolute",top:"5px",left:"3px"}},h=[["rgb(0,0,0)","rgb(66, 66, 66)","rgb(101, 101, 101)","rgb(152, 152, 152)","rgb(182, 182, 182)","rgb(203, 203, 203)","rgb(216, 216, 216)","rgb(238, 238, 238)","rgb(242, 242, 242)","rgb(255, 255, 255)"],["rgb(138, 26, 16)","rgb(246, 70, 93)","rgb(241, 156, 56)","rgb(255, 254, 85)","rgb(14, 203, 129)","rgb(116, 252, 253)","rgb(87, 134, 224)","rgb(0, 32, 245)","rgb(139, 43, 246)","rgb(234, 61, 247)"],["rgb(255, 120, 116)","rgb(255, 156, 110)","rgb(255, 192, 105)","rgb(255, 245, 102)","rgb(149, 222, 100)","rgb(93, 219, 211)","rgb(105, 192, 255)","rgb(133, 165, 255)","rgb(179, 127, 234)","rgb(255, 133, 192)","rgb(255, 77, 79)","rgb(255, 122, 68)","rgb(255, 169, 64)","rgb(255, 236, 60)","rgb(116, 209, 60)","rgb(54, 207, 201)","rgb(63, 169, 255)","rgb(89, 126, 247)","rgb(146, 84, 222)","rgb(247, 89, 170)","rgb(245, 33, 45)","rgb(249, 84, 28)","rgb(250, 140, 21)","rgb(250, 219, 21)","rgb(82, 196, 27)","rgb(18, 194, 193)","rgb(25, 144, 255)","rgb(28, 57, 195)","rgb(114, 46, 209)","rgb(235, 46, 149)","rgb(207, 20, 35)","rgb(212, 56, 13)","rgb(212, 107, 8)","rgb(212, 177, 7)","rgb(55, 158, 15)","rgb(10, 151, 155)","rgb(7, 109, 217)","rgb(23, 50, 177)","rgb(83, 29, 171)","rgb(196, 29, 127)","rgb(168, 7, 25)","rgb(173, 33, 1)","rgb(173, 78, 1)","rgb(173, 139, 1)","rgb(35, 120, 5)","rgb(0, 109, 116)","rgb(0, 80, 179)","rgb(16, 35, 158)","rgb(57, 16, 133)","rgb(158, 17, 104)"]],d=200,u=120,g=({r:e,g:t,b:i,a:n,color:s,onChange:a})=>r.createElement(o.Z,{key:s,width:16,height:16,bg:s,m:"2px",sx:{position:"relative",borderRadius:"2px",cursor:"pointer","&:hover":{transform:"scale(1.1)"},"&::after":{borderColor:(0,l.U2)((0,l.BG)(s))},...`rgb(${e}, ${t}, ${i})`===s?c:{}},onClick:()=>a({...(0,l.P7)(s),a:n})}),m=({r:e=0,g:t=0,b:i=0,a:s=1,onChange:a})=>(0,r.useMemo)((()=>r.createElement(r.Fragment,null,r.createElement(o.Z,{sx:{width:d,flexDirection:"column","& > *:not(:last-child)":{mb:"xs"}}},h.map(((n,l)=>r.createElement(o.Z,{key:l,sx:{flexWrap:"wrap"}},n.map((o=>r.createElement(g,{key:o,r:e,g:t,b:i,a:s,color:o,onChange:a}))))))),r.createElement(n.Z,{max:100,value:100*s,height:10,onChange:r=>a({r:e,g:t,b:i,a:+(.01*Math.round(r.target.value)).toFixed(2)}),sx:{background:`linear-gradient(to right, rgba(${e}, ${t}, ${i}, 0) 0%, rgb(${e}, ${t}, ${i}) 100%)`}}))),[e,t,i,s,a]),p=({r:e=0,g:t=0,b:i=0,a=1,onChange:c})=>{const h=(0,r.useRef)(),g=(0,r.useRef)(),[{h:m,s:p,v:y},x]=(0,r.useState)({h:0,s:0,v:0});(0,r.useEffect)((()=>{const r=(0,l.h8)(e,t,i);x(r)}),[e,t,i,a]);const f=(0,r.useCallback)(((e,{h:t,a:i})=>{const{clientX:r,clientY:o}=e,n=h.current,{x:s,y:a}=n.getBoundingClientRect(),g=r-s,m=o-a;c({...(0,l.rs)(t,Math.round(g/d*100),Math.round(100*(1-m/u))),a:i})}),[c]),C=(0,r.useCallback)(((e,{h:t,a:i})=>{const r=h.current,o=g.current,{x:n,y:s}=r.getBoundingClientRect(),{x:a,y:m}=o.getBoundingClientRect(),{clientX:p,clientY:y}=e,x=e=>{const{clientX:r,clientY:o}=e;let h=Math.max(0,Math.round(a-n+r-p)),g=Math.max(0,Math.round(m-s+o-y));h=Math.min(h,d),g=Math.min(g,u),c({...(0,l.rs)(t,Math.round(h/d*100),Math.round(100*(1-g/u))),a:i})},f=()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",f)};return document.addEventListener("mousemove",x),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",x),document.removeEventListener("mousemove",f)}}),[c]);return(0,r.useMemo)((()=>r.createElement(r.Fragment,null,r.createElement(o.Z,{width:d,flexWrap:"wrap",sx:{bg:`hsl(${m}, 100%, 50%)`}},r.createElement(o.Z,{width:1,height:120,sx:{background:"linear-gradient(to right, #fff, rgba(255,255,255,0))"},onClick:e=>f(e,{h:m,a})},r.createElement(s.Z,{ref:h,width:1,height:u,sx:{background:"linear-gradient(to top, #000, rgba(0,0,0,0))"}},r.createElement(s.Z,{ref:g,width:4,height:4,sx:{position:"absolute",borderRadius:"50%",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 1.5px,\n                    rgba(0, 0, 0, 0.3) 0px 0px 1px 1px inset,\n                    rgba(0, 0, 0, 0.4) 0px 0px 1px 2px",transform:`translate(${Math.min(p/100*d,199)}px, ${Math.min((1-y/100)*u,119)}px)`},onMouseDown:e=>C(e,{h:m,a})})))),r.createElement(n.Z,{max:360,value:m,height:10,onChange:e=>c({...(0,l.rs)(Math.round(e.target.value),p,y),a}),sx:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)",borderRadius:0,"&::-webkit-slider-thumb":{width:"4px",height:"8px",borderRadius:"1px",boxShdow:"rgba(0, 0, 0, 0.6) 0px 0px 2px",color:"#ffffff"},"&:focus":{color:"#ffffff"}}}),r.createElement(n.Z,{max:100,value:100*a,height:10,onChange:e=>c({...(0,l.rs)(m,p,y),a:+(.01*Math.round(e.target.value)).toFixed(2)}),sx:{mt:0,background:`linear-gradient(to right, ${(0,l.h7)(m,p,y,0)} 0%, ${(0,l.h7)(m,p,y,1)} 100%)`,borderRadius:0,"&::-webkit-slider-thumb":{width:"4px",height:"8px",borderRadius:"1px",boxShdow:"rgba(0, 0, 0, 0.6) 0px 0px 2px",color:"#ffffff"},"&:focus":{color:"#ffffff"}}}))),[m,p,y,a,c])},y=({color:e="",onChange:t=(e=>!1),getI18n:i})=>{const[n,s]=(0,r.useState)(),[c,h]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const{r:t,g:i,b:r,a:o}=(0,l.P7)(e);s({r:t,g:i,b:r,a:o})}),[e]);const d=(0,r.useCallback)((({r:e,g:i,b:r,a:o})=>{t(`rgba(${e}, ${i}, ${r}, ${o})`)}),[t]),u=(0,r.useMemo)((()=>i("color-picker-custom","Custom")),[i]),g=(0,r.useMemo)((()=>i("color-picker-default","Default")),[i]);return(0,r.useMemo)((()=>r.createElement(o.Z,{onClick:e=>e.stopPropagation(),sx:{p:"minor",bg:"modalBg",flexDirection:"column",boxShadow:"rgba(0, 0, 0, 0.2) 0px 0px 4px"}},r.createElement(o.Z,{flexWrap:"wrap",flexDirection:"column"},c?r.createElement(p,{...n,onChange:d}):r.createElement(m,{...n,onChange:d})),r.createElement(a.Z,{px:"xs",variant:"default",onClick:()=>h(!c)},c?u:g))),[n,c,d])}},2479:(e,t,i)=>{i.d(t,{Z:()=>w});var r=i(72249),o=i(86282),n=i(77991),s=i(96832),a=i(415);const l=e=>s.createElement(a.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},s.createElement("path",{d:"M8 17.586A1 1 0 009.414 19L16 12.414A1 1 0 0016 11L9.414 4.414A1 1 0 108 5.828l5.879 5.879L8 17.586z"}));var c,h=i(81913),d=i(39359),u=i(43559),g=i(36825),m=i(9704);!function(e){e[e.MENU_CURSOR=0]="MENU_CURSOR",e[e.MENU_TOOLS=1]="MENU_TOOLS",e[e.MENU_CONTROL=2]="MENU_CONTROL",e[e.MENU_HANDLER=3]="MENU_HANDLER",e[e.MENU_TOOLS_LINE=4]="MENU_TOOLS_LINE",e[e.MENU_TOOLS_TRACK=5]="MENU_TOOLS_TRACK",e[e.MENU_TOOLS_ARROW=6]="MENU_TOOLS_ARROW",e[e.MENU_TOOLS_TEXT=7]="MENU_TOOLS_TEXT"}(c||(c={}));const p=[{key:c.MENU_CURSOR,children:[{key:m.Us.DefaultCursor,icon:d.cY,i18nKey:g.Wi.DRAW_DEFAULT_CURSOR,i18n:"Cursor"},{key:m.Us.CrossHairCursor,icon:d.cW,i18nKey:g.Wi.DRAW_CROSS_CURSOR,i18n:"Cross Cursor"}]},{key:c.MENU_TOOLS,children:[{key:c.MENU_TOOLS_LINE,activeKey:m.Us.TrendLine,children:[{key:m.Us.TrendLine,icon:d.T3,i18nKey:g.Wi.DRAW_TREND_LINE,i18n:"Trend Line"},{key:m.Us.ExtendTrendLine,icon:d.zM,i18nKey:g.Wi.DRAW_EX_TREND_LINE,i18n:"Extended Trend Line"},{key:m.Us.HorizontalLine,icon:d.F4,i18nKey:g.Wi.DRAW_HORIZONTAL_LINE,i18n:"Horizontal Line"},{key:m.Us.VerticalLine,icon:d.Cf,i18nKey:g.Wi.DRAW_VERTICAL_LINE,i18n:"Vertical Line"},{key:m.Us.CrossLine,icon:d.uO,i18nKey:g.Wi.DRAW_CROSS_LINE,i18n:"Crose Line"},{key:m.Us.ParallelLine,icon:d.UC,i18nKey:g.Wi.DRAW_PARRLLEL_LINE,i18n:"Parallel Line"},{key:m.Us.RayLine,icon:d.ln,i18nKey:g.Wi.DRAW_RAY_LINE,i18n:"Ray"},{key:m.Us.PriceLine,icon:d.Qq,i18nKey:g.Wi.DRAW_PRICE_LINE,i18n:"Price Line"},{key:m.Us.ArrowLine,icon:d.gg,i18nKey:g.Wi.DRAW_ARROW_LINE,i18n:"Arrow Line"},{key:m.Us.InfoLine,icon:d.nj,i18nKey:g.Wi.DRAW_INFO_LINE,i18n:"Info Line"}]},{key:c.MENU_TOOLS_ARROW,activeKey:m.Us.RightArrow,children:[{key:m.Us.UpArrow,icon:d.Ms,i18nKey:g.Wi.DRAW_UP_ARROW,i18n:"Up Arrow"},{key:m.Us.DownArrow,icon:d.G6,i18nKey:g.Wi.DRAW_DOWN_ARROW,i18n:"Down Arrow"},{key:m.Us.LeftArrow,icon:d.qg,i18nKey:g.Wi.DRAW_LEFT_ARROW,i18n:"Left Arrow"},{key:m.Us.RightArrow,icon:d.AD,i18nKey:g.Wi.DRAW_RIGHT_ARROW,i18n:"Right Arrow"}]},{key:m.Us.FibonacciLine,icon:d.k0,i18nKey:g.Wi.DRAW_FIB_LINE,i18n:"Fibonacci Retracement"},{key:m.Us.Rectangle,icon:d.OW,i18nKey:g.Wi.DRAW_RECTANGLE,i18n:"Rectangle"},{key:m.Us.Text,icon:d.VL,i18nKey:g.Wi.DRAW_TEXT,i18n:"Text"}]},{key:c.MENU_CONTROL,children:[{key:m.Us.KeepDrawing,icon:d.Ld,i18nKey:g.Wi.DRAW_CONTINUE,i18n:"Keep Drawing",multiSelect:!0},{key:m.Us.LockDraw,icon:e=>e?d.mB:d.ML,i18nKey:g.Wi.DRAW_LOCK,i18n:"Lock Drawing Tools",multiSelect:!0},{key:m.Us.ToggleVisible,icon:e=>e?d.Pl:d._f,i18nKey:g.Wi.DRAW_TOGGLE,i18n:"Hide All Drawings",multiSelect:!0}]},{key:c.MENU_HANDLER,children:[{key:m.Us.Delete,icon:d.pJ,i18nKey:g.Wi.DRAW_DELETE_ALL,i18n:"Delete All"}]}],y=(e,t=!0)=>"string"==typeof e?e:e(t),x={position:"relative",height:"100%",width:"48px",zIndex:1,transition:"width 0.2s","&.hidden":{width:"2px","& .kline-draw-menu-container, & .kline-draw-panel_down":{visibility:"hidden"},"& .kline-draw-panel_hidden::after":{transform:"rotate(135deg) translateY(100%)",transition:"transform .11666667s cubic-bezier(.215,.61,.355,1)"}},"& .kline-draw-panel_hidden:hover":{bg:"t.yellow",color:"#1E2026"}},f={bg:"inputBg",position:"absolute",left:0,bottom:0,width:"100%",height:"16px",zIndex:1,cursor:"pointer",visibility:"visible",transition:"transform .11666667s cubic-bezier(.215,.61,.355,1)","&::after":{content:'""',position:"absolute",left:"50%",top:"50%",width:"4px",height:"4px",borderWidth:"0 2px 2px 0",borderStyle:"solid",transformOrigin:"center",transform:"rotate(45deg) translateX(-100%)",borderColor:"t.third"},"&:hover::after":{borderColor:"#F0B90B"},"&.up":{top:0,transform:"rotate(180deg)"},"&.up.hidden":{transform:"rotate(180deg) translateY(100%)"},"&.hidden":{transform:"translateY(100%)",visibility:"hidden",display:"none"}},C={position:"absolute",bottom:"65px",left:"100%",width:"12px",height:"32px",borderRadius:"4px",bg:"bg1",borderColor:"line",borderWidth:"1px",borderStyle:"solid",color:"t.third","&::after":{content:'""',position:"absolute",left:"50%",top:"50%",width:"3px",height:"3px",borderWidth:"1px 0 0 1px",borderStyle:"solid",transformOrigin:"center",transform:"rotate(-45deg) translateY(-50%)"}},b=s.memo((({icon:e,i18n:t,isActive:i,wrapRef:o,handleClick:n,action:a,groupKey:l,...c})=>{const d=(0,s.useCallback)((e=>{n(a,l),e.nativeEvent.stopImmediatePropagation()}),[a,l,n]);return s.createElement(h.Z,{container:o,tip:t,placement:"right",arrow:!0,scroll:!1,resize:!1,width:1,sx:{"&":{display:"flex",justifyContent:"center"}},...c},s.createElement(r.Z,{height:40,onClick:e=>d(e),flexDirection:"column",justifyContent:"center",sx:{cursor:"pointer","& > svg > *":{fill:i?"primary":"t.third"}},dangerouslySetInnerHTML:{__html:e}}))})),w=(0,s.memo)((({candlestickInstance:e,wrapRef:t})=>{const[i,a]=(0,s.useState)(!0),[h,d]=(0,s.useState)(!1),[g,w]=(0,s.useState)(!1),[v,L]=(0,s.useState)(""),S=(0,s.useRef)(),E=(0,s.useRef)(m.Us.CrossHairCursor),[k,{updateValue:V,toggleValue:A,getValue:T}]=(0,u.O)({onlyKey:m.Us.CrossHairCursor}),M=(0,s.useCallback)(((e=!0)=>{const t=S.current;if(t){const{scrollTop:i,scrollHeight:r}=t,o=e?Math.min(i+60,r):Math.max(i-60,0);t.scrollTop=o}}),[]),D=function(e,t){const i=(0,s.useRef)(0);return(0,s.useCallback)((()=>{const e=Date.now();e-i.current>10&&((()=>{const e=S.current,{lastElementChild:t}=e||{};if(e&&t){const{scrollTop:i,offsetHeight:r}=e,{offsetHeight:o,offsetTop:n}=t;d(i>0),w(i<n-r+o)}})(),i.current=e)}),[])}(),I=(0,s.useCallback)(((t,i)=>{if(i===c.MENU_CURSOR&&(E.current=t),e){const r=e.getEditor();switch(i){case c.MENU_CURSOR:!!T(m.Us.ToggleVisible)&&e.toggleAnnotationsVisible(),V({onlyKey:t,[m.Us.ToggleVisible]:!1}),e.fire("unSelectAnnotation"),r.reset();break;case c.MENU_TOOLS:T(m.Us.ToggleVisible)&&e.toggleAnnotationsVisible(),!!T(m.Us.LockDraw)&&e.setAnnotationLockStatus(!1),V({onlyKey:t,[m.Us.ToggleVisible]:!1,[m.Us.LockDraw]:!1}),r.setCompleteDrawCallback((()=>{T(m.Us.KeepDrawing)||(V({onlyKey:E.current}),e.executeActionByType(E.current))})),e.selectAnnotation(void 0,t);break;case c.MENU_CONTROL:A(t),t===m.Us.ToggleVisible&&(V({onlyKey:E.current}),e.executeActionByType(E.current));break;case c.MENU_HANDLER:r.setCompleteDrawCallback((()=>{T(m.Us.KeepDrawing)||(V({onlyKey:E.current}),e.executeActionByType(E.current))}))}e.executeActionByType(t)}}),[e]),_=(0,s.useCallback)(((e,t,i,r)=>{t.activeKey=i,I(i,r),e.nativeEvent.stopImmediatePropagation()}),[I]),P=(0,s.useCallback)(((t,i)=>e?.getI18n(t,i)||i),[e]);return(0,s.useEffect)((()=>{D()}),[D]),(0,s.useEffect)((()=>()=>{const t=e?.getEditor();t?.clearEvents(),V({onlyKey:E.current}),e?.executeActionByType(E.current)}),[e]),s.createElement(r.Z,{className:"kline-draw-panel "+(i?"hidden":"visible"),justifyContent:"center",sx:x},s.createElement(r.Z,{className:"kline-draw-panel_down up "+(h?"":"hidden"),onClick:()=>M(!1),sx:f}),s.createElement(o.Z,{ref:S,sx:{bg:"modalBg"},className:"kline-draw-menu-container",flexDirection:"column",onScroll:()=>D()},p.map((({key:e,children:i},a)=>s.createElement(s.Fragment,{key:e},a>0&&s.createElement(r.Z,{my:"minor",height:1,bg:"line"}),s.createElement(r.Z,{flexDirection:"column"},i.map((i=>{const{children:a,activeKey:c,key:h}=i;if(a){const d=a,u=d.find((({key:e})=>e===c));return s.createElement(r.Z,{alignItems:"center",key:h,justifyContent:"center"},u&&s.createElement(b,{wrapRef:t,icon:y(u.icon,u.key===k.onlyKey),action:u.key,i18n:P(u.i18nKey,u.i18n),isActive:u.key===k.onlyKey,groupKey:e,handleClick:I}),s.createElement(n.ZP,{trigger:"click",placement:"right-start",enablePortal:!0,sx:{position:"absolute",right:0},overlayProps:{className:"kline-draw-menu-dropdown",bg:"popupBg",ml:"minor",maxHeight:"384px",overflowY:"scroll",sx:{boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.2)"}},onVisibleChange:e=>{L(e?h:"")},overlay:d.map((({key:t,icon:o,i18n:n,i18nKey:a})=>s.createElement(r.Z,{className:"draw-tool-item "+(k.onlyKey===t?"active":""),height:48,fontSize:1,pl:"xs",pr:"plus",onClick:r=>_(r,i,t,e),justifyContent:"start",alignItems:"center",key:t,sx:{color:"t.third","&.draw-tool-item.active, &:hover":{bg:"line",color:"t.primary"},"&.draw-tool-item.active svg>path, &:hover svg>path":{fill:"t.primary"}}},s.createElement(r.Z,{dangerouslySetInnerHTML:{__html:y(o)}}),s.createElement(r.Z,{ml:"xs"},P(a,n)))))},s.createElement(o.Z,{sx:{lineHeight:"30px",borderRadius:"2px 0 0 2px","&:hover":{bg:"line"},cursor:"pointer"}},s.createElement(l,{size:12,color:"t.third",sx:{transform:v===h?"rotate(180deg)":"rotate(0)",transition:"transform 0.3s ease 0s"}}))))}const{key:d,i18nKey:u,i18n:g,icon:m,multiSelect:p}=i,x=p?!!k[d]:d===k.onlyKey;return s.createElement(b,{wrapRef:t,icon:y(m,x),action:d,i18n:P(u,g),isActive:x,handleClick:I,key:d,groupKey:e})}))))))),s.createElement(r.Z,{className:"kline-draw-panel_down "+(g?"":"hidden"),onClick:()=>M(),sx:f}),s.createElement(r.Z,{className:"kline-draw-panel_hidden pointer",onClick:()=>a(!i),sx:C}))}))},44458:(e,t,i)=>{i.d(t,{e:()=>x,Z:()=>C});var r=i(85466),o=i.n(r),n=i(36825),s=i(9704),a=i(10066),l=i(83787),c=i(83549),h=i(34162),d=i(98218);class u extends c.Z{constructor(e={}){super(),this.config={...c.Z.defaultConfig,width:0,height:0,radius:0,stroke:!0,fill:!1,useCache:!0},this.setAttrs(e),this.watch(["lineWidth","strokeStyle","fillStyle","radius","fill","stroke","useCache"],this.onDataChange.bind(this))}onDataChange(){this.isBatchUpdate=!0}getTransformOrigin(){const{data:{x:e,y:t},radius:i,lineWidth:r}=this.getConfig();return{x:e-i-r,y:t-i-r}}getContextStyles(){const{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:o}=this.getConfig();return{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:o}}setRadius(e){return this.setAttr("radius",e),this}drawCacheScene(){if(!this.isBatchUpdate)return;const{radius:e,stroke:t,fill:i,lineWidth:r}=this.getConfig();if(e<=0)return;const n=this.getContext(),s={width:2*e+2*r,height:2*e+2*r},l=this.overrideSize(s);l&&this.setAttrs(s);const c=this.getContextStyles();let d=!o()(c,this.preContextStyles);d&&(this.preContextStyles=c),(d||l)&&(n.beginPath(),h.Z.clearRect(n),(0,a.ui)(n,c),h.Z.drawCircle(n,e+r,e+r,e),i&&n.fill(),t&&n.stroke()),this.isBatchUpdate=!1}drawScene(e){const{data:{x:t,y:i},radius:r,stroke:o,fill:n}=this.getConfig();r<=0||((0,a.ui)(e,this.getContextStyles()),e.beginPath(),h.Z.drawCircle(e,t,i,r),n&&e.fill(),o&&e.stroke())}isHover(e,t=5){if(!this.preDetect())return!1;const i=this.getAttr("data"),r=this.getAttr("radius");return d.Z.Algorith.getSquareDistance(e,i)<=(r+t)**2}}var g=i(62554),m=i(82668),p=i(61111),y=i(24997);const x={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:s.E.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:s.E.Blue3,default_border_color:"#9013FE"};class f extends l.Z{static getCacheStyle(e,t){return(this.cacheStyle[e]||{})[t]}static updateCacheStyle(e,t){const i=this.cacheStyle[e]||{};this.cacheStyle[e]={...i,...t}}static getPreEditAttributes(e){return{...this.cacheStyle[e]||{},showTextEdit:!1,showLock:!1,showDelete:!1}}get parent(){return this._parent}constructor(){super(),this.id=(0,a.M8)(),this.shapeWeakMap=new WeakMap,this._lastTick=0,this._currentTick=1,this._isWating=!1,this.syncStorage=(0,a.Ds)((()=>{const e=this.getParent();e&&e.save()}),100),this.initEvents()}isLock(){return this.getAttr("isLock")}getParent(){return this._parent}setParent(e){return this._parent=e,this}setData(e){return this.setAttr("data",e),this}getData(){return this.getAttr("data")}isIndependent(){return!1}initWeakMap(){this.getShapes().forEach((e=>{this.shapeWeakMap.set(e,null)}))}initEvents(){this.watch(["isHover","isEdit"],(()=>{this.getAttr("isComplete")&&(this.setVisibleShapes(),this.update())})),this.watch("isComplete",(({newVal:e})=>{e&&this.update()})),this.watch(["data","color","lineWidth","lineStyle","background","isLock"],(({oldVal:e,newVal:t})=>{!o()(e,t)&&this.isValid()&&this.syncStorage()})),this.on("mousedown",n.HD.MOUSE_DOWN,this.delectShapeEdit.bind(this)),this.on("mousemove",n.HD.MOUSE_MOVE,this.delectShapeMousemove.bind(this)),this.watch("color",this.watchStyleHook.bind(this,"color")),this.watch("lineWidth",this.watchStyleHook.bind(this,"lineWidth")),this.watch("lineStyle",this.watchStyleHook.bind(this,"lineStyle")),this.watch("background",this.watchStyleHook.bind(this,"background")),this.watch("textColor",this.watchStyleHook.bind(this,"textColor")),this.watch("textFontSize",this.watchStyleHook.bind(this,"textFontSize")),this.watch("isTextBold",this.watchStyleHook.bind(this,"isTextBold")),this.initCustomEvents()}addWidgetShapes(e,t){const i=this._addWidgetShape.bind(this,e);t.forEach(i)}setAnnotationToWidgets(e){e.forEach((e=>{e.addAnnotation(this)}))}startDraw(){this.setAttr("isComplete",!1)}compeleDraw(){setTimeout((()=>{this.setAttr("isComplete",!0)}))}isValid(){return!!this.getData()}transformYPoint(e){return{x:e.x,y:-e.y}}remove(e=!0){this.destroy(),this.syncStorage(),e&&this._parent&&(this.update(),this._parent.getParent().unSelectAnnotation())}destroy(){const e=this.getShapes();for(let t=0;t<e.length;++t){const i=e[t],r=this.shapeWeakMap.get(i);r&&(r.removeShape(i),r.removeAnnotation(this),this.shapeWeakMap.delete(i))}this.afterDestroy()}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t,axisPane:i,timeAxisPane:r}=e;return[t,i,r]}render(){this.getRenderPanes().forEach((e=>{e.update(s.mB.Marks)}))}update(){const e=this.getParent();!this._isWating&&e&&(this._isWating=!0,requestAnimationFrame((()=>{this.render(),this._isWating=!1})))}updateData(){this.updateTick(this.updateImmediate)}updateTick(e){if(this._lastTick!==this._currentTick){const t=this._currentTick;this._currentTick=this._lastTick,"function"==typeof e&&e.call(this),Promise.resolve().then((()=>{this._lastTick=t}))}}delectShapeEdit(e){if(this._parent){const t=this._parent.getParent(),{mainPane:i}=this._parent,r=this.getAttr("isComplete"),o=this.getAttr("isNeedStore");if(r&&o){const{x:r,y:o}=i.transformPointToView(e.point);this.isHover({x:r,y:-o})&&!e.isDealed?(this.setAttr("isEdit",!0),t.selectAnnotation(this,this.getAttr("type"))):(t.unSelectAnnotation(),this.setAttr("isEdit",!1))}}}delectShapeMousemove(e){if(this._parent){const{mainPane:t}=this._parent,{x:i,y:r}=t.transformPointToView(e.point);this.isHover({x:i,y:-r})?(this._parent.updateCursorStyle(!0),!e.isDealed&&this.setAttr("isHover",!0),e.isDealed=!0):(this._parent.updateCursorStyle(!1),this.setAttr("isHover",!1))}}contain(){return!!this.getParent()}updateVertexBorderAndVisible(e,t){const i={isVisible:!t,strokeStyle:t?x.hover_border_color:x.border_color};this.updateVertex(e,i)}updateVertex(e,t){Array.isArray(e)?e.forEach((e=>{e.setAttrs(t)})):e.setAttrs(t)}recoverDragVertexts(){const e={isVisible:!0,strokeStyle:x.border_color,radius:x.radius};this.updateVertex(this.getVertexs(),e)}getNoDragVertexs(e){const t=this.getVertexs(),i=t.indexOf(e);return t.splice(i,1),t}updateHighlightVertexBorderWidth(e,t){const i=e.getAttr("lineWidth"),r=this.getAttr("isEdit"),o=t?x.highlight_border_width:r?x.border_width:x.hover_border_width;return e.setAttr("lineWidth",o),i!==o}initCustomEvents(){}getEditAttribute(){const{color:e,lineWidth:t,lineStyle:i,background:r,isLock:o,textColor:n,textFontSize:s,isTextBold:a,isTextEdit:l}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!1,background:r,isLock:o,showTextColor:!1,textColor:n,showFontSize:!1,textFontSize:s,showTextBold:!1,isTextBold:a,showTextEdit:!1,isTextEdit:l,showLock:!0,showDelete:!0}}applyAttributes(e){this.setAttrs(e)}getDescription(){const{data:e,type:t,color:i,background:r,lineWidth:o,lineStyle:n,isLock:s}=this.getConfig();return{data:e,type:t,color:i,background:r,lineWidth:o,lineStyle:n,isLock:s}}getCacheStyleKey(){return this.getAttr("type")}isDisableDrag(){const e=this.getParent(),t=e?.getParent();return!this.getAttr("isComplete")||t.getAttr("annotationLock")||this.isLock()}getDefaultStyle(){const e=this.getCacheStyleKey();return y.Z[e]}refreshDefaultStyle(){const e=this.getDefaultStyle();this.applyAttributes(e)}watchStyleHook(e){switch(e){case"color":{const e=this.getAttr("color");this.updateColor(e);break}case"lineWidth":{const e=this.getAttr("lineWidth");this.updateLineWidth(e);break}case"lineStyle":{const e=this.getAttr("lineStyle"),t={[s.TD.SOLID]:[],[s.TD.DOTTED]:[2,2],[s.TD.DASHED]:[4,3]};this.updateLineStyle(t[e]);break}case"background":{const e=this.getAttr("background");this.updateBackground(e);break}case"textColor":{const e=this.getAttr("textColor");this.updateTextColor(e);break}case"textFontSize":{const e=this.getAttr("textFontSize");this.updateTextSize(e);break}case"isTextBold":{const e=this.getAttr("isTextBold");this.updateTextBold(e?s.HS.BOLD:s.HS.NORMAL);break}}this.update()}updateColor(e){}updateLineWidth(e){}updateLineStyle(e){}updateBackground(e){}updateTextColor(e){}updateTextSize(e){}updateTextBold(e){}afterDestroy(){}_addWidgetShape(e,t){this.shapeWeakMap.get(t)!==e&&(this.shapeWeakMap.set(t,e),e.addShape(t))}}f.dragVertex=new u({data:{x:0,y:0},radius:x.radius,strokeStyle:x.border_color,fillStyle:x.fill_color,fill:!0,lineWidth:x.border_width}),f.dragRect=new g.Z({data:{x:0,y:0},width:12,height:12,borderRadius:2,strokeStyle:x.border_color,fillStyle:x.fill_color,lineWidth:x.border_width,useCache:!0}),f.line=new m.Z({strokeStyle:x.default_line_color,lineWidth:1}),f.text=new p.Z({content:"",fillStyle:x.default_line_color,fontSize:12}),f.defaultConfig={...l.Z.defaultConfig,type:s.Us.Arrow,data:null,isHover:!1,isEdit:!0,isComplete:!1,isLock:!1,color:"",lineWidth:1,lineStyle:s.TD.SOLID,background:"",textColor:"#848E9C",textFontSize:16,isTextBold:!1,isTextEdit:!1,isNeedStore:!0},f.cacheStyle={...y.Z};const C=f},24997:(e,t,i)=>{i.d(t,{Z:()=>n,e:()=>o});var r=i(9704);const o={radius:6,hover_border_width:1,border_width:2,highlight_border_width:4,border_color:r.E.Blue3,fill_color:"#ffffff",hover_border_color:"#EA3CF7",text_color:"#ffffff",default_line_color:r.E.Blue3,default_area_color:"rgba(50, 141, 253, 0.2)",default_border_color:"#9013FE",default_text_color:"#848E9C"},n={[r.Us.TrendLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.ExtendTrendLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.ArrowLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.InfoLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.RayLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.LeftArrow]:{color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.RightArrow]:{color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.UpArrow]:{color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.DownArrow]:{color:o.default_line_color,isLock:!1,showColor:!0,showBg:!1,showWidth:!1,showStyle:!1,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.FibonacciLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,background:"",isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.ParallelLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,background:o.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.PriceLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.Rectangle]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,background:o.default_area_color,isLock:!1,showColor:!0,showBg:!0,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.StraightLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.HorizontalLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.VerticalLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.CrossLine]:{color:o.default_line_color,lineWidth:1,lineStyle:r.TD.SOLID,isLock:!1,showColor:!0,showBg:!1,showWidth:!0,showStyle:!0,showFontSize:!1,showTextColor:!1,showTextBold:!1,showTextEdit:!1,showLock:!1,showDelete:!1},[r.Us.Text]:{textColor:o.default_text_color,background:"rgba(0, 0, 0, 0)",textFontSize:16,isTextBold:!1,isTextEdit:!1,isLock:!1,showColor:!1,showBg:!0,showWidth:!1,showStyle:!1,showFontSize:!0,showTextColor:!0,showTextBold:!0,showTextEdit:!0,showLock:!1,showDelete:!1}}},83787:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(10066);class o{constructor(){this.eventListeners={},this.attrListeners={},this.watchMap=new Map}get devicePixelRatio(){return(0,r.x_)()}getConfig(){return this.config}setAttrs(e){return Object.keys(e||{}).forEach((t=>{this.setAttr(t,e[t])})),this}getAttr(e){return this.config[e]}setAttr(e,t){const i=this.config[e];return i===t||(void 0===t?delete this.config[e]:this.config[e]=t,this._fireChangeEvent(e,i,t)),this}on(e,t,i,r){const o="string"==typeof t?t:"",n="function"==typeof i?i:t,s="boolean"==typeof r?r:i;if("function"!=typeof n)throw new Error("Must provide event handler");let a=this.eventListeners[e];return a||(this.eventListeners[e]=a=[]),a.some((e=>e.name===o&&e.handler===n))||(s?a.unshift({name:o,handler:n}):a.push({name:o,handler:n})),this}once(e,t,i){const r="string"==typeof t?t:"",o="function"==typeof i?i:t;if("function"!=typeof o)throw new Error("Must provide event handler");const n=t=>{o.call(this,t),this.off(e,r,n)};this.on(e,r,n)}off(e,t,i){e||Object.keys(this.eventListeners||{}).forEach((e=>{this._off(e)}));const r=e,o="string"==typeof t?t:"";"function"==typeof t&&(i=t),this.eventListeners[r]?this._off(r,o,i):Object.keys(this.eventListeners||{}).forEach((e=>{this._off(e,r,i)}))}fire(e,t={}){t.target=t.target||this,this._fire(e,t)}watch(e,t,i=!1){Array.isArray(e)?e.forEach((e=>this._registerListener(e,t,i))):this._registerListener(e,t,i)}unwatch(e,t){Array.isArray(e)?e.forEach((e=>this._unwatch(e,t))):this._unwatch(e,t)}hasWathedProperty(e){return this.watchMap.has(e)}watchProperty(e,t){if(this.watchMap.has(e)){const i=this.watchMap.get(e);i.includes(t)||i.push(t)}else this.watchMap.set(e,[t])}setWatchProperty(e,t,i,o={}){let n=e[t]!==i;n&&(e[t]=i);const s=this.watchMap.get(t);s&&s.forEach((e=>{n&&(e.textContent=i),(0,r.AS)(e,o)}))}_off(e,t,i){const r=this.eventListeners[e];if(r){const o=r.slice(0);for(let e=o.length-1;e>=0;e--){const r=o[e],{name:n,handler:s}=r;t&&n!==t||i&&i!==s||o.splice(e,1)}o.length>0?this.eventListeners[e]=o:delete this.eventListeners[e]}}_fireChangeEvent(e,t,i){let r=this.attrListeners[e];r&&r.forEach((e=>{e.handler({oldVal:t,newVal:i})}))}_fire(e,t={}){const i=this.eventListeners[e];i&&(t.currentTarget=this,t.type=e,i.forEach((e=>{e.handler.call(this,t)})))}_registerListener(e,t,i=!1){let r=this.attrListeners[e];r||(this.attrListeners[e]=r=[]),r.some((e=>t&&e.handler===t))||r.push({handler:t}),i&&t.call(this,{oldVal:this.getAttr(e),newVal:this.getAttr(e)})}_unwatch(e,t){let i=this.attrListeners[e];if(i){const r=i.filter((e=>t&&e.handler!==t));r.length>0?this.attrListeners[e]=r:delete this.attrListeners[e]}}}o.defaultConfig={devicePixelRatio:(0,r.x_)(),isMobile:(0,r.tq)(),isMouseover:!1,isMousedown:!1};const n=o},82668:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(85466),o=i.n(r),n=i(83549),s=i(34162),a=i(10066),l=i(98218);class c extends n.Z{constructor(e={}){super(),this.config={...n.Z.defaultConfig,width:0,height:0},this.setAttrs(e),this.watch(["lineWidth","strokeStyle"],this.onCacheChange.bind(this))}beforeDrawHook(){if(this.isDataUpdate){const{p1:e,p2:t}=this.getAttr("data");this.setAttrs({width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}),this.isDataUpdate=!1}}getTransformOrigin(){const{p1:e,p2:t}=this.getAttr("data");return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y)}}getContextStyles(){const{strokeStyle:e,lineWidth:t,lineDash:i}=this.getConfig();return{strokeStyle:e,lineWidth:t,lineDash:i}}drawCacheScene(){if(!this.isBatchUpdate)return;const{lineDash:e,data:t}=this.getConfig(),{p1:i,p2:r}=t,n=this.getContext(),l=Math.max(Math.abs(i.x-r.x),1),c=Math.max(Math.abs(i.y-r.y),1),h=this.overrideSize({width:l,height:c});h&&this.setAttrs({width:l,height:c});const d=this.getContextStyles();let u=!o()(d,this.preContextStyles);if(u&&(this.preContextStyles=d,(0,a.ui)(n,d)),e&&n.setLineDash(e),u||h){s.Z.clearRect(n);const{x:e,y:t}=this.getTransformOrigin();s.Z.drawLine(n,i.x-e,i.y-t,r.x-e,r.y-t),n.stroke()}this.isBatchUpdate=!1}drawScene(e){const{lineDash:t,data:i}=this.getConfig();(0,a.ui)(e,this.getContextStyles()),t&&e.setLineDash(t);const{p1:r,p2:o}=i;e.beginPath(),s.Z.drawLine(e,r.x,r.y,o.x,o.y),e.stroke()}isHover(e,t=5){if(!this.preDetect())return!1;const{p1:i,p2:r}=this.getAttr("data");return l.Z.Line.isPointAtSegment(e,i,r,t)}}},62554:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(83549),o=i(34162),n=i(10066),s=i(98218);class a extends r.Z{constructor(e={}){super(),this.config={...r.Z.defaultConfig,width:0,height:0,borderRadius:0,stroke:!0,fill:!0,globalAlpha:1,useCache:!1},this.setAttrs(e),this.watch(["width","height","lineWidth","strokeStyle","fillStyle","fill","stroke","useCache","borderRadius"],this.onCacheChange.bind(this)),this.watch(["width","height","lineWidth"],this._onSizeChange.bind(this))}onDataChange(){this.isDataUpdate=!0}getTransformOrigin(){const{x:e,y:t}=this.getAttr("data");return{x:e,y:t}}getContextStyles(){const{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:o,globalAlpha:n,borderRadius:s}=this.getConfig();return{strokeStyle:e,lineWidth:t,fillStyle:i,stroke:r,fill:o,globalAlpha:n,borderRadius:s}}getWidth(){const{width:e}=this.getConfig();return e}getHeight(){const{height:e}=this.getConfig();return e}setAnnotherVertex(e){const{x:t,y:i}=this.getAttr("data"),r=Math.min(t,e.x),o=Math.min(i,e.y),n=Math.abs(t-e.x),s=Math.abs(i-e.y);return this.setAttrs({data:{x:r,y:o},width:n,height:s}),this}drawCacheScene(){if(!this.isBatchUpdate)return;const{stroke:e,fill:t,width:i,height:r,borderRadius:s,lineWidth:a,lineDash:l}=this.getConfig();if(i<=0||r<=0)return;const c=this.getContext(),h=this.getContextStyles();this.preContextStyles=h,(0,n.ui)(c,h),l&&c.setLineDash(l),o.Z.clearRect(c),this._hasBorderRadius(s)?(this._drawRoundRect(c,a,a,i,r,s),t&&c.fill(),e&&((0,n.ui)(c,{globalAlpha:1}),c.stroke())):(t&&o.Z.fillRect(c,0,0,i,r),e&&((0,n.ui)(c,{globalAlpha:1}),o.Z.strokeRect(c,.5*a,.5*a,i-a,r-a))),this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){const{data:{x:t,y:i},width:r,height:s,stroke:a,fill:l,borderRadius:c,lineDash:h,lineWidth:d}=this.getConfig();r<=0||s<=0||((0,n.ui)(e,this.getContextStyles()),h&&e.setLineDash(h),this._hasBorderRadius(c)?(this._drawRoundRect(e,t,i,r,s,c),l&&e.fill(),a&&((0,n.ui)(e,{globalAlpha:1}),e.stroke())):(l&&o.Z.fillRect(e,t,i,r,s),a&&((0,n.ui)(e,{globalAlpha:1,lineWidth:d}),o.Z.strokeRect(e,t+.5*d,i+.5*d,r-d,s-d))))}isHover(e){if(!this.preDetect())return!1;const{x:t,y:i}=this.getTransformOrigin(),r=this.getHeight();return new s.Z.Bound(t,i,this.getWidth(),r).contain([e.x,e.y])}_drawRoundRect(e,t,i,r,o,n){const[s,a,l,c]="number"==typeof n?[n,n,n,n]:n;e.beginPath(),e.moveTo(t,i+s),e.arc(t+s,i+s,s,Math.PI,1.5*Math.PI),e.lineTo(t+r-a,i),e.arc(t+r-a,i+a,a,1.5*Math.PI,2*Math.PI),e.lineTo(t+r,i+o-l),e.arc(t+r-l,i+o-l,l,0,.5*Math.PI),e.lineTo(t+c,i+o),e.arc(t+c,i+o-c,c,.5*Math.PI,Math.PI),e.closePath()}_hasBorderRadius(e){return"number"==typeof e&&e>0||Array.isArray(e)&&e.some((e=>e>0))}_onSizeChange(){const e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)}}},83549:(e,t,i)=>{i.d(t,{$:()=>r,Z:()=>g});var r,o=i(80022),n=i.n(o),s=i(98218),a=i(9704),l=i(34162),c=i(10066),h=i(2933),d=i(83787);!function(e){e.AUTO="auto"}(r||(r={}));class u extends d.Z{constructor(){super(),this.id=(0,c.M8)(),this.isBatchUpdate=!0,this.isDataUpdate=!0,this.preContextStyles={},this.initEvents(),this._constructor=new.target}initEvents(){this.watch("data",this.onDataChange.bind(this))}get sceneCanvas(){return this._sceneCanvas||(this._sceneCanvas=(0,c.az)("canvas",{})),this._sceneCanvas}setData(e){return this.setAttr("data",e),this}setParent(e){return this._parent=e,this}getParent(){return this._parent}overrideSize({width:e,height:t}){const i=this.getAttr("devicePixelRatio"),r=this.sceneCanvas,o=e*i,n=t*i,[s=0,a=0]=[this.getAttr("width"),this.getAttr("height")];if((0,h.hj)(s)&&(0,c.Fr)(s-e)&&(0,c.Fr)(a-t)&&r.width===o&&r.height===n)return!1;(0,c.AS)(r,{width:`${e}px`,height:`${t}px`}),r.width=o,r.height=n;const l=this.getContext();return l.resetTransform?l.resetTransform():l.setTransform(1,0,0,1,0,0),l.scale(i,i),!0}getContext(){return this.sceneCanvas.getContext("2d")}getBound(){const{x:e,y:t}=this.getTransformOrigin();return{x:e,y:t,width:this.getWidth(),height:this.getHeight()}}getConvertBound(){const{x:e,y:t,width:i,height:r}=this.getBound();return{x:e,y:-(t+r),width:i,height:r}}isVisible({x:e,y:t,width:i,height:r}){const o=this.getAttr("isVisible"),n=this.getAttr("data");if(!o||null===n)return!1;const a=new s.Z.Bound(e,t,i,r),{x:l,y:c,width:h,height:d}=this.getConvertBound(),u=new s.Z.Bound(l,c,h,d);return a.isOverlaped(u)}applyTransform(e){const{x:t=0,y:i=0}=this.getTransformOrigin(),r=e||this.getContext(),{m11:o,m12:n,m21:s,m22:a}=r.getTransform();r.setTransform(o,n,s,a,t,i)}drawFromCache(e){const{x:t=0,y:i=0}=this.getTransformOrigin();l.Z.drawImage(e,this.sceneCanvas,t,i,this.getWidth(),this.getHeight())}getWidth(){let e=this.getAttr("width");return e=(0,h.hj)(e)?Math.max(e,1):1,e}getHeight(){let e=this.getAttr("height");return e=(0,h.hj)(e)?Math.max(e,1):1,e}onDataChange(){this.isDataUpdate=!0}onCacheChange(){this.isBatchUpdate=!0}draw(e,t){e.save(),this.beforeDrawHook();const i=this.getAttr("useCache");(void 0===t?i:t)?(this.drawCacheScene(),this.drawFromCache(e)):this.drawScene(e),e.restore()}clone(e){const t=n()(this.getConfig()),i=new(0,this._constructor)(t);return e&&this._bindAsyncAttrs(e,i),i}preDetect(){return this.getAttr("isContain")&&!!this.getAttr("data")}_bindAsyncAttrs(e,t){e.forEach((e=>{this.watch(e,(({newVal:i})=>{t.setAttr(e,i)}))}))}beforeDrawHook(){}getContextStyles(){return{}}}u.defaultConfig={...d.Z.defaultConfig,lineCap:"butt",lineDashOffset:0,lineJoin:"miter",lineWidth:1,miterLimit:10,fillStyle:a.E.Black,strokeStyle:a.E.Black,globalAlpha:1,globalCompositeOperation:"source-over",shadowBlur:0,shadowColor:a.E.Black,shadowOffsetX:0,shadowOffsetY:0,font:"10px sans-serif",textAlign:"left",textBaseline:"top",direction:"ltr",stroke:!1,fill:!1,useCache:!1,isVisible:!0,isHover:!1,isContain:!0,data:null};const g=u},61111:(e,t,i)=>{i.d(t,{Z:()=>d});var r=i(85466),o=i.n(r),n=i(98218),s=i(9704),a=i(34162),l=i(10066),c=i(2933),h=i(83549);class d extends h.Z{constructor(e={}){super(),this.config={...h.Z.defaultConfig,content:"",contents:[],fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",lineHeight:1,letterSpacing:0,textWidth:0,padding:0,background:s.E.White,isCustomized:!1,useCache:!0},this.setAttrs(e),this.watch(["content","fillStyle","background","width","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","useCache"],this.onCacheChange.bind(this))}onCacheChange(){this.isBatchUpdate=!0,this.isDataUpdate=!0,this.getAttr("isCustomized")?this._typesetText():this._setTextData()}onDataChange(){}setText(e){const t=(0,c.HD)(e)||Array.isArray(e)?e:null==e?"":`${e}`;return this.setAttr("content",t),this}getWidth(){const{width:e,textWidth:t,padding:i}=this.getConfig();return e===h.$.AUTO||void 0===e?t+2*i:e+2*i}getHeight(){const{fontSize:e,contents:t,lineHeight:i,padding:r}=this.getConfig();return e*t.length*i+2*r}getTransformOrigin(){const{data:e,textAlign:t,textBaseline:i}=this.getConfig();let{x:r,y:o}=e;const n=this.getWidth(),s=this.getHeight();return"center"===t?r-=.5*n:"right"===t&&(r-=n),"middle"===i?o-=.5*s:"bottom"===i&&(o-=s),{x:r,y:o}}getContextStyles(){const{fillStyle:e,textAlign:t,textBaseline:i}=this.getConfig();return{font:this._getTextFont(),fillStyle:e,textAlign:t,textBaseline:i}}drawCacheScene(){if(!this.isBatchUpdate)return;const{contents:e,fillStyle:t,padding:i,textWidth:r,fill:n,background:s}=this.getConfig();if(0===e.length)return;const c=this.getContext();a.Z.clearRect(c);const h=this.overrideSize({width:this.getWidth(),height:this.getHeight()}),d={font:this._getTextFont(),fillStyle:t},u=!o()(d,this.preContextStyles);if(this.isDataUpdate&&(this.preContextStyles=d),h||u||this.isDataUpdate){n&&a.Z.drawBackground(c,s),(0,l.ui)(c,{...d,textAlign:"left",textBaseline:"top"});const t=.5*(this.getWidth()-r);for(let r=0,o=e.length;r<o;++r){const{y:o}=e[r];a.Z.drawText(c,e[r].text,t,o+i)}}this.isBatchUpdate=!1}drawScene(e){const{data:t,contents:i,fill:r,background:o}=this.getConfig();r&&a.Z.drawBackground(e,o),(0,l.ui)(e,this.getContextStyles());for(let r=0,o=i.length;r<o;++r){const o=t.y+i[r].y;a.Z.drawText(e,i[r].text,t.x,o)}}isHover(e){if(!this.preDetect())return!1;const{x:t,y:i}=this.getTransformOrigin(),r=this.getHeight();return new n.Z.Bound(t,i,this.getWidth(),r).contain([e.x,e.y])}_addLineText(e){this.getAttr("contents").push(e)}_getTextWidth(e){const t=this.getAttr("letterSpacing"),i=Math.max(e.length-1,0);return a.Z.measureTextWidth(e)+t*i}_getTextFont(){const{fontStyle:e,fontVariant:t,fontSize:i,fontFamily:r}=this.getConfig();return`${e} ${t} ${i}px ${r}`}_setTextData(){const{content:e,contents:t,fontSize:i,lineHeight:r,width:o}=this.getConfig();if(Array.isArray(e))return;t.length=0;const n=e.split("\n"),s=r*i;let h=0,d=0;const u=(0,c.hj)(o)?o:void 0,g=a.Z.getContext();g.save(),(0,l.ui)(g,{font:this._getTextFont()});for(let e=0,t=n.length;e<t;e++){let t=n[e];const i=this._getTextWidth(t);if(u&&i>u)for(;t;){let e=0,i=t.length,r="",o=0;for(;e<i;){const n=e+i>>>1,s=t.slice(0,n+1),a=this._getTextWidth(s);a<=u?(e=n+1,r=s,o=a):i=n}if(r&&(this._addLineText({text:r,width:o,y:h}),d=Math.max(d,o),h+=s,t=t.slice(e),t&&(o=this._getTextWidth(t),o<=u))){this._addLineText({text:t,width:o,y:h}),d=Math.max(d,o),h+=s;break}}else this._addLineText({text:t,width:i,y:h}),d=Math.max(d,i)}g.restore(),this.setAttr("textWidth",d)}_typesetText(){const{content:e,contents:t,fontSize:i,lineHeight:r}=this.getConfig();if(Array.isArray(e)){t.length=0;const o=r*i;let n=0,s=0;const c=a.Z.getContext();c.save(),(0,l.ui)(c,{font:this._getTextFont()});for(let t=0;t<e.length;t++){const i=e[t],r=this._getTextWidth(i);this._addLineText({text:i,width:r,y:s}),s+=o,n=Math.max(n,r)}c.restore(),this.setAttr("textWidth",n)}}}},43559:(e,t,i)=>{i.d(t,{O:()=>s});var r=i(96832),o=i(85466),n=i.n(o);function s(e){const[t,i]=(0,r.useState)(e),o=(0,r.useRef)(e);return[t,{updateValue:(0,r.useCallback)((e=>{const t={...o.current,...e};n()(t,o.current)||(o.current=t,i(t))}),[]),toggleValue:(0,r.useCallback)((e=>{const t={...o.current};t[e]=!t[e],o.current=t,i(t)}),[]),getValue:(0,r.useCallback)((e=>o.current[e]),[])}]}},5394:(e,t,i)=>{i.d(t,{Z:()=>n});Math.PI,Math.PI;var r=i(94405),o=i(10359);class n{static isZero(e,t=1e-5){return Math.abs(e)<=Math.abs(t)}static isSamePoint(e,t){const i=Array.isArray(e)?e:[e.x,e.y],r=Array.isArray(t)?t:[t.x,t.y];return this.isZero(i[0]-r[0])&&this.isZero(i[1]-r[1])}static getSquareDistance(e,t){return(e.x-t.x)**2+(e.y-t.y)**2}static getDotMultiply(e,t){return e.x*t.x+e.y*t.y}static getCrossMultiply(e,t){return e.x*t.y-e.y*t.x}static degreeToRadius(e){return Math.PI*e/180}static transformPointToArray(e){return[e.x,e.y]}static transformPointToXY(e){return Array.isArray(e)?{x:e[0],y:e[1]}:e}static transformPointsToArray(e){return e.map((e=>this.transformPointToArray(e)))}static transformPointsToXY(e){return e.map((e=>this.transformPointToXY(e)))}static getBoundOfPoints(e){const t=e.map((e=>e[0])),i=e.map((e=>e[1])),r=Math.min(...t),n=Math.max(...t),s=Math.min(...i),a=Math.max(...i);return new o.Z(r,s,Math.abs(n-r),Math.abs(a-s))}static getDirectionVec(e,t){return new r.Z(t[0]-e[0],t[1]-e[1])}static isLeftOfLine(e,t,i){let[o,n]=[new r.Z(t[0],t[1]),new r.Z(i[0],i[1])];o.y>n.y&&([o,n]=[n,o]);const s=new r.Z(n.x-o.x,n.y-o.y),a=new r.Z(e[0]-o.x,e[1]-o.y);return this.getCrossMultiply(s,a)>0}static isBothSide(e,t,i,r=0){return this.getCrossMultiply(e,t)*this.getCrossMultiply(e,i)<=r}}},10359:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(5394);class o{static isOverlaped(e,t){return e.isOverlaped(t)}constructor(e,t,i=0,r=0){this.x=e,this.y=t,this.width=i,this.height=r}clone(){return new o(this.x,this.y,this.width,this.height)}getBound(){return{x:this.x,y:this.y,width:this.width,height:this.height}}getCenter(){return[this.x+this.width/2,this.y+this.height/2]}getNorthEast(){return[this.x+this.width,this.y+this.height]}getSouthWest(){return[this.x,this.y]}getVetexs(){return[[this.x,this.y],[this.x,this.y+this.height],[this.x+this.width,this.y+this.height],[this.x+this.width,this.y]]}isOverlaped(e){const t=this.getCenter(),i=e.getCenter();return Math.abs(i[0]-t[0])<=(this.width+e.width)/2&&Math.abs(i[1]-t[1])<=(this.height+e.height)/2}contain(e){if(e instanceof o){const t=e.getVetexs();for(let e=0;e<t.length;e++)if(!this.contain(t[e]))return!1;return!0}const t=this.x+this.width,i=this.y+this.height;return(e[0]-this.x)*(e[0]-t)<=0&&(e[1]-this.y)*(e[1]-i)<=0}union(e){const t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.y=i,this.width=r-t,this.height=o-i,this}expand(e,t){return this.width+=2*e,this.x-=e,void 0!==t?(this.y-=t,this.height+=2*t):(this.y-=e,this.height+=2*e),this}isIntersectOfSegment(e,t){if(!r.Z.getBoundOfPoints([e,t]).isOverlaped(this))return!1;if(this.contain(e)||this.contain(t))return!0;const i=r.Z.getDirectionVec(e,t),o=this.getVetexs();for(let t=1;t<o.length;t++){const n=r.Z.getDirectionVec(e,o[t-1]),s=r.Z.getDirectionVec(e,o[t]);if(r.Z.isBothSide(i,n,s))return!0}return!1}}},98218:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(94405),o=i(10359),n=i(5394),s=i(59712);class a{static getPedalPointOfLine(e,t,i){const o=new r.Z(e.x-t.x,e.y-t.y),s=new r.Z(i.x-t.x,i.y-t.y),a=n.Z.getDotMultiply(o,s)/s.getModelLength();return new r.Z(t.x,t.y).add(s.normalize().scale(a))}static getNearestPointToSegment(e,t,i){const r=this.getPedalPointOfLine(e,t,i);return this.isPointAtSegment(r,t,i)?r.toXY():n.Z.getSquareDistance(e,t)<n.Z.getSquareDistance(e,i)?t:i}static getDistanceToLine(e,t,i){const o=new r.Z(e.x-t.x,e.y-t.y),s=new r.Z(i.x-t.x,i.y-t.y),a=n.Z.getCrossMultiply(o,s);return Math.abs(a/s.getModelLength())}static getIntersectWidthBound(e,t,i){const r=i.getVetexs();let o=null,s=null;for(let i=0,a=r.length;i<a;i++){const l={x:r[i][0],y:r[i][1]},c={x:r[(i+1)%a][0],y:r[(i+1)%a][1]},h=this.getIntersectOfSegmentPt(e,t,l,c);if(h&&(o||(o=h),o&&!n.Z.isSamePoint(o,h)))return s=h,[o,s]}return[]}static isPointAtLine(e,t,i,o){const s=new r.Z(i.x-t.x,i.y-t.y),a=new r.Z(e.x-t.x,e.y-t.y),l=n.Z.getCrossMultiply(s,a)/s.getModelLength();return n.Z.isZero(l,o)}static isPointAtSegment(e,t,i,r){return!!this.isPointAtLine(e,t,i,r)&&(this.isHorizontalLine(t,i)?(e.x-t.x)*(e.x-i.x)<=0:(this.isVerticalLine(t,i)||(e.x-t.x)*(e.x-i.x)<=0)&&(e.y-t.y)*(e.y-i.y)<=0)}static isHorizontalLine(e,t){return n.Z.isZero(e.y-t.y)}static isVerticalLine(e,t){return n.Z.isZero(e.x-t.x)}static isParalled(e,t,i,o,s){const a=new r.Z(t.x-e.x,t.y-e.y),l=new r.Z(o.x-i.x,o.y-i.y),c=n.Z.getCrossMultiply(a,l);return n.Z.isZero(c,s)}static isCollinear(e,t,i,o,s){const a=new r.Z(t.x-e.x,t.y-e.y),l=new r.Z(o.x-i.x,o.y-i.y),c=new r.Z(e.x-i.x,e.y-i.y),h=n.Z.getCrossMultiply(a,l),d=n.Z.getCrossMultiply(a,c);return n.Z.isZero(h,s)&&n.Z.isZero(d,s)}static isIntersect(e,t,i,r,o){return!this.isParalled(e,t,i,r,o)}static getIntersectPt(e,t,i,o){if(this.isParalled(e,t,i,o))return;const s=new r.Z(t.x-e.x,t.y-e.y),a=new r.Z(o.x-i.x,o.y-i.y),l=new r.Z(i.x-e.x,i.y-e.y),c=new r.Z(o.x-e.x,o.y-e.y),h=Math.abs(n.Z.getCrossMultiply(s,l)),d=Math.abs(n.Z.getCrossMultiply(s,c));let u=0;return u=n.Z.isBothSide(s,l,c)?h/(h+d):h/(h-d),new r.Z(i.x,i.y).clone().add(a.clone().scale(u)).toXY()}static getIntersectOfSegmentPt(e,t,i,r){const o=this.getIntersectPt(e,t,i,r);if(o)return this.isPointAtSegment(o,i,r)?o:void 0}static isIntersectOfSegment(e,t,i,o,s){const a=new r.Z(t.x-e.x,t.y-e.y),l=new r.Z(o.x-i.x,o.y-i.y),c=new r.Z(i.x-e.x,i.y-e.y),h=new r.Z(o.x-e.x,o.y-e.y),d=new r.Z(e.x-i.x,e.y-i.y),u=new r.Z(t.x-i.x,t.y-i.y);return n.Z.isBothSide(a,c,h,s)&&n.Z.isBothSide(l,d,u,s)}constructor(e,t){this.v0=new r.Z(e.x,e.y),this.v1=new r.Z(t.x,t.y)}getDirVector(){const e=this.v1.x-this.v0.x,t=this.v1.y-this.v0.y;return new r.Z(e,t)}getDirection(){return this.getDirVector().normalize()}getLineLength(){return this.getDirVector().getModelLength()}getBound(){const e=Math.min(this.v0.x,this.v1.x),t=Math.min(this.v0.y,this.v1.y),i=Math.abs(this.v1.x-this.v0.x),r=Math.abs(this.v1.y-this.v0.y);return new o.Z(e,t,i,r)}isPointAtLine(e,t){const i=this.getDirVector(),o=new r.Z(e.x-this.v0.x,e.y-this.v1.y),s=n.Z.getCrossMultiply(i,o);return n.Z.isZero(s,t)}isParalled(e,t){const i=this.getDirection(),r=e.getDirection(),o=n.Z.getCrossMultiply(i,r);return n.Z.isZero(o,t)}isCollinear(e,t){const i=e.getDirection(),o=new r.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),s=n.Z.getCrossMultiply(i,o);return this.isParalled(e,t)&&n.Z.isZero(s,t)}isIntersect(e,t){return!this.isParalled(e,t)}getIntersectPt(e){if(this.isParalled(e))return this.isCollinear(e)?void s.warn("These lines is collinear"):void s.warn("These lines is paralled");const t=this.getDirVector(),i=e.getDirVector(),o=new r.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),a=new r.Z(e.v1.x-this.v0.x,e.v1.y-this.v0.y),l=Math.abs(n.Z.getCrossMultiply(t,o)),c=Math.abs(n.Z.getCrossMultiply(t,a));let h=0;return h=n.Z.isBothSide(t,o,a)?l/(l+c):l/(l-c),e.v0.clone().add(i.clone().scale(h))}isIntersectOfSegment(e){const t=this.getDirVector(),i=e.getDirVector(),o=new r.Z(e.v0.x-this.v0.x,e.v0.y-this.v0.y),s=new r.Z(e.v1.x-this.v0.x,e.v1.y-this.v0.y),a=new r.Z(this.v0.x-e.v0.x,this.v0.y-e.v0.y),l=new r.Z(this.v1.x-e.v0.x,this.v1.y-e.v0.y);return n.Z.isBothSide(t,o,s)&&n.Z.isBothSide(i,a,l)}isIntersectOfBound(e){return e.isIntersectOfSegment(n.Z.transformPointToArray(this.v0),n.Z.transformPointToArray(this.v1))}}var l=i(2933);const c={Vector2:r.Z,Line:a,Bound:o.Z,Polyline:class{constructor(e){this.coordinates=e,this.coordinates=e}getBound(){let e=Number.MAX_VALUE,t=Number.MAX_VALUE,i=-Number.MAX_VALUE,r=-Number.MAX_VALUE,n=this.coordinates.slice(0);for(;n.length>0;){const o=n.pop();if(void 0===o)break;Array.isArray(o)?n=n.concat(o):(e=Math.min(o.x,e),i=Math.max(o.x,i),t=Math.min(o.y,t),r=Math.max(o.y,r))}return new o.Z(e,t,i-e,r-t)}getNearestPoint(e){let t=e,i=Number.MAX_SAFE_INTEGER,r=this.coordinates.slice(0);for(;r.length>0;){const o=r.pop();if(Array.isArray(o))if((0,l.Kn)(o[0]))for(let r=0,n=o.length;r<n-1;r++){const{pos:n,dis:s}=this.getDisAndPointAtLine(e,o[r],o[r+1]);i>s&&(i=s,t=n)}else r=r.concat(o);else if((0,l.Kn)(o)&&r[r.length-1]){const{pos:n,dis:s}=this.getDisAndPointAtLine(e,o,r[r.length-1]);i>s&&(i=s,t=n)}}return{point:t,dis:i}}getDisAndPointAtLine(e,t,i){const r=a.getNearestPointToSegment(e,t,i);return{pos:r,dis:n.Z.getSquareDistance(e,r)}}},Algorith:n.Z}},94405:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(2933),o=i(5394);class n{static lerp(e,t,i){const r=new n(t.x-e.x,t.y-e.y);return e.add(r.scale(i))}constructor(e,t){this.x=0,this.y=0,"number"==typeof e&&"number"==typeof t?(this.x=e,this.y=t):Array.isArray(e)?[this.x,this.y]=e:(0,r.Kn)(e)&&(this.x=e.x,this.y=e.y)}add(e){return this.x+=Number(e.x),this.y+=Number(e.y),this}substract(e){return this.x-=Number(e.x),this.y-=Number(e.y),this}normalize(){const e=this.getModelLength();return 0===e?new n(0,0):new n(this.x/e,this.y/e)}clone(){return new n(this.x,this.y)}rotate(e){const t=o.Z.degreeToRadius(e),i=this.x*Math.cos(t)-this.y*Math.sin(t),r=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=i,this.y=r,this}scale(e,t){return this.x*=e,this.y*=t||e,this}getSquareLength(){return this.x**2+this.y**2}getModelLength(){return Math.sqrt(this.x**2+this.y**2)}toArray(){return[this.x,this.y]}toXY(){return{x:this.x,y:this.y}}}},36825:(e,t,i)=>{i.d(t,{AX:()=>l,HD:()=>m,Jj:()=>C,K0:()=>x,L7:()=>a,Li:()=>y,Ri:()=>o,Sz:()=>f,UX:()=>d,Wi:()=>p,X8:()=>s,_Y:()=>n,dt:()=>u,kn:()=>c,oO:()=>g});var r=i(9704);const o={[r.QX.Month]:2592e6,[r.QX.Day]:864e5,[r.QX.Hour]:36e5,[r.QX.Minute]:6e4,[r.QX.Second]:1e3},n=1e-5,s=["click","dblclick","mousedown","mousemove","mouseup","mouseout","wheel","gesturestart","gesturechange","gestureend","contextmenu"],a=[{type:r.QX.Month,number:36},{type:r.QX.Month,number:24},{type:r.QX.Month,number:12},{type:r.QX.Month,number:6},{type:r.QX.Month,number:3},{type:r.QX.Month,number:1},{type:r.QX.Day,number:7},{type:r.QX.Day,number:3},{type:r.QX.Day,number:1},{type:r.QX.Hour,number:12},{type:r.QX.Hour,number:6},{type:r.QX.Hour,number:4},{type:r.QX.Hour,number:2},{type:r.QX.Hour,number:1},{type:r.QX.Minute,number:30},{type:r.QX.Minute,number:15},{type:r.QX.Minute,number:5},{type:r.QX.Minute,number:3},{type:r.QX.Minute,number:1},{type:r.QX.Second,number:30}],l=new Set(["strokeStyle","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","font","textAlign","textBaseline","direction","lineDashOffset"]),c={"line.color1":r.E.LineColor1,"line.color2":r.E.LineColor2,"line.color3":r.E.LineColor3,"line.color4":r.E.LineColor4,"line.color5":r.E.LineColor5,"line.color6":r.E.LineColor6,"area.fillColor1":r.E.AreaFillColor1,"area.fillColor2":r.E.AreaFillColor2,defaultColor:r.E.CandleBlue,"cross.upLabelBorderColor":r.E.Green500,"cross.upLabelBgColor":r.E.Green600,"cross.downLabelBgColor":r.E.Red600,"cross.downLabelBorderColor":r.E.Red500,"countdown.upTextColor":r.E.Gray600,"countdown.upBgColor":r.E.CandleGreen,"countdown.upBorderColor":r.E.CandleGreen,"countdown.downTextColor":r.E.Gray600,"countdown.downBgColor":r.E.CandleRed,"countdown.downBorderColor":r.E.CandleRed,"vertGridLine.color":r.E.Gray10,"horzGridLine.color":r.E.Gray10,"LSratio.outline":"","LSratio.area":"","oi.bar":"","BS.buy":"","BS.sell":"","basis.area":"",background:r.E.White,"candle.upBarColor":r.E.CandleGreen,"candle.downBarColor":r.E.CandleRed,"candle.lineColor":"#5a9ad8","frame.borderLineColor":r.E.Gray50,"text.defaultColor":r.E.Gray600,"axis.tickLineColor":r.E.Gray300,"axis.tickTextColor":r.E.Gray300,"cross.labelTextColor":r.E.White,"cross.borderLineColor":r.E.Gray600,"grid.borderLineColor":r.E.Gray10,"volume.upBarColor":r.E.CandleGreen,"volume.downBarColor":r.E.CandleRed,"volume.maLineColor":r.E.LineColor1,"volume.upTextColor":r.E.Green500,"volume.downTextColor":r.E.Red500,"boll.fillColor":r.E.AreaFillColor1,"cross.defaultLabelTextColor":r.E.Gray600,"cross.defaultLabelBgColor":r.E.Gray10,"cross.defaultLabelBorderColor":r.E.Gray50,"horzGridLine.color":r.E.Gray10,"vertGridLine.color":r.E.Gray10},h={...c,background:r.E.Gray900,"candle.lineColor":r.E.White,"text.defaultColor":r.E.Gray200,"frame.borderLineColor":r.E.Gray700,"axis.tickLineColor":r.E.Gray500,"axis.tickTextColor":r.E.Gray500,"cross.borderLineColor":r.E.Gray200,"grid.borderLineColor":r.E.Gray800,"volume.upBarColor":r.E.Green700,"volume.downBarColor":r.E.Red700,"boll.fillColor":r.E.AreaFillColor2,"cross.defaultLabelTextColor":r.E.Gray0,"cross.defaultLabelBgColor":r.E.Gray700,"cross.defaultLabelBorderColor":r.E.Gray600,"horzGridLine.color":r.E.Gray800,"vertGridLine.color":r.E.Gray800},d={[r.hY.LIGHT]:c,[r.hY.DARK]:h},u=e=>(d[e.toLocaleLowerCase()]||{}).background,g=(e,t)=>(d[e.toLocaleLowerCase()]||{})[t];var m,p,y;!function(e){e.MOUSE="MOUSE",e.MOUSE_DOWN="MOUSE_DOWN",e.MOUSE_DOWN_MOVE="MOUSE_DOWN_MOVE",e.MOUSE_DOWN_UP="MOUSE_DOWN_UP",e.MOUSE_MOVE="MOUSE_MOVE",e.MOUSE_CLICK="MOUSE_CLICK"}(m||(m={})),function(e){e.DRAW_TREND_LINE="draw-trendline",e.DRAW_EX_TREND_LINE="draw-exTrendLine",e.DRAW_FIB_LINE="draw-fibLine",e.DRAW_INFO_LINE="draw-infoLine",e.DRAW_HORIZONTAL_LINE="draw-horizontalLine",e.DRAW_VERTICAL_LINE="draw-verticalLine",e.DRAW_PARRLLEL_LINE="draw-parallelLine",e.DRAW_RAY_LINE="draw-rayLine",e.DRAW_PRICE_LINE="draw-priceLine",e.DRAW_ARROW_LINE="draw-arrowLine",e.DRAW_UP_ARROW="draw-upArrow",e.DRAW_DOWN_ARROW="draw-downArrow",e.DRAW_LEFT_ARROW="draw-leftArrow",e.DRAW_RIGHT_ARROW="draw-rightArrow",e.DRAW_CROSS_LINE="draw-crossLine",e.DRAW_TEXT="draw-text",e.DRAW_RECTANGLE="draw-rectangle",e.DRAW_DELETE_ALL="draw-deleteAll",e.DRAW_BAR="draw-bar",e.DRAW_DAY="draw-day",e.DRAW_HOUR="draw-hour",e.DRAW_MINUTE="draw-minute",e.DRAW_DEFAULT_CURSOR="draw-defaultCursor",e.DRAW_CROSS_CURSOR="draw-crossCursor",e.DRAW_CONTINUE="draw-continue",e.DRAW_LOCK="draw-lock",e.DRAW_TOGGLE="draw-toggle-visible",e.ANNOTATION_DEFAULT="annotation-back-default",e.ANNOTATION_COLOR="annotation-color",e.ANNOTATION_BACKGROUND="annotation-background",e.ANNOTATION_LINE_WIDTH="annotation-line-width",e.ANNOTATION_LINE_STYLE="annotation-line-style",e.ANNOTATION_LOCK="annotation-lock",e.ANNOTATION_UNLOCK="annotation-unLock",e.ANNOTATION_DELETE="annotation-delete",e.ANNOTATION_FONT_SIZE="annotation-font-size",e.ANNOTATION_FONT_BOLD="annotation-font-bold",e.ANNOTATION_EDIT_TEXT="annotation-edit-text",e.ICON_FOLD="icon-fold",e.ICON_UNFOLD="icon-unfold"}(p||(p={})),function(e){e.DEFAULT="default",e.CROSSHAIR="crosshair",e.NSRESIZE="ns-resize",e.EWRESIZE="ew-resize",e.POINTER="pointer"}(y||(y={}));const x={"1m":6e4,"3m":18e4,"5m":3e5,"15m":9e5,"30m":18e5,"1h":36e5,"2h":72e5,"4h":144e5,"6h":216e5,"8h":288e5,"12h":432e5,"1d":864e5,"3d":2592e5,"1w":6048e5,"1M":2592e6},f=e=>x[e]||0,C={settingManager:"SETTINGMANAGER"}},9704:(e,t,i)=>{var r,o,n,s,a,l,c,h,d,u,g,m,p,y,x,f,C;i.d(t,{A:()=>l,Bf:()=>C,E:()=>c,HS:()=>f,Nm:()=>g,PH:()=>s,QX:()=>o,TD:()=>x,Us:()=>y,Vt:()=>p,Wr:()=>n,aI:()=>u,hY:()=>h,mB:()=>a,oX:()=>m,wh:()=>d}),function(e){e.Up="up",e.Down="down"}(r||(r={})),function(e){e.Year="Year",e.Month="Month",e.Week="Week",e.Day="Day",e.Hour="Hour",e.Minute="Minute",e.Second="Second"}(o||(o={})),function(e){e.Alphabetic="alphabetic",e.Top="top",e.Hanging="hanging",e.Middle="middle",e.Ideographic="ideographic",e.Bottom="bottom"}(n||(n={})),function(e){e.Start="start",e.End="end",e.Center="center",e.Left="left",e.Right="right"}(s||(s={})),function(e){e.All="All",e.Marks="Marks",e.Resize="Resize"}(a||(a={})),function(e){e.DEFAULT="",e.CANDLE="CANDLE",e.MACD="MACD",e.EMA="EMA",e.MA="MA",e.SMA="SMA",e.MOMENTUM="MOMENTUM",e.ATR="ATR",e.BOLL="BOLL",e.VOL="VOL"}(l||(l={})),function(e){e.White="#ffffff",e.Black="#000000",e.Gray="#2d2d2d",e.CandleRed="#E0294A",e.CandleGreen="#2EBD85",e.CandleBlue="#0303F7",e.LightGray="#9a9b9a",e.GrayD="#D8D8D8",e.GrayF="#F2F2F2",e.Gray8="#848E9C",e.GrayE="#EAECEF",e.GrayC="#C1C6CD",e.YellowF="#F0B90B",e.Dark4="#48515D",e.Dark2="#212833",e.Dark2A="#2A2F37",e.Dark1F="#1F2124",e.Blue3="#328DFD",e.Gray0="#FFFFFF",e.Gray5="#FAFAFA",e.Gray10="#F5F5F5",e.Gray50="#E6E8EA",e.Gray100="#CACED3",e.Gray200="#AEB4BC",e.Gray300="#929AA5",e.Gray400="#76808F",e.Gray500="#5E6673",e.Gray600="#474D57",e.Gray700="#2B2F36",e.Gray800="#1E2026",e.Gray900="#14151A",e.Gray1000="#0B0E11",e.Red5="#FEF6F7",e.Red10="#FEF1F2",e.Red50="#FDDDDE",e.Red100="#FDBAB9",e.Red200="#FC9897",e.Red300="#FC6E75",e.Red400="#F84960",e.Red500="#D9304E",e.Red600="#982A42",e.Red700="#5C1929",e.Red800="#35141D",e.Red900="#221113",e.Green5="#F0FFFA",e.Green10="#E2FDF4",e.Green50="#CBF6E8",e.Green100="#9BE8CD",e.Green200="#54E8B4",e.Green300="#2ED191",e.Green400="#02C076",e.Green500="#0F8F62",e.Green600="#1E644E",e.Green700="#143D31",e.Green800="#102821",e.Green900="#0B1915",e.LineColor1="#ff00ff",e.LineColor2="#cc0066",e.LineColor3="#00cccc",e.LineColor4="#2ED191",e.LineColor5="#bd930b",e.LineColor6="#c305c6",e.AreaFillColor1="#e5e5f2",e.AreaFillColor2="#161833"}(c||(c={})),function(e){e.LIGHT="light",e.DARK="dark"}(h||(h={})),function(e){e.BASE="BASE",e.EXT="EXT"}(d||(d={})),function(e){e.Normal="NORMAL",e.Percentage="PERCENTAGE"}(u||(u={})),function(e){e.Up="UP",e.Down="DOWN",e.Right="RIGHT",e.Left="LEFT"}(g||(g={})),function(e){e.Line="LINE",e.Bar="BAR",e.CandleBar="CANDLEBAR",e.Area="AREA",e.Point="POINT",e.CrossLine="CROSSLINE",e.Transcation="TRANSCATION",e.HollowCandleBar="HOLLOW_CANDLEBAR",e.HollowBar="HOLLOW_BAR"}(m||(m={})),function(e){e.Width="WIDTH",e.Height="HIGHT",e.All="ALL"}(p||(p={})),function(e){e.DefaultCursor="DEFAULTCURSOR",e.CrossHairCursor="CROSSHAIRCURSOR",e.TrendLine="TRENDLINE",e.ExtendTrendLine="EXTRENDLINE",e.FibonacciLine="FIBONACCILINE",e.InfoLine="INFOLINE",e.HorizontalLine="HORIZONTALLINE",e.VerticalLine="VERTICALLINE",e.CrossLine="CROSSLINE",e.StraightLine="STRAIGHTLINE",e.ParallelLine="PARALLELLINE",e.Arrow="ARROW",e.UpArrow="UPARROW",e.DownArrow="DOWNARROW",e.LeftArrow="LEFTARROW",e.RightArrow="RIGHTARROW",e.Text="TEXT",e.Rectangle="RECTANGLE",e.RayLine="RAYLINE",e.PriceLine="PRICELINE",e.ArrowLine="ARROWLINE",e.OrderLine="ORDERLINE",e.PositionLine="POSITIONLINE",e.ExecutionOrders="EXECUTION_ORDERS",e.ToolTip="TOOLTIP",e.Delete="DELETE",e.KeepDrawing="KeepDrawing",e.LockDraw="LOCKDRAW",e.ToggleVisible="TOGGLEVISIBLE"}(y||(y={})),function(e){e.SOLID="solid",e.DASHED="dashed",e.DOTTED="dotted"}(x||(x={})),function(e){e.BOLD="bold",e.NORMAL="NORMAL"}(f||(f={})),function(e){e.EDIT="EDIT",e.ADD="ADD",e.REMOVE="REMOVE"}(C||(C={}))},34162:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(10066);const o="GLOBAL_CANVS";class n{static getBufferCanvas(e){return n._globalCache.get(e)}static setBufferCanvas(e,t){n._globalCache.set(e,t)}static drawLine(e,t,i,r,o){e.moveTo(t,i),e.lineTo(r,o)}static drawLines(e,t){for(let i=0;i<t.length;i++){const{x:r,y:o}=t[i];0===i?e.moveTo(r,o):e.lineTo(r,o)}}static drawPoints(e,t,i){if(i){const{width:r,height:o}=i,n=.5*r,s=.5*o;t.forEach((({x:t,y:a})=>{e.drawImage(i,t-n,a-s,r,o)}))}else{const i=2,r=.5*i;t.forEach((t=>{e.strokeRect(t.x-r,t.y-r,i,i)}))}}static drawCrossLines(e,t){t.forEach((({x:t,y:i})=>{this.drawLine(e,t-2,i,t+2,i),this.drawLine(e,t,i-2,t,i+2)}))}static drawBackground(e,t="#FFFFFF",i){i||(i={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e.fillStyle=t,e.fillRect(i.x,i.y,i.width,i.height)}static clearRect(e,t){e&&(t||(t={x:0,y:0,width:e.canvas.width,height:e.canvas.height}),e?.clearRect?.(t.x,t.y,t.width,t.height))}static drawText(e,t,i,r,o){e.fillText(t,i,r,o)}static strokeRect(e,t,i,r,o){e.strokeRect(t,i,r,o)}static fillRect(e,t,i,r,o){e.fillRect(t,i,r,o)}static drawCircle(e,t,i,r){e.arc(t,i,r,0,2*Math.PI)}static fillPath2D(e,t){e.fill(t)}static strokePath2D(e,t){e.stroke(t)}static drawImage(e,t,i,r,o,n){t?.width<1||t?.height<1||(o&&n?e.drawImage(t,i,r,o,n):e.drawImage(t,i,r))}static getCanvas(){let e=this.getBufferCanvas(o);return e||(e=(0,r.az)("canvas",{}),this.setBufferCanvas(o,e)),e}static getContext(){const e=this.getCanvas();return this._context||(this._context=e.getContext("2d")),this._context}static measureTextWidth(e){const t=this.getContext();if(!t)return 0;const i=t.measureText(e);return 5*Math.floor(i.width/5)+i.width%5}}n._globalCache=new Map;const s=n},10066:(e,t,i)=>{i.d(t,{AS:()=>p,BG:()=>K,BM:()=>I,CN:()=>f,Ds:()=>_,FH:()=>w,Fr:()=>y,Hf:()=>x,Lo:()=>V,M8:()=>B,Nw:()=>S,O5:()=>u,P2:()=>P,P7:()=>Z,PM:()=>W,R4:()=>z,T:()=>X,U2:()=>U,Vq:()=>H,XH:()=>L,XR:()=>E,Xp:()=>C,az:()=>g,gH:()=>k,gt:()=>A,h7:()=>F,h8:()=>O,kC:()=>Y,ln:()=>$,mr:()=>b,r3:()=>G,rs:()=>N,ry:()=>R,sL:()=>v,tq:()=>D,uf:()=>j,ui:()=>m,x_:()=>M});var r=i(44417),o=i.n(r),n=i(51374),s=i.n(n),a=i(37352),l=i.n(a),c=i(9704),h=i(36825),d=i(2933);function u(e,t,i={style:{position:"reletive",width:"100%",height:"100%"}}){const r=document.createElement("canvas");r.width=e*M(),r.height=t*M(),i.className&&(r.className=i.className);const{style:o}=i;return o&&p(r,o),r}function g(e,t,i){const r=document.createElement(e);return p(r,t),i&&r.classList.add(i),r}function m(e,t){Object.keys(t||{}).forEach((i=>{const r=t[i];void 0!==r&&h.AX.has(i)&&(e[i]=r)}))}function p(e,t={}){e&&e.style&&Object.keys(t).forEach((i=>{e.style[i]=t[i]}))}function y(e,t=h._Y){return Math.abs(e)<t}function x(e=0,t=0){const i=e.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/),r=i?Math.max(t,Math.max(0,(i[1]||"").length-i[2])):t;return i?e.toFixed(r):`${e}`}function f(e){const{offsetX:t,offsetY:i}=e.originEvent;if((void 0===t||void 0===i)&&e.target){const{left:t=0,top:i=0}=e.target.getBoundingClientRect(),{clientX:r,clientY:o}=e;return{x:r-t,y:o-i}}return{x:t,y:i}}function C(e,t){const i=document.createElement("iframe");i.style.cssText="\n    position: absolute; left: 0; top: 0; width: 100%; height: 100%;\n        border: 0; margin: 0; display: block; z-index: -999;\n  ",e.appendChild(i);let r,o=e.offsetWidth,n=e.offsetHeight,s=1;function a(){const i=e.offsetWidth,r=e.offsetHeight,a=window.devicePixelRatio;o===i&&n===r&&s===a||(t&&t({width:i,height:r},{width:o,height:n}),o=i,n=r,s=a)}void 0!==window&&(s=window.devicePixelRatio,r=window.matchMedia(`(min-resolution: ${window.devicePixelRatio}dppx) and (max-resolution: ${window.devicePixelRatio}dppx)`),r.addListener((function e(){r&&r.removeListener(e),a(),r=window.matchMedia(`(min-resolution: ${window.devicePixelRatio}dppx) and (max-resolution: ${window.devicePixelRatio}dppx)`),r.addListener(e)}))),(i.contentWindow||i).onresize=P(a,10)}function b(e,t="YYYY-MM-DD hh:mm:ss"){const i=function(e){return(0,d.hj)(e)?e:e instanceof Date?e.getTime():(0,d.HD)(e)?e.replace(/\//g,"-"):NaN}(e);if(isNaN(i))return t;const r=new Date(i),o={"M+":r.getMonth()+1,"D+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds()};return/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,`${r.getUTCFullYear()}`.substr(4-RegExp.$1.length))),Object.keys(o).forEach((e=>{if(new RegExp(`(${e})`).test(t)){const i=o[e];t=t.replace(RegExp.$1,1===RegExp.$1.length?i:`00${i}`.substr(`${i}`.length))}})),t}function w(e,t){const i=parseFloat(`${e}`);return isNaN(i)||isNaN(t)?"NaN":t<=0?i.toFixed(0):e===1/0?e.toLocaleString():l()(+e).toFixed(t).toString()}function v(e,t){const i=new Date(e);return t.type===c.QX.Month?b(e,0===i.getUTCMonth()?"YYYY":"MM/DD"):0===i.getUTCHours()?b(e,{[c.QX.Month]:"MM/DD",[c.QX.Day]:"MM/DD",[c.QX.Hour]:"MM/DD",[c.QX.Minute]:"hh:mm",[c.QX.Second]:"hh:mm:ss"}[t.type]):b(e,{[c.QX.Day]:"MM/DD",[c.QX.Hour]:"hh:00",[c.QX.Minute]:"hh:mm",[c.QX.Second]:"hh:mm:ss"}[t.type])}function L(e,t){let i="YYYY/MM/DD hh:mm:ss";return t===c.QX.Month?i="YYYY/MM/01 08:00":t===c.QX.Day?i="YYYY/MM/DD hh:00":t!==c.QX.Minute&&t!==c.QX.Hour||(i="YYYY/MM/DD hh:mm"),b(e,i)}function S(e,t){if(t-e<=7*h.Ri.Day)return 0;const i=new Date(e),[r,o]=[i.getUTCFullYear(),i.getUTCMonth()],n=new Date(t),[s,a]=[n.getUTCFullYear(),n.getUTCMonth()];return 12*(s-r)+a-o+1}function E(e,t=2){if(Math.abs(e)<1e-9&&Math.abs(e)>0)return`${e.toExponential(2)}`;if(Math.abs(e)<1e3)return k(e,t);const i=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];let r;for(r=i.length-1;r>0&&!(Math.abs(e)>=i[r].value);r--);return(e/i[r].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i[r].symbol}function k(e,t,i=!1){if(isNaN(e))return"NaN";if(t<=0)return`${Math.floor(e)}`;if(i){const i=e.toLocaleString("en-US",{maximumFractionDigits:t+2,minimumFractionDigits:t+2,useGrouping:!1}),[r,o=""]=i.split(".");return`${r}.${o.slice(0,t).padEnd(t,"0")}`}return e===1/0?e.toLocaleString():new(l())(+e).toFixed(t)}function V(e,t=0){if(isNaN(e))return"NaN";if(e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)return e.toLocaleString();const i=(100*e).toLocaleString("en-US",{maximumFractionDigits:t+1,minimumFractionDigits:t+1,useGrouping:!1}),[r,o]=i.split(".");return t>0?`${r}.${o.slice(0,t)}%`:`${r}%`}function A(e,t=2){return(0,d.hj)(e)?`${(100*e).toFixed(t)}%`:"0.00%"}let T;function M(){return void 0!==T?T:"undefined"!=typeof window&&window.devicePixelRatio||1}function D(){if("undefined"!=typeof navigator){const e=navigator.userAgent;return/Android|webOS|iPhone|iPod|BlackBerry/i.test(e)}return!1}function I(e,t,i){const r=[20,30,40,50,60,100],o=(e-t)/i;let n=Math.floor(Math.log10(o)-1);n=10**n;const s=o/n;let a,l=0;for(l=0;l<r.length;l++)if(r[l]>=s){a=r[l]*n;break}let c=0,h=0;return c=Math.ceil(e/a)*a,h=Math.floor(t/a)*a,{max:c,min:h,step:a}}function _(e,t=0,i=!1){let r=null;return(...o)=>{r&&clearTimeout(r),i&&null===r?e.apply(null,[...o]):r=setTimeout((()=>{e.apply(null,[...o])}),t)}}function P(e,t){let i;return(...r)=>{const o=+new Date;(!i||o-i>t)&&(e.call(null,...r),i=o)}}function W(e,...t){if(!t.length)return e;const i=t.shift();return void 0===i?e:((0,d.Kn)(e)&&(0,d.Kn)(i)&&Object.keys(i).forEach((t=>{(0,d.Kn)(i[t])?(e[t]||(e[t]={}),W(e[t],i[t])):e[t]=i[t]})),W(e,...t))}function R(e,t){let i,r=0,o=e.length;for(;r<o;){i=Math.floor((o+r)/2);const n=t(e[i]);if(!(0,d.hj)(n))throw new Error(`binarySearch result is not number: ${n}`);if(n<0&&(o=i),0===n)return i;n>0&&(r=i+1)}return i=Math.floor((o+r)/2),i}function B(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function H(e="",t=1){const i=t;if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){let t="",r="",o="";return 7===e.length?(t=`${parseInt(e.slice(1,3),16)}`,r=`${parseInt(e.slice(3,5),16)}`,o=`${parseInt(e.slice(5,7),16)}`):4===e.length&&(t=`${parseInt(e.slice(1,2),16)}`,r=`${parseInt(e.slice(2,3),16)}`,o=`${parseInt(e.slice(3,4),16)}`),`rgba(${t},${r},${o},${i})`}return e.startsWith("rgb(")?`rgba${e.slice(3,-1)},${i})`:e}function Z(e){if(e.startsWith("#"))return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1};const t=e.match(/\(([^)]*)\)/);if(t){const e=t[1],[i,r,o,n]=e.split(",");return{r:parseInt(i,10),g:parseInt(r,10),b:parseInt(o,10),a:void 0===n?1:parseFloat(n)}}return{r:255,g:255,b:255,a:0}}function O(e,t,i){let r=0,o=0,n=0;const s=Math.max(e,t,i),a=s-Math.min(e,t,i);return r=0===a?0:e===s?(t-i)/a%6:t===s?(i-e)/a+2:(e-t)/a+4,r=Math.floor(60*r),r<0&&(r+=360),o=Math.round(100*(0===s?0:a/s)),n=Math.round(s/255*100),{h:r,s:o,v:n}}function N(e,t,i){let r=[];const o=(i/=100)*(t/=100),n=e/60,s=o*(1-Math.abs(n%2-1)),a=i-o;switch(parseInt(`${n}`,10)){case 0:r=[o,s,0];break;case 1:r=[s,o,0];break;case 2:r=[0,o,s];break;case 3:r=[0,s,o];break;case 4:r=[s,0,o];break;case 5:r=[o,0,s]}if(0===r.length)throw new Error("hsv color is not valid");return{r:Math.round(255*(r[0]+a)),g:Math.round(255*(r[1]+a)),b:Math.round(255*(r[2]+a))}}function F(e,t,i,r){const{r:o,g:n,b:s}=N(e,t,i);return`rgba(${o}, ${n}, ${s}, ${r})`}function K(e){const t=e.match(/\(([^)]*)\)/);if(e.startsWith("rgb")&&t){const e=t[1],[i,r,o]=e.split(",").map(Number);return`#${i.toString(16)}${r.toString(16)}${o.toString(16)}`}return"#000000"}function U(e){const t=`000000${(16777215-Number(`0x${e.replace(/#/g,"")}`)).toString(16)}`;return`#${t.substring(t.length-6,t.length)}`}function $(e,t){const i=[],r=[];for(let o=0,n=e.length;o<n;o++)t(e[o])?i.push(e[o]):r.push(e[o]);return[i,r]}function z(e,t){let i,r;return o=>{i&&clearTimeout(i),r=e(o,r),i=setTimeout((()=>{t.call(null,r),r=void 0}),16)}}function X(e){const t=Object.keys(e||{});return JSON.stringify(t.sort().reduce(((t,i)=>(t[i]=e[i],t)),{}))}function G(e,t){const i=Object.keys(t||{}),r=o()(e,i);return s()(r,t)}function Y(e){return e.replace(/^\S/,(e=>e.toUpperCase()))}const j=({number:e,digits:t})=>e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})},2933:(e,t,i)=>{function r(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&isFinite(e)}function n(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){return e&&"[object Function]"===Object.prototype.toString.call(e)}i.d(t,{HD:()=>r,Kn:()=>n,hj:()=>o,mf:()=>s})},77991:(e,t,i)=>{i.d(t,{ZP:()=>b});var r=i(96832),o=i(23893),n=i(93112),s=i(85466),a=i.n(s);function l(e){const[t,i]=(0,r.useState)(e);return(0,r.useEffect)((()=>{var r,o;i((r=t)===(o=e)||a()(r,o)?r:o)}),[e]),t}var c=i(86282),h=i(22697),d=i(17948),u=i(97565);const g={right:"left",left:"right","top-start":"top-end","right-start":"left-start","left-start":"right-start","bottom-start":"bottom-end","top-end":"top-start","right-end":"left-end","left-end":"right-end","bottom-end":"bottom-start"},m=()=>{},p=()=>r.createElement("div",{"data-ssr":!0,suppressHydrationWarning:!0}),y=(0,r.forwardRef)(((e,t)=>r.createElement(c.Z,{ref:t,__css:{position:"relative",display:"inline-block",outline:"none"},...e}))),x=(0,r.forwardRef)((({visible:e,...t},i)=>{const{context:o}=(0,r.useContext)(d.Z),[n,s]=r.useState(!1);(0,r.useEffect)((()=>{const t=e!==n?setTimeout((()=>s(Boolean(e)))):void 0;return()=>{t&&clearTimeout(t)}}),[e,n]);const a=(0,r.useMemo)((()=>({...e?n?{}:{visibility:"hidden"}:{display:"none",pointerEvents:"none",visibility:"hidden"},zIndex:"modal"===o?1201:"dropdown"})),[e,n,o]);return r.createElement(c.Z,{ref:i,tx:"dropdown",variant:"box",__css:a,...t})})),f=(0,r.forwardRef)(((e,t)=>{const{children:i,dir:s,disabled:a,enablePortal:c=!1,overlay:h=r.createElement(r.Fragment,null),overlayProps:d={},trigger:x,isFixed:f=!1,forceTop:b=!1,onVisibleChange:w=m,open:v,placement:L="bottom-start",onClick:S,needSeo:E=!1,...k}=e;let V=b?"top":L;V="rtl"===s&&g[V]||V;let A=x||"click";const[T,M]=(0,r.useState)(!a&&!0===v),D=(0,r.useRef)(0),[I,_]=(0,r.useState)(),{current:P}=r.useRef(null!=v),[W,R]=(0,r.useState)(E);T&&!c&&W&&R(!1);const B=(0,r.useMemo)((()=>h),[h]),H=(0,u.Z)(_,t),[Z,O]=(0,r.useState)(null),N=r.useMemo((()=>f||!T?[{name:"eventListeners",options:{scroll:!1,resize:!1}}]:void 0),[f,T]),{styles:F,attributes:K,forceUpdate:U}=(0,o.D)(I,Z,{placement:V,strategy:"fixed",modifiers:N}),$=(0,n.D)((e=>{(e=Boolean(e))!==T&&(e&&U&&U(),M(!0===e),w(!0===e))}));P&&($(v),A=void 0),a&&($(!1),A=void 0);const z=(0,n.D)((e=>{e.target instanceof Node&&(I?.contains(e.target)||Z?.contains(e.target))||$(!1)}));(0,r.useEffect)((()=>(!P&&T?window.addEventListener("click",z):window.removeEventListener("click",z),()=>{window.removeEventListener("click",z)})),[P,z,T]);const X=(0,n.D)(A?e=>{window.performance.now()-D.current>500&&$(!T),S&&S(e)}:S||(()=>{})),G=(0,n.D)("hover"===A?t=>{!T&&window.performance.now()-D.current>500&&($(!0),D.current=window.performance.now()),e.onMouseMove&&e.onMouseMove(t)}:e.onMouseMove||(()=>{})),Y=(0,n.D)("hover"===A?t=>{$(!1),e.onMouseLeave&&e.onMouseLeave(t)}:e.onMouseLeave||(()=>{})),j=l(k),q=l(d),Q=l(F.popper),J=l(K.popper),ee=(0,r.useMemo)((()=>W?"undefined"!=typeof window&&window.document&&window.document.createElement?r.createElement(p,null):r.createElement("div",{style:{display:"none"}},B):null),[W,B]);return(0,r.useMemo)((()=>r.createElement(y,{className:T?"checked":void 0,ref:H,onClick:X,onMouseMove:G,onMouseLeave:Y,...j},ee,i,r.createElement(C,{enablePortal:c,popupVisible:T,attributesPopper:J,overlay:h,overlayProps:q,stylesPopper:Q,setPopperElement:O}))),[T,H,X,G,Y,j,ee,i,c,J,h,q,Q])})),C=(0,r.memo)((({enablePortal:e,popupVisible:t,attributesPopper:i,overlay:o,overlayProps:n,stylesPopper:s,setPopperElement:a})=>e?t?r.createElement(h.ZP,null,r.createElement(x,{...n,ref:a,style:s,visible:t,...i},o)):null:r.createElement(x,{...n,ref:a,style:s,visible:t,...i},o)));f.displayName="Dropdown";const b=(0,r.memo)(f)},76041:(e,t,i)=>{i.d(t,{QE:()=>p,ZP:()=>y});var r=i(96832),o=i(415),n=i(86282);const s=({checked:e,disabled:t,...i})=>r.createElement(o.Z,{viewBox:"0 0 16 16",fill:"none",sx:{fill:t?"line":"none"},size:16,...i},r.createElement("circle",{cx:"8",cy:"8",r:"7.5",...t?{fill:"line"}:{stroke:"currentColor"}}),e?r.createElement("circle",{cx:"8",cy:"8",r:"4",fill:"currentColor"}):null),a=r.createElement(s,{checked:!0}),l=r.createElement(s,null),c=r.createElement(s,{checked:!0,disabled:!0}),h=r.createElement(s,{disabled:!0}),d={top:"column",bottom:"column-reverse",left:"row-reverse",right:"row"},u={top:{mt:"minor"},bottom:{mb:"minor"},left:{mr:"xs"},right:{ml:"xs"}},g=(0,r.forwardRef)((({checked:e,children:t,label:i,id:o,onCheckedChange:s,name:g="",value:m,onChange:p,disabled:y=!1,direction:x="right",variant:f,accept:C,alt:b,autoFocus:w,capture:v,form:L,formAction:S,formEncType:E,formMethod:k,formNoValidate:V,formTarget:A,list:T,max:M,maxLength:D,min:I,minLength:_,pattern:P,readOnly:W,required:R,...B},H)=>{i=i||t;const{current:Z}=r.useRef(null!=e),[O,N]=(0,r.useState)(e);Z&&O!==e&&N(e);const F=e=>{const t=e.target.checked;O!==t&&N(t),s&&s(e,t)};return r.createElement(n.Z,{ref:H,tx:"radio",variant:y?"disabled":"default",...B,__css:{"& svg":{color:y?null:O?"primary":"t.disabled"}},onClick:()=>{y||O||(N(!O),p&&p(m))}},r.createElement(n.Z,{as:"label",sx:{display:"flex",flexDirection:d[x],alignItems:"center"}},y?O?c:h:O?a:l,i?r.createElement(n.Z,{...u[x]},i,r.createElement("input",{id:o,disabled:y,style:{clip:"rect(0px,0px,0px,0px)",position:"absolute"},hidden:!0,type:"radio","data-bn-type":"radio",name:g,checked:O,value:m,onChange:F,accept:C,alt:b,autoFocus:w,capture:v,form:L,formAction:S,formEncType:E,formMethod:k,formNoValidate:V,formTarget:A,list:T,max:M,maxLength:D,min:I,minLength:_,pattern:P,readOnly:W,required:R})):r.createElement("input",{disabled:y,style:{clip:"rect(0px,0px,0px,0px)",position:"absolute"},type:"radio","data-bn-type":"radio",name:g,checked:O,value:m,onChange:F})))}));g.__name="Radio";const m={Vertical:{marginKey:"margin-bottom",gap:16,direction:"column"},Horizontal:{marginKey:"margin-right",gap:24,direction:"row"}},p=(0,r.forwardRef)((({children:e,value:t="",name:i,onChange:o,layout:s,...a},l)=>{const c=r.Children.map(e,(e=>r.isValidElement(e)&&"Radio"===(e&&e.type&&e.type.__name)?r.cloneElement(e,{...e.props,onChange:o,name:i,checked:t===e.props.value}):null));if("Horizontal"===s||"Vertical"===s){const e=m[s];return r.createElement(n.Z,{ref:l,...a,__css:{"& > *:not(:last-child)":{[e.marginKey]:e.gap},display:"flex",flexDirection:e.direction}},c)}return r.createElement(n.Z,{ref:l,...a},c)}));g.displayName="Radio";const y=g},44713:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(96832),o=i(86282);const n=(0,r.forwardRef)((({...e},t)=>r.createElement(o.Z,{ref:t,as:"input",type:"range",tx:"forms",variant:"slider",...e,__css:{display:"block",width:"100%",height:4,my:2,cursor:"pointer",appearance:"none",borderRadius:9999,color:"inherit",bg:"gray",":focus":{outline:"none",color:"primary"},"&::-webkit-slider-thumb":{appearance:"none",width:16,height:16,bg:"currentcolor",border:0,borderRadius:9999,variant:"forms.slider.thumb"}}})));n.displayName="Slider";const s=n},49138:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 11V3h8v8H3zm2-6h4v4H5V5zM3 21v-8h8v8H3zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 2h-4v4h4V5zM13 21v-8h8v8h-8zm2-6h4v4h-4v-4z",fill:"currentColor"}))},74698:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{d:"M5 5v14.94h14.94V5H5zm12.94 12.94H7V7h10.94v10.94z",fill:"currentColor"}),r.createElement("path",{d:"M19.94 5H5v14.94h14.94V5zM7 17.94V7h10.94v10.94H7z",fill:"currentColor"}))},74106:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M9.708 18.123a1 1 0 01-1.415 0l-4.589-4.598a.997.997 0 011.411-1.41L9 16l9.473-9.473a1.003 1.003 0 011.42 1.42L9.707 18.123z"}))},43533:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M14.5 10.29a1 1 0 011 1v.353a1 1 0 01-.273.686l-2.5 2.65a1 1 0 01-1.454 0l-2.5-2.65a1 1 0 01-.273-.686v-.353a1 1 0 011-1h5z"}))},99210:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M12 10.586l5.95-5.95a1 1 0 111.414 1.414L13.414 12l5.95 5.95a1 1 0 01-1.414 1.414L12 13.414l-5.95 5.95a1 1 0 01-1.414-1.414l5.95-5.95-5.95-5.95A1 1 0 116.05 4.636l5.95 5.95z"}))},22262:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(96832),o=i(77991),n=i(52123);const s=r.forwardRef(((e,t)=>r.createElement(o.ZP,{ref:t,...e,dir:(0,n.Z)()})))},81913:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(96832),o=i(97565),n=i(86282),s=i(22697),a=i(52123),l=i(23893),c=i(57737),h=i(65839),d=i(4458);const u=r.forwardRef((function({arrow:e=!1,boundary:t,container:i,tip:u,delay:g=0,placement:m,pos:p,children:y,open:x,trigger:f="hover",onClick:C,enablePortal:b=!1,bg:w,scroll:v,resize:L,boxOffset:S=0,arrowPadding:E=0,fallbackPlacements:k,...V},A){m=m||p||"top",m="rtl"===(0,a.Z)()?d.O9[m]:m;const{current:T}=r.useRef(null!=x),[M,D]=r.useState(null),[I,_]=r.useState(null),[P,W]=r.useState(null),R=r.useRef(0),B=r.useRef(),{state:H,styles:Z,attributes:O,update:N}=(0,l.D)(M,I,{placement:m,modifiers:[{name:"eventListeners",options:{scroll:v,resize:L}},{name:"arrow",options:{element:P,padding:E}},{name:"offset",options:{offset:[S||0,d.SG]}},{name:"computeStyles",options:{adaptive:!1,gpuAcceleration:!1}},{name:"flip",options:{boundary:t,fallbackPlacements:k}}]}),F=r.useMemo((()=>(0,d.BP)(H?.placement)),[H?.placement]),[K,U]=r.useState(x);T&&(f=void 0,x!==K&&U(x)),r.useEffect((()=>()=>{B.current&&window.clearTimeout(B.current),B.current=0}),[K]);const $=(0,o.Z)(D,A),z="click"===f?e=>{B.current&&window.clearTimeout(B.current),R.current=0,B.current=0,U(!K),N&&N(),C&&C(e)}:C,X="hover"===f?e=>{!K&&window.performance.now()-R.current>500&&(B.current=g?B.current||window.setTimeout((()=>U(!0)),g):(U(!0),0),N&&N(),R.current=window.performance.now()),V.onMouseMove&&V.onMouseMove(e)}:V.onMouseMove,G="hover"===f?e=>{B.current&&window.clearTimeout(B.current),R.current=0,B.current=0,U(!1),N&&N(),V.onMouseLeave&&V.onMouseLeave(e)}:V.onMouseLeave;return r.createElement(n.Z,{ref:$,...V,__css:{display:"inline-block",position:"relative"},onClick:z,onMouseMove:X,onMouseLeave:G},r.createElement(c.ZP,{in:K,timeout:d.x9},(t=>i||b?r.createElement(s.ZP,{container:i},r.createElement(h.Z,{open:!0,arrow:e,arrowStyle:Z.arrow,style:{...Z.popper,...d.hy,...F[t]},bg:w,arrowRef:W,ref:_,...O.popper},u)):r.createElement(h.Z,{open:!0,arrow:e,arrowStyle:Z.arrow,style:{...Z.popper,...d.hy,...F[t]},bg:w,arrowRef:W,ref:_,...O.popper},u))),y)}))},26312:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(2237);const n=(e,t)=>{const{t:i,i18n:n}=(0,o.$)(t),s=(0,r.useCallback)(((t,r={})=>{const o=[e,t].filter((e=>e)).join("-");return i(o,r).trim()||("string"==typeof r?r:r.defaultValue)}),[i,e]);return{i18n:n,t:i,getI18n:s}}},47176:(e,t,i)=>{i.d(t,{Fg:()=>h});var r=i(96832),o=i(74958);const n=e=>e.cookies||{},s="dark",a="light",l="theme",c="shouldResetTradingView",h=()=>{const{cookies:e,saveCookie:t}=(()=>{const e=(0,r.useRef)(null),t=(0,o.I0)();return e.current=(0,o.v9)(n),{cookies:e.current,saveCookie:(0,r.useCallback)(((i,r)=>{const o="function"==typeof r?r(e.current[i]):r;t.cookies.save({key:i,value:o})}),[])}})(),i=(0,r.useCallback)((()=>JSON.parse(localStorage.getItem(c)||"0")),[]),h=(0,r.useCallback)((()=>{const e=i();localStorage.setItem(c,JSON.stringify(e+1))}),[i]);return{isLight:e[l]!==s,shouldResetTradingViewKey:c,getThemeCounter:i,incThemeCounter:h,toggleTheme:(0,r.useCallback)((()=>{t(l,(e=>e!==a?a:s)),h()}),[h])}}},4590:(e,t,i)=>{i.r(t),i.d(t,{OpeningCountdown:()=>m,default:()=>p});var r=i(96832),o=i(35795),n=i(72249),s=i(86282),a=i(49247),l=i(51934);const c=({children:e})=>r.createElement(n.Z,{sx:{justifyContent:"center",position:"relative",mr:"4px",width:"40px",height:"54px",borderRadius:"4px",overflow:"hidden"}},r.createElement(a.Z,{sx:{color:"t.primary",fontSize:"40px",position:"relative",zIndex:100}},e),r.createElement(s.Z,{sx:{position:"absolute",width:"100%",height:"26px",top:0,left:0,background:"#F0B90B",opacity:.1}}),r.createElement(s.Z,{sx:{position:"absolute",width:"100%",height:"26px",bottom:0,left:0,background:"#F0B90B",opacity:.1}})),h=({digits:e})=>r.createElement(r.Fragment,null,e.split("").map(((e,t)=>r.createElement(c,{key:t},e)))),d=()=>r.createElement(a.Z,{sx:{fontSize:"24px",color:"t.secondary",mx:2}},":"),u=36e5,g=({hourglassImagePath:e,backgroundImagePath:t,backgroundShinyImagePath:i,timeLeft:c,symbol:g,willOpenInText:m})=>{const[p,{width:y}]=(0,o.Z)(),x=(0,r.useMemo)((()=>y+120<=500),[y]),f=(C=c,[Math.floor(C/u),Math.floor(C%u/6e4),Math.floor(C%6e4/1e3)].map((e=>Math.min(e,999).toString().padStart(2,"0"))));var C;return r.createElement(n.Z,{ref:p,sx:{width:"100%",height:"100%",justifyContent:"center",px:"60px",background:`url(${t}) no-repeat`,backgroundSize:"auto 90%",backgroundPosition:"right top"}},r.createElement(n.Z,{sx:{maxWidth:"661px",alignItems:"center",justifyContent:"space-between",flex:1,background:`url(${i}) no-repeat`,backgroundSize:"45%",backgroundPosition:"right center"}},r.createElement(s.Z,null,r.createElement(a.Z,{sx:{fontSize:32,color:"t.primary"}},g),r.createElement(a.Z,{sx:{fontSize:24,fontWeight:200,color:"t.primary"}},m),r.createElement(n.Z,{sx:{mt:5,alignItems:"center"}},f.map(((e,t)=>r.createElement(r.Fragment,{key:t},r.createElement(h,{digits:e}),t!==f.length-1&&r.createElement(d,null)))))),r.createElement(s.Z,{sx:{display:x?"none":"block"}},r.createElement(l.Z,{src:e,sx:{width:"100%",height:"100%",maxWidth:"192px",maxHegiht:"192px"}}))))},m=e=>{const t=(({openTime:e,onReady:t,...i})=>{const[o,n]=(0,r.useState)(e-Date.now());return(0,r.useEffect)((()=>{const t=setInterval((()=>{n(e-Date.now())}),100);return()=>clearInterval(t)}),[e]),(0,r.useEffect)((()=>{o<=0&&t()}),[o]),{...i,timeLeft:o}})(e);return r.createElement(g,{...t})},p=m},27166:(e,t,i)=>{var r;i.d(t,{l:()=>r}),function(e){e[e.ExtraSmall=0]="ExtraSmall",e[e.Small=1]="Small",e[e.Small2=2]="Small2",e[e.Medium=3]="Medium"}(r||(r={}))},74730:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(96832),o=i(59487),n=i(26312);const s=r.lazy((()=>i.e(503).then(i.bind(i,80503)))),a=({isReady:e,children:t,...i})=>e?t:i.openTime?r.createElement(r.Suspense,{fallback:null},r.createElement(s,{...i})):null,l=({symbol:e,symbolDisplay:t,hostAddress:i,themeName:s,checkTradeStatus:l,children:c})=>{const{getI18n:h}=(0,n.Z)("trd-chart","trade-ui"),[d,u]=(0,r.useState)(!0),[g,m]=(0,r.useState)(Date.now()),[p,y]=(0,r.useState)(0);(0,r.useEffect)((()=>{(async()=>{const{isReadyToTrade:t,openTime:i}=await l(e);u(t),m(i)})()}),[l,e]),(0,o.Z)((()=>{const e=g-Date.now();y(Math.max(0,e)),u(e<=0)}),g-Date.now()>0?500:null);const x=(0,r.useMemo)((()=>`${i}/static/images/trade-next-ui/${s}-hourglass.gif`),[i,s]),f=(0,r.useMemo)((()=>`${i}/static/images/trade-next-ui/countdown-bg-${s}.svg`),[i,s]),C=(0,r.useMemo)((()=>`${i}/static/images/trade-next-ui/countdown-shiny.svg`),[i]),b=(0,r.useMemo)((()=>h("will-be-open",{defaultValue:"will be open for trading in"})||""),[h]);return r.createElement(a,{hourglassImagePath:x,backgroundImagePath:f,backgroundShinyImagePath:C,willOpenInText:b,timeLeft:p,isReady:d,openTime:g,symbol:t},c)}},48330:(e,t,i)=>{i.d(t,{Z:()=>g});var r=i(96832),o=i(1138),n=i(35795),s=i(12191),a=i(72249),l=i(86282),c=i(73246);const h=()=>r.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2e3}},r.createElement(c.Z,{sx:{zIndex:100}})),d=(0,r.forwardRef)((({headerSx:e,headerSlot:t,showLoading:i,children:o},n)=>r.createElement(a.Z,{sx:{height:"100%",flexDirection:"column"},ref:n},r.createElement(l.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"newLine",...e}},t),r.createElement(l.Z,{sx:{height:"100%",position:"relative"},className:"draggableCancel"},o,i&&r.createElement(h,null)))));var u=i(79025);const g=({namespace:e,useMiniHeader:t,headerSlot:i,children:a})=>{const l=(0,u.createStore)(e),[c]=l(u.getLoading),[,h]=l(u.getLayoutWidth),{isMobile:g}=(0,o.F)(),[m,{width:p}]=(0,n.Z)(),y=(0,s.Z)(p,100);return(0,r.useEffect)((()=>h(y)),[y,h]),r.createElement(d,{ref:m,headerSx:{minHeight:!t&&g?"48px":"40px",paddingLeft:g||t?0:"sm",paddingRight:g?0:"sm"},showLoading:c,headerSlot:i},a)}},30923:(e,t,i)=>{i.d(t,{Zl:()=>M,vb:()=>T,ZP:()=>D});var r=i(96832),o=i(86282),n=i(75343),s=i(27166);const a=[n.DisplayIntervals.Time,n.DisplayIntervals["1m"],n.DisplayIntervals["3m"],n.DisplayIntervals["5m"],n.DisplayIntervals["15m"],n.DisplayIntervals["30m"],n.DisplayIntervals["1h"],n.DisplayIntervals["2h"],n.DisplayIntervals["4h"],n.DisplayIntervals["6h"],n.DisplayIntervals["8h"],n.DisplayIntervals["12h"],n.DisplayIntervals["1d"],n.DisplayIntervals["3d"],n.DisplayIntervals["1w"],n.DisplayIntervals["1M"]],l=r.lazy((()=>i.e(8296).then(i.bind(i,98296)))),c=r.lazy((()=>i.e(794).then(i.bind(i,794)))),h=r.lazy((()=>i.e(2782).then(i.bind(i,12782)))),d=r.lazy((()=>i.e(195).then(i.bind(i,90195)))),u=r.lazy((()=>i.e(3384).then(i.bind(i,73384)))),g=r.lazy((()=>i.e(8692).then(i.bind(i,18692)))),m=r.lazy((()=>i.e(1286).then(i.bind(i,11286)))),p=r.lazy((()=>i.e(8537).then(i.bind(i,28537)))),y=r.lazy((()=>i.e(6962).then(i.bind(i,96962)))),x=r.lazy((()=>i.e(4232).then(i.bind(i,44232)))),f=r.lazy((()=>i.e(2548).then(i.bind(i,52548)))),C=r.lazy((()=>i.e(7833).then(i.bind(i,27833)))),b=r.lazy((()=>i.e(6839).then(i.bind(i,76839)))),w=r.lazy((()=>i.e(2021).then(i.bind(i,22021)))),v=r.lazy((()=>i.e(8629).then(i.bind(i,48629)))),L=r.lazy((()=>i.e(7167).then(i.bind(i,87167)))),S=r.lazy((()=>i.e(5999).then(i.bind(i,85999)))),E=r.lazy((()=>Promise.resolve().then(i.bind(i,6093)))),k=({namespace:e,symbol:t,getSymbolDisplayName:i,intervalFilterType:n,generateToolbar:k,children:V})=>{const A=(0,r.useMemo)((()=>{switch(n){case s.l.ExtraSmall:return l;case s.l.Small:return c;case s.l.Small2:return h;default:return d}}),[n]),T=(0,r.useMemo)((()=>i(t)),[i,t]),M=(0,r.useCallback)((t=>r.createElement(o.Z,{sx:{ml:"0px !important"}},r.createElement(r.Suspense,{fallback:null},r.createElement(A,{namespace:e,intervalOptions:t.intervalOptions||a})))),[A,e]),D=(0,r.useCallback)((()=>r.createElement(r.Suspense,{fallback:null}," ",r.createElement(u,{namespace:e})," ")),[e]),I=(0,r.useCallback)((t=>r.createElement(r.Suspense,{fallback:null},r.createElement(g,{namespace:e,options:t.options,isFullscreen:t.isFullscreen,orderHistoryTooltip:t.orderHistoryTooltip}))),[e]),_=(0,r.useCallback)((()=>r.createElement(r.Suspense,{fallback:null},r.createElement(m,{namespace:e}))),[e]),P=(0,r.useCallback)((()=>r.createElement(r.Suspense,{fallback:null},r.createElement(p,{namespace:e}))),[e]),W=(0,r.useCallback)((()=>r.createElement(r.Suspense,{fallback:null},r.createElement(y,{namespace:e}))),[e]),R=(0,r.useCallback)((()=>r.createElement(r.Suspense,{fallback:null},r.createElement(x,{namespace:e}))),[e]),B=(0,r.useCallback)((t=>r.createElement(r.Suspense,{fallback:null},r.createElement(f,{namespace:e,showChange:t.showChange,symbolDisplayName:T}))),[e,T]),H=(0,r.useCallback)((t=>r.createElement(o.Z,{sx:{"&:not(:last-child)":{mr:"sm"}}},r.createElement(r.Suspense,{fallback:null},r.createElement(C,{namespace:e,tabKeys:t.tabKeys})))),[e]),Z=(0,r.useCallback)((e=>r.createElement(r.Suspense,{fallback:null},r.createElement(b,{expanded:e.expanded,onClick:e.onClick}))),[]),O=(0,r.useCallback)((()=>r.createElement(r.Suspense,{fallback:null},r.createElement(w,{namespace:e}))),[e]),N=(0,r.useCallback)((e=>r.createElement(r.Suspense,{fallback:null},r.createElement(v,{onResume:e.onResume}))),[]),F=(0,r.useCallback)((e=>r.createElement(r.Suspense,{fallback:null},r.createElement(L,{onRemove:e.onRemove}))),[]),K=(0,r.useCallback)((t=>r.createElement(r.Suspense,{fallback:null},r.createElement(S,{namespace:e,getSymbolDisplayName:i,onSymbolChange:t.onSymbolChange}))),[i,e]),U=(0,r.useCallback)((t=>r.createElement(r.Suspense,{fallback:null},r.createElement(E,{namespace:e,trigger:t.trigger,orderMarkOptions:t.orderMarkOptions,enablePriceTypeSelection:t.enablePriceTypeSelection,orderHistoryTooltip:t.orderHistoryTooltip}))),[e]),$=k({namespace:e,components:{intervalFilter:M,indicator:D,orderMark:I,chartStyleDropdown:_,priceDropdown:P,compareButton:W,cameraButton:R,miniSymbolStatus:B,tabs:H,fullscreen:Z,chartModeDropdown:O,resumeWindow:N,closeButton:F,symbolTabs:K,settingsDropdown:U}});return r.createElement(r.Fragment,null,V($))},V=r.lazy((()=>i.e(949).then(i.bind(i,10949)))),A=r.lazy((()=>i.e(812).then(i.bind(i,80812))));var T;!function(e){e[e.Medium=0]="Medium",e[e.Small=1]="Small"}(T||(T={}));const M=({namespace:e,symbol:t,getSymbolDisplayName:i,generateToolbar:o,intervalFilterType:n,headerType:s})=>r.createElement(r.Suspense,{fallback:null},r.createElement(k,{symbol:t,namespace:e,intervalFilterType:n,generateToolbar:o,getSymbolDisplayName:i},(({medium:t,small:i})=>s===T.Small?r.createElement(V,{namespace:e,head:i.head}):r.createElement(A,{...t})))),D=M},6093:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var r=i(96832),o=i(26312),n=i(45313),s=i(82373),a=i(72249),l=i(49247),c=i(86282),h=i(76041),d=i(77991),u=i(81913),g=i(62493),m=i(71245),p=i(50900),y=i(44409);const x=({checked:e,onClick:t,text:i,tooltip:o})=>r.createElement(n.Z,{sx:{cursor:"pointer"},onClick:t},r.createElement(s.Z,{checked:e}),r.createElement(a.Z,{sx:{alignItems:"center","& > *":{":not(:last-child)":{mr:"xxs"}}}},r.createElement(l.Z,{sx:{color:"t.primary",fontSize:"xs"}},i),o&&r.createElement(u.Z,{enablePortal:!0,arrow:!0,placement:"top",tip:o,sx:{display:"flex",alignItems:"center"}},r.createElement(g.Z,{size:16,color:"t.third"})))),f=({title:e,children:t})=>r.createElement(a.Z,{sx:{flexDirection:"column","& > *":{":not(:last-child)":{mb:"sm"}}}},r.createElement(l.Z,{sx:{color:"t.secondary",fontSize:"xs",fontWeight:"medium"}},e),t),C=()=>r.createElement(c.Z,{sx:{width:"100%",height:"1px",bg:"line",my:"sm"}}),b=({namespace:e,trigger:t,orderMarkOptions:i,enablePriceTypeSelection:n,orderHistoryTooltip:s,size:c=12,iconSx:u})=>{const{getI18n:g}=(0,o.Z)("","trade-ui"),b=(0,r.useMemo)((()=>g("trd-chart-kline-settings",{defaultValue:"K-Line Settings"})||""),[g]),w=(0,r.useMemo)((()=>g("trd-chart-data-source-title",{defaultValue:"Select the Data Source of K-Line"})||""),[g]),{values:v,options:L,onClickItem:S}=(0,p.u)({namespace:e,options:i,orderHistoryTooltip:s}),{priceType:E,options:k,onClickItem:V}=(0,y.w)({namespace:e}),A={title:b,children:L.map((({value:e,text:t,tooltip:i})=>r.createElement(x,{key:e,checked:v.includes(e),onClick:t=>{t.preventDefault(),t.stopPropagation(),S(e)},text:t,tooltip:i})))},T={title:w,children:k.map((({value:e,text:t})=>r.createElement(a.Z,{key:e,onClick:e=>{e.stopPropagation(),e.preventDefault()}},r.createElement(h.ZP,{value:e,checked:E===e,onChange:()=>V(e),label:r.createElement(l.Z,{sx:{color:"t.primary",fontSize:"xs",cursor:"pointer"}},t)}))))},M=n?[A,T]:[A],D=r.createElement(a.Z,{sx:{bg:"popupBg",p:"sm",borderRadius:"4px",boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)",color:"white",flexDirection:"column"}},M.map((({title:e,children:t},i)=>r.createElement(r.Fragment,null,r.createElement(f,{title:e},t),i!==M.length-1?r.createElement(C,null):null))));return r.createElement(d.ZP,{enablePortal:!0,trigger:t,overlay:D},r.createElement(m.Z,{size:c,sx:{flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"},...u}}))}},50900:(e,t,i)=>{i.d(t,{u:()=>s});var r=i(96832),o=i(26312),n=i(75343);const s=({namespace:e,options:t,orderHistoryTooltip:i})=>{const s=(0,n.createStore)(e),[,,a]=s(n.getShowLimitOrder),[,,l]=s(n.getShowPositionOrder),[,,c]=s(n.getShowExecutionOrder),h=s(n.getOrderMarkOptions),{getI18n:d}=(0,o.Z)("","trade-ui"),u=(0,r.useMemo)((()=>d("trd-layout-tabOpenOrder",{defaultValue:"Open Orders"})||""),[d]),g=(0,r.useMemo)((()=>d("trd-layout-tabPositions",{defaultValue:"Positions"})||""),[d]),m=(0,r.useMemo)((()=>d("trd-layout-tabOrderHistory",{defaultValue:"Order History"})||""),[d]),p=(0,r.useMemo)((()=>d("trd-chart-order-history-tooltip",{defaultValue:"Display the last 500 executed orders"})||""),[d]),y=(0,r.useMemo)((()=>({value:n.OrderMarkOption.Open,text:u})),[u]),x=(0,r.useMemo)((()=>({value:n.OrderMarkOption.Position,text:g})),[g]),f=(0,r.useMemo)((()=>i||p),[p,i]),C=(0,r.useMemo)((()=>({value:n.OrderMarkOption.Execution,text:m,tooltip:f})),[m,f]);return{values:h,options:(0,r.useMemo)((()=>t.map((e=>{switch(e){case n.OrderMarkOption.Open:return y;case n.OrderMarkOption.Position:return x;case n.OrderMarkOption.Execution:return C;default:return{value:n.OrderMarkOption.Unkonwn,text:""}}}))),[C,y,t,x]),onClickItem:(0,r.useCallback)((e=>{switch(e){case n.OrderMarkOption.Open:a();break;case n.OrderMarkOption.Position:l();break;case n.OrderMarkOption.Execution:c()}}),[c,a,l])}}},44409:(e,t,i)=>{i.d(t,{w:()=>s});var r=i(96832),o=i(26312),n=i(75343);const s=({namespace:e})=>{const{getI18n:t}=(0,o.Z)("trd-chart","trade-ui"),i=(0,n.createStore)(e),[s,a]=i(n.getPriceType),l=(0,r.useMemo)((()=>t("indexPrice",{defaultValue:"Index Price"})||""),[t]),c=(0,r.useMemo)((()=>t("markPrice",{defaultValue:"Mark Price"})||""),[t]),h=(0,r.useMemo)((()=>t("lastPrice",{defaultValue:"Last Price"})||""),[t]);return{priceType:s,options:(0,r.useMemo)((()=>[{text:l,value:n.PriceType.Index},{text:c,value:n.PriceType.Mark},{text:h,value:n.PriceType.Last}]),[l,c,h]),onClickItem:(0,r.useCallback)((e=>a(e)),[a])}}},18101:(e,t,i)=>{i.d(t,{k:()=>Xl});var r={};i.r(r),i.d(r,{ExtraSmall:()=>F,Medium:()=>_,Small:()=>R,Small2:()=>O});var o={};i.r(o),i.d(o,{Medium:()=>q,Small:()=>j});var n={};i.r(n),i.d(n,{Name:()=>re,PriceDrop:()=>ne,PriceFlat:()=>se,PriceRise:()=>oe,Status:()=>ae});var s={};i.r(s),i.d(s,{ChartStyleDropdown:()=>Me,ChartStyles:()=>Ae,MultiChartDropdown:()=>be,MultiChartDropdownType:()=>xe,OrderMarkDropdown:()=>pe,TextDropdown:()=>ye,UniversalDropdown:()=>B});var a={};i.r(a),i.d(a,{Plain:()=>Ie,SymbolTab:()=>le});var l={};i.r(l),i.d(l,{Area:()=>ke,Bar:()=>we,Baseline:()=>Ve,Camera:()=>Pe,Candle:()=>ve,Close:()=>ie,Compare:()=>Re,Fullscreen:()=>Ze,HeikinAshi:()=>Se,HollowCandle:()=>Le,Indicator:()=>Ne,Kagi:()=>ze,Line:()=>Ee,LineBreak:()=>$e,Logo:()=>ee,OrderMark:()=>Fe,PointAndFugure:()=>Xe,Range:()=>Ge,Renko:()=>Ue,ResumeWindow:()=>Ke});var c={};i.r(c),i.d(c,{MiniMultiChartPrompt:()=>Ca});var h={};i.r(h),i.d(h,{TVResolutionToTrueInterval:()=>el,TradingView:()=>Qa,TrueIntervalToTVResolution:()=>Ja,findLCMInterval:()=>il,findMaximumInterval:()=>rl,intervalToMillseconds:()=>tl});var d={};i.r(d),i.d(d,{createStore:()=>Pl,getDepthScale:()=>Wl});var u={};i.r(u),i.d(u,{createStore:()=>$l,getOrderHistory:()=>zl});var g=i(96832),m=i(72249),p=i(37404);const y=g.forwardRef((({active:e,hidden:t=!1,...i},r)=>t?null:g.createElement(m.Z,{...i,sx:{alignItems:"center",justifyContent:"center",color:e?"t.yellow":"t.third",cursor:"pointer",fontSize:0,lineHeight:"16px",p:"minor",borderRadius:"2px","&:hover":{color:"t.yellow"},...i.sx},ref:r}))),x=({text:e,value:t,active:i,onClick:r,onObscured:o,onRevealed:n})=>{const s=(0,g.useRef)(null),a=(0,p.Z)(s,{root:null,rootMargin:"0px",threshold:1});return(0,g.useEffect)((()=>{a&&(a.intersectionRatio<1?o(t):n(t))}),[a]),g.createElement(y,{id:t,active:i,onClick:r,ref:s,sx:{mr:2}},e)};var f=i(43533),C=i(22262),b=i(49247);const w=({dropdownExpanded:e,onDropdownMouseEnter:t,onDropdownMouseLeave:i,onDropdownButtonClick:r,isDropdownButtonActive:o,dropdownText:n,overlay:s})=>g.createElement(C.Z,{open:e,onMouseEnter:t,onMouseLeave:i,overlay:s,sx:{position:"relative",height:"24px",flex:"1 0 auto",mr:2,"&:hover":{".interval-expand-btn":{color:"t.primary",transform:"rotate(180deg)"}}},enablePortal:!0},g.createElement(y,{onClick:r,sx:{width:"100%",height:"100%"},active:o},g.createElement(m.Z,{sx:{alignItems:"center",justifyContent:"center"}},n&&g.createElement(b.Z,null,n),g.createElement(f.Z,{className:"interval-expand-btn",size:3,sx:{color:"t.third",transition:"transform .2s, color .2s","&:not(:first-of-type)":{marginLeft:"4px"}}}))));var v=i(45313),L=i(86282),S=i(74106);const E=({onChange:e,value:t,checked:i,checkboxSize:r=13})=>g.createElement(L.Z,{sx:{position:"absolute",top:`-${r/2}px`,right:`-${r/2}px`}},g.createElement("input",{type:"checkbox",value:t,onChange:e,hidden:!0}),g.createElement(m.Z,{sx:{alignItems:"center",justifyContent:"center",width:"16px",height:"16px",borderRadius:"100%",background:e=>i?e.colors.primary:e.colors.t.placeholder}},g.createElement(S.Z,{color:"modalBg",size:r})));var k=i(83065);const V=({showCheckbox:e,checked:t,value:i,onChange:r,onClick:o,children:n,className:s="interval-option"})=>g.createElement(v.Z,{className:s,onClick:o,alignItems:"center",justifyContent:"center",sx:{fontWeight:"normal",fontSize:"14px",lineHeight:1.43,color:"t.primary",width:"60px",height:"24px",position:"relative",transition:"background-color 0.2s ease 0s",cursor:"pointer",bg:e=>t?(0,k.D)(e.colors.primary,.15):(0,k.D)(e.colors.line,.5),"&:hover":{bg:e=>t?(0,k.D)(e.colors.primary,.3):e.colors.line},borderRadius:"2px"}},g.createElement(b.Z,{sx:{color:t?"t.yellow":"t.primary",fontSize:"12px"}},n),e&&g.createElement(E,{onChange:r,value:i,checked:t}));var A=i(10600);const T=({children:e,onClick:t})=>g.createElement(A.Z,{sz:"s",sx:{lineHeight:"16px",fontSize:12,wordBreak:"keep-all",minHeight:"24px",border:"none",color:"primary",fontWeight:"normal",padding:"0",backgroundImage:"none",bg:"transparent","&:hover:not(:disabled):not(:active):not(.inactive)":{backgroundImage:"none"},"&:active:not(:disabled):not(.inactive)":{backgroundColor:"transparent"}},onClick:t},e);function M({options:e,onClickEdit:t,editText:i,title:r}){return g.createElement(m.Z,{sx:{bg:"modalBg",marginTop:"8px",flexDirection:"column",boxShadow:"0px 0px 1px rgba(20, 21, 26, 0.1), 0px 7px 14px rgba(71, 77, 87, 0.08), 0px 3px 6px rgba(20, 21, 26, 0.08)",borderRadius:"4px",padding:"12px 16px 2px",width:"300px"}},g.createElement(m.Z,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"}},g.createElement(b.Z,{sx:{color:"t.third",fontSize:"12px"}},r),g.createElement(T,{onClick:t},i)),g.createElement(m.Z,{sx:{flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between","&>.interval-option":{marginBottom:"10px"}}},e.map((({text:e,value:t,showCheckbox:i,checked:r,onClick:o,onChange:n})=>g.createElement(V,{key:t,value:t,checked:r,showCheckbox:i,onClick:o,onChange:n},e)))))}const D=({dropdownExpanded:e,onDropdownMouseEnter:t,onDropdownMouseLeave:i,onDropdownButtonClick:r,isDropdownButtonActive:o,dropdownText:n,options:s,onClickEdit:a,editText:l,title:c,displayedOptions:h})=>g.createElement(m.Z,{height:24},g.createElement(m.Z,{sx:{flexWrap:"wrap",overflow:"hidden",justifyContent:"space-between"}},h.map((({text:e,value:t,active:i,onClick:r,onObscured:o,onRevealed:n})=>g.createElement(x,{key:t,text:e,value:t,active:i,onClick:r,onObscured:o,onRevealed:n})))),g.createElement(w,{dropdownExpanded:e,onDropdownMouseEnter:t,onDropdownMouseLeave:i,onDropdownButtonClick:r,isDropdownButtonActive:o,dropdownText:n,overlay:g.createElement(M,{options:s,onClickEdit:a,editText:l,title:c})})),I=()=>null,_=e=>{const t=(({options:e,value:t,isEditing:i,onClickEdit:r,title:o,saveText:n,editText:s,dropdownExpanded:a,onDropdownMouseEnter:l,onDropdownMouseLeave:c,onDropdownButtonClick:h,onClickItem:d,...u})=>{const[m,p]=(0,g.useState)(e),[y,x]=(0,g.useState)({});(0,g.useEffect)((()=>p(e)),[e]);const f=m.map((e=>({text:e.text,value:e.text,checked:e.selected,showCheckbox:i,onClick:i?I:()=>d(e.value),onChange:()=>p((t=>t.map((t=>({...t,selected:t.value===e.value?!t.selected:t.selected})))))}))),C=e.filter((e=>e.selected)).map((e=>({text:e.text,value:e.value,active:e.value===t,onClick:()=>d(e.value),onObscured:e=>{x((t=>{const i={...t};return i[e]=!0,i}))},onRevealed:e=>{x((t=>{const i={...t};return i[e]=!1,i}))}}))),b=e.find((e=>e.value===t&&(!e.selected||y[e.value])));return{options:f,displayedOptions:C,editText:i?n:s,dropdownText:b?.text||"",dropdownExpanded:a,onDropdownMouseEnter:l,onDropdownMouseLeave:t=>{p(e),c(t)},onDropdownButtonClick:()=>h(b?.value||""),title:o,isDropdownButtonActive:!!b,onClickEdit:()=>r(m),...u}})(e);return g.createElement(D,{...t})};var P=i(77991);const W=({isActive:e,children:t,...i})=>g.createElement(m.Z,{width:.2,...i,sx:{alignItems:"center",justifyContent:"center",py:"minor",color:e?"t.yellow":"t.primary",textAlign:"center",cursor:"pointer",...i.sx}},g.createElement(b.Z,{sx:{fontSize:1}},t)),R=({options:e,value:t,showDropdown:i,onMouseEnterDropdwon:r,onMouseLeaveDropdown:o,onClickDropdownButton:n,onClickItem:s})=>{const a=e.slice(1),l=a.find((e=>e.value===t))||a[0],c=g.createElement(m.Z,{sx:{flexWrap:"wrap",p:"md",bg:"modalBg",mt:"minor",py:"xs",borderRadius:"2px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.15)"}},a.map((e=>g.createElement(W,{isActive:e.value===t,key:e.value,onClick:()=>s(e.value)},e.text))));return g.createElement(m.Z,null,g.createElement(y,{active:e[0].value===t,onClick:()=>s(e[0].value),sx:{minWidth:"32px"}},e[0].text),g.createElement(P.ZP,{open:i,onMouseEnter:r,onMouseLeave:o,overlay:c,enablePortal:!0},g.createElement(y,{active:!!a.find((e=>e.value===t)),onClick:n,sx:{ml:"minor",minWidth:"32px"}},l.text,g.createElement(f.Z,{sx:{transform:"scale(1.8)"},size:8}))))},B=({options:e,value:t,showArrowIcon:i=!1,onClickDropdownButton:r,overlay:o,...n})=>{const s=e.find((e=>e.value===t));return g.createElement(P.ZP,{...n,enablePortal:!0,overlay:o({option:s,options:e}),sx:{cursor:"pointer",minWidth:"auto","&:hover":{".interval-expand-btn":{color:"t.primary",transform:"rotate(180deg)"}},...n.sx}},g.createElement(m.Z,{onClick:r,sx:{minWidth:"auto",alignItems:"center",justifyContent:"center"}},s?.display,i&&g.createElement(f.Z,{className:"interval-expand-btn",size:3,sx:{color:"t.third",transition:"transform .2s, color .2s","&:not(:first-of-type)":{ml:"minor"}}})))},H=({active:e,onClick:t,children:i,...r})=>g.createElement(m.Z,{...r,onClick:t,sx:{alignItems:"center",justifyContent:"center",borderRadius:"2px",bg:e?"line":"bg3",color:"t.primary",fontSize:"xs",cursor:"pointer",":hover":{bg:"line"},...r.sx}},i),Z=({children:e,...t})=>g.createElement(L.Z,{...t,sx:{display:"grid",gridTemplateColumns:"repeat(5, 60px)",gridTemplateRows:"repeat(4, 24px)",gridGap:"10px",bg:"popupBg",shadow:"0 2 16px rgba(0,0,0,.25)",p:"sm",...t.sx}},e),O=({onClickItem:e,options:t,...i})=>{const r=t.map((t=>({value:t.value,display:g.createElement(m.Z,{sx:{color:"t.third",fontSize:"xs",alignItems:"center"}},t.text),children:g.createElement(H,{key:t.value,active:t.value===i.value,onClick:()=>e(t.value)},t.text)})));return g.createElement(B,{...i,showArrowIcon:!0,options:r,overlay:()=>g.createElement(Z,{sx:i.overlaySx||{}},r.map((e=>e.children)))})},N=({isActive:e,children:t,...i})=>g.createElement(m.Z,{...i,sx:{alignItems:"center",justifyContent:"center",py:"minor",color:e?"t.yellow":"t.primary",...i.sx}},t),F=({options:e,value:t,isDropdownActive:i,showDropdown:r,onClickDropdownButton:o,onClickItem:n})=>{const s=e.find((e=>e.value===t));return g.createElement(P.ZP,{open:r,isFixed:!0,placement:"bottom-start",enablePortal:!0,sx:{width:"100%"},overlay:g.createElement(m.Z,{sx:{flexWrap:"wrap",p:"xs",bg:"modalBg",mt:"minor",width:300}},e.map((e=>g.createElement(N,{key:e.value,isActive:e.value===t,onClick:()=>n(e.value),width:.2,sx:{textAlign:"center",padding:"6px 0 6px 0"}},g.createElement(b.Z,{fontSize:1},e.text)))))},g.createElement(y,{active:i,onClick:o},g.createElement(b.Z,{sx:{fontSize:1}},s?.text),g.createElement(f.Z,{sx:{transform:"scale(1.8)"},size:12})))};var K=i(4590);const U=({isReady:e,children:t,...r})=>{if(e)return t;if(r.openTime){const e=g.lazy((()=>Promise.resolve().then(i.bind(i,4590))));return g.createElement(g.Suspense,{fallback:()=>null},g.createElement(e,{...r}))}return null};var $=i(73246);const z=()=>g.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:100}},g.createElement($.Z,{sx:{zIndex:100}})),X=(0,g.forwardRef)((({height:e="100%",headerHeight:t,headerSlot:i,showLoading:r,children:o},n)=>g.createElement(m.Z,{sx:{height:e,flexDirection:"column"},ref:n},g.createElement(L.Z,{sx:{height:t,flex:"0 0 auto"}},i),g.createElement(L.Z,{sx:{height:"100%",position:"relative"},className:"draggableCancel"},o,r&&g.createElement(z,null))))),G=(0,g.forwardRef)((({countdownProps:e,layoutProps:t,children:i},r)=>g.createElement(U,{...e},g.createElement(X,{...t,ref:r},i)))),Y=({isActive:e,children:t,...i})=>g.createElement(m.Z,{...i,sx:{alignItems:"center",justifyContent:"center",py:"minor",color:e?"t.yellow":"t.primary",...i.sx}},t),j=({children:e,indicatorText:t,depthText:i,onClickIndicator:r,onClickDepth:o,isDepthActive:n})=>g.createElement(m.Z,{sx:{justifyContent:"space-between",alignItems:"center",textAlign:"center",py:"xs"}},g.createElement(Y,{isActive:!1,sx:{flex:1,height:32}},e),g.createElement(Y,{isActive:!1,onClick:r,sx:{py:0,flex:1,height:32}},g.createElement(b.Z,{sx:{fontSize:1,textAlign:"center",padding:"8px",width:"100%"}},t)),g.createElement(Y,{isActive:n,onClick:o,sx:{py:0,flex:1,height:32}},g.createElement(b.Z,{sx:{fontSize:1}},i))),q=({head:e,mid:t,tail:i,useDraggableHandle:r=!1,sx:o})=>g.createElement(m.Z,{className:"focus-area",sx:{height:40,justifyContent:"space-between",py:"minor",px:"sm",borderBottom:"1px solid",borderBottomColor:"newLine",...o}},g.createElement(m.Z,{sx:{justifyContent:"space-between",alignItems:"center",py:"minor",maxWidth:"55%","& > *:not(:first-of-type)":{ml:"sm"}}},e),g.createElement(m.Z,{className:r?"draggableHandle":"",sx:{flex:1,minWidth:"20px",alignItems:"center",justifyContent:"center","& > *:not(:first-of-type)":{ml:"sm"}}},t),g.createElement(m.Z,{sx:{alignItems:"center",justifyContent:"flex-end","& > *:not(:first-of-type)":{ml:"sm"}}},i)),Q=({resetErrorBoundary:e,mainText:t,btnText:i})=>g.createElement(m.Z,{sx:{width:"100%",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"}},g.createElement(b.Z,{fontSize:3,color:"t.primary"},t),g.createElement(b.Z,{fontSize:"14px",sx:{textDecoration:"underline",cursor:"pointer",color:"t.yellow",mt:3},onClick:e},i));var J=i(415);const ee=e=>g.createElement(J.Z,{width:"225",height:"45",viewBox:"0 0 225 45",fill:"none",...e,sx:{width:"255px",height:"45px",color:"t.primary",opacity:"0.07",...e.sx}},g.createElement("path",{d:"M10.2072 22.5L5.12569 27.5537L0 22.5L5.12569 17.4023L10.2072 22.5ZM22.6237 10.1514L31.3727 18.8525L36.4984 13.7549L22.6237 0L8.74902 13.7988L13.8747 18.8965L22.6237 10.1514ZM40.1218 17.4023L35.0403 22.5L40.1659 27.5977L45.2916 22.5L40.1218 17.4023ZM22.6237 34.8486L13.8747 26.1035L8.74902 31.2012L22.6237 45L36.4984 31.2012L31.3727 26.1035L22.6237 34.8486ZM22.6237 27.5537L27.7494 22.4561L22.6237 17.4023L17.498 22.5L22.6237 27.5537ZM76.5318 28.0811V27.9932C76.5318 24.6973 74.7643 23.0273 71.8922 21.9287C73.6597 20.9619 75.162 19.3799 75.162 16.6113V16.5234C75.162 12.6562 72.0247 10.1514 66.9874 10.1514H55.4546V34.8047H67.2525C72.8643 34.8486 76.5318 32.5635 76.5318 28.0811ZM69.727 17.5342C69.727 19.3799 68.2247 20.127 65.7944 20.127H60.7571V14.8975H66.1479C68.4456 14.8975 69.727 15.8203 69.727 17.4463V17.5342ZM71.0968 27.3779C71.0968 29.2236 69.6386 30.0586 67.2525 30.0586H60.7571V24.6533H67.0758C69.8596 24.6533 71.0968 25.6641 71.0968 27.334V27.3779ZM87.9762 34.8486V10.1514H82.497V34.8047H87.9762V34.8486ZM117.316 34.8486V10.1514H111.926V25.3564L100.304 10.1514H95.2671V34.8047H100.658V19.1602L112.677 34.8486H117.316ZM147.54 34.8486L136.891 10.0195H131.854L121.205 34.8486H126.817L129.07 29.3115H139.542L141.796 34.8486H147.54ZM137.598 24.5215H131.014L134.328 16.5234L137.598 24.5215ZM173.566 34.8486V10.1514H168.176V25.3564L156.554 10.1514H151.517V34.8047H156.908V19.1602L168.927 34.8486H173.566ZM201.713 30.8496L198.223 27.3779C196.278 29.1357 194.555 30.2783 191.683 30.2783C187.441 30.2783 184.481 26.7627 184.481 22.5439V22.4121C184.481 18.1934 187.485 14.7217 191.683 14.7217C194.157 14.7217 196.102 15.7764 198.046 17.4902L201.537 13.4912C199.239 11.25 196.455 9.66797 191.771 9.66797C184.171 9.66797 178.825 15.4248 178.825 22.4121V22.5C178.825 29.5752 184.26 35.2002 191.55 35.2002C196.323 35.2441 199.151 33.5742 201.713 30.8496ZM225 34.8486V30.0147H211.523V24.8291H223.233V19.9951H211.523V14.9854H224.823V10.1514H206.132V34.8047H225V34.8486Z",fill:"currentColor"}));var te=i(1515);const ie=e=>g.createElement(te.Z,{...e,sx:{flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"},...e.sx},className:"pro-layout-close-button"}),re=({children:e})=>g.createElement(L.Z,{sx:{color:"t.primary",fontSize:"sm",letterSpacing:".16px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e),oe=({children:e})=>g.createElement(L.Z,{sx:{color:"t.buy",fontSize:"xs",letterSpacing:".32px"}},e),ne=({children:e})=>g.createElement(L.Z,{sx:{color:"t.sell",fontSize:"xs",letterSpacing:".32px"}},e),se=({children:e})=>g.createElement(L.Z,{sx:{color:"t.primary",fontSize:"xs",letterSpacing:".32px"}},e),ae=({name:e,price:t,change:i})=>g.createElement(m.Z,{sx:{alignItems:"center"}},g.createElement(m.Z,{sx:{alignItems:"center",flex:"1"}},e),g.createElement(m.Z,{sx:{alignItems:"center",pl:"minor"}},t),g.createElement(m.Z,{sx:{alignItems:"center",pl:"minor"}},i)),le=({options:e,value:t,onChange:i,onClose:r})=>g.createElement(m.Z,null,e.map((e=>g.createElement(m.Z,{key:`${e.value}`,onClick:()=>i(e),sx:{alignItems:"center",cursor:"pointer",p:"xs",bg:e.value===t?"bg3":"transparent"}},g.createElement(ae,{name:e.name,price:e.price}),e.showClose&&g.createElement(ie,{size:16,onClick:t=>{t.stopPropagation(),r(e)}})))));var ce=i(82373),he=i(81913),de=i(62493),ue=i(90154);const ge=({onClick:e,active:t,children:i,...r})=>g.createElement(m.Z,{...r,onClick:e,sx:{px:"ls",py:"sm",fontSize:"xs",color:t?"t.yellow":"t.primary",bg:"transparent",cursor:"pointer",alignItems:"center",":hover":{bg:"bg3"},"& > *:not(:last-child)":{mr:"5px"},...r.sx}},i),me=({children:e,...t})=>g.createElement(m.Z,{...t,sx:{bg:"popupBg",shadow:"0px 7px 14px rgba(0, 0, 0, 0.08), 0px 3px 6px rgba(0, 0, 0, 0.08), inset 0px 0px 1px rgba(94, 102, 115, 0.9)",borderRadius:"4px",py:"5px",flexDirection:"column",...t.sx}},e),pe=({values:e,options:t,onClickDropdownItem:i})=>{const r=g.createElement(me,null,t.map((({value:t,children:r,tooltip:o})=>g.createElement(ge,{key:`${t}`,active:!1,onClick:e=>{e.stopPropagation(),i?.(t)},sx:{px:"xs",py:"ls"}},g.createElement(L.Z,{sx:{width:"100%",display:"grid",gridTemplateColumns:"1fr auto auto"}},g.createElement(m.Z,{sx:{alignItems:"center",fontSize:"12px",lineHeight:"16px",marginRight:"5px"}},r),g.createElement(m.Z,{sx:{marginRight:"16px"}},o?g.createElement(he.Z,{enablePortal:!0,arrow:!0,placement:"top",tip:o,sx:{display:"flex",alignItems:"center"}},g.createElement(de.Z,{size:14,color:"t.third"})):null),g.createElement(m.Z,{sx:{alignItems:"center"}},g.createElement(ce.Z,{sx:{width:"20px",height:"20px",margin:"0px"},checked:e.includes(t)})))))));return g.createElement(P.ZP,{enablePortal:!0,trigger:"hover",overlay:r,sx:{display:"block"}},g.createElement(ue.Z,{sx:{display:"block"},color:e.length>0?"t.yellow":"t.third",size:20}))},ye=({onClickItem:e,options:t,...i})=>{const r=t.map(((t,r)=>({value:t.value,display:g.createElement(m.Z,{sx:{fontSize:"xs",color:"t.third"}},t.text),children:g.createElement(ge,{key:r,active:t.value===i.value,onClick:()=>e(t.value),sx:{px:"xs",py:"ls"}},t.text)})));return g.createElement(B,{...i,options:r,overlay:()=>g.createElement(me,{sx:{position:"absolute",left:"-8px",width:"max-content"}},r.map((e=>e.children)))})};var xe,fe=i(49138),Ce=i(74698);!function(e){e[e.Single=1]="Single",e[e.Four=4]="Four"}(xe||(xe={}));const be=({value:e,onClickItem:t,singleOptionText:i,multiOptionText:r,tooltipText:o,...n})=>{const s=[{value:xe.Single,display:g.createElement(fe.Z,{size:20,color:"icons.close"}),children:g.createElement(ge,{key:"1",onClick:()=>t(xe.Single),active:e===xe.Single},g.createElement(Ce.Z,{size:20,color:"slider.line"}),g.createElement(L.Z,{sx:{fontSize:"xs",color:"t.primary"}},i))},{value:xe.Four,display:g.createElement(fe.Z,{size:20,color:"icons.close"}),children:g.createElement(ge,{key:"4",onClick:()=>t(xe.Four),active:e===xe.Four},g.createElement(fe.Z,{size:20,color:"icons.close"}),g.createElement(L.Z,{sx:{fontSize:"xs",color:"t.primary"}},r),g.createElement(he.Z,{enablePortal:!0,arrow:!0,placement:"bottom-start",tip:o,sx:{display:"flex",alignItems:"center"}},g.createElement(de.Z,{size:20,color:"icons.close"})))}];return g.createElement(B,{placement:"bottom",options:s,value:e,overlay:()=>g.createElement(me,null,s.map((e=>e.children))),...n})},we=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{d:"M16.0714 11.7857H14.2857M7.5 5.35717V16.0715V5.35717ZM5.35714 14.6429H7.14285H5.35714ZM9.64285 8.21431H7.85714H9.64285ZM13.9286 4.64288V15.3572V4.64288ZM11.7857 6.78574H13.5714H11.7857Z",stroke:"currentColor",strokeLinecap:"square"})),ve=e=>g.createElement(J.Z,{viewBox:"0 0 16 19",fill:"none",...e},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3333 0.833313H13V3.33331H15.5V15H13V18.3333H11.3333V15H8.83333V3.33331H11.3333V0.833313ZM13.8333 13.3333V4.99998H10.5V13.3333H13.8333Z",fill:"#848E9C"}),g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5.83331H4.66667V8.33331H7.16667V15H4.66667V18.3333H3V15H0.5V8.33331H3V5.83331ZM5.5 13.3333V9.99998H2.16667V13.3333H5.5Z",fill:"#848E9C"})),Le=e=>g.createElement(J.Z,{viewBox:"0 0 10 15",fill:"none",...e},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.85714 0.857117H2.14286V2.99998H1.07143C0.976713 2.99998 0.885872 3.0376 0.818895 3.10458C0.751918 3.17156 0.714291 3.2624 0.714291 3.35712V11.9285C0.714291 12.0233 0.751918 12.1141 0.818895 12.1811C0.885872 12.2481 0.976713 12.2857 1.07143 12.2857H2.14286V14.4285H2.85714V12.2857H3.92858C4.0233 12.2857 4.11414 12.2481 4.18111 12.1811C4.24809 12.1141 4.28572 12.0233 4.28572 11.9285V3.35712C4.28572 3.2624 4.24809 3.17156 4.18111 3.10458C4.11414 3.0376 4.0233 2.99998 3.92858 2.99998H2.85714V0.857117ZM2.14286 3.71426H1.42858V4.42855H2.14286V5.14283H1.42858V5.85712H2.14286V6.5714H1.42858V7.28569H2.14286V7.99997H1.42858V8.71426H2.14286V9.42855H1.42858V10.1428H2.14286V10.8571H1.42858V11.5714H2.14286V10.8571H2.85714V11.5714H3.57143V10.8571H2.85714V10.1428H3.57143V9.42855H2.85714V8.71426H3.57143V7.99997H2.85714V7.28569H3.57143V6.5714H2.85714V5.85712H3.57143V5.14283H2.85714V4.42855H3.57143V3.71426H2.85714V4.42855H2.14286V3.71426ZM2.85714 5.14283V5.85712H2.14286V5.14283H2.85714ZM2.85714 6.5714V7.28569H2.14286V6.5714H2.85714ZM2.85714 7.99997V8.71426H2.14286V7.99997H2.85714ZM2.85714 9.42855V10.1428H2.14286V9.42855H2.85714ZM8.57143 2.99998H7.85715V5.14284H6.78572C6.691 5.14284 6.60016 5.18046 6.53319 5.24744C6.46621 5.31442 6.42858 5.40526 6.42858 5.49998V10.5C6.42858 10.5947 6.46621 10.6855 6.53319 10.7525C6.60016 10.8195 6.691 10.8571 6.78572 10.8571H7.85715V13H8.57143V10.8571H9.64287C9.73759 10.8571 9.82843 10.8195 9.8954 10.7525C9.96238 10.6855 10 10.5947 10 10.5V5.49998C10 5.40526 9.96238 5.31442 9.8954 5.24744C9.82843 5.18046 9.73759 5.14284 9.64287 5.14284H8.57143V2.99998ZM7.14287 10.1428V5.85712H9.28572V10.1428H7.14287Z",fill:"currentColor"})),Se=e=>g.createElement(J.Z,{viewBox:"0 0 10 14",fill:"none",...e},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57144 0.428528H7.85716V2.57147H6.78429C6.58215 2.57147 6.42858 2.73147 6.42858 2.92862V7.92861C6.42914 8.02292 6.46675 8.11322 6.5333 8.18003C6.59985 8.24685 6.68999 8.28482 6.78429 8.28576H9.64429C9.84644 8.28576 10 8.12576 10 7.92861V2.92862C10 2.73576 9.84072 2.57147 9.64429 2.57147H8.57144V0.428528ZM2.85713 1.85716H2.14284V4H1.06998C0.867838 4 0.714267 4.15929 0.714267 4.35571V13.6443C0.714078 13.6911 0.723149 13.7374 0.740959 13.7806C0.758768 13.8239 0.784963 13.8632 0.818032 13.8962C0.851101 13.9293 0.890389 13.9555 0.933632 13.9733C0.976874 13.9911 1.02322 14.0002 1.06998 14H3.92998C3.97683 14.0005 4.0233 13.9916 4.06667 13.9739C4.11004 13.9562 4.14945 13.93 4.18257 13.8969C4.2157 13.8638 4.24188 13.8243 4.25959 13.781C4.2773 13.7376 4.28617 13.6911 4.28569 13.6443V4.35571C4.28569 4.15714 4.12641 4 3.92998 4H2.85713V1.85716ZM1.42855 13.2857V4.71429H3.57141V13.2857H1.42855ZM7.14286 3.28576V7.57147H9.28572V3.28576H7.14286Z",fill:"currentColor"})),Ee=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("g",{clipPath:"url(#clip0)"},g.createElement("path",{d:"M8.55857 11.9207L12.28 8.57145H14.4464L17.41 5.23716L16.8757 4.76288L14.1257 7.85716H12.0057L8.58428 10.9364L6.42857 8.78074L3.31857 11.89L3.82428 12.3957L6.42857 9.79073L8.55857 11.9207Z",fill:"currentColor"})),g.createElement("defs",null,g.createElement("clipPath",{id:"clip0"},g.createElement("rect",{width:"20",height:"20",fill:"currentColor"})))),ke=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{d:"M8.92857 12.2907L13.3621 7.85713H14.7907L17.3957 5.25285L16.89 4.74713L14.495 7.14285H13.0664L8.92857 11.2807L6.78571 9.13785L3.31857 12.6043L3.82428 13.11L6.78571 10.1478L8.92857 12.2907Z",fill:"currentColor"}),g.createElement("path",{d:"M6.42857 11.4286H7.14286V12.1429H6.42857V11.4286ZM7.14286 12.1429H7.85714V12.8572H7.14286V12.1429ZM6.42857 12.8572H7.14286V13.5715H6.42857V12.8572ZM7.85714 12.8572H8.57143V13.5715H7.85714V12.8572ZM7.14286 13.5715H7.85714V14.2857H7.14286V13.5715ZM6.42857 14.2857H7.14286V15H6.42857V14.2857ZM7.85714 14.2857H8.57143V15H7.85714V14.2857ZM5.71429 12.1429H6.42857V12.8572H5.71429V12.1429ZM5 12.8572H5.71429V13.5715H5V12.8572ZM4.28572 13.5715H5V14.2857H4.28572V13.5715ZM5.71429 13.5715H6.42857V14.2857H5.71429V13.5715ZM5 14.2857H5.71429V15H5V14.2857ZM3.57143 14.2857H4.28572V15H3.57143V14.2857ZM15.7143 7.85717H16.4286V8.57145H15.7143V7.85717ZM16.4286 7.14288H17.1429V7.85717H16.4286V7.14288ZM16.4286 8.57145H17.1429V9.28574H16.4286V8.57145ZM15.7143 9.28574H16.4286V10H15.7143V9.28574ZM15 10H15.7143V10.7143H15V10ZM16.4286 10H17.1429V10.7143H16.4286V10ZM15.7143 10.7143H16.4286V11.4286H15.7143V10.7143ZM15 11.4286H15.7143V12.1429H15V11.4286ZM16.4286 11.4286H17.1429V12.1429H16.4286V11.4286ZM15.7143 12.1429H16.4286V12.8572H15.7143V12.1429ZM15 12.8572H15.7143V13.5715H15V12.8572ZM16.4286 12.8572H17.1429V13.5715H16.4286V12.8572ZM15.7143 13.5715H16.4286V14.2857H15.7143V13.5715ZM15 14.2857H15.7143V15H15V14.2857ZM16.4286 14.2857H17.1429V15H16.4286V14.2857ZM12.8571 9.28574H13.5714V10H12.8571V9.28574ZM14.2857 9.28574H15V10H14.2857V9.28574ZM15 8.57145H15.7143V9.28574H15V8.57145ZM13.5714 10H14.2857V10.7143H13.5714V10ZM12.8571 10.7143H13.5714V11.4286H12.8571V10.7143ZM14.2857 10.7143H15V11.4286H14.2857V10.7143ZM13.5714 11.4286H14.2857V12.1429H13.5714V11.4286ZM12.8571 12.1429H13.5714V12.8572H12.8571V12.1429ZM14.2857 12.1429H15V12.8572H14.2857V12.1429ZM13.5714 12.8572H14.2857V13.5715H13.5714V12.8572ZM12.8571 13.5715H13.5714V14.2857H12.8571V13.5715ZM14.2857 13.5715H15V14.2857H14.2857V13.5715ZM13.5714 14.2857H14.2857V15H13.5714V14.2857ZM12.1429 10H12.8571V10.7143H12.1429V10ZM11.4286 10.7143H12.1429V11.4286H11.4286V10.7143ZM10.7143 11.4286H11.4286V12.1429H10.7143V11.4286ZM12.1429 11.4286H12.8571V12.1429H12.1429V11.4286ZM11.4286 12.1429H12.1429V12.8572H11.4286V12.1429ZM10.7143 12.8572H11.4286V13.5715H10.7143V12.8572ZM12.1429 12.8572H12.8571V13.5715H12.1429V12.8572ZM11.4286 13.5715H12.1429V14.2857H11.4286V13.5715ZM10.7143 14.2857H11.4286V15H10.7143V14.2857ZM12.1429 14.2857H12.8571V15H12.1429V14.2857ZM10 12.1429H10.7143V12.8572H10V12.1429ZM9.28572 12.8572H10V13.5715H9.28572V12.8572ZM8.57143 13.5715H9.28572V14.2857H8.57143V13.5715ZM10 13.5715H10.7143V14.2857H10V13.5715ZM9.28572 14.2857H10V15H9.28572V14.2857Z",fill:"currentColor"})),Ve=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.37578 4.41928C9.29109 4.24988 9.11796 4.14288 8.92857 4.14288C8.73918 4.14288 8.56605 4.24988 8.48136 4.41928L7.5 6.38199L7.23293 5.84785C7.14823 5.67846 6.9751 5.57145 6.78571 5.57145C6.59633 5.57145 6.42319 5.67846 6.3385 5.84785L4.90993 8.70499C4.78643 8.95198 4.88654 9.25232 5.13353 9.37581C5.38052 9.49931 5.68086 9.39919 5.80435 9.1522L6.78571 7.18949L7.05278 7.72363C7.13748 7.89303 7.31061 8.00003 7.5 8.00003C7.68938 8.00003 7.86252 7.89303 7.94721 7.72363L8.92857 5.76092L10.6242 9.1522C10.7477 9.39919 11.048 9.49931 11.295 9.37581C11.542 9.25232 11.6421 8.95198 11.5186 8.70499L9.37578 4.41928ZM2.85714 10.8572H3.34821V9.8572H2.85714V10.8572ZM4.33035 10.8572H5.3125V9.8572H4.33035V10.8572ZM6.29464 10.8572H7.27678V9.8572H6.29464V10.8572ZM8.25893 10.8572H9.24107V9.8572H8.25893V10.8572ZM10.2232 10.8572H11.2054V9.8572H10.2232V10.8572ZM12.1875 10.8572H13.1696V9.8572H12.1875V10.8572ZM14.1518 10.8572H15.1339V9.8572H14.1518V10.8572ZM16.1161 10.8572H17.0982V9.8572H16.1161V10.8572ZM18.0804 10.8572H18.5714V9.8572H18.0804V10.8572ZM4.15219 11.3385C4.39918 11.462 4.49929 11.7623 4.3758 12.0093L3.66151 13.4379C3.53802 13.6849 3.23768 13.785 2.99069 13.6615C2.7437 13.538 2.64359 13.2377 2.76708 12.9907L3.48137 11.5621C3.60487 11.3151 3.9052 11.215 4.15219 11.3385ZM17.9472 7.72365C18.0707 7.47666 17.9706 7.17632 17.7236 7.05283C17.4766 6.92933 17.1763 7.02944 17.0528 7.27643L16.3385 8.70501C16.215 8.95199 16.3151 9.25233 16.5621 9.37583C16.8091 9.49932 17.1094 9.39921 17.2329 9.15222L17.9472 7.72365ZM12.5 11.2858C12.3267 11.2858 12.1658 11.3755 12.0747 11.5229C11.9836 11.6703 11.9753 11.8544 12.0528 12.0094L13.4813 14.8665C13.566 15.0359 13.7392 15.1429 13.9286 15.1429C14.1179 15.1429 14.2911 15.0359 14.3758 14.8665L15.8043 12.0094C15.8818 11.8544 15.8736 11.6703 15.7825 11.5229C15.6913 11.3755 15.5304 11.2858 15.3571 11.2858H12.5ZM13.9286 13.5249L13.309 12.2858H14.5481L13.9286 13.5249Z",fill:"currentColor"}));var Ae;!function(e){e[e.Bars=0]="Bars",e[e.Candles=1]="Candles",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.HeikinAshi=8]="HeikinAshi",e[e.HollowCandles=9]="HollowCandles",e[e.Baseline=10]="Baseline"}(Ae||(Ae={}));const Te=[{value:Ae.Bars,icon:we},{value:Ae.Candles,icon:ve},{value:Ae.HollowCandles,icon:Le},{value:Ae.HeikinAshi,icon:Se},{value:Ae.Line,icon:Ee},{value:Ae.Area,icon:ke},{value:Ae.Baseline,icon:Ve}],Me=({value:e,onClickItem:t,optionText:i,...r})=>{const o=Te.map((({value:r,icon:o},n)=>({value:r,display:g.createElement(o,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.secondary"}),children:g.createElement(ge,{key:n,onClick:()=>t(r),active:e===r,sx:{py:"ls"}},g.createElement(o,{size:20,sx:{color:e===r?"t.yellow":"t.secondary",mr:"xs"}}),g.createElement(L.Z,null,i[n]))})));return g.createElement(B,{placement:"bottom-start",options:o,value:e,overlay:()=>g.createElement(me,{sx:{position:"absolute",left:"-12px",width:"max-content"}},o.map((e=>e.children))),...r})};var De=i(76041);const Ie=({name:e,options:t,value:i,onChange:r})=>g.createElement(De.QE,{name:e,value:i,onChange:r},t.map((e=>g.createElement(De.ZP,{key:e.value,value:e.value,label:e.label,sx:{"&:not(:first-of-type)":{ml:"10px"},"& label":{cursor:"pointer",color:e.value===i?"t.yellow":"t.third","&:hover":{color:"t.yellow"},"& div":{ml:0,p:"minor",fontSize:"12px",lineHeight:"16px",letterSpacing:"0.32px"}},"& svg":{display:"none"}}}))));var _e=i(23632);const Pe=e=>g.createElement(he.Z,{...e,placement:"top",enablePortal:!0,arrow:!0,sx:{cursor:"pointer",display:"flex",minWidth:"auto",alignItems:"center",justifyContent:"center",...e.sx}},g.createElement(_e.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.third"}));var We=i(68960);const Re=e=>g.createElement(he.Z,{...e,placement:"top",enablePortal:!0,arrow:!0,sx:{cursor:"pointer",display:"flex",minWidth:"auto",alignItems:"center",justifyContent:"center",...e.sx}},g.createElement(We.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.third"}));var Be=i(86032),He=i(61942);const Ze=({expanded:e,...t})=>{const i={...t,sx:{flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"},...t.sx}};return e?g.createElement(Be.Z,{...i}):g.createElement(He.Z,{...i})};var Oe=i(71245);const Ne=e=>g.createElement(he.Z,{...e,placement:"top",enablePortal:!0,scroll:!1,resize:!1,arrow:!0,sx:{cursor:"pointer",display:"flex",minWidth:"auto",alignItems:"center",justifyContent:"center",...e.sx}},g.createElement(Oe.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:"t.third"})),Fe=({toggled:e,...t})=>g.createElement(he.Z,{...t,placement:"top",enablePortal:!0,arrow:!0,sx:{cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",...t.sx}},g.createElement(ue.Z,{sx:{minWidth:"20px",minHeight:"20px"},size:20,color:e?"t.yellow":"t.third"})),Ke=e=>g.createElement(J.Z,{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",...e,sx:{flexShrink:0,color:"icons.close",cursor:"pointer","&:hover":{color:"t.third"},...e.sx}},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 3.33331L2.5 3.33331V9.16665H4.16667V4.99998H15.8333V15.8333H10.8333V17.5H17.5V3.33331Z",fill:"currentColor"}),g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.1665 10.8333H2.49984V17.5H9.1665V10.8333ZM7.49984 12.5V15.8333H4.1665V12.5H7.49984Z",fill:"currentColor"}),g.createElement("path",{d:"M14.1665 13.3334L14.1665 6.66669L7.49984 6.66669L7.49984 8.33335L11.3603 8.33335L7.49984 11.6667L8.67835 12.8452L12.4998 9.51186L12.4998 13.3334L14.1665 13.3334Z",fill:"currentColor"})),Ue=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{d:"M12.8571 3.57146V7.14289H15V3.57146H12.8571ZM12.1429 2.85718H15.7143V7.85718H12.1429V2.85718ZM9.28571 12.1429H11.4286V8.57146H9.28571V12.1429ZM8.57143 7.85718H12.1429V12.8572H8.57143V7.85718ZM5.71429 17.1429H7.85714V13.5715H5.71429V17.1429ZM5 12.8572H8.57143V17.8572H5V12.8572Z",fill:"currentColor"})),$e=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{d:"M12.8571 17.1429H15V8.57145H12.8571V17.1429ZM12.1429 7.85716H15.7143V17.8572H12.1429V7.85716ZM9.28571 2.14287V7.14287H11.4286V2.14287H9.28571ZM8.57143 1.42859H12.1429V7.85716H8.57143V1.42859ZM5.71429 13.5714H7.85714V8.57145H5.71429V13.5714ZM5 7.85716H8.57143V14.2857H5V7.85716Z",fill:"currentColor"})),ze=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{d:"M7.85714 3.57146H10V12.1429H13.5714V5.71432H15.7143V15H16.4286V5.00004H12.8571V11.4286H10.7143V2.85718H7.14285V15.7143H5V12.1429H4.28571V16.4286H7.85714V3.57146Z",fill:"currentColo"})),Xe=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.09445 10.9056C9.42933 11.2404 9.88354 11.4286 10.3571 11.4286C10.8307 11.4286 11.2849 11.2404 11.6198 10.9056C11.9547 10.5707 12.1429 10.1165 12.1429 9.64287C12.1429 9.16927 11.9547 8.71507 11.6198 8.38018C11.2849 8.04529 10.8307 7.85715 10.3571 7.85715C9.88354 7.85715 9.42933 8.04529 9.09445 8.38018C8.75956 8.71507 8.57142 9.16927 8.57142 9.64287C8.57142 10.1165 8.75956 10.5707 9.09445 10.9056ZM11.1148 10.4005C10.9138 10.6014 10.6413 10.7143 10.3571 10.7143C10.073 10.7143 9.80045 10.6014 9.59952 10.4005C9.39859 10.1996 9.28571 9.92703 9.28571 9.64287C9.28571 9.35871 9.39859 9.08619 9.59952 8.88525C9.80045 8.68432 10.073 8.57144 10.3571 8.57144C10.6413 8.57144 10.9138 8.68432 11.1148 8.88525C11.3157 9.08619 11.4286 9.35871 11.4286 9.64287C11.4286 9.92703 11.3157 10.1996 11.1148 10.4005ZM9.09445 15.1913C9.42933 15.5262 9.88354 15.7143 10.3571 15.7143C10.8307 15.7143 11.2849 15.5262 11.6198 15.1913C11.9547 14.8564 12.1429 14.4022 12.1429 13.9286C12.1429 13.455 11.9547 13.0008 11.6198 12.6659C11.2849 12.331 10.8307 12.1429 10.3571 12.1429C9.88354 12.1429 9.42933 12.331 9.09445 12.6659C8.75956 13.0008 8.57142 13.455 8.57142 13.9286C8.57142 14.4022 8.75956 14.8564 9.09445 15.1913ZM11.1148 14.6862C10.9138 14.8871 10.6413 15 10.3571 15C10.073 15 9.80045 14.8871 9.59952 14.6862C9.39859 14.4853 9.28571 14.2127 9.28571 13.9286C9.28571 13.6444 9.39859 13.3719 9.59952 13.171C9.80045 12.97 10.073 12.8572 10.3571 12.8572C10.6413 12.8572 10.9138 12.97 11.1148 13.171C11.3157 13.3719 11.4286 13.6444 11.4286 13.9286C11.4286 14.2127 11.3157 14.4853 11.1148 14.6862ZM14.1379 5.35717L12.7093 3.92858L13.2143 3.42358L14.6429 4.85217L16.0714 3.42358L16.5764 3.92858L15.1479 5.35717L16.5764 6.78573L16.0714 7.29073L14.6429 5.86217L13.2143 7.29073L12.7093 6.78573L14.1379 5.35717ZM16.0714 11.5764L14.6429 10.1479L13.2143 11.5764L12.7093 11.0714L14.1379 9.64286L12.7093 8.2143L13.2143 7.7093L14.6429 9.13786L16.0714 7.70927L16.5765 8.21427L15.1479 9.64286L16.5764 11.0714L16.0714 11.5764ZM6.07146 14.4336L7.50002 15.8621L8.00502 15.3571L6.57646 13.9286L8.00502 12.5L7.50002 11.995L6.07146 13.4236L4.64288 11.995L4.13788 12.5L5.56646 13.9286L4.13788 15.3572L4.64288 15.8622L6.07146 14.4336ZM7.50002 7.29073L6.07145 5.86215L4.64288 7.29073L4.13788 6.78573L5.56645 5.35716L4.13788 3.92858L4.64288 3.42358L6.07145 4.85216L7.50002 3.42358L8.00502 3.92858L6.57645 5.35716L8.00502 6.78573L7.50002 7.29073ZM6.07144 10.1479L7.50002 11.5764L8.00502 11.0714L6.57644 9.64285L8.00502 8.21427L7.50002 7.70927L6.07144 9.13786L4.64288 7.7093L4.13788 8.2143L5.56644 9.64285L4.13788 11.0714L4.64288 11.5764L6.07144 10.1479Z",fill:"currentColor"})),Ge=e=>g.createElement(J.Z,{viewBox:"0 0 20 20",fill:"none",...e},g.createElement("path",{d:"M15.3571 15.7143L14.2857 13.9285M7.5 6.42854V15V6.42854ZM5 13.2143H7.5H5ZM10 6.78568H7.5H10ZM13.9286 2.14282V10.7143V2.14282ZM11.4286 4.64282H13.9286H11.4286ZM16.4286 10.3571H13.9286H16.4286ZM13.2143 13.9285H14.6429C14.8323 13.9285 15.014 13.8533 15.1479 13.7193C15.2819 13.5854 15.3571 13.4037 15.3571 13.2143C15.3571 13.0248 15.2819 12.8431 15.1479 12.7092C15.014 12.5752 14.8323 12.5 14.6429 12.5H13.2143V15.7143V13.9285Z",stroke:"currentColor"}));var Ye=i(37544),je=i(18637);const qe=({children:e})=>g.createElement(b.Z,{sx:{ml:"8px",color:"t.disabled"}},e),Qe=({children:e})=>g.createElement(b.Z,{sx:{mr:"8px",color:"t.disabled"}},e);var Je=i(7151);const et=(e,t,i,r)=>r-e(t)>=e(i)-r?i:t,tt=(e,t,i)=>{const r=e.length;if(i<=t(e[0]))return e[0];if(i>=t(e[r-1]))return e[r-1];let o=0,n=r,s=0;for(;o<n;){if(s=(o+n)/2>>>0,t(e[s])===i)return e[s];if(i<t(e[s])){if(s>0&&i>t(e[s-1]))return et(t,e[s-1],e[s],i);n=s}else{if(s<r-1&&i<t(e[s+1]))return et(t,e[s],e[s+1],i);o=s+1}}return e[s]},it=(e,t)=>{if(!e.length)return null;let i=e.length-1,r=0;const o=t(e[r]);if(t(e[i])===o)return null;let n,s;for(;i>=r;)n=(i+r)/2>>>0,s=t(e[n]),s===o?r=n+1:i=n-1;return r},rt={desktop:1260,tablet:768,phone:480},ot=({xData:e,yData:t})=>({xData:t,yData:e}),nt=e=>"undefined"!=typeof window&&(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=rt[e],st=({symbol:e,d1Group:t,d2Group:i,width:r,height:o,cursor:n,scale:s,yAxisScale:a=.6})=>{const l=r/2,c=(0,g.useRef)(Number.NEGATIVE_INFINITY),h=(0,g.useRef)(Number.NEGATIVE_INFINITY);(0,g.useEffect)((()=>{c.current=Number.NEGATIVE_INFINITY,h.current=Number.NEGATIVE_INFINITY}),[e]);const{d1:d,d2:u}=((e,t,i=10)=>({d1:{low:e[0]?.xData,high:e[e.length-1]?.xData,atIndex:e[i-1]?.xData},d2:{low:t[t.length-1]?.xData,high:t[0]?.xData,atIndex:t[i-1]?.xData}}))(t,i),m=(u.high+d.low)/2;const{min:p,max:y}=((e,t)=>({min:1/Math.max(e.high-e.low,t.high-t.low)||-1/0,max:1/Math.max((e.atIndex||e.high)-e.low,t.high-(t.atIndex||t.low))||-1/0}))(d,u);c.current=Math.max(p,c.current),h.current=Math.max(y,h.current);const x=((e,t,i)=>e+(t-e)/1e3*i)(c.current,h.current,s),f=(0,g.useCallback)((e=>(({value:e,width:t,scale:i,midValue:r})=>(e-r)*i*t+t)({value:e,width:l,scale:x,midValue:m})),[l,x,m]),C=(0,g.useCallback)((e=>(({x:e,width:t,scale:i,midValue:r})=>(e-t)/t/i+r)({x:e,width:l,scale:x,midValue:m})),[l,x,m]),{max:b,maxD1Index:w,maxD2Index:v}=(({d1Group:e,d2Group:t,d1Predicate:i,d2Predicate:r})=>{const o=it(e,i)||e.length,n=it(t,r)||t.length,s=e[o-1]?.yData,a=t[n-1]?.yData;return{max:Math.max(a,s),maxD1Index:o,maxD2Index:n}})({d1Group:t,d2Group:i,d1Predicate:e=>f(e.xData)>r,d2Predicate:e=>f(e.xData)<0}),L=(0,g.useCallback)((e=>(({value:e,height:t,scale:i,maxValue:r})=>t-e/r*i*t-1)({value:e,height:o,scale:a,maxValue:b})),[o,b]),S=t.slice(0,w-1),E=i.slice(0,v-1),{d1:k,d2:V}=(({d1Group:e,d2Group:t,x:i,midValue:r,breakpoint:o,xToValueFn:n,valueToXFn:s,valueToYFn:a})=>{let l={xData:NaN,yData:NaN},c={xData:NaN,yData:NaN};if(i&&e.length){let s;i>o?(l=tt(e,(e=>e?.xData),n(i)),s=2*r-l?.xData,c=tt(t,(e=>-e?.xData),-s)):(c=tt(t,(e=>-e?.xData),-n(i)),s=2*r-c?.xData,l=tt(e,(e=>e?.xData),s))}return{d1:{...l,x:s(l?.xData)||0,y:a(l?.yData)||0},d2:{...c,x:s(c?.xData)||0,y:a(c?.yData)||0}}})({d1Group:S,d2Group:E,x:n.x,midValue:m,breakpoint:l,xToValueFn:C,valueToXFn:f,valueToYFn:L}),A=b/a,T=((e,t,i)=>{let r;r=e>=t?nt("mobile")||e<500?3:nt("tablet")||e<800?5:10:t<500?3:t<800?5:10;const o=i(0),n=(i(e)-o)/r,s=[];let a=o+n/2;for(let e=0;e<r;e++)a&&(a>0&&s.push(a),a+=n);return s})(r,o,C),M=((e,t,i)=>{const r=[20,50,100],o=(t-0)/Math.floor(i/40);let n=Math.floor(Math.log10(o)-1);n=10**n;const s=o/n;let a=0,l=0;for(l=0;l<r.length;l++)if(r[l]>=s){a=r[l]*n;break}let c=0,h=0;c=Math.ceil(t/a)*a,h=Math.floor(0/a)*a;const d=[];for(;h<c;)d.push(parseFloat((h+a).toPrecision(12))),h+=a;return d})(0,A,o);return{width:r,height:o,halfWidth:l,midValue:m,d1:k,d2:V,xTicks:T,yTicks:M,valueToX:f,valueToY:L}},at=({initCursorState:e={x:0,y:0},scale:t,setScale:i=(()=>null)})=>{const[r,o]=(0,g.useState)(e);return{cursor:r,onMouseMove:e=>o({x:e.evt.offsetX,y:e.evt.offsetY}),onMouseLeave:()=>o(e),onMouseWheel:(0,g.useCallback)((e=>{const r=e?.evt?.deltaY<0?Math.min(t+5,1e3):Math.max(0,t-5);i?.(r),e?.evt?.preventDefault()}),[t,i])}},lt=["dont_show_boolean_study_arguments","hide_last_na_study_output","save_chart_properties_to_local_storage","compare_symbol","snapshot_trading_drawings","hide_left_toolbar_by_default"],ct=["header_widget","header_symbol_search","symbol_info","header_compare","header_chart_type","display_market_status","symbol_search_hot_key","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","volume_force_overlay","header_resolutions","legend_context_menu","left_toolbar","timeframes_toolbar"],ht=e=>({volumePaneSize:"medium","symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":e?.colors?.t?.third,"scalesProperties.lineColor":e?.colors?.line,"scalesProperties.backgroundColor":e?.colors?.background,"paneProperties.background":e?.colors?.moduleBg,"paneProperties.horzGridProperties.color":e?.colors?.lineForK,"paneProperties.vertGridProperties.color":e?.colors?.lineForK,"paneProperties.crossHairProperties.color":e?.colors?.t?.secondary,"candleStyle.upColor":e?.colors?.buy,"candleStyle.downColor":e?.colors?.sell,"candleStyle.drawWick":!0,"candleStyle.drawBorder":!0,"candleStyle.borderColor":"transparent","candleStyle.borderUpColor":e?.colors?.buy,"candleStyle.borderDownColor":e?.colors?.sell,"candleStyle.wickUpColor":e?.colors?.buy,"candleStyle.wickDownColor":e?.colors?.sell,"hollowCandleStyle.upColor":e?.colors?.buy,"hollowCandleStyle.downColor":e?.colors?.sell,"hollowCandleStyle.drawWick":!0,"hollowCandleStyle.drawBorder":!0,"hollowCandleStyle.borderColor":"transparent","hollowCandleStyle.borderUpColor":e?.colors?.buy,"hollowCandleStyle.borderDownColor":e?.colors?.sell,"hollowCandleStyle.wickUpColor":e?.colors?.buy,"hollowCandleStyle.wickDownColor":e?.colors?.sell,"haStyle.upColor":e?.colors?.buy,"haStyle.downColor":e?.colors?.sell,"haStyle.drawWick":!0,"haStyle.drawBorder":!0,"haStyle.borderColor":"transparent","haStyle.borderUpColor":e?.colors?.buy,"haStyle.borderDownColor":e?.colors?.sell,"haStyle.wickUpColor":e?.colors?.buy,"haStyle.wickDownColor":e?.colors?.sell,"barStyle.upColor":e?.colors?.buy,"barStyle.downColor":e?.colors?.sell,"lineStyle.color":e?.colors?.buy,"areaStyle.color1":e?.colors?.buy,"areaStyle.color2":e?.colors?.sell,"areaStyle.linecolor":e?.colors?.sell,"baselineStyle.baselineColor":e?.colors?.buy,"baselineStyle.topFillColor1":e?.colors?.buy,"baselineStyle.topFillColor2":e?.colors?.sell,"baselineStyle.bottomFillColor1":e?.colors?.buy,"baselineStyle.bottomFillColor2":e?.colors?.sell,"baselineStyle.topLineColor":e?.colors?.buy,"baselineStyle.bottomLineColor":e?.colors?.sell}),dt=e=>({originalTheme:e,overrides:ht(e)}),ut=["1S","1","3","5","15","30","60","120","240","360","480","720","1D","3D","1W","1M"],gt=()=>{const e=new Map;let t={},i=[],r={onReady:()=>null,resolveSymbol:()=>null,searchSymbols:()=>null,getBars:()=>null,subscribeBars:()=>null,unsubscribeBars:()=>null};return({config:o,onSymbolResolved:n,onFetchSymbolsInfo:s,onFetchBars:a,onSubscribeBars:l,onUnsubscribeBars:c,onFetchServerTimeApi:h,onTransformSymbolInfo:d=(({template:e})=>e)})=>(r={onReady:e=>{setTimeout((async()=>{t=await s(),i=Object.keys(t).map((e=>{const{ticker:i,name:r,fullName:o,description:n="",exchange:s="",type:a=""}=t[e];return{symbol:r,ticker:i,full_name:o,description:n,exchange:s,type:a}})),e({exchanges:[],symbols_types:[],supported_resolutions:ut,supports_marks:!1,supports_timescale_marks:!1,supports_time:!0,...o})}))},resolveSymbol:(e,i,r)=>{const o=t[e];if(!o)return void r(`cannot resolve symbol - ${e}`);const s=d({info:o,template:{description:o.description||"",fractional:!1,has_seconds:!0,seconds_multipliers:["1"],has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,minmov:1,minmove2:0,name:o.name,full_name:o.fullName,ticker:o.ticker,timezone:"Etc/UTC",pricescale:o.tickSize,session:"24x7",type:o.type||"",exchange:o.exchange||"",listed_exchange:o.exchange||"",format:"price",supported_resolutions:o.supportedResolutions||ut}});setTimeout((()=>{i(s),n?.(s)}))},searchSymbols:(e,t,r,o)=>{const n=new RegExp(e,"i"),s=new RegExp(t,"i"),a=new RegExp(r,"i");o(i.filter((({symbol:e,ticker:t,full_name:i,description:r="",exchange:o="",type:l=""})=>[e,t,i,r].some((e=>n.test(e)))&&s.test(o)&&a.test(l))))},getBars:async(e,t,i,r,o,n)=>{let s=[];try{r>=0&&(s=await a({symbolInfo:e,resolution:t,rangeStartDate:i,rangeEndDate:r})),o(s,{noData:0===s.length})}catch(e){n(e.toString())}},subscribeBars:(t,i,r,o,n)=>{const s=l({symbolInfo:t,resolution:i,callback:r,onResetCacheNeededCallback:n});e.set(o,s)},unsubscribeBars:t=>{e?.get(t)?.(),e?.delete(t),c?.(t)},getServerTime:async e=>{try{e(await h())}catch(t){e(Date.now()/1e3)}}},{datafeed:r,observers:e,symbolsInfo:t})};var mt=i(77179),pt=i.n(mt);const yt={};var xt=i(1085),ft=i(38270);const Ct=["--colors-interactive-primary","--colors-background-bg1","--colors-interactive-primaryHover","--colors-t-primary","--colors-interactive-primaryActive","--colors-interactive-interactiveBg","--colors-interactive-interactiveBgHover","--colors-interactive-interactiveBgSelected"],bt=e=>{const t=window.getComputedStyle(document.documentElement);Ct.forEach((i=>{e?.setCSSCustomProperty?.(i,t.getPropertyValue(i))}))},wt=async({widget:e,theme:t,styles:i,onSave:r=(()=>null),onSetThemeDone:o})=>(await(({widget:e,theme:t})=>{const i=e.chart().getCheckableActionState("showCountdown");return e.changeTheme(t,{disableUndo:!0}),i?new Promise((t=>{setTimeout((()=>{e.chart().executeActionById("showCountdown"),t()}),0)})):Promise.resolve()})({widget:e,theme:t}),new Promise((t=>{setTimeout((()=>{e?.applyOverrides(i.overrides),(({widget:e,styles:t})=>{try{const i=e.activeChart().getAllStudies().find((e=>"volume"===e?.name?.toLowerCase()));i&&e.activeChart().getStudyById(i.id).applyOverrides({"volume.color.0":(0,k.D)(t.overrides["candleStyle.downColor"],.5),"volume.color.1":(0,k.D)(t.overrides["candleStyle.upColor"],.5)})}catch(e){}})({widget:e,styles:i}),e.save(r),o?.(),t()}),0)}))),vt=({widget:e,seriesStyle:t})=>{e.applyOverrides({"mainSeriesProperties.style":t})},Lt=({symbol:e,symbolsInfo:t={},interval:i,theme:r,styles:o,limitOrders:n=[],positionOrders:s=[],executionOrders:a=[],seriesStyle:l,showIndicators:c,isChartReady:h,overwritingThemeOnLoaded:d=!1,widget:u,initialConfig:{tvConfig:m,onSave:p,onCreateOrderShapesError:y,onLoadConfig:x=(()=>Promise.resolve(null)),onLoading:f,onWidgetInitialized:C,onChartReadyDone:b,onChartReadyError:w,onWillUnmount:v,onWidgetRefNotFoundError:L,onScriptLoaded:S,onScriptLoadingError:E,onFirstTimeSetThemeDone:k,onSetThemeDone:V,onFirstTimeDataLoadedDone:A,onDataLoadedDone:T,onTradingViewInitError:M,onVisibleRangeChanged:D,onSymbolWillChange:I,onSymbolChanged:_,onIntervalChanged:P,onInitStudies:W}})=>{const[R,B]=(0,g.useState)(0),H=(0,g.useCallback)((()=>B((e=>e+1))),[B]),Z=(0,g.useRef)([]),O=(0,g.useRef)([]),N=(0,g.useRef)([]),F=(0,g.useRef)(),K=(0,g.useRef)(e),U=(0,g.useRef)(t),$=(0,g.useRef)(r),z=(0,g.useRef)(o),X=(0,g.useRef)(d),G=m.container_id;(0,g.useEffect)((()=>{$.current=r}),[r]),(0,g.useEffect)((()=>{z.current=o}),[o]),(0,g.useEffect)((()=>{X.current=d}),[d]),(0,g.useEffect)((()=>{K.current=e}),[e]),(0,g.useEffect)((()=>{U.current=t}),[t]);const Y=(0,g.useCallback)((()=>{F.current&&(({widget:e,onSave:t=(()=>Promise.resolve())})=>{e.save(t)})({widget:F.current,onSave:p})}),[p]),j=(0,g.useCallback)((e=>{if(!F.current||!e)return;const t=F.current.activeChart().getStudyById(e),i=K.current,r=U.current[i],{tickSize:o=1e7}=r||{},n=Math.log10(o);t?.applyOverrides({precision:n})}),[]),q=(0,g.useCallback)((()=>{F.current&&F.current.activeChart().getAllStudies().filter((({name:e})=>"Volume"!==e)).forEach((({id:e})=>j(e)))}),[j]),Q=(0,g.useCallback)((()=>{setTimeout((()=>{if(!F.current)return;const e=F.current.activeChart().getAllStudies();j(e[0]?.id),Y()}),0)}),[j,Y]),J=(0,g.useCallback)((()=>{f?.(!0),_?.(),q()}),[q,f,_]),ee=(0,g.useCallback)((e=>{f?.(!0),P?.(e)}),[P,f]),te=(0,g.useCallback)((()=>{f?.(!1),H(),A?.(),q()}),[q,H,A,f]),ie=(0,g.useCallback)((()=>{f?.(!1),H(),T?.()}),[H,T,f]),re=(0,g.useCallback)((({from:e,to:t})=>{D?.({startTime:1e3*e,endTime:1e3*t})}),[D]),oe=(0,g.useCallback)((async()=>{S?.();const e=await x(),t=(({tradingViewSave:e,styles:t},{symbol:i,interval:r,theme:o="Dark",library_path:n,custom_css_url:s="./themed.css",locale:a="en",overrides:l,debug:c=!1,time_frames:h=[],autosize:d=!0,toolbar_bg:u="transparent",studies_overrides:g,loading_screen:m,enabled_features:p=lt,disabled_features:y=ct,...x})=>{let f="Asia/Shanghai";try{f=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}const C=pt()(e);if(C)for(let e=0;e<C.charts[0].panes.length;e++)C.charts[0].panes[e].sources[0].state.symbol=i,C.charts[0].panes[e].sources[0].state.interval=r;return{...x,symbol:i,interval:r,timezone:f,theme:o,library_path:n,custom_css_url:s,locale:a,overrides:l,debug:c,time_frames:h,autosize:d,toolbar_bg:u,studies_overrides:g,loading_screen:m||{backgroundColor:t.overrides["paneProperties.background"]},enabled_features:p,disabled_features:y,saved_data:C||void 0}})({tradingViewSave:e,styles:o},m);try{F.current=new window.TradingView.widget(t),C?.(),F.current?.onChartReady((async()=>{if(!F.current)return L?.();try{bt(F.current),F.current.subscribe("onAutoSaveNeeded",Y),F.current.subscribe("study",Q),F.current.chart().onDataLoaded().subscribe(null,te,!0),F.current.chart().onDataLoaded().subscribe(null,ie),F.current.chart().onSymbolChanged().subscribe(null,J),F.current.chart().onIntervalChanged().subscribe(null,ee),F.current.chart().onVisibleRangeChanged().subscribe(null,re),await(async({tradingViewSave:e,theme:t,styles:i,seriesStyle:r,widget:o,onInitStudies:n})=>{await(async({tradingViewSave:e,widget:t,theme:i,styles:r})=>{if(e)return Promise.resolve();await wt({widget:t,theme:i,styles:r})})({widget:o,tradingViewSave:e,theme:t,styles:i}),n?.({tradingViewSave:e,widget:o}),vt({widget:o,seriesStyle:r})})({tradingViewSave:e,theme:r,styles:o,seriesStyle:l,widget:F.current,onInitStudies:W}),X.current&&await wt({widget:F.current,theme:$.current,styles:z.current,onSave:p,onSetThemeDone:k}),setTimeout(q,0),b?.()}catch(e){w?.(e)}}))}catch(e){M?.(e)}}),[]),ne=function(e,t){const[i,r]=(0,g.useState)((()=>!e||t?.shouldPreventLoad?"idle":"undefined"==typeof window?"loading":yt[e]??"loading"));return(0,g.useEffect)((()=>{if(!e||t?.shouldPreventLoad)return;const i=yt[e];if("ready"===i||"error"===i)return void r(i);const o=function(e){const t=document.querySelector(`script[src="${e}"]`),i=t?.getAttribute("data-status");return{node:t,status:i}}(e);let n=o.node;if(n)r(o.status??i??"loading");else{if(n=document.createElement("script"),n.src=e,n.async=!0,t?.attributes)for(const e in t.attributes)Object.prototype.hasOwnProperty.call(t.attributes,e)&&n.setAttribute(e,t.attributes[e]);n.setAttribute("data-status","loading"),document.body.appendChild(n);const i=e=>{const t="load"===e.type?"ready":"error";n?.setAttribute("data-status",t)};n.addEventListener("load",i),n.addEventListener("error",i)}const s=t=>{const i="load"===t.type?"ready":"error";r(i),yt[e]=i};return n.addEventListener("load",s),n.addEventListener("error",s),()=>{n&&(n.removeEventListener("load",s),n.removeEventListener("error",s)),n&&t?.removeOnUnmount&&n.remove()}}),[e,t?.shouldPreventLoad,t?.removeOnUnmount,t?.attributes]),i}(`${m.library_path}charting_library.js?v=1`,{removeOnUnmount:!1});return(0,g.useEffect)((()=>{"ready"!==ne?"error"===ne&&E?.(new Error("Cannot loading trading view")):oe()}),[oe,E,ne]),(0,xt.Z)((()=>{F.current&&(F.current?.remove(),F.current=void 0,v?.())})),(0,ft.Z)((()=>{if(0!==R&&F.current)try{Z.current?.forEach((e=>e.remove())),Z.current=(({widget:e,shapes:t,styles:i})=>t.map((t=>(({widget:e,order:{id:t,text:i,price:r,quantity:o,isBuy:n,tooltip:s="",modifyTooltip:a="",cancelTooltip:l="",editable:c,onMove:h,onModify:d,onCancel:u},styles:g})=>{const m=n?g.originalTheme?.colors?.buy:g.originalTheme?.colors?.sell,p=e.chart().createOrderLine({}).setText(i).setPrice(r).setQuantity(o).setTooltip(s).setModifyTooltip(a).setCancelTooltip(l).setEditable(c).setExtendLeft(!1).setLineLength(65).setLineStyle(2).setLineColor(m).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(m).setBodyBackgroundColor(m).setBodyTextColor(g.originalTheme?.colors?.t?.primary).setQuantityBorderColor(g.originalTheme?.colors?.line).setQuantityBackgroundColor(g.originalTheme?.colors?.popupBg).setQuantityTextColor(g.originalTheme?.colors?.t?.secondary).setCancelButtonBorderColor(g.originalTheme?.colors?.line).setCancelButtonBackgroundColor(g.originalTheme?.colors?.popupBg).setCancelButtonIconColor(g.originalTheme?.colors?.t?.secondary);return p.onModify((()=>d({id:t,text:p.getText(),price:p.getPrice(),quantity:p.getQuantity()}))).onMove((()=>h({id:t,text:p.getText(),price:p.getPrice(),quantity:p.getQuantity()}))).onCancel((()=>u({id:t,text:p.getText(),price:p.getPrice(),quantity:p.getQuantity()}))),p})({widget:e,order:t,styles:i}))))({widget:F.current,styles:o,shapes:n})}catch(e){y?.(e)}}),[R,n,o]),(0,ft.Z)((()=>{if(0!==R&&F.current)try{O.current?.forEach((e=>e.remove())),O.current=(({widget:e,shapes:t,styles:i})=>t.map((t=>(({widget:e,position:{text:t,price:i,PNL:r,quantity:o,tooltip:n},styles:s})=>{const a=+o>0?s.originalTheme?.colors?.buy:s.originalTheme?.colors?.sell,l=r>0?s.originalTheme?.colors?.buy:r<0?s.originalTheme?.colors?.sell:a;return e.chart().createPositionLine({}).setText(t).setPrice(i).setQuantity(o).setTooltip(n).setExtendLeft(!1).setLineLength(100).setLineStyle(2).setLineColor(l).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(l).setBodyBackgroundColor(l).setBodyTextColor(s.originalTheme?.colors?.t?.primary).setQuantityBorderColor(a).setQuantityBackgroundColor(s.originalTheme?.colors?.popupBg).setQuantityTextColor(s.originalTheme?.colors?.t?.primary)})({widget:e,position:t,styles:i}))))({widget:F.current,styles:o,shapes:s})}catch(e){y?.(e)}}),[R,s,o]),(0,ft.Z)((()=>{if(0!==R&&F.current)try{N.current?.forEach((e=>e.remove())),N.current=(({widget:e,shapes:t,styles:i})=>t.map((t=>(({widget:e,executionShape:{price:t,time:i,text:r,tooltip:o,isBuy:n},styles:s})=>{const a=n?s.originalTheme?.colors?.buy:s.originalTheme?.colors?.sell;return e.chart().createExecutionShape({}).setPrice(t).setTime(i).setDirection(n?"buy":"sell").setText(r).setTooltip(o).setArrowHeight(8).setArrowSpacing(1).setArrowColor(a).setTextColor(s.originalTheme?.colors?.t?.primary).setFont("normal 14pt Verdana")})({widget:e,executionShape:t,styles:i}))))({widget:F.current,styles:o,shapes:a})}catch(e){y?.(e)}}),[R,a,o]),(0,ft.Z)((()=>{h&&F.current&&vt({widget:F.current,seriesStyle:l})}),[l]),(0,ft.Z)((()=>{h&&F.current&&I?.(e)}),[h,I,e]),(0,ft.Z)((()=>{h&&F.current&&(({widget:e,symbol:t,interval:i,onDone:r=(()=>null)})=>{e.setSymbol(t,i,(()=>{e.activeChart().symbol()!==t?e.setSymbol(t,i,r):r()}))})({widget:F.current,symbol:e,interval:i})}),[e,i]),(0,g.useEffect)((()=>{h&&F.current&&(bt(F.current),wt({widget:F.current,theme:r,styles:o,onSetThemeDone:V,onSave:p}))}),[G,h,r,o,p,V]),(0,ft.Z)((()=>{h&&F.current&&(e=>{e.chart().executeActionById("insertIndicator")})(F.current)}),[c]),(0,g.useImperativeHandle)(u,(()=>F.current)),g.createElement("div",{id:m.container_id,style:{height:"100%"}})},St=e=>{const[t,i]=(0,g.useState)(!1),r=(0,g.useMemo)((()=>pt()(e.initialConfig)),[]),o=(0,g.useCallback)((()=>{i(!0),r.onChartReadyDone?.()}),[r]),n=(0,g.useMemo)((()=>({...e,isChartReady:t,initialConfig:{...r,onChartReadyDone:o}})),[r,t,o,e]);return g.createElement(L.Z,{sx:{height:"100%",position:"relative"}},g.createElement(Lt,{...n}),!t&&g.createElement(L.Z,{sx:{height:"100%",width:"100%",background:e.styles.overrides["paneProperties.background"],position:"absolute",left:0,top:0}},g.createElement(z,null)))};var Et=i(47020),kt=i.n(Et),Vt=i(83680),At=i.n(Vt),Tt=i(51374),Mt=i.n(Tt),Dt=i(36825),It=i(9704),_t=i(10066),Pt=i(80022),Wt=i.n(Pt),Rt=i(17361),Bt=i.n(Rt),Ht=i(56492),Zt=i.n(Ht),Ot=i(65071),Nt=i.n(Ot),Ft=i(49345),Kt=i.n(Ft),Ut=i(56325),$t=i.n(Ut);i(60171);class zt{}function Xt(e){return e&&"function"==typeof e.get}class Gt extends zt{constructor(e){super(),this.get=e}}class Yt extends zt{constructor(e){super(),this.defaultValue=e,this.cache=[]}get(e){return e<0&&void 0!==this.defaultValue?this.defaultValue:this.cache[e]}set(e,t){return new Gt(t?i=>i<Yt.currentTick?this.cache[i]:(this.cache[i]=e.get(i),t.get(i)):t=>t<Yt.currentTick?this.cache[t]:(this.cache[t]=e.get(t),e.get(t)))}}Yt.currentTick=NaN;class jt extends zt{constructor(e){super(),this.source=e}get(e){return this.source instanceof Array?this.source[e]:this.source.get(e)}}function qt(e){return new Yt(e)}function Qt(e){return function(t){return Xt(t)?new Gt((i=>e(t.get(i)))):e(t)}}function Jt(e){return function(t,i){return Xt(t)?Xt(i)?new Gt((r=>e(t.get(r),i.get(r)))):new Gt((r=>e(t.get(r),i))):Xt(i)?new Gt((r=>e(t,i.get(r)))):e(t,i)}}const ei=Jt(((e,t)=>e+t)),ti=Jt(((e,t)=>e-t)),ii=Jt(((e,t)=>e*t)),ri=Jt(((e,t)=>e/t)),oi=Jt(((e,t)=>Math.max(e,t))),ni=(Jt(((e,t)=>Math.min(e,t))),Qt((e=>void 0===e||Number.isNaN(e)?0:e))),si=Qt((e=>void 0===e?NaN:e)),ai=Qt((e=>Math.abs(e)));function li(e){return new Gt(e)}function ci(e,t,i){return li((r=>{const o=e.get(r);return void 0!==o?t(o):i}))}Qt((e=>Math.acos(e))),Qt((e=>Math.asin(e))),Qt((e=>Math.atan(e))),Qt((e=>Math.ceil(e))),Qt((e=>Math.cos(e))),Qt((e=>Math.exp(e))),Qt((e=>Math.floor(e))),Qt((e=>Math.log(e))),Qt((e=>Math.round(e))),Qt((e=>Math.sin(e))),Qt((e=>Math.sqrt(e))),Qt((e=>Math.tan(e)));class hi{constructor(){this.seriesData=[],this.plots=[],this.labels=[],this.mobileLabels=[]}getResult(e){const t=[];for(let i=0;i<this.seriesData.length;i++)Yt.currentTick=i,t[i]=e.get(i);return Yt.currentTick=NaN,t}updateResult(e,t,i=0){for(let r=i;r<this.seriesData.length;r++)Yt.currentTick=r,t[r]=e.get(r);Yt.currentTick=NaN}source(e){return si((t=this.sources(),i=e,ci(t,(e=>e[i]),void 0)));var t,i}sources(){return new jt(this.seriesData)}typicalPrice(){return si(ci(this.sources(),(({high:e,low:t,close:i})=>(e+t+i)/3),void 0))}plot(e){this.plots.push(e)}label(e){e.styles||(e.styles={}),this.labels.push(e)}mobileLabel(e){this.mobileLabels.push(e)}}var di=i(2933);const ui=Symbol("indicatorParam"),gi=Symbol("indicatorProps");function mi(e,t){const i=e.length-t.length;return t.map(((t,r)=>({time:e[r+i].time,value:t})))}function pi(e,t,i,r){return function(o,n,s){let a=Reflect.getOwnMetadata(ui,o,n)||[];a[s]={label:e,type:t,defaultValue:i,key:r||s.toString()},Reflect.defineMetadata(ui,a,o,n)}}function yi(e){return function(t,i,r){Reflect.defineMetadata(gi,e,t,i)}}function xi(e,t){const i=e.prototype,r=Reflect.getOwnMetadata(gi,i,t),o=Reflect.getOwnMetadata(ui,i,t)||[],n=new hi,s=new e(n),a=new WeakMap,l=new WeakMap,c=new WeakMap,h=e=>c.get(e),d=e=>{const t=new Set;n.plots.forEach((e=>{const{series:i,colorSeries:r,labelColorSeries:o}=e;t.add(i),r&&t.add(r),o&&t.add(o),e.type===It.oX.Area&&e.borderSeries&&t.add(e.borderSeries)})),n.labels.forEach((e=>{e.series&&t.add(e.series)})),n.mobileLabels.forEach((e=>{e.series&&t.add(e.series)})),t.forEach((t=>{const i=c.get(t);i?n.updateResult(t,i,e):c.set(t,n.getResult(t))}))},u=(e,t,{precision:i},o)=>e.reduce(((e,n,s)=>{if(n.series&&void 0!==o&&t.length>0){const l=a.get(n.series);if(l){const a=l.map((e=>t[e])).map((({data:e,color:t,colors:i,labelColors:r,visible:n})=>{const s=function(e,t){const i=(0,_t.ry)(e,(e=>{const{time:i}=e;return t-i}));return e[i]&&e[i].time===t?i:void 0}(e,o),a=void 0!==s&&e[s];let l=t;return void 0!==s&&(l=r?r[s]:i?i[s]:t),{item:a,color:l,visible:!!n}})).find((e=>void 0!==e.item));let c=a&&!a.visible?"none":"block";if(n.forceShow&&(c="block"),n.title&&e.push({label:n.title,key:`${r.title}[${s}]`,styles:{...n.styles,display:c}}),a&&a.item){let t;if(n.formmater)t=n.formmater?.(a.item.value);else if(n.formatNumber||r.isFormatNum)t=(0,_t.XR)(a.item.value,3);else if(void 0!==n.precision||void 0!==i){const{value:e}=a.item,r=(0,di.hj)(n.precision)?n.precision:i;t=(0,_t.FH)(e,r)}else t=a.item.value;e.push({label:t.toString(),key:`${r.title}[${s}]Series`,styles:{color:a.color,...n.styles,display:c}})}else e.push({label:"NaN",key:`${r.title}[${s}]Series`,styles:{...n.styles,display:c}})}}else n.title&&e.push({label:n.title,key:`${r.title}[${s}]`,styles:{...n.styles}});return e}),[]);function g(e,t){a.has(e)||a.set(e,t)}return{defaultProps:r,paramMetas:o,getResult(e,i,r){const a=o.map((e=>{if(void 0!==e){let t=$t()(i,e.key);if(void 0===t)return e.defaultValue;switch(e.type){case Ki.INT:t="number"!=typeof t?parseInt(t):t;break;case Ki.FLOAT:t="number"!=typeof t?parseFloat(t):t}return t}}));n.seriesData=e,n.plots.splice(0),n.labels.splice(0),n.plots.splice(0),s[t].apply(s,a),d(0);const c=[];n.plots.forEach((e=>{const{type:t,series:i,colorSeries:r,labelColorSeries:o,color:s,lineWidth:a,zIndex:d=-1,visible:u,...m}=e,p=r&&h(r),y=o&&h(o),x={...p?{colors:p}:{color:s},...y?{labelColors:y}:{}},f=h(i),C=mi(n.seriesData,f);if(e.type===It.oX.Area)if(e.borderSeries){const i=h(e.borderSeries),r=mi(n.seriesData,i);c.push({...m,chartType:t,lineWidth:a,data:C,borderData:r,visible:u,...x,zIndex:d}),g(e.series,[c.length-1]),g(e.borderSeries,[c.length-1]),l.set(e,[c.length-1])}else c.push({...m,chartType:t,lineWidth:a,data:C,visible:u,...x,histBase:e.histBase,zIndex:d}),g(e.series,[c.length-1]),l.set(e,[c.length-1]);else{const r={...m,chartType:t,lineWidth:a,data:C,visible:u};c.push({...r,...x,zIndex:d}),g(i,[c.length-1]),l.set(e,[c.length-1])}})),r?.(c)},updateResult(e,t,i){d(e),n.plots.forEach((i=>{const{series:r,colorSeries:o}=i,s=o&&h(o),a=l.get(i),c=h(r);if(a&&c)if(i.type===It.oX.Area){const{data:r,borderData:o}=t[a[0]];for(let t=e;t<n.seriesData.length;t++)r[t]={time:n.seriesData[t].time,value:c[t]};if(o&&i.borderSeries){const t=h(i.borderSeries);for(let i=e;i<n.seriesData.length;i++)o[i]={time:n.seriesData[i].time,value:t[i]}}}else{const{data:i}=t[a[0]];for(let t=e;t<n.seriesData.length;t++)i[t]=s?{time:n.seriesData[t].time,value:c[t],color:s[t]}:{time:n.seriesData[t].time,value:c[t]}}}))},getLabel:(e,t,i)=>u(n.labels,t,i,e),getMobileLabel:(e,t)=>u(n.labels,t,e)}}Symbol("indicators");var fi=i(76398);class Ci{constructor(e){this.ctx=e}}const bi=Qt((e=>Math.abs(e)<=1e-10)),wi=(Qt((e=>isFinite(e)&&!bi(e))),Qt((e=>Number.isNaN(e)||void 0===e))),vi=Jt(((e,t)=>e&&t)),Li=(Jt(((e,t)=>e||t)),Qt((e=>!e)),Jt(((e,t)=>e>t))),Si=(Jt(((e,t)=>e>=t)),Jt(((e,t)=>e<t))),Ei=(Jt(((e,t)=>e<=t)),Jt(((e,t)=>e===t)));function ki(e,t,i){return new Gt((r=>{const o=Xt(t)?t.get(r):t,n=Xt(i)?i.get(r):i;return e.get(r)?o:n}))}function Vi(e,t){return new Gt((i=>e.get(i-t)))}function Ai(e,t){const i=qt();return i.set(ti(ei(ni(Vi(i,1)),e),ni(Vi(e,t))))}function Ti(e,t){return ki(wi(Vi(e,t-1)),NaN,ri(Ai(e,t),t))}function Mi(e,t){const i=Ai(e,t),r=t-1,o=qt(),n=Vi(o,1),s=ri(ei(e,ii(n,r)),t),a=ki(wi(Vi(e,r)),NaN,ki(wi(n),ri(i,t),s));return o.set(a)}function Di(e,t){const i=Ai(e,t),r=qt(),o=Vi(r,1),n=ei(ri(ii(2,ti(e,o)),t+1),o),s=ki(wi(Vi(e,t-1)),NaN,ki(wi(o),ri(i,t),n));return r.set(s)}function Ii(e,t){return t=Math.round(t),li((i=>{let r=0;for(let o=t;o>=0;o--)r+=(t-o)*e.get(i-o);return 2*r/(t*(t+1))}))}function _i(e,t,i,r){return li((o=>{let n=r;for(let r=o;r>o-t;r--)n=i(n,e.get(r),r);return n}))}function Pi(e,t){return _i(e,t,((e,t)=>isNaN(t)||void 0===t?e:Math.max(e,t)),Number.MIN_VALUE)}function Wi(e,t){return _i(e,t,((e,t)=>isNaN(t)||void 0===t?e:Math.min(e,t)),Number.MAX_VALUE)}Jt(((e,t)=>e!==t));class Ri extends Ci{MA(e,t,i,r,o,n,s,a,l,c,h,d,u,g,m,p,y,x,f,C){const b=Ti(this.ctx.source(t),e),w=Ti(this.ctx.source(r),i),v=Ti(this.ctx.source(n),o),L=Ti(this.ctx.source(a),s),S=Ti(this.ctx.source(c),l),E=Ti(this.ctx.source(d),h),k=Ti(this.ctx.source(g),u),V=Ti(this.ctx.source(p),m),A=Ti(this.ctx.source(x),y),T=Ti(this.ctx.source(C),f);this.ctx.plot({series:b,type:It.oX.Line,color:"@MA.colors[0]",lineWidth:"@MA.lineWidths[0]",visible:"@MA.visibles[0]"}),this.ctx.label({title:`MA(${e}):`,series:b}),this.ctx.plot({series:w,type:It.oX.Line,color:"@MA.colors[1]",lineWidth:"@MA.lineWidths[1]",visible:"@MA.visibles[1]"}),this.ctx.label({title:`MA(${i}):`,series:w}),this.ctx.plot({series:v,type:It.oX.Line,color:"@MA.colors[2]",lineWidth:"@MA.lineWidths[2]",visible:"@MA.visibles[2]"}),this.ctx.label({title:`MA(${o}):`,series:v}),this.ctx.plot({series:L,type:It.oX.Line,color:"@MA.colors[3]",lineWidth:"@MA.lineWidths[3]",visible:"@MA.visibles[3]"}),this.ctx.label({title:`MA(${s}):`,series:L}),this.ctx.plot({series:S,type:It.oX.Line,color:"@MA.colors[4]",lineWidth:"@MA.lineWidths[4]",visible:"@MA.visibles[4]"}),this.ctx.label({title:`MA(${l}):`,series:S}),this.ctx.plot({series:E,type:It.oX.Line,color:"@MA.colors[5]",lineWidth:"@MA.lineWidths[5]",visible:"@MA.visibles[5]"}),this.ctx.label({title:`MA(${h}):`,series:E}),this.ctx.plot({series:k,type:It.oX.Line,color:"@MA.colors[6]",lineWidth:"@MA.lineWidths[6]",visible:"@MA.visibles[6]"}),this.ctx.label({title:`MA(${u}):`,series:k}),this.ctx.plot({series:V,type:It.oX.Line,color:"@MA.colors[7]",lineWidth:"@MA.lineWidths[7]",visible:"@MA.visibles[7]"}),this.ctx.label({title:`MA(${m}):`,series:V}),this.ctx.plot({series:A,type:It.oX.Line,color:"@MA.colors[8]",lineWidth:"@MA.lineWidths[8]",visible:"@MA.visibles[8]"}),this.ctx.label({title:`MA(${y}):`,series:A}),this.ctx.plot({series:T,type:It.oX.Line,color:"@MA.colors[9]",lineWidth:"@MA.lineWidths[9]",visible:"@MA.visibles[9]"}),this.ctx.label({title:`MA(${f}):`,series:T})}EMA(e,t,i,r,o,n,s,a,l,c,h,d,u,g,m,p,y,x,f,C){const b=Di(this.ctx.source(t),e),w=Di(this.ctx.source(r),i),v=Di(this.ctx.source(n),o),L=Di(this.ctx.source(a),s),S=Di(this.ctx.source(c),l),E=Di(this.ctx.source(d),h),k=Di(this.ctx.source(g),u),V=Di(this.ctx.source(p),m),A=Di(this.ctx.source(x),y),T=Di(this.ctx.source(C),f);this.ctx.plot({series:b,type:It.oX.Line,color:"@EMA.colors[0]",lineWidth:"@EMA.lineWidths[0]",visible:"@EMA.visibles[0]"}),this.ctx.label({title:`EMA(${e}):`,series:b}),this.ctx.plot({series:w,type:It.oX.Line,color:"@EMA.colors[1]",lineWidth:"@EMA.lineWidths[1]",visible:"@EMA.visibles[1]"}),this.ctx.label({title:`EMA(${i}):`,series:w}),this.ctx.plot({series:v,type:It.oX.Line,color:"@EMA.colors[2]",lineWidth:"@EMA.lineWidths[2]",visible:"@EMA.visibles[2]"}),this.ctx.label({title:`EMA(${o}):`,series:v}),this.ctx.plot({series:L,type:It.oX.Line,color:"@EMA.colors[3]",lineWidth:"@EMA.lineWidths[3]",visible:"@EMA.visibles[3]"}),this.ctx.label({title:`EMA(${s}):`,series:L}),this.ctx.plot({series:S,type:It.oX.Line,color:"@EMA.colors[4]",lineWidth:"@EMA.lineWidths[4]",visible:"@EMA.visibles[4]"}),this.ctx.label({title:`EMA(${l}):`,series:S}),this.ctx.plot({series:E,type:It.oX.Line,color:"@EMA.colors[5]",lineWidth:"@EMA.lineWidths[5]",visible:"@EMA.visibles[5]"}),this.ctx.label({title:`EMA(${h}):`,series:E}),this.ctx.plot({series:k,type:It.oX.Line,color:"@EMA.colors[6]",lineWidth:"@EMA.lineWidths[6]",visible:"@EMA.visibles[6]"}),this.ctx.label({title:`EMA(${u}):`,series:k}),this.ctx.plot({series:V,type:It.oX.Line,color:"@EMA.colors[7]",lineWidth:"@EMA.lineWidths[7]",visible:"@EMA.visibles[7]"}),this.ctx.label({title:`EMA(${m}):`,series:V}),this.ctx.plot({series:A,type:It.oX.Line,color:"@EMA.colors[8]",lineWidth:"@EMA.lineWidths[8]",visible:"@EMA.visibles[8]"}),this.ctx.label({title:`EMA(${y}):`,series:A}),this.ctx.plot({series:T,type:It.oX.Line,color:"@EMA.colors[9]",lineWidth:"@EMA.lineWidths[9]",visible:"@EMA.visibles[9]"}),this.ctx.label({title:`EMA(${f}):`,series:T})}WMA(e,t,i,r,o,n,s,a,l,c,h,d,u,g,m,p,y,x,f,C){const b=Ii(this.ctx.source(t),e),w=Ii(this.ctx.source(r),i),v=Ii(this.ctx.source(n),o),L=Ii(this.ctx.source(a),s),S=Ii(this.ctx.source(c),l),E=Ii(this.ctx.source(d),h),k=Ii(this.ctx.source(g),u),V=Ii(this.ctx.source(p),m),A=Ii(this.ctx.source(x),y),T=Ii(this.ctx.source(C),f);this.ctx.plot({series:b,type:It.oX.Line,color:"@WMA.colors[0]",lineWidth:"@WMA.lineWidths[0]",visible:"@WMA.visibles[0]"}),this.ctx.label({title:`WMA(${e}):`,series:b}),this.ctx.plot({series:w,type:It.oX.Line,color:"@WMA.colors[1]",lineWidth:"@WMA.lineWidths[1]",visible:"@WMA.visibles[1]"}),this.ctx.label({title:`WMA(${i}):`,series:w}),this.ctx.plot({series:v,type:It.oX.Line,color:"@WMA.colors[2]",lineWidth:"@WMA.lineWidths[2]",visible:"@WMA.visibles[2]"}),this.ctx.label({title:`WMA(${o}):`,series:v}),this.ctx.plot({series:L,type:It.oX.Line,color:"@WMA.colors[3]",lineWidth:"@WMA.lineWidths[3]",visible:"@WMA.visibles[3]"}),this.ctx.label({title:`WMA(${s}):`,series:L}),this.ctx.plot({series:S,type:It.oX.Line,color:"@WMA.colors[4]",lineWidth:"@WMA.lineWidths[4]",visible:"@WMA.visibles[4]"}),this.ctx.label({title:`WMA(${l}):`,series:S}),this.ctx.plot({series:E,type:It.oX.Line,color:"@WMA.colors[5]",lineWidth:"@WMA.lineWidths[5]",visible:"@WMA.visibles[5]"}),this.ctx.label({title:`WMA(${h}):`,series:E}),this.ctx.plot({series:k,type:It.oX.Line,color:"@WMA.colors[6]",lineWidth:"@WMA.lineWidths[6]",visible:"@WMA.visibles[6]"}),this.ctx.label({title:`WMA(${u}):`,series:k}),this.ctx.plot({series:V,type:It.oX.Line,color:"@WMA.colors[7]",lineWidth:"@WMA.lineWidths[7]",visible:"@WMA.visibles[7]"}),this.ctx.label({title:`WMA(${m}):`,series:V}),this.ctx.plot({series:A,type:It.oX.Line,color:"@WMA.colors[8]",lineWidth:"@WMA.lineWidths[8]",visible:"@WMA.visibles[8]"}),this.ctx.label({title:`WMA(${y}):`,series:A}),this.ctx.plot({series:T,type:It.oX.Line,color:"@WMA.colors[9]",lineWidth:"@WMA.lineWidths[9]",visible:"@WMA.visibles[9]"}),this.ctx.label({title:`WMA(${f}):`,series:T})}MACD(e,t,i,r){const o=this.ctx.source(r),n=ti(Di(o,e),Di(o,t)),s=Di(n,i),a=ti(n,s);this.ctx.plot({series:a,type:It.oX.Bar,colorSeries:ci(a,(e=>e>=0?"volume.upBarColor":"volume.downBarColor"),"defaultColor"),labelColorSeries:ci(a,(e=>e>=0?"volume.upTextColor":"volume.downTextColor"),"defaultColor"),visible:"@MACD.visibles.MACD"}),this.ctx.plot({series:s,type:It.oX.Line,color:"@MACD.colors.DEA",lineWidth:"@MACD.lineWidths.DEA",visible:"@MACD.visibles.DEA"}),this.ctx.plot({series:n,type:It.oX.Line,color:"@MACD.colors.DIF",lineWidth:"@MACD.lineWidths.DIF",visible:"@MACD.visibles.DIF"}),this.ctx.label({title:`MACD(${e}, ${t}, ${i})`}),this.ctx.label({series:s}),this.ctx.label({series:n}),this.ctx.label({series:a})}VOL(e){const t=this.ctx.source("volume"),i=this.ctx.source("quantity");if(this.ctx.plot({series:t,type:It.oX.Bar,colorSeries:ci(this.ctx.sources(),(({open:e,close:t})=>t>=e?"volume.upBarColor":"volume.downBarColor"),"defaultColor"),labelColorSeries:ci(this.ctx.sources(),(({open:e,close:t})=>t>=e?"volume.upTextColor":"volume.downTextColor"),"defaultColor"),isScaleCenter:!1}),this.ctx.plot({series:i,type:It.oX.Bar,labelColorSeries:ci(this.ctx.sources(),(({open:e,close:t})=>t>=e?"volume.upTextColor":"volume.downTextColor"),"defaultColor"),visible:"@VOL.visibles[0]",isScaleCenter:!1,yAxisIndex:"1"}),e){const r=Ti(t,e);this.ctx.plot({series:r,type:It.oX.Area,color:"@VOL.maColor",opacity:.6}),this.ctx.label({title:"Vol({{baseAsset}})",series:t,formatNumber:!0}),this.ctx.label({title:"Vol({{quoteAsset}})",series:i,formatNumber:!0,forceShow:!0}),this.ctx.label({series:r})}else this.ctx.label({title:"Vol({{baseAsset}}):",series:t,formatNumber:!0}),this.ctx.label({title:"Vol({{quoteAsset}})",series:i,formatNumber:!0,forceShow:!0})}TRIX(e){const t=Di(Di(Di(this.ctx.source("close"),e),e),e);this.ctx.plot({series:t,type:It.oX.Line,color:"@TRIX.color",lineWidth:"@TRIX.lineWidth"}),this.ctx.label({title:`TRIX(${e}):`,series:t})}}(0,fi.gn)([yi({id:"@MA",title:"MA",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length 0","INT",7,"periods[0]")),(0,fi.fM)(1,pi("Source 0","SOURCE","close","sources[0]")),(0,fi.fM)(2,pi("Length 1","INT",25,"periods[1]")),(0,fi.fM)(3,pi("Source 1","SOURCE","close","sources[1]")),(0,fi.fM)(4,pi("Length 2","INT",99,"periods[2]")),(0,fi.fM)(5,pi("Source 2","SOURCE","close","sources[2]")),(0,fi.fM)(6,pi("Length 3","INT",120,"periods[3]")),(0,fi.fM)(7,pi("Source 3","SOURCE","close","sources[3]")),(0,fi.fM)(8,pi("Length 4","INT",150,"periods[4]")),(0,fi.fM)(9,pi("Source 4","SOURCE","close","sources[4]")),(0,fi.fM)(10,pi("Length 5","INT",0,"periods[5]")),(0,fi.fM)(11,pi("Source 5","SOURCE","close","sources[5]")),(0,fi.fM)(12,pi("Length 6","INT",0,"periods[6]")),(0,fi.fM)(13,pi("Source 6","SOURCE","close","sources[6]")),(0,fi.fM)(14,pi("Length 7","INT",0,"periods[7]")),(0,fi.fM)(15,pi("Source 7","SOURCE","close","sources[7]")),(0,fi.fM)(16,pi("Length 8","INT",0,"periods[8]")),(0,fi.fM)(17,pi("Source 8","SOURCE","close","sources[8]")),(0,fi.fM)(18,pi("Length 9","INT",0,"periods[9]")),(0,fi.fM)(19,pi("Source 9","SOURCE","close","sources[9]")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,fi.w6)("design:returntype",void 0)],Ri.prototype,"MA",null),(0,fi.gn)([yi({id:"@EMA",title:"EMA",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length 1","INT",7,"periods[0]")),(0,fi.fM)(1,pi("Source 1","SOURCE","close","sources[0]")),(0,fi.fM)(2,pi("Length 2","INT",25,"periods[1]")),(0,fi.fM)(3,pi("Source 2","SOURCE","close","sources[1]")),(0,fi.fM)(4,pi("Length 3","INT",99,"periods[2]")),(0,fi.fM)(5,pi("Source 3","SOURCE","close","sources[2]")),(0,fi.fM)(6,pi("Length 4","INT",120,"periods[3]")),(0,fi.fM)(7,pi("Source 4","SOURCE","close","sources[3]")),(0,fi.fM)(8,pi("Length 5","INT",120,"periods[4]")),(0,fi.fM)(9,pi("Source 5","SOURCE","close","sources[4]")),(0,fi.fM)(10,pi("Length 6","INT",120,"periods[5]")),(0,fi.fM)(11,pi("Source 6","SOURCE","close","sources[5]")),(0,fi.fM)(12,pi("Length 7","INT",0,"periods[6]")),(0,fi.fM)(13,pi("Source 7","SOURCE","close","sources[6]")),(0,fi.fM)(14,pi("Length 8","INT",0,"periods[7]")),(0,fi.fM)(15,pi("Source 8","SOURCE","close","sources[7]")),(0,fi.fM)(16,pi("Length 9","INT",0,"periods[8]")),(0,fi.fM)(17,pi("Source 9","SOURCE","close","sources[8]")),(0,fi.fM)(18,pi("Length 10","INT",0,"periods[9]")),(0,fi.fM)(19,pi("Source 10","SOURCE","close","sources[9]")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,fi.w6)("design:returntype",void 0)],Ri.prototype,"EMA",null),(0,fi.gn)([yi({id:"@WMA",title:"WMA",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length 1","INT",7,"periods[0]")),(0,fi.fM)(1,pi("Source 1","SOURCE","close","sources[0]")),(0,fi.fM)(2,pi("Length 2","INT",25,"periods[1]")),(0,fi.fM)(3,pi("Source 2","SOURCE","close","sources[1]")),(0,fi.fM)(4,pi("Length 3","INT",99,"periods[2]")),(0,fi.fM)(5,pi("Source 3","SOURCE","close","sources[2]")),(0,fi.fM)(6,pi("Length 4","INT",120,"periods[3]")),(0,fi.fM)(7,pi("Source 4","SOURCE","close","sources[3]")),(0,fi.fM)(8,pi("Length 5","INT",120,"periods[4]")),(0,fi.fM)(9,pi("Source 5","SOURCE","close","sources[4]")),(0,fi.fM)(10,pi("Length 6","INT",120,"periods[5]")),(0,fi.fM)(11,pi("Source 6","SOURCE","close","sources[5]")),(0,fi.fM)(12,pi("Length 7","INT",0,"periods[6]")),(0,fi.fM)(13,pi("Source 7","SOURCE","close","sources[6]")),(0,fi.fM)(14,pi("Length 8","INT",0,"periods[7]")),(0,fi.fM)(15,pi("Source 8","SOURCE","close","sources[7]")),(0,fi.fM)(16,pi("Length 9","INT",0,"periods[8]")),(0,fi.fM)(17,pi("Source 9","SOURCE","close","sources[8]")),(0,fi.fM)(18,pi("Length 10","INT",0,"periods[9]")),(0,fi.fM)(19,pi("Source 10","SOURCE","close","sources[9]")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String,Number,String]),(0,fi.w6)("design:returntype",void 0)],Ri.prototype,"WMA",null),(0,fi.gn)([yi({id:"@MACD",title:"MACD",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Fast Length","INT",12,"fastPeriod")),(0,fi.fM)(1,pi("Slow Length","INT",26,"slowPeriod")),(0,fi.fM)(2,pi("Signal Length","INT",9,"signalPeriod")),(0,fi.fM)(3,pi("Source","SOURCE","close","source")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number,Number,String]),(0,fi.w6)("design:returntype",void 0)],Ri.prototype,"MACD",null),(0,fi.gn)([yi({id:"@VOL",title:"VOL",isHistBase:!1,isScaleCenter:!1,isFormatNum:!0}),(0,fi.fM)(0,pi("Period","INT",0,"period")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number]),(0,fi.w6)("design:returntype",void 0)],Ri.prototype,"VOL",null),(0,fi.gn)([yi({id:"@TRIX",title:"TRIX",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",9,"period")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number]),(0,fi.w6)("design:returntype",void 0)],Ri.prototype,"TRIX",null);class Bi extends Ci{RSI(e,t,i){const r=this.ctx.source("close"),o=Vi(r,1),n=oi(ti(r,o),0),s=oi(ti(o,r),0),a=ri(Mi(n,e),Mi(s,e)),l=ri(Mi(n,e),Mi(s,t)),c=ri(Mi(n,e),Mi(s,i)),h=ti(100,ri(100,ei(1,a))),d=ti(100,ri(100,ei(1,l))),u=ti(100,ri(100,ei(1,c)));this.ctx.plot({series:h,type:It.oX.Line,color:"@RSI.colors[0]",lineWidth:"@RSI.lineWidths[0]",visible:"@RSI.visibles[0]"}),this.ctx.plot({series:d,type:It.oX.Line,color:"@RSI.colors[1]",lineWidth:"@RSI.lineWidths[1]",visible:"@RSI.visibles[1]"}),this.ctx.plot({series:u,type:It.oX.Line,color:"@RSI.colors[2]",lineWidth:"@RSI.lineWidths[2]",visible:"@RSI.visibles[2]"}),this.ctx.label({title:`RSI(${e})`,series:h}),this.ctx.label({title:`RSI(${t})`,series:d}),this.ctx.label({title:`RSI(${i})`,series:u})}CCI(e){const t=this.ctx.typicalPrice(),i=Ti(t,e),r=function(e,t){const i=Ti(e,t);return li((r=>{const o=i.get(r);let n=0;for(let i=r;i>r-t;i--)n+=Math.abs(e.get(i)-o);return n/t}))}(t,e),o=ri(ti(t,i),ii(r,.015));this.ctx.plot({series:o,type:It.oX.Line,color:"@CCI.color",lineWidth:"@CCI.lineWidth"}),this.ctx.label({title:`CCI(${e})`,series:o})}}(0,fi.gn)([yi({id:"@RSI",title:"RSI",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length 1","INT",6,"periods[0]")),(0,fi.fM)(1,pi("Length 2","INT",12,"periods[1]")),(0,fi.fM)(2,pi("Length 3","INT",24,"periods[2]")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number,Number]),(0,fi.w6)("design:returntype",void 0)],Bi.prototype,"RSI",null),(0,fi.gn)([yi({id:"@CCI",title:"CCI",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",20,"period")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number]),(0,fi.w6)("design:returntype",void 0)],Bi.prototype,"CCI",null);class Hi extends Ci{BOLL(e,t){const i=this.ctx.source("close"),r=ii(function(e,t){const i=Ti(e,t);return li((r=>{const o=i.get(r);let n=0;for(let i=r;i>r-t;i--)n+=(e.get(i)-o)**2;return Math.sqrt(n/t)}))}(i,e),t),o=Ti(i,e),n=ei(o,r),s=ti(o,r);this.ctx.plot({series:n,type:It.oX.Line,color:"@BOLL.colors[0]",lineWidth:"@BOLL.lineWidths[0]",visible:"@BOLL.visibles[0]"}),this.ctx.plot({series:o,type:It.oX.Line,color:"@BOLL.colors[1]",lineWidth:"@BOLL.lineWidths[1]",visible:"@BOLL.visibles[1]"}),this.ctx.plot({series:s,type:It.oX.Line,color:"@BOLL.colors[2]",lineWidth:"@BOLL.lineWidths[2]",visible:"@BOLL.visibles[2]"}),this.ctx.plot({series:n,borderSeries:s,type:It.oX.Area,color:"boll.fillColor"}),this.ctx.label({title:`BOLL(${e}, ${t})`}),this.ctx.label({title:"UP",series:n}),this.ctx.label({title:"MB",series:o}),this.ctx.label({title:"DN",series:s})}}(0,fi.gn)([yi({id:"@BOLL",title:"BOLL",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",21,"period")),(0,fi.fM)(1,pi("Multipler","INT",2,"stdDev")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number]),(0,fi.w6)("design:returntype",void 0)],Hi.prototype,"BOLL",null);class Zi extends Ci{KDJ(e,t,i){const r=this.ctx.source("close"),o=this.ctx.source("low"),n=this.ctx.source("high"),s=Wi(o,e),a=Pi(n,e),l=ki(Ei(s,a),100,ri(ii(100,ti(r,s)),ti(a,s))),c=qt(100),h=qt(100),d=c.set(ei(ii(1-1/t,Vi(c,1)),ii(1/t,l))),u=h.set(ei(ii(1-1/t,Vi(h,1)),ii(1/t,d))),g=ti(ii(d,3),ii(u,2));this.ctx.plot({series:d,type:It.oX.Line,color:"@KDJ.colors[0]",lineWidth:"@KDJ.lineWidths[0]",visible:"@KDJ.visibles[0]"}),this.ctx.plot({series:u,type:It.oX.Line,color:"@KDJ.colors[1]",lineWidth:"@KDJ.lineWidths[1]",visible:"@KDJ.visibles[1]"}),this.ctx.plot({series:g,type:It.oX.Line,color:"@KDJ.colors[2]",lineWidth:"@KDJ.lineWidths[2]",visible:"@KDJ.visibles[2]"}),this.ctx.label({title:`KDJ(${e}, ${t}, ${i})`}),this.ctx.label({title:"K",series:d}),this.ctx.label({title:"D",series:u}),this.ctx.label({title:"J",series:g})}}(0,fi.gn)([yi({id:"@KDJ",title:"KDJ",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("K%","INT",9,"period[0]")),(0,fi.fM)(1,pi("D%","INT",3,"period[1]")),(0,fi.fM)(2,pi("Length","INT",3,"period[2]")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number,Number]),(0,fi.w6)("design:returntype",void 0)],Zi.prototype,"KDJ",null);class Oi extends Ci{VWAP(e){const t=this.ctx.source("volume"),i=this.ctx.typicalPrice(),r=ri(Ai(ii(i,t),e),Ai(t,e));this.ctx.plot({series:r,type:It.oX.Line,color:"@VWAP.color",lineWidth:"@VWAP.lineWidth"}),this.ctx.label({title:`VWAP(${e})`,series:r})}OBV(){const e=this.ctx.source("volume"),t=this.ctx.source("close"),i=ki(Li(t,Vi(t,1)),1,ki(Si(t,Vi(t,1)),-1,0)),r=qt(),o=r.set(ei(ni(Vi(r,1)),ii(i,e)));this.ctx.plot({series:o,type:It.oX.Line,color:"@OBV.color",lineWidth:"@OBV.lineWidth"}),this.ctx.label({title:"OBV",series:o})}AVL(){const e=ri(ei(ei(this.ctx.source("open"),this.ctx.source("high")),ei(this.ctx.source("low"),this.ctx.source("close"))),4),t=this.ctx.source("volume"),i=qt(),r=qt(),o=r.set(ei(ii(e,t),ni(Vi(r,1)))),n=i.set(ei(t,ni(Vi(i,1)))),s=ri(o,n);this.ctx.plot({series:s,type:It.oX.Line,color:"@AVL.color",lineWidth:"@AVL.lineWidth"}),this.ctx.label({title:"AVL",series:s})}}(0,fi.gn)([yi({id:"@VWAP",title:"VWAP",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",14,"period")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number]),(0,fi.w6)("design:returntype",void 0)],Oi.prototype,"VWAP",null),(0,fi.gn)([yi({id:"@OBV",title:"OBV",isHistBase:!1,isScaleCenter:!0}),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[]),(0,fi.w6)("design:returntype",void 0)],Oi.prototype,"OBV",null),(0,fi.gn)([yi({id:"@AVL",title:"AVL",isHistBase:!0,isScaleCenter:!0}),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[]),(0,fi.w6)("design:returntype",void 0)],Oi.prototype,"AVL",null);class Ni extends Ci{StochRSI(e,t,i,r){const o=function(e,t){const i=Vi(e,1),r=oi(ti(e,i),0),o=oi(ti(i,e),0),n=ri(Mi(r,t),Mi(o,t));return ti(100,ri(100,ei(1,n)))}(this.ctx.source("close"),e),n=Ti((a=o,function(e){const t=qt();return t.set(ki(wi(e),Vi(t,1),e))}(ri(ii(100,ti(o,Wi(l=o,c=t))),ti(Pi(a,c),Wi(l,c))))),i),s=Ti(n,r);var a,l,c;this.ctx.plot({series:n,type:It.oX.Line,color:"@Stoch RSI.colors.smoothK",lineWidth:"@Stoch RSI.lineWidths.smoothK",visible:"@Stoch RSI.visibles.smoothK"}),this.ctx.plot({series:s,type:It.oX.Line,color:"@Stoch RSI.colors.smoothD",lineWidth:"@Stoch RSI.lineWidths.smoothD",visible:"@Stoch RSI.visibles.smoothD"}),this.ctx.label({title:`Stoch RSI(${e}, ${t}, ${i}, ${r})`}),this.ctx.label({series:n}),this.ctx.label({series:s})}WR(e){const t=this.ctx.source("close"),i=this.ctx.source("high"),r=this.ctx.source("low"),o=ii(ri(ti(Pi(i,e),t),ti(Pi(i,e),Wi(r,e))),-100);this.ctx.plot({series:o,type:It.oX.Line,color:"@Wm %R.color",lineWidth:"@Wm %R.lineWidth"}),this.ctx.label({title:`Wm %R(${e})`,series:o})}MTM(e,t){const i=this.ctx.source(t),r=ti(i,Vi(i,e));this.ctx.plot({series:r,type:It.oX.Line,color:"@MTM.color",lineWidth:"@MTM.lineWidth"}),this.ctx.label({title:`MTM(${e})`,series:r})}}(0,fi.gn)([yi({id:"@Stoch RSI",title:"Stoch RSI",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("LengthRSI","INT",14,"rsiPeriod")),(0,fi.fM)(1,pi("LengthStoch","INT",14,"stochasticPeriod")),(0,fi.fM)(2,pi("SmoothK","INT",3,"kPeriod")),(0,fi.fM)(3,pi("SmoothD","INT",3,"dPeriod")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number,Number,Number]),(0,fi.w6)("design:returntype",void 0)],Ni.prototype,"StochRSI",null),(0,fi.gn)([yi({id:"@Wm %R",title:"Wm %R",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",14,"period")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number]),(0,fi.w6)("design:returntype",void 0)],Ni.prototype,"WR",null),(0,fi.gn)([yi({id:"@MTM",title:"MTM",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",14,"period")),(0,fi.fM)(1,pi("Source","SOURCE","close","source")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,String]),(0,fi.w6)("design:returntype",void 0)],Ni.prototype,"MTM",null);class Fi extends Ci{DMI(e){const t=this.ctx.source("high"),i=this.ctx.source("low"),r=this.ctx.source("close"),o=ti(t,Vi(t,1)),n=ti(Vi(i,1),i),s=ki(vi(Li(o,n),Li(o,0)),o,0),a=ki(vi(Li(n,o),Li(n,0)),n,0),l=oi(ti(t,i),oi(ai(ti(t,Vi(r,1))),ai(ti(i,Vi(r,1))))),c=Mi(s,e),h=Mi(a,e),d=Mi(l,e),u=ii(ri(c,d),100),g=ii(ri(h,d),100),m=Mi(ii(ai(ri(ti(u,g),ei(u,g))),100),e);this.ctx.plot({type:It.oX.Line,series:u,color:"@DMI.colors.pDI",lineWidth:"@DMI.lineWidths.pDI",visible:"@DMI.visibles.pDI"}),this.ctx.plot({type:It.oX.Line,series:g,color:"@DMI.colors.nDI",lineWidth:"@DMI.lineWidths.nDI",visible:"@DMI.visibles.nDI"}),this.ctx.plot({type:It.oX.Line,series:m,color:"@DMI.colors.dx",lineWidth:"@DMI.lineWidths.dx",visible:"@DMI.visibles.dx"}),this.ctx.label({title:`DMI(${e})`}),this.ctx.label({series:u,precision:4}),this.ctx.label({series:g,precision:4}),this.ctx.label({series:m,precision:4})}EMV(e,t){const i=this.ctx.source("high"),r=this.ctx.source("low"),o=this.ctx.source("volume"),n=ti(ri(ei(i,r),2),ri(ei(Vi(i,1),Vi(r,1)),2)),s=ri(ri(o,t),ti(i,r)),a=Ti(ri(n,s),e);this.ctx.plot({type:It.oX.Line,series:a,color:"@EMV.color",lineWidth:"@EMV.lineWidth"}),this.ctx.label({title:`EMV(${t}, ${e})`}),this.ctx.label({series:a,precision:4})}SAR(e,t){const i=this.ctx.source("low"),r=this.ctx.source("high"),o=[],n=[],s=[],a=[],l=li((l=>(l>1?(n[l]=n[l-1]+a[l-1]*(s[l-1]-n[l-1]),s[l]=s[l-1],a[l]=a[l-1],o[l]=o[l-1],o[l]?(n[l]=Math.min(n[l],i.get(l-2),i.get(l-1)),r.get(l)>s[l]&&(s[l]=r.get(l),a[l]=Math.min(a[l]+e,t))):(n[l]=Math.max(n[l],r.get(l-2),r.get(l-1)),i.get(l)<s[l]&&(s[l]=i.get(l),a[l]=Math.min(a[l]+e,t))),(o[l]&&i.get(l)<n[l]||!o[l]&&r.get(l)>n[l])&&(a[l]=e,n[l]=s[l],o[l]=!o[l],s[l]=o[l]?r.get(l):i.get(l))):(n[l]=i.get(l),s[l]=r.get(l),a[l]=e,o[l]=!0),n[l])));this.ctx.plot({type:It.oX.Point,series:l,color:"@SAR.color"}),this.ctx.label({title:`SAR(${e}, ${t})`}),this.ctx.label({series:l})}}var Ki,Ui;(0,fi.gn)([yi({id:"@DMI",title:"DMI",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",14,"period")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number]),(0,fi.w6)("design:returntype",void 0)],Fi.prototype,"DMI",null),(0,fi.gn)([yi({id:"@EMV",title:"EMV",isHistBase:!1,isScaleCenter:!0}),(0,fi.fM)(0,pi("Length","INT",14,"period")),(0,fi.fM)(1,pi("Divisor","FLOAT",1e4,"x")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number]),(0,fi.w6)("design:returntype",void 0)],Fi.prototype,"EMV",null),(0,fi.gn)([yi({id:"@SAR",title:"SAR",isHistBase:!0,isScaleCenter:!0}),(0,fi.fM)(0,pi("Start","FLOAT",.02,"step")),(0,fi.fM)(1,pi("Maximum","FLOAT",.2,"x")),(0,fi.w6)("design:type",Function),(0,fi.w6)("design:paramtypes",[Number,Number]),(0,fi.w6)("design:returntype",void 0)],Fi.prototype,"SAR",null),function(e){e.INT="INT",e.FLOAT="FLOAT",e.SOURCE="SOURCE",e.SELECT="SELECT",e.STRING="STRING"}(Ki||(Ki={})),function(e){e.HIGH="high",e.LOW="low",e.OPEN="open",e.CLOSE="close"}(Ui||(Ui={}));const $i={VOL:()=>xi(Ri,"VOL"),MA:()=>xi(Ri,"MA"),EMA:()=>xi(Ri,"EMA"),WMA:()=>xi(Ri,"WMA"),MACD:()=>xi(Ri,"MACD"),RSI:()=>xi(Bi,"RSI"),BOLL:()=>xi(Hi,"BOLL"),KDJ:()=>xi(Zi,"KDJ"),OBV:()=>xi(Oi,"OBV"),CCI:()=>xi(Bi,"CCI"),VWAP:()=>xi(Oi,"VWAP"),StochRSI:()=>xi(Ni,"StochRSI"),WR:()=>xi(Ni,"WR"),AVL:()=>xi(Oi,"AVL"),DMI:()=>xi(Fi,"DMI"),MTM:()=>xi(Ni,"MTM"),TRIX:()=>xi(Ri,"TRIX"),EMV:()=>xi(Fi,"EMV"),SAR:()=>xi(Fi,"SAR")},zi=["@VOL","@EMV","@VWAP","@OBV","@AVL"],Xi=()=>Object.keys($i).reduce(((e,t)=>{const i=(0,$i[t])();return e[i.defaultProps.id]=i,e}),{});var Gi=i(85466),Yi=i.n(Gi);class ji{constructor(e,t){this._min=0,this._max=0,this._min=e,this._max=t}isInvalid(){return!(0,di.hj)(this._min)||!(0,di.hj)(this._max)}getMinValue(){return this._min}setMinValue(e){return this._min=e,this}getMaxValue(){return this._max}setMaxValue(e){return this._max=e,this}getInterval(){return this._max-this._min}getCenter(){return(this._max+this._min)/2}clone(){return new ji(this._min,this._max)}toArray(){return[this._min,this._max]}isEqual(e){return(0,_t.Fr)(this._max-e._max)&&(0,_t.Fr)(this._min-e._min)}merge(e){e.isInvalid()||(this.setMaxValue(Math.max(this._max,e.getMaxValue())),this.setMinValue(Math.min(this._min,e.getMinValue())))}scaleAroundCenter(e){if(!(0,di.hj)(e))return;const t=.5*(this._min+this._max),i=.5*(this._max-this._min)*e;this._min=t-i,this._max=t+i}scaleAroundPoint(e,t){if(!(0,di.hj)(e)||!(0,di.hj)(t))return;const i=e-this.getMinValue(),r=this.getMaxValue()-e;this._min=e-i*t,this._max=e+r*t}scaleAboveBottom(e){if(!(0,di.hj)(e))return;const t=this.getInterval();this._max=this._min+t*e}shift(e){return(0,di.hj)(e)?(this._min+=e,this._max+=e,this):this}contains(e,t=!0){return t?this._min<e.getMinValue()&&this._max>e.getMaxValue():this._min<=e.getMinValue()&&this._max>=e.getMaxValue()}contain(e,t=!1){return t?e>this.getMinValue()&&e<this.getMaxValue():e>=this.getMinValue()&&e<=this.getMaxValue()}sliceArray(e,t){if(0===e.length)return e;const i=(0,_t.ry)(e,(e=>{const i=t(e);return this._min<=i?-1:1})),r=(0,_t.ry)(e,(e=>{const i=t(e);return this._max<i?-1:1}));return e.slice(i,r)}getSliceArrayIndexs(e,t){return 0===e.length?[0,0]:[(0,_t.ry)(e,(e=>{const i=t(e);return this._min<=i?-1:1})),(0,_t.ry)(e,(e=>{const i=t(e);return this._max<i?-1:1}))]}}class qi{constructor(e,t,i=!0){this.unitWidth=0,this._originUnitWidth=30,this._displayUnitWidth=0,this._scaleCoeff=1.2,this._maxScaleCoeff=6,this._minScaleCoeff=1.2,this.domainRange=new ji(e[0],e[1]),this.coordRange=new ji(t[0],t[1]),this._displayUnitWidth=this.unitWidth=this._originUnitWidth/this._scaleCoeff,i&&this.domainRange.scaleAroundCenter(this._scaleCoeff)}setCurrentScaleCoeff(e){this._scaleCoeff=e,this.domainRange.scaleAroundCenter(this._scaleCoeff)}getCurrentScaleCoeff(){return this._scaleCoeff}setUnitWidth(e){this.unitWidth=e}isValid(){return this.domainRange.getInterval()>0}getAxisData(e=(e=>e)){(this._displayUnitWidth<=this._originUnitWidth/1.5||this._displayUnitWidth>=1.5*this._originUnitWidth)&&(this._displayUnitWidth=this._originUnitWidth);const t=Math.ceil(this.coordRange.getInterval()/this._originUnitWidth+1e-5);if(t<=0)return[];const i=this.domainRange,{min:r,step:o}=(0,_t.BM)(i.getMaxValue(),i.getMinValue(),t);return[...Array(t+1)].map(((t,i)=>{const n=r+i*o;return{p:this.getCoordOfValue(n),v:e(n)}}))}getUnitTimeValue(){return this.domainRange.getInterval()/this.coordRange.getInterval()*this.unitWidth}getScaleCoeff(){return this._scaleCoeff}getCoordOfValue(e){const t=this.domainRange.getInterval(),i=this.coordRange.getInterval();return this.coordRange.getMinValue()+(e-this.domainRange.getMinValue())/t*i}getValueOfCoord(e){const t=this.domainRange.getInterval(),i=this.coordRange.getInterval();return this.domainRange.getMinValue()+(e-this.coordRange.getMinValue())/i*t}scaleAroundCenter(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._displayUnitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAroundCenter(e))}scaleAboveBottom(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._displayUnitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))}}class Qi extends qi{constructor(e,t,i,r=1.5){super(e,t,!1),this.unitWidth=10,this.timeUnitValue=Dt.Ri[It.QX.Day],this._maxScaleCoeff=9,this._minScaleCoeff=.2,this._minNearUnitWidth=50,this._originTimeScaleType=It.QX.Day,this._timeScales=[],this._sliceRanges=[],this._hasSliceTimeRange=!1,this._scaleCoeff=r,this.unitWidth/=this._scaleCoeff,this._timeIntervals={...Dt.Ri},this.analysisTimeInterval(i),this.resetTimeDomainRange(),this._maxTimeValue=this.domainRange.getMaxValue()}getCoordOfValue(e){const t=this.coordRange.getMinValue(),i=this.domainRange.getMinValue(),{sliceTimeLength:r}=this.getEasedSliceTime(i,e-i,!0);return t+(e-i-r)/this.getUnitTimeValue()*this.unitWidth}getValueOfCoord(e){const t=this.getUnitTimeValue(),i=this.domainRange.getMinValue(),r=(this._maxTimeValue-i)%this.timeUnitValue,o=r/t*this.unitWidth,n=e-this.coordRange.getMinValue()-o,s=r+Math.round(n/this.unitWidth)*t,{time:a}=this.getEasedSliceTime(i,s);if(this._originTimeScaleType===It.QX.Month){const e=new Date(a),t=new Date(a+this._timeIntervals.Day);if(e.getUTCMonth()!==t.getUTCMonth())return a+this._timeIntervals.Day}return a}getUnitTimeValue(){return this.timeUnitValue}getCurrentTimeScale(){return this._currentTimeScale}getOriginTimeScaleType(){return this._originTimeScaleType}setCurrentTimeScale(e){return this._currentTimeScale=e,this}getAxisData(){let e=this.domainRange.getMinValue(),t=this.coordRange.getMinValue();const i=this.coordRange.getInterval()/this.unitWidth,r=this.getUnitTimeValue(),o=[],n={lastTime:0,pos:Number.MIN_SAFE_INTEGER};for(let s=0;s<=i;s++){if(0===s){const i=(this._maxTimeValue-e)%this.timeUnitValue;t+=i/r*this.unitWidth,e+=i}let{time:i}=this.getEasedSliceTime(e,s*r);if(this._originTimeScaleType===It.QX.Month){const e=new Date(i),t=new Date(i+this._timeIntervals.Day);e.getUTCMonth()!==t.getUTCMonth()&&(i+=this._timeIntervals.Day)}this.isShowTicks(i,n)&&o.push({p:t+s*this.unitWidth,v:i})}return o}scaleAroundTimestamp(e,t){this.unitWidth/t<2||this._scaleCoeff*t>this._maxScaleCoeff||this._scaleCoeff*t<this._minScaleCoeff||(this.unitWidth/=t,this._scaleCoeff*=t,this.scaleAroundPoint(e,t),this.updateTimeScale())}scaleAroundRight(e){if(this.unitWidth<=2&&e>1||this._scaleCoeff>=this._maxScaleCoeff&&e>1||this._scaleCoeff<=this._minScaleCoeff&&e<1)return;this.unitWidth=Math.max(2,this.unitWidth/e);const t=this._scaleCoeff*e;this._scaleCoeff=Math.min(this._maxScaleCoeff,Math.max(this._minScaleCoeff,t));const i=this.domainRange.getMaxValue(),r=this.getDomainInterval(),{time:o}=this.getEasedSliceTime(i,-r);this.domainRange.setMinValue(o).setMaxValue(i),this.updateTimeScale()}setTimeScales(e){return this._timeScales=e,this}updateSliceTimeInterval(e){this._sliceRanges.length=0;const t=2*this.timeUnitValue;for(let i=1;i<e.length;i++){const r=e[i-1].time,o=e[i].time;o-r>=t&&this._sliceRanges.push([r+this.timeUnitValue,o])}this._hasSliceTimeRange=this._sliceRanges.length>0}shiftTime(e){if(!this._hasSliceTimeRange)return void this.domainRange.shift(e);const t=this.getDomainInterval(),i=this.domainRange.getMinValue(),{time:r}=this.getEasedSliceTime(i,e),{time:o}=this.getEasedSliceTime(r,t);this.domainRange.setMinValue(r).setMaxValue(o)}getEasedSliceTime(e,t,i=!1){let r=e+t,o=0;if(t<0)for(let t=this._sliceRanges.length-1;t>=0;t--){const n=this._sliceRanges[t];if(r<=n[1]&&e>=n[1]&&(i||(r-=n[1]-n[0]),o+=n[1]-n[0]),r>n[1])break}if(t>0)for(let t=0;t<this._sliceRanges.length;t++){const n=this._sliceRanges[t];if(r>=n[0]&&e<=n[0]&&(i||(r+=n[1]-n[0]),o+=n[1]-n[0]),r<n[0])break}return{time:r,sliceTimeLength:o}}getDomainInterval(){return this.coordRange.getInterval()/this.unitWidth*this.getUnitTimeValue()}updateTimeScale(){for(let e=this._timeScales.length-1;e>=0;e--){const{type:t,number:i}=this._timeScales[e],r=this._timeIntervals[t]*i;if(Math.floor(r/this.timeUnitValue)*this.unitWidth>=this._minNearUnitWidth&&this._timeIntervals[t]>=this.timeUnitValue){this.setCurrentTimeScale(this._timeScales[e]);break}}this._currentTimeScale||this.setCurrentTimeScale({type:It.QX.Month,number:12})}isShowTicks(e,t){const i=new Date(e),r={[It.QX.Year]:i.getUTCFullYear(),[It.QX.Month]:i.getUTCMonth(),[It.QX.Week]:i.getUTCDay(),[It.QX.Day]:i.getUTCDate(),[It.QX.Hour]:i.getUTCHours(),[It.QX.Minute]:i.getUTCMinutes(),[It.QX.Second]:i.getUTCSeconds()},o=this.getCoordOfValue(e);let{type:n,number:s}=this._currentTimeScale;const a=this._timeIntervals[n]*s;let l=!1;if(n===It.QX.Month){const i=(0,_t.Nw)(t.lastTime,e)-1;l=o-t.pos>=this._minNearUnitWidth&&this.isShowMonthOrYear(r,i,s)}else e-t.lastTime>=a&&o-t.pos+.01>=this._minNearUnitWidth&&(l=n===It.QX.Hour?this.isShowHour(r):n===It.QX.Day?this.isShowDay(r):r[n]%s==0);return l&&(t.lastTime=e,t.pos=o),l}isShowMonthOrYear(e,t,i){let r=!0;if(i>12){const t=Math.floor(i/12);r=e[It.QX.Year]%t==0}return r&&e[It.QX.Day]<=this.timeUnitValue/this._timeIntervals.Day+1&&t>=i&&e[It.QX.Month]%i==0}isShowHour(e){let t=!1;const{number:i}=this._currentTimeScale;if(0!==e[It.QX.Minute])return!1;if(this.timeUnitValue>=this._timeIntervals.Hour){const r=e[It.QX.Hour]%(this.timeUnitValue/this._timeIntervals.Hour);0!==r&&r*this._timeIntervals.Hour<=this.timeUnitValue&&(t=(e[It.QX.Hour]-r)%i==0)}return e[It.QX.Hour]%i==0&&(t=!0),t}isShowDay(e){let t=!1;const{type:i,number:r}=this._currentTimeScale;return t=r%7==0?e[It.QX.Hour]*this._timeIntervals.Hour<=this.timeUnitValue&&0===e[It.QX.Week]:e[It.QX.Hour]*this._timeIntervals.Hour<this.timeUnitValue&&e[i]%r==0,t}getIntervalFrequency(e){const t={};for(let i=1,r=e.length,o=e.length/2;i<r;i++){const r=e[i].time-e[i-1].time,n=t[r]?t[r]+1:1;if(n>o)return{interval:r};t[r]=n}const i=Object.keys(t);let r={interval:0,count:0};for(let e=0;e<i.length;e++){const o=Number(i[e]),n=t[i[e]];n>r.count&&(r={interval:o,count:n})}return r}analysisTimeInterval(e){const t=e.length;if(this._originTimeScaleType=It.QX.Day,1===t)this.timeUnitValue=Dt.Ri[It.QX.Day];else{const i=(0,_t.Nw)(this.domainRange.getMinValue(),this.domainRange.getMaxValue());if(t<=i)this.timeUnitValue=this.domainRange.getInterval()/(i-1),this._originTimeScaleType=It.QX.Month,this._timeIntervals[It.QX.Month]=this.timeUnitValue;else{const t=this.getIntervalFrequency(e);this.timeUnitValue=t.interval;for(let e=Dt.L7.length-1;e>=0;e--){const{type:t}=Dt.L7[e];this.timeUnitValue%Dt.Ri[t]==0&&(this._originTimeScaleType=t)}}}this.setTimeScales(Dt.L7),this.updateTimeScale()}resetTimeDomainRange(){const e=this.domainRange.getMaxValue(),t=this.getDomainInterval(),{time:i}=this.getEasedSliceTime(e,-t);this.domainRange.setMinValue(i)}scaleAroundPoint(e,t){const i=this.coordRange.getInterval(),r=this.coordRange.getMinValue(),o=this.coordRange.getMaxValue(),n=this.getCoordOfValue(e);if(n<r||n>o)return;const s=(n-r)/i,a=this.getDomainInterval(),l=a*s,c=a-l,{time:h}=this.getEasedSliceTime(e,-l*t),{time:d}=this.getEasedSliceTime(e,c*t);this.domainRange.setMinValue(h).setMaxValue(d)}}var Ji,er,tr,ir,rr=i(34162),or=i(88469),nr=i.n(or),sr=i(83787),ar=i(38552),lr=i.n(ar),cr=i(59052),hr=i.n(cr),dr=i(79493),ur=i.n(dr),gr=i(76838),mr=i.n(gr),pr=i(39359);class yr extends qi{constructor(e,t){super(e,t,!1),this._scaleCoeff=1,this._maxScaleCoeff=4,this._minScaleCoeff=1,this.unitWidth/=this._scaleCoeff}scaleAroundCenter(e){this._scaleCoeff*e>this._maxScaleCoeff||this._scaleCoeff*e<this._minScaleCoeff||(this.unitWidth/=e,this._scaleCoeff*=e,this.domainRange.scaleAboveBottom(e))}}!function(e){e.High="high",e.Low="low",e.Open="open",e.Close="close"}(Ji||(Ji={})),function(e){e.Hollow="hollow",e.Solid="solid"}(er||(er={})),function(e){e.MA="@MA",e.EMA="@EMA",e.WMA="@WMA",e.BOLL="@BOLL",e.VWAP="@VWAP",e.AVL="@AVL",e.TRIX="@TRIX",e.SAR="@SAR"}(tr||(tr={})),function(e){e.VOL="@VOL",e.MACD="@MACD",e.RSI="@RSI",e.KDJ="@KDJ",e.OBV="@OBV",e.CCI="@CCI",e.StochRSI="@Stoch RSI",e.WR="@Wm %R",e.DMI="@DMI",e.MTM="@MTM",e.EMV="@EMV",e.OI_UM="@OI-UM",e.OI_CM="@OI-CM",e.LS_ACCO="@LS-Acco",e.LS_POSIT="@LS-Posit",e.LS_RATIO="@LS-Ratio",e.BS_VOL="@BSVol",e.BASIS="@Basis"}(ir||(ir={}));const xr=new Map;function fr(e,t){e.classList.contains(t)||e.classList.add(t)}function Cr(e,t){e.classList&&e.classList.remove(t)}const br=(()=>{let e,t,i;const r=["Up","Down","Left","Right"],o=e=>{i&&clearTimeout(i),i=e};return(n,s)=>{if(!e){e=(0,_t.az)("div",{display:"none"},"tooltip-wrap"),t=(0,_t.az)("div",{},"tooltip-text");const i=(0,_t.az)("div",{},"tooltip-arrow");e.append(t,i)}return s&&(r.forEach((t=>t!==s&&Cr(e,t.toLowerCase()))),fr(e,s.toLowerCase())),n&&(t.innerText=n),{tooltip:e,timer:i,setTimer:o}}})();function wr(e,t="Up"){e.addEventListener("mouseenter",(()=>{const i=e.getAttribute("tooltip")||"",{tooltip:r,timer:o}=br(i,t);o&&clearTimeout(o),r.parentNode!==e&&e.append(r),(0,_t.AS)(r,{display:"block"})})),e.addEventListener("mouseleave",(()=>{const{tooltip:e,setTimer:i}=br("",t);i(setTimeout((()=>{(0,_t.AS)(e,{display:"none"})}),100))}))}function vr(e){if(xr.has(e)){const t=xr.get(e).image;return new Promise((e=>{t.complete?e(t):t.onload=()=>{e(t)}}))}return new Promise((t=>{"undefined"==typeof window&&t();const i=new Image,r=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));i.src=r,i.onload=()=>{t(i)},xr.set(e,{url:r,image:i})}))}function Lr(e){if(xr.has(e))return xr.get(e).url||"";if("undefined"==typeof window)return"";const t=new Image,i=URL.createObjectURL(new Blob([e],{type:"image/svg+xml"}));return t.src=i,xr.set(e,{url:i,image:t}),i}var Sr=i(9085),Er=i.n(Sr);class kr extends sr.Z{constructor(){super(...arguments),this.bound={x:0,y:0,width:0,height:0}}getBound(){return this.bound}setBound(e){return this.bound=Object.assign(this.bound||{},e),this}updateBound(e,t){this.bound[e]=t}contain(e){return e.x>=this.bound.x&&e.y<=this.bound.y&&e.x-this.bound.x<=this.bound.width&&this.bound.y-e.y<=this.bound.height}transformPointToView(e){return{x:e.x-this.bound.x,y:this.bound.y-e.y}}setCanvasTransform(e){e.scale(this.devicePixelRatio,this.devicePixelRatio),e.translate(this.bound.x,this.bound.y)}initialCtxs(e){e.forEach((e=>{e&&(e.save(),this.setCanvasTransform(e))}))}restoreCtxs(e){e.forEach((e=>e?.restore?.()))}getClearBound(e=0){const{x:t,y:i,width:r,height:o}=this.bound;return{x:t*this.devicePixelRatio,y:(i-o)*this.devicePixelRatio,width:r*this.devicePixelRatio,height:(o+e)*this.devicePixelRatio}}createClipBound(e,t=0){Array.isArray(e)?e.forEach(this.createClipBound.bind(this)):(e.beginPath(),e.rect(-.5,-this.bound.height-.5,this.bound.width,this.bound.height+t),e.clip())}afterSetParent(){}}kr.defaultConfig={...sr.Z.defaultConfig,zIndex:0};const Vr=kr;class Ar extends Vr{constructor(){super(...arguments),this._shapes=[],this._annotationSet=new Set,this._isWaiting=!1}get xAxis(){return this.getRoot().getXAxis()}get root(){return this.getRoot()}get TitleContainer(){return this.root.titleContainer}getShapes(){return this._shapes}getAnnotations(){return Array.from(this._annotationSet)}addAnnotation(e){!this._annotationSet.has(e)&&this._annotationSet.add(e)}removeAnnotation(e){this._annotationSet.delete(e)}eachAnnotations(e){const t=this.getAnnotations();for(let i=t.length-1;i>=0;--i)e(t[i])}addShapes(e){e.forEach(this.addShape.bind(this))}addShape(e){this._shapes.push(e)}removeShape(e){const t=this._shapes;for(let i=t.length-1;i>=0;i--)if(t[i]===e){t.splice(i,1);break}}update(e=It.mB.All){this._isWaiting||(this._isWaiting=!0,setTimeout((()=>{this.render(e),this._isWaiting=!1}),16))}updateImmediate(e=It.mB.All){this.render(e)}setParent(e){if(this._parent)throw new Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e}getParent(){return this._parent}getRoot(){return this._parent instanceof Fr?this._parent.getParent():this._parent}getYAxisWidth(){return this.getRoot().getAttr("margin").right||0}getXAxisHeight(){return this.getRoot().getAttr("xAxis").height||0}updateAnnotations(){this._annotationSet.forEach((e=>{e.updateData()}))}plotShapes(e){const t=this.getBound();this.updateAnnotations();for(let i=0,r=this._shapes.length;i<r;i++){const r=this._shapes[i],o=r.isVisible({...t,y:0,x:0});r.setAttr("isContain",o),o&&r.draw(e)}}transformToGroup(e,t="color",i=!1){if(i){const{result:i}=e.reduce(((e,t,i,{length:r})=>{const{compare:o}=e,n="string"==typeof o?t[o]:o(t);return e.group.push(t),e.result[n]||(e.result[n]=[]),e.lastCompare===n&&i!==r-1||(e.result[e.lastCompare||n].push(e.group),e.group=[t]),e.lastCompare=n,e}),{result:{},group:[],compare:t,lastCompare:""});return i}return Er()(e,t)}plotGroupGraphs(e,t,i,r,o=!1){const n={[It.oX.Line]:this.renderer.drawPolyline,[It.oX.Bar]:this.renderer.drawBars,[It.oX.HollowBar]:this.renderer.drawHollowBars,[It.oX.CandleBar]:this.renderer.drawCandlestickBars,[It.oX.Point]:this.renderer.drawPoints,[It.oX.CrossLine]:this.renderer.drawCrossLines,[It.oX.Area]:this.renderer.drawArea,[It.oX.HollowCandleBar]:this.renderer.drawHollowCandlestickBars}[i];n&&Object.keys(t||{}).forEach((i=>{const s=r(i);(0,_t.ui)(e,s),o?t[i].forEach((t=>{n.call(this,e,t)})):n.call(this,e,t[i])}))}plotChart(e,t){const i={[It.oX.Line]:this._plotLineChart,[It.oX.Bar]:this._plotBarChart,[It.oX.HollowBar]:this._plotHollowBarChart,[It.oX.Point]:this._plotPointChart,[It.oX.CrossLine]:this._plotCrossChart,[It.oX.Area]:this._plotAreaChart,[It.oX.Transcation]:this._plotTranscations},{chartType:r}=t;e.save(),i[r]&&i[r].call(this,e,t),e.restore()}_plotTranscations(e,{data:t=[],color:i="#cc47ed",colorLong:r="#2962ff"}){const o=this.getRoot(),n=this.getParent(),{barWeight:s=.8}=o.getAttr("candlestick"),a=this.xAxis.unitWidth*s>9,l=t,c=l.map((e=>e.transcations.filter((e=>!0===e.long)).map((t=>({value:t.price,time:e.time}))))).reduce(((e,t)=>(e.push(...t),e)),[]),h=l.map((e=>e.transcations.filter((e=>!1===e.long)).map((t=>({value:t.price,time:e.time}))))).reduce(((e,t)=>(e.push(...t),e)),[]);(0,_t.ui)(e,{fillStyle:r,strokeStyle:r}),n.getLineDatas(c).forEach((t=>this.renderer.drawSmallTriangle(e,t,!0))),(0,_t.ui)(e,{fillStyle:i,strokeStyle:i}),n.getLineDatas(h).forEach((t=>this.renderer.drawSmallTriangle(e,t,!1))),l.forEach((t=>{const o=n.getPosition({time:t.time,value:t.high}),s=n.getPosition({time:t.time,value:t.low});o.y=-o.y,o.y-=5,s.y=-s.y,s.y+=5,(0,_t.ui)(e,{fillStyle:i,strokeStyle:i}),t.transcations.filter((e=>!1===e.long)).forEach((t=>{const i=this.renderer.drawTranscation(e,o,t.long,t.qty,t.signal,a);o.y-=i})),(0,_t.ui)(e,{fillStyle:r,strokeStyle:r}),t.transcations.filter((e=>!0===e.long)).forEach((t=>{const i=this.renderer.drawTranscation(e,s,t.long,t.qty,t.signal,a);s.y+=i}))}))}_plotLineChart(e,{data:t=[],color:i,lineWidth:r,yAxisIndex:o}){const n=this.getParent().getLineDatas(t,o);if(i)(0,_t.ui)(e,{strokeStyle:i,lineWidth:r}),this.renderer.drawPolyline(e,n);else{const t=this.transformToGroup(n,"color",!0);this.plotGroupGraphs(e,t,It.oX.Line,(e=>({strokeStyle:e,lineWidth:r})),!0)}}_plotBarChart(e,{data:t=[],color:i,lineWidth:r=1,zeroBase:o=0,yAxisIndex:n,getBarInfos:s}){const a=this.getParent(),l=a.getAttr("indicatorType"),c=a.getBarDatas(t,{zeroBase:o,yAxisIndex:n,indicatorType:l},s);if(i)(0,_t.ui)(e,{fillStyle:i,lineWidth:r}),this.renderer.drawBars(e,c);else{const t=this.transformToGroup(c,"color");this.plotGroupGraphs(e,t,It.oX.Bar,(e=>({fillStyle:e,lineWidth:+r||1})))}}_plotHollowBarChart(e,{data:t=[],color:i,lineWidth:r=1,zeroBase:o=0,yAxisIndex:n,getBarInfos:s}){const a=this.getParent().getBarDatas(t,{zeroBase:o,yAxisIndex:n},s);if(i)(0,_t.ui)(e,{fillStyle:i,lineWidth:r}),this.renderer.drawHollowBars(e,a);else{const t=this.transformToGroup(a,"color");this.plotGroupGraphs(e,t,It.oX.HollowBar,(e=>({fillStyle:e,lineWidth:+r||1})))}}_plotPointChart(e,{data:t=[],color:i,lineWidth:r=1,yAxisIndex:o}){const n=this.getParent().getLineDatas(t,o);if(i)(0,_t.ui)(e,{strokeStyle:i,lineWidth:r}),this.renderer.drawPoints(e,n);else{const t=this.transformToGroup(n,"color");this.plotGroupGraphs(e,t,It.oX.Point,(e=>({strokeStyle:e,lineWidth:r})))}}_plotCrossChart(e,{data:t=[],color:i,lineWidth:r=1,yAxisIndex:o}){const n=this.getParent().getLineDatas(t,o);if(i)(0,_t.ui)(e,{strokeStyle:i,lineWidth:r}),this.renderer.drawCrossLines(e,n);else{const t=this.transformToGroup(n,"color");this.plotGroupGraphs(e,t,It.oX.CrossLine,(e=>({strokeStyle:e,lineWidth:r})))}}_plotAreaChart(e,{data:t=[],borderData:i,color:r,opacity:o=.6,histBase:n=0,yAxisIndex:s}){const a=this.getParent(),l=-a.yAxis.getCoordOfValue(n),c=a.getLineDatas(t,s);if(r)if((0,_t.ui)(e,{fillStyle:r,globalAlpha:o}),i){const t=a.getLineDatas(i,s).reverse();this.renderer.drawArea(e,[...c,...t])}else{const t={x:c[c.length-1].x,y:l},i={x:c[0].x,y:l};c.push(t,i),this.renderer.drawArea(e,c)}else{const t=this._groupAreaData({pointData:c,borderData:i,histBase:l,yAxisIndex:s});this.plotGroupGraphs(e,t,It.oX.Area,(e=>({fillStyle:e,globalAlpha:o})),!0)}}_groupAreaData({pointData:e=[],borderData:t,histBase:i=0,yAxisIndex:r}){const o=this.getParent(),{result:n}=e.reduce(((e,t,i,{length:r})=>{const o=t[e.compare];return e.group.j=i,e.result[o]||(e.result[o]=[]),(e.lastCompare&&e.lastCompare!==o||i===r-1)&&(e.result[o].push(e.group),e.group={i,j:i}),e.lastCompare=o,e}),{result:{},group:{i:0,j:0},compare:"color",lastCompare:""});if(t){const i=o.getLineDatas(t,r);return Object.keys(n).reduce(((t,r)=>{const o=n[r];return t[r]=o.map((({i:t,j:r})=>{const o=e.slice(t,r+1),n=i.slice(t,r+1).reverse();return o.concat(n)})),t}),{})}return Object.keys(n).reduce(((t,r)=>{const o=n[r];return t[r]=o.map((({i:t,j:r})=>{const o=e.slice(t,r+1),n=[{x:e[r].x,y:i},{x:e[t].x,y:i}];return o.concat(n)})),t}),{})}drawLogo(e){}}Ar.defaultConfig={...Vr.defaultConfig};const Tr=Ar;class Mr extends Tr{constructor(){super(),this.config={...Wt()(Tr.defaultConfig),zIndex:1},this._isScaling=!1,this._isMouseDown=!1,this.gestureLastScale=1,this.wheelAccumlateX=0,this.wheelAccumlateY=0,this.wheelMode="ready",this.resetWheelMode=()=>{this.wheelMode="ready",this.wheelAccumlateX=0,this.wheelAccumlateY=0},this._initEvents()}_initEvents(){this.on("mousemove","pan",this.onmousemove),this.on("mouseout",this.onmouseout.bind(this)),this.on("mousewheel",this.onmousewheel.bind(this)),this.on("mousedown",Dt.HD.MOUSE_DOWN,this.onmousedown),this.on("gesturestart",this.ongesture.bind(this)),this.on("gesturechange",this.ongesture.bind(this)),this.on("gestureend",this.ongesture.bind(this))}getCtxsByDrawMode(e){const t=this.getRoot(),i=t.getContext(),r=t.getMarkContext(),o=t.getCountdownContext();return{[It.mB.All]:[i,r,o],[It.mB.Resize]:[i,r,o],[It.mB.Marks]:[r]}[e]||[]}clear(e){const t=this.getClearBound();e.forEach((e=>rr.Z.clearRect(e,t)))}setViewBound(){const e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),{isFloat:r=!1}=e.getAttr("yAxis"),o=this.getAttr("isMobile")&&r?0:i.right;this.setBound({x:t.x,y:t.y,width:t.width-o,height:t.height})}getXYTicksData(){const e=this.getRoot(),t=this.getParent(),i=e.getXAxis()?.getAxisData()||[],r=t.yAxis?.getAxisData()||[];return{xData:i.map((e=>e.p)),yData:r.map((e=>e.p))}}getXLabelByTime(e){const t=this.getRoot(),i=t.getXAxis(),{visibleViewHeight:r}=t;return{point:{x:i.getCoordOfValue(e),y:r-this.bound.y},text:(0,_t.XH)(e,i.getOriginTimeScaleType())}}getYLabelByValue(e){const{yAxis:t}=this.getParent(),i=t.getCoordOfValue(e);return{point:{x:this.bound.width+1,y:-i},text:this.getCrossYAxisLabel(e)}}drawCrossHairByTime(e){if(void 0===e&&void 0===this._lastCursor)return;const t=this.getRoot(),i=t.getXAxis(),{x:r,y:o}=e||this._lastCursor;e&&(this._lastCursor=e);const n=i.getValueOfCoord(r);t.setCurrentItemByTime(n);const s=t.getAttr("currentItem"),a=t.getHitContext(),{visibleViewHeight:l}=t,{yAxis:c}=this.getParent();this.clearHitContext(),this.initialCtxs([a]);const h=t.getAttr("margin"),{y:d,width:u}=this.bound,g={minX:0,minY:h.top-d,maxX:u,maxY:l-d},m=this.getXLabelByTime(s?.time||n),p=t.getSettingValues("@background.crosshairBorderLine.color");(0,_t.ui)(a,{strokeStyle:p,lineWidth:1}),a.save(),this.renderer.drawVerticleCrossLine(a,{x:m.point.x,y:o},g,[4,4]),a.restore();const y=t.getSettingValues("@background.crosshairBorderLine.color");(0,_t.ui)(a,{strokeStyle:y,lineWidth:1}),a.save(),this.renderer.drawHorizontalCrossLine(a,{x:m.point.x,y:o},g,[4,4]),a.restore();const x=this.getYLabelByValue(c.getValueOfCoord(o)),f=t.getSettingValues("@background.crosshairCursorLabel.textColor"),C=t.getSettingValues("@background.crosshairCursorLabel.backgroundColor"),b=t.getSettingValues("@background.crosshairCursorLabel.borderColor");this.renderer.drawXAxisLabel(a,{...m,color:f,bgColor:C,borderColor:b},this.getXAxisHeight()),this.renderer.drawYAxisLabel(a,{...x,color:f,bgColor:C,borderColor:b},this.getYAxisWidth()-1,18),this.restoreCtxs([a])}getCrossYAxisLabel(e){const t=this.getParent();let i=2;if(t.panelType===It.wh.BASE){const t=this.getRoot(),r=t.getAttr("candlestick"),{dataFormatter:o}=r;if(i=t.getAttr("precision"),o===It.aI.Percentage){const t=Math.max(0,i-2);return`${(100*e).toFixed(t)}%`}}return t.formatterValue(e)}clearHitContext(){const e=this.getRoot().getHitContext();rr.Z.clearRect(e)}onmousemove(e){const t=this.getRoot(),i=this.getParent();if(t.setCursor({isRecord:!1,weight:100,config:{style:Dt.Li.CROSSHAIR}}),!i.getAttr("isAbleTriggerMove"))return;if(e.isDealed)return void this.clearHitContext();const{x:r,y:o}=this.transformPointToView(e.point),{show:n=!1}=t.getAttr("crossHair");n&&this.drawCrossHairByTime({x:r,y:o})}ongesture(e){if(this._isMouseDown)return;const t=e.originEvent;t.preventDefault();const i=this.getRoot(),r=i.getXAxis(),{x:o}=this.transformPointToView(e.point),n=r.getValueOfCoord(o);"gesturestart"===t.type&&(this.gestureLastScale=t.scale),"gesturechange"===t.type&&(i.zoomByCoeff(this.gestureLastScale/t.scale,n),this.gestureLastScale=t.scale)}onmouseout(){const e=this.getRoot(),t=e.getHitContext();rr.Z.clearRect(t),this.clearDragEvent(),e.setCurrentItemByTime(e.getMaxTimestamp())}onmousedown(e){if(e.isDealed)return;const t=e.originEvent;if(this._isMouseDown=!0,t.touches&&t.touches.length>1)return this._isScaling=!0,void this.onmousescale(e);const i=this.getRoot(),r=this.getAttr("isMobile");let{x:o,y:n}=e.point,s=Date.now(),a=0;this.on("mousemove",Dt.HD.MOUSE_DOWN_MOVE,(t=>{if(this._isScaling)return;const{x:r,y:l}=t.point;Math.abs(r-e.point.x)>2*Math.abs(l-n)&&(i.shiftTimeLine(o-r),o=r,a=Date.now()-s,e.originEvent.preventDefault(),t.originEvent.preventDefault())})),this.on("mouseup",Dt.HD.MOUSE_DOWN_UP,(t=>{if(this.getRoot().endShiftTime(),this._isMouseDown=!1,this.clearDragEvent(),!r)return;const i=t.point.x-e.point.x,o=t.point.y-e.point.y;Math.abs(i)>Math.abs(o)&&this._keepScroll(i,a/1e3)}))}onmousescale(e){const t=this.getRoot(),{clientX:i,clientX1:r}=e;let[o,n]=[i,r];this.on("mousemove",Dt.HD.MOUSE_DOWN_MOVE,(i=>{const{clientX:r,clientX1:s}=i;if(void 0===s)this.clearDragEvent();else{const e=300*Math.log10(Math.abs((r-s)/(o-n)));if(!Number.isFinite(e))return;e>1?t.zoomIn(e):t.zoomOut(e),o=r,n=s}i.originEvent.preventDefault(),e.originEvent.preventDefault()})),this.on("mouseup",Dt.HD.MOUSE_DOWN_UP,(()=>{this.clearDragEvent(),t.endShiftTime()}))}wheelEventType(e){const{deltaX:t,deltaY:i}=e;return-3*i===e.wheelDeltaY||Math.abs(t)>=Math.abs(i)?"touchpad":"mousewheel"}onmousewheel(e){const{originEvent:t,point:i}=e,{deltaY:r,deltaX:o,wheelDeltaY:n,ctrlKey:s}=t,{x:a,y:l}=this.transformPointToView(i),c=this.getRoot(),h=this.wheelEventType(t);if("ready"!==this.wheelMode||s||(this.wheelAccumlateX+=o,this.wheelAccumlateY+=r,Math.abs(this.wheelAccumlateX)>10?this.wheelMode="x":Math.abs(this.wheelAccumlateY)>10&&(this.wheelMode="y")),"y"===this.wheelMode||s||"mousewheel"===h)if("mousewheel"===h){const e=r?-r/3:n/12;c.zoomAroundRight(e)}else c.zoomAroundRight(s?r:-r);"x"===this.wheelMode&&c.shiftTimeLine(o),this.wheelResetTimer&&window.clearTimeout(this.wheelResetTimer),s&&this.resetWheelMode(),this.wheelResetTimer=window.setTimeout(this.resetWheelMode,20);const{show:d=!1}=c.getAttr("crossHair");d&&this.drawCrossHairByTime({x:a,y:l}),t.preventDefault()}clearDragEvent(){this.off("mousemove",Dt.HD.MOUSE_DOWN_MOVE),this.off("mouseup",Dt.HD.MOUSE_DOWN_UP),this._isScaling=!1}_keepScroll(e,t){const i=this.getRoot(),r=Math.abs(e/t),o=Math.abs(r/1e3),n=Math.abs(e)-1e3*t*t*.5,s=Date.now();let a,l=0;const c=()=>{const t=(Date.now()-s)/1e3,r=((e,t,i,r)=>{const o=e/r;return 0+i*(-o*o+2*o)})(t,0,n,o),h=5*Math.abs(l-r);l=r,t>o?cancelAnimationFrame(a):(0!==h&&i.shiftTimeLine(e>0?-h:h),a=requestAnimationFrame(c))};c()}}class Dr{constructor(){this.drawCrossLine=(e,t,i)=>{e.setLineDash([4,4]),e.beginPath();const{minX:r,minY:o,maxX:n,maxY:s}=i;rr.Z.drawLine(e,r,-t.y,n,-t.y),rr.Z.drawLine(e,t.x,o,t.x,s),e.stroke()},this.drawXAxisLabel=(e,t,i)=>{const r=Math.ceil(e.measureText(t.text).width)+16,{point:{x:o,y:n}}=t,s={x:o-r/2,y:n,width:r,height:i};rr.Z.drawBackground(e,t.bgColor,s),e.textAlign=It.PH.Center,e.textBaseline=It.Wr.Middle,e.fillStyle=t.color,e.strokeStyle=t.color,rr.Z.drawText(e,t.text,o,n+.5*i),e.beginPath(),rr.Z.drawLine(e,o,n,o,n+5),e.stroke()},this.drawYAxisLabel=(e,t,i,r)=>{const{point:{x:o,y:n}}=t;e.beginPath(),e.strokeStyle=t.borderColor,e.fillStyle=t.bgColor;const s=[{x:o,y:n-.5*r},{x:o+i,y:n-.5*r},{x:o+i,y:n+.5*r},{x:o,y:n+.5*r}];rr.Z.drawLines(e,s),e.closePath(),e.fill(),e.stroke(),e.textAlign=It.PH.Left,e.textBaseline=It.Wr.Middle,e.fillStyle=t.color,rr.Z.drawText(e,t.text,o+8,n)},this.drawCandlestickBars=(e,t)=>{t.forEach((t=>{const{x:i,y:r,width:o,height:n,lowY:s,highY:a,color:l,borderColor:c,wickColor:h}=t,d=i-.5*o;if(o<2){(0,_t.ui)(e,{fillStyle:l,strokeStyle:l});const t=a-s,r=t<1?1:t;rr.Z.fillRect(e,i,-a,.75,r),rr.Z.strokeRect(e,i,-a,.75,r)}else(0,_t.ui)(e,{strokeStyle:h}),e.beginPath(),rr.Z.drawLine(e,i,-a,i,-s),e.stroke(),(0,_t.ui)(e,{fillStyle:l,strokeStyle:c}),rr.Z.fillRect(e,d,-r,o,n),rr.Z.strokeRect(e,d,-r,o,n)}))},this.drawHollowCandlestickBars=(e,t)=>{t.forEach((t=>{const{x:i,y:r,width:o,height:n,lowY:s,highY:a,close:l,open:c,color:h,borderColor:d,wickColor:u}=t,g=i-.5*o;o<2?((0,_t.ui)(e,{strokeStyle:h}),e.beginPath(),rr.Z.drawLine(e,i,-s,i,-a),e.stroke()):((0,_t.ui)(e,{strokeStyle:u}),e.beginPath(),rr.Z.drawLine(e,i,-a,i,-s),e.stroke(),(0,_t.ui)(e,{fillStyle:h,strokeStyle:d}),l<c?rr.Z.fillRect(e,g,-r,o,n):rr.Z.clearRect(e,{x:g,y:-r,width:o,height:n}),rr.Z.strokeRect(e,g,-r,o,n))}))},this.drawPolyline=(e,t)=>{e.beginPath(),rr.Z.drawLines(e,t),e.stroke()},this.drawGrid=(e,t,i=[],r)=>{const{width:o,height:n}=t;e.beginPath(),r.forEach((t=>{rr.Z.drawLine(e,0,-t,o,-t)})),i.forEach((t=>{rr.Z.drawLine(e,t,0,t,-n)})),e.stroke()},this.drawVertGridLine=(e,t,i=[])=>{const{height:r}=t;e.beginPath(),i.forEach((t=>{rr.Z.drawLine(e,t,0,t,-r)})),e.stroke()},this.drawHorzGridLine=(e,t,i)=>{const{width:r}=t;e.beginPath(),i.forEach((t=>{rr.Z.drawLine(e,0,-t,r,-t)})),e.stroke()},this.drawPaths=(e,t)=>{e.beginPath(),rr.Z.drawLines(e,t),e.fill(),e.stroke()},this.drawPoints=(e,t,i)=>{i?rr.Z.drawPoints(e,t,i):(e.beginPath(),rr.Z.drawPoints(e,t,i),e.stroke())},this.drawCrossLines=(e,t)=>{e.beginPath(),rr.Z.drawCrossLines(e,t),e.stroke()},this.drawBars=(e,t)=>{t.forEach((t=>{const{x:i,y:r,width:o,height:n,strokeColor:s,fillColor:a}=t;o<2?((0,_t.ui)(e,{strokeStyle:s}),e.beginPath(),rr.Z.drawLine(e,i,r,i,r+n),e.stroke()):((0,_t.ui)(e,{strokeStyle:s,fillStyle:a}),rr.Z.fillRect(e,i,r,o,n),rr.Z.strokeRect(e,i,r,o,n))}))},this.drawHollowBars=(e,t)=>{t.forEach(((i,r)=>{const{value:o=Number.NEGATIVE_INFINITY}=t[r-1]||{},{x:n,y:s,width:a,height:l,value:c,color:h}=i;a<2?((0,_t.ui)(e,{strokeStyle:h}),e.beginPath(),rr.Z.drawLine(e,n,s,n,s+l),e.stroke()):c>0&&o>=c||c<0&&o>=c?((0,_t.ui)(e,{fillStyle:h}),rr.Z.fillRect(e,n,s,a,l)):(c>0&&o<c||c<0&&o<=c)&&((0,_t.ui)(e,{strokeStyle:h}),rr.Z.strokeRect(e,n,s,a,l))}))},this.drawMultiLines=(e,t)=>{e.beginPath(),t.forEach((t=>{rr.Z.drawLines(e,t)})),e.stroke()},this.drawArea=(e,t)=>{e.beginPath(),rr.Z.drawLines(e,t),e.closePath(),e.fill()},this.drawTitle=(e,t,i)=>{rr.Z.drawText(e,t,i.x,i.y)}}static calculateTextWidth(e="",t=10,i=1){const r=Dr.getCacheCanvas(),o=`${t}px sans-serif`;r.font=o;const n=Math.round(r.measureText(e.trim()).width);return i>1?Math.round(n/i)*i:n}static drawImage(e,t,i,r){const o=i.x+.5*i.width-.5*r.width,n=.5*i.height+.5*r.height;e.drawImage(t,o,-n,r.width,r.height)}drawHorizontalCrossLine(e,t,i,r){const{minX:o,maxX:n}=i;e.setLineDash(r),e.beginPath(),rr.Z.drawLine(e,o,-t.y,n,-t.y),e.stroke()}drawVerticleCrossLine(e,t,i,r){const{minY:o,maxY:n}=i;e.setLineDash(r),e.beginPath(),rr.Z.drawLine(e,t.x,o,t.x,n),e.stroke()}drawSmallTriangle(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(-1,1),e.moveTo(1,0),e.lineTo(5,-5),e.lineTo(5,5),e.lineTo(1,0),e.fill(),e.closePath(),e.restore()}drawArrow(e,t,i){e.save(),e.translate(t.x,t.y),e.beginPath(),i&&e.scale(1,-1),e.rect(-4,0,9,2),e.moveTo(.5,2),e.lineTo(5,7),e.lineTo(3,7),e.lineTo(3,12),e.lineTo(-2,12),e.lineTo(-2,7),e.lineTo(-4,7),e.lineTo(.5,2),e.fill(),e.closePath(),e.restore()}drawTranscation(e,t,i,r,o,n){if(e.save(),e.translate(Math.round(t.x),Math.round(t.y)),this.drawArrow(e,{x:0,y:0},!i),n)if(i){e.translate(0,12),e.textAlign="center",e.textBaseline="top";const t=e.measureText(o);e.fillText(o,0,0),e.translate(0,t.actualBoundingBoxDescent+2),e.fillText(`+${r}`,0,0)}else{e.translate(0,-12),e.textAlign="center",e.textBaseline="bottom";const t=e.measureText(o);e.fillText(o,0,0),e.translate(0,-t.actualBoundingBoxAscent-2),e.fillText(`-${r}`,0,0)}return e.restore(),n?36:14}drawImage(e,t,i,r){const o=i.x+.5*i.width-.5*r.width,n=.5*i.height+.5*r.height;e.drawImage(t,o,-n,r.width,r.height)}}Dr.getCacheCanvas=(()=>{let e,t;return()=>(e||void 0===document||(e=document.createElement("canvas"),t=e.getContext("2d")),t)})();const Ir=Dr;class _r extends Ir{draw(){}}class Pr extends Mr{constructor(){super(...arguments),this.renderer=new _r,this.checkData=(0,_t.P2)((e=>{const t=this.getRoot(),i=t.getXAxis().getUnitTimeValue(),{length:r}=e;if(r>2&&i<864e5&&e[r-1].time>=t.lastDataTime+i)for(let o=r-1;o>=1;o--){const r=e[o-1].time,n=e[o].time;if(n<=t.lastDataTime+i)return;n-r>=2*i&&t.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:e[o-1],nextItem:e[o]}}})}}),500)}get parent(){return this.getParent()}render(e){const t=this.getRoot(),i=t.getContext(),r=t.getMarkContext(),o=this.getCtxsByDrawMode(e);if(this.clear(o),this.initialCtxs(o),this.createClipBound(o),e===It.mB.All||e===It.mB.Resize){const{xData:e,yData:r}=this.getXYTicksData(),o=t.getSettingValues("@background.vertGridLine.show"),n=t.getSettingValues("@background.vertGridLine.color"),s=t.getSettingValues("@background.vertGridLine.lineWidth");o&&(i.save(),(0,_t.ui)(i,{strokeStyle:n,lineWidth:+s}),this.renderer.drawVertGridLine(i,this.bound,e),i.restore());const a=t.getSettingValues("@background.horzGridLine.show"),l=t.getSettingValues("@background.horzGridLine.color"),c=t.getSettingValues("@background.horzGridLine.lineWidth");a&&(i.save(),(0,_t.ui)(i,{strokeStyle:l,lineWidth:+c}),this.renderer.drawHorzGridLine(i,this.bound,r),i.restore()),this._renderMainIndicatorCharts(i)}t.getAttr("annotationVisible")&&this.plotShapes(r),this.restoreCtxs(o)}drawMainSeries(e,t){const i=this.getRoot();if(t===It.oX.Line)this.plotChart(e,{chartType:It.oX.Line,data:this.getLineData(),zIndex:0,color:i.getColorFromColorTable("candle.lineColor")}),this.drawMaxAndMinArrows(e,!0);else if(t===It.oX.Area)this.plotChart(e,{chartType:It.oX.Area,data:this.getLineData(),zIndex:0,color:i.getColorFromColorTable("line.color3"),opacity:.4}),this.drawMaxAndMinArrows(e,!0);else{const i=this.transformToGroup(this.getVisibleBars());this.plotGroupGraphs(e,i,t,(e=>({fillStyle:e,strokeStyle:e}))),this.drawMaxAndMinArrows(e,!1)}this.drawLastPriceLine(e)}drawLogo(){const e=this.getRoot(),t=e.getAttr("theme")?.toLowerCase()===It.hY.LIGHT,i=e.getFrameContext();i&&vr(t?pr.rk:pr.d0).then((e=>{rr.Z.clearRect(i),this.initialCtxs([i]),i.globalAlpha=.04;const t=this.getAttr("isMobile")?{width:150,height:30}:{width:300,height:60};this.renderer.drawImage(i,e,this.getBound(),t),i.restore()}))}drawMaxAndMinArrows(e,t=!1){const i=this.getRoot().getColorFromColorTable("text.defaultColor");(0,_t.ui)(e,{fillStyle:i,strokeStyle:i}),e.beginPath();const[r,o]=this.getMaxMinItems(t);r&&o&&(this.drawArrowText(e,r,-1),this.drawArrowText(e,o,1))}drawArrowText(e,t,i){const r=this.getParent();(0,_t.ui)(e,{textAlign:It.PH.Right,textBaseline:It.Wr.Middle});const o=this.getPosition(t.time,t.value),n=r.formatterValue(t.value),s=rr.Z.measureTextWidth(n);let a=-3,l=-12;this.isOverlapLeft(o.x+l-s+a)&&((0,_t.ui)(e,{textAlign:It.PH.Left}),a=3,l=12),rr.Z.drawLine(e,o.x,o.y+i,o.x+l,o.y+i),rr.Z.drawText(e,n,o.x+l+a,o.y+i),e.stroke()}drawLastPriceLine(e){const t=this.getRoot(),i=this.getParent(),r=t.getSettingValues("@contextMenu.priceLine"),o=t.getSeriesData(),n=o[0],s=o[o.length-1];if(!r||!s||!n)return;const a=i.xAxis.coordRange.getMinValue(),l=i.xAxis.coordRange.getMaxValue(),c=i.yAxis.getCoordOfValue(s.close);if(c<0||c>i.yAxis.coordRange.getMaxValue())return;const h=s.close>=s.open?t.getColorFromColorTable("cross.upLabelBgColor"):t.getColorFromColorTable("cross.downLabelBgColor");(0,_t.ui)(e,{strokeStyle:h,lineWidth:1}),this.renderer.drawHorizontalCrossLine(e,{x:0,y:c},{minX:a,maxX:l,minY:0,maxY:0},[4,4])}getBarPosition(e){const{yAxis:t}=this.getParent(),{time:i,low:r,high:o,open:n,close:s}=e;return{x:this.xAxis.getCoordOfValue(i),lowY:t.getCoordOfValue(r),highY:t.getCoordOfValue(o),openY:t.getCoordOfValue(n),closeY:t.getCoordOfValue(s)}}getPosition(e,t){return{x:this.xAxis.getCoordOfValue(e),y:-this.parent.yAxis.getCoordOfValue(t)}}getLineData(){const e=this.getRoot().getVisibleSeriesData();return this.checkData(e),e.map((e=>{const{time:t,close:i}=e;return{time:t,value:i}}))}getVisibleBars(){const e=this.getRoot(),t=e.getVisibleSeriesData();this.checkData(t);const{barWeight:i=.8}=e.getAttr("candlestick"),r=e.getSettingValues("@symbol.candlestick.up.color"),o=e.getSettingValues("@symbol.candlestick.down.color"),n=e.getSettingValues("@symbol.candlestick.up.borderColor"),s=e.getSettingValues("@symbol.candlestick.down.borderColor"),a=e.getSettingValues("@symbol.candlestick.up.wickColor"),l=e.getSettingValues("@symbol.candlestick.down.wickColor"),c=this.getParent().getFixedBarWidth(i);let h;const d=e.getXAxis().getUnitTimeValue()<864e5;return t.map(((i,u)=>{const{x:g,lowY:m,highY:p,openY:y,closeY:x}=this.getBarPosition(i);return d&&u>0&&!(0,_t.Fr)(g-h-this.xAxis.unitWidth,1e-5)&&e.fire("dispatchErrorData",{data:{type:"renderError",payload:{prevItem:t[u-1],nextItem:i}}}),h=g,{...i,x:g,y:Math.max(y,x),width:c,height:Math.max(1,Math.abs(x-y)),openY:y,closeY:x,highY:p,lowY:m,color:i.close>=i.open?r:o,borderColor:i.close>=i.open?n:s,wickColor:i.close>=i.open?a:l}}))}getMaxMinItems(e=!1){const t=this.getRoot(),i=this.xAxis.domainRange,r=t.getVisibleSeriesData().filter((e=>i.contain(e.time)));if(0===r.length)return[];let o={time:0,value:-Number.MAX_SAFE_INTEGER},n={time:0,value:Number.MAX_SAFE_INTEGER};for(let t=0;t<r.length;t++){const{time:i,close:s,high:a,low:l}=r[t];e?(s>o.value&&(o={time:i,value:s}),s<n.value&&(n={time:i,value:s})):(a>o.value&&(o={time:i,value:a}),l<n.value&&(n={time:i,value:l}))}return[o,n]}isOverlapLeft(e){return e<this.xAxis.coordRange.getMinValue()}_renderMainIndicatorCharts(e){const t=this.getRoot(),i=t.getSettingValues(t.getSettingManager().getSymbolDescription().styleKey),r=this.getParent().getVisibleResults(),o=[],n=[];r.forEach((e=>{const[t,i]=(0,_t.ln)(e,(e=>e.zIndex<0));o.push(...t),n.push(...i)})),o.sort(((e,t)=>(e.zIndex||0)-(t.zIndex||0))),o.forEach(this.plotChart.bind(this,e)),this.drawMainSeries(e,i?.toUpperCase()),n.sort(((e,t)=>(e.zIndex||0)-(t.zIndex||0))),n.forEach(this.plotChart.bind(this,e))}}class Wr extends Ir{constructor(){super(...arguments),this.drawCloseIcon=(e,t)=>{const{x:i,y:r,width:o,height:n}=t;e.beginPath(),rr.Z.strokeRect(e,i,-(r+n),o,n),rr.Z.drawLine(e,i+3,-(r+3),i+o-3,-(r+n-3)),rr.Z.drawLine(e,i+3,-(r+n-3),i+o-3,-(r+3)),e.stroke()}}draw(e,t){const{width:i,height:r}=t;rr.Z.drawLine(e,0,-r,i,-r),e.stroke()}}class Rr extends Mr{constructor(){super(...arguments),this.renderer=new Wr,this.weight=.3}render(e){const t=this.getRoot(),i=this.getParent().getAttr("indicatorType"),r=t.getContext(),o=this.getCtxsByDrawMode(e);this.clear(o);const n=t.getIndicatorViewByName(i)?.visible;if(!n)return;this.initialCtxs(o),this.createClipBound(r);const{xData:s,yData:a}=this.getXYTicksData(),l=t.getSettingValues("@background.vertGridLine.show"),c=t.getSettingValues("@background.vertGridLine.color"),h=t.getSettingValues("@background.vertGridLine.lineWidth");l&&(r.save(),(0,_t.ui)(r,{strokeStyle:c,lineWidth:+h}),this.renderer.drawVertGridLine(r,this.bound,s),r.restore());const d=t.getSettingValues("@background.horzGridLine.show"),u=t.getSettingValues("@background.horzGridLine.color"),g=t.getSettingValues("@background.horzGridLine.lineWidth");d&&(r.save(),(0,_t.ui)(r,{strokeStyle:u,lineWidth:+g}),this.renderer.drawHorzGridLine(r,this.bound,a),r.restore()),this._renderIndicatorCharts(r),this.restoreCtxs(o)}_renderIndicatorCharts(e){const t=this.getParent(),i=t.getVisibleChartData(t.getPanelId());i.sort(((e,t)=>(e.zIndex||0)-(t.zIndex||0))),i.forEach(this.plotChart.bind(this,e))}}var Br=i(37352),Hr=i.n(Br);class Zr extends Ir{constructor(){super(...arguments),this.drawTicks=(e,t,{textMargin:i,tickWidth:r,precision:o,boudHeight:n,textHeight:s})=>{e.beginPath(),t.forEach((t=>{let{p:a,v:l}=t;rr.Z.drawLine(e,.5,-a-.5,r,-a-.5);const c=o>=0&&(0,di.hj)(l)?l.toFixed(o):`${l}`;a>n-.5*s?a=n-.5*s:a<.5*s&&(a=.5*s),e.fillText(c,r+i,-a)})),e.stroke()}}draw(e,t){e.beginPath(),rr.Z.drawLine(e,0,0,0,-t.height),e.stroke()}}class Or extends Tr{constructor(){super(),this.config={...Wt()(Tr.defaultConfig),zIndex:1e3},this.renderer=new Zr,this.on("mousemove",this.onmousemove),this.on("mousewheel",this.onmousewheel),this.on("mouseout",this.onmouseout),setTimeout((()=>{this.getParent().panelType===It.wh.BASE&&setInterval((()=>{this.drawCountdown()}),1e3)}),0)}getCtxsByDrawMode(e){const t=this.getRoot(),i=t.getContext(),r=t.getMarkContext();return{[It.mB.All]:[i,r],[It.mB.Resize]:[i,r],[It.mB.Marks]:[r]}[e]||[]}clear(e){const t=this.getParent(),i=this.getClearBound(t.isLastPanel?6:0);e.forEach((e=>rr.Z.clearRect(e,i)))}render(e){const t=this.getRoot(),i=this.getParent(),{tick:{width:r=5,textMargin:o=5}}=t.getConfig(),n=t.getContext(),s=t.getMarkContext(),a=this.getCtxsByDrawMode(e);if(this.clear(a),this.initialCtxs(a),e===It.mB.All||e===It.mB.Resize){this.createClipBound(n,i.isLastPanel?6:0),(0,_t.ui)(n,{strokeStyle:t.getColorFromColorTable("axis.tickLineColor"),fillStyle:t.getColorFromColorTable("axis.tickTextColor"),textBaseline:It.Wr.Middle,textAlign:It.PH.Left});const e={tickWidth:r,textMargin:o,precision:-1,boudHeight:this.getBound().height,textHeight:10};i.panelType===It.wh.BASE&&(e.precision=t.getAttr("precision")),this.renderer.drawTicks(n,this.getTicksData(),e);const s=t.getSettingValues("@background.frame.color");(0,_t.ui)(n,{strokeStyle:s}),this.renderer.draw(n,this.bound)}this.createClipBound(s),t.getAttr("annotationVisible")&&this.plotShapes(s),this.drawLastUpdateItemShape(s),this.drawCountdown(),this.restoreCtxs(a)}drawLastUpdateItemShape(e){const t=this.getRoot(),i=t.getSeriesData(),r=t.getSettingValues("@contextMenu.priceLine"),o=t.getVisibleSeriesData(),n=i[i.length-1],s=o[o.length-1];s&&this.drawPriceLabel({ctx:e,item:s}),n&&r&&this.drawPriceLabel({ctx:e,item:n})}drawPriceLabel({ctx:e,item:t}){const i=this.getParent(),r=this.getRoot();if(i.panelType!==It.wh.BASE)return;const{yAxis:o}=i,{close:n,open:s}=t,a=o.getCoordOfValue(n);if(a<0||a>o.coordRange.getMaxValue())return;const[l,c]=n>=s?[r.getColorFromColorTable("cross.upLabelBgColor"),r.getColorFromColorTable("cross.upLabelBorderColor")]:[r.getColorFromColorTable("cross.downLabelBgColor"),r.getColorFromColorTable("cross.downLabelBorderColor")],h={point:{x:1,y:-a},text:`${i.formatterValue(n)}`,color:r.getColorFromColorTable("cross.labelTextColor"),bgColor:l,borderColor:c};this.renderer.drawYAxisLabel(e,h,this.getYAxisWidth()-1,18)}setViewBound(){const e=this.getRoot(),t=this.getParent().getBound(),i=e.getAttr("margin"),{x:r,y:o,width:n,height:s}=t;this.setBound({x:r+n-i.right,y:o,width:i.right,height:s})}getTicksData(){const e=this.getParent(),t=e.yAxis,i=this.bound.height;if(!t)return[];const r={};return t.getAxisData().map((({p:t,v:i})=>{const o=e.formatterValue(+i);return((e,t,i)=>{if(t&&i){const r=Hr()(i),o=Hr()(e),n=Hr()(t);return Hr()(n).minus(r).abs().gte(o.minus(r).abs())}return!0})(+i,r[o],+o)&&(r[o]=+i),{p:t,fv:o,v:i}})).reduce(((e,{p:t,v:o,fv:n})=>(r[n]===o&&t>=0&&t<=i&&e.push({p:t,v:n}),e)),[])}drawCountdown(){const e=this.getParent(),t=this.getRoot(),i=t.getCountdownContext(),r=t.getSettingValues("@contextMenu.countDown");this.clear([i]),this.initialCtxs([i]),e.panelType===It.wh.BASE&&r?(this.createClipBound(i),this.renderer.drawYAxisLabel(i,this.getCountdownLabel(),this.getYAxisWidth()-1,18),this.restoreCtxs([i])):this.restoreCtxs([i])}getNextTimestamp(){const e=this.getRoot(),t=e.getAttr("interval"),i=Dt.K0[t],r=e.getMaxTimestamp()+i;return r<Date.now()?r+i:r}getTimeUntilNextInterval(e){const t=this.getRoot().getAttr("interval"),i=Dt.K0[t],r=this.getNextTimestamp()-e;return r>0?r>i?i:r:0}getCountdownText(e){const t=this.getRoot().getAttr("interval"),[,i,r,o,n]=/\d{4}-\d{2}-(\d{2})T(\d{2}):(\d{2}):(\d{2})/.exec(new Date(e).toISOString())||[],[s,a,l,c]=[(+i-1).toString().padStart(2,"0"),r,o,n];switch(t){case"1s":case"1m":case"3m":case"5m":case"15m":case"30m":case"1h":return`${l}:${c}`;case"2h":case"4h":case"6h":case"8h":case"12h":case"1d":return`${a}:${l}:${c}`;default:return`${s}D:${a}H`}}getCountdownLabel(){const e=this.getParent(),t=this.getRoot(),i=t.getVisibleSeriesData(),r=i[i.length-1]||{},{close:o,open:n}=r,[s,a,l]=o>=n?[t.getSettingValues("@countdown.upTextColor"),t.getSettingValues("@countdown.upBgColor"),t.getSettingValues("@countdown.upBorderColor")]:[t.getSettingValues("@countdown.downTextColor"),t.getSettingValues("@countdown.downBgColor"),t.getSettingValues("@countdown.downBorderColor")],c=this.getCountdownText(this.getTimeUntilNextInterval(Date.now())),h=e?.yAxis?.getCoordOfValue(o);return{point:{x:1,y:h?18-h:0},text:c.toString(),color:s,bgColor:a,borderColor:l}}onmousemove(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:Dt.Li.NSRESIZE},weight:1e3,isRecord:!1})}onmouseout(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})}onmousewheel(e){const t=this.getParent();if(t.panelType===It.wh.EXT)return;const{originEvent:i}=e,{deltaY:r}=i,{yAxis:o}=t,n=o.getCurrentScaleCoeff(),s=r>0?1.02:1/1.02;o.scaleAroundCenter(s);const a=o.getCurrentScaleCoeff();(0,_t.Fr)(n-a)||t.update(),i.preventDefault()}}var Nr=i(59712);class Fr extends Vr{get yAxis(){return this._yAxis||[...this._supplyYAxisMap.values()][0]}get panelType(){return this._panelType}get weight(){return this._weight}get xAxis(){return this.getParent().getXAxis()}get chartResult(){const e=this.getAttr("indicatorType"),{result:t=[]}=this._result.get(e)||{};return t}get results(){return Array.from(this._result.values()).map((({result:e=[]})=>e))}get titleContainer(){return this._titleContainer}get mainPane(){return this._mainWidget}get axisPane(){return this._axisWidget}get timeAxisPane(){return this.getParent().getTimeAxisWidget()}get isLastPanel(){const e=this.getParent().getIPanels();return e[e.length-1]===this}get isDiffPanel(){const e=this.getParent().getIndicatorHelperByName(this.getPanelId());return!!e?.defaultProps.isDiffSource}constructor(e,t){super(),this.widgets=[],this._isWaiting=!1,this._weight=0,this._result=new Map,this._isFirstWatch=!0,this._storageData={annotations:[],indicators:[],weight:.25},this._supplyYAxisMap=new Map,this._isFirstRender=!0,this.updateChartData=(0,_t.Ds)(((e=0,t)=>{const i=this.getAttr("indicatorType"),r=this.getPanelId(),o=this.getParent(),{indicatorViews:n}=o,s=this.getSeriesData();if(i!==It.A.CANDLE){const n=o.getIndicatorViewByName(r);if(!n||e>0&&n.isDiffSource)return;const{params:a}=n,l=o.getIndicatorHelperByName(r);if(void 0===l)return;if(e>0&&void 0!==l.updateResult){const t=this._result.get(r);if(t&&s[e]?.time)return void l.updateResult(e,t.result,a,s[e])}try{l.getResult(s,a,(e=>{this._result.set(i,{result:e,params:a,styles:n.styles}),t?.()}))}catch(e){Nr.error(e.message)}}else{let i=n.filter((({isHistBase:e,id:t})=>e&&o.getIndicatorViewByName(t)&&o.getIndicatorHelperByName(t))).length;n.forEach((({id:r,isHistBase:n,params:a})=>{if(!n)return;const l=o.getIndicatorViewByName(r);if(!l)return;const c=o.getIndicatorHelperByName(r);if(c){if(e>0&&void 0!==c.updateResult){const t=this._result.get(r);if(t&&s[e]?.time)return void c.updateResult(e,t.result,a,s[e])}try{c.getResult(s,a,(e=>{i--,this._result.set(r,{result:e,params:a,styles:l.styles}),0===i&&t?.()}))}catch(e){Nr.error("indicator get Result occured error: ",e.message)}}}))}}),100,!0),this.watchTheme=e=>{this.drawLogo()},this.config={...Wt()(Vr.defaultConfig),iconSize:10,margin:5,isShowClose:!1,isShowSetting:!0,titleInfo:{},isFormatNum:!1,isAbleTriggerMove:!0,isDestryed:!1,...t},this._panelType=e,this._weight=t?.weight||(this.panelType===It.wh.BASE?.75:.25),this._initWidgets()}setYAxis(){this._supplyYAxisMap.clear();const{default:e,...t}=this._getYExtent(),i=this._panelType===It.wh.BASE?25:10;e.isScaleCenter?this._yAxis=new qi([e.min,e.max],[0,this.bound.height-i]):this._yAxis=new yr([0,e.max],[0,this.bound.height-i]),Object.keys(t||{}).forEach((e=>{const{max:r,min:o,isScaleCenter:n}=t[e],s=n?new qi([o,r],[0,this.bound.height-i]):new yr([0,r],[0,this.bound.height-i]);this._supplyYAxisMap.set(e,s)}))}getPanelId(){return this.getAttr("id")}getYAxisByIndex(e){return this._supplyYAxisMap.get(e)}getAnnotations(){return this._mainWidget.getAnnotations()}getSavedData(){return this._storageData}updateWeight(e){(0,di.hj)(e)&&(this._weight=e)}save(){const e=this.getAnnotations(),t=[];for(let i=0,r=e.length;i<r;i++)e[i].getAttr("isNeedStore")&&t.push(e[i].getDescription());this._storageData.annotations=t,this._storageData.indicators=this.getSaveIndicatorsData(),this._storageData.weight=this._weight,this.getParent().saveChart()}getSaveIndicatorsData(){const e=[],t=this.getParent();if(this._panelType===It.wh.BASE){const{indicatorViews:i}=t;i.forEach((t=>{const{id:i,title:r,isHistBase:o,params:n,visible:s,isTriggeredByClick:a=!1,isCustom:l=!1}=t;o&&e.push({name:r,id:i,type:r,params:n,visible:s,isTriggeredByClick:a,isCustom:l})}))}else{const i=this.getPanelId(),{id:r,title:o,params:n={},visible:s,isCustom:a=!1,isTriggeredByClick:l=!1}=t.getIndicatorViewByName(i)||{};e.push({name:o,id:r,type:o,params:n,visible:s,isCustom:a,isTriggeredByClick:l})}return e}updateCursorStyle(e){const t=this.getParent(),{style:i}=t.getAttr("crossHair");t.setCursor({config:{style:e?Dt.Li.POINTER:i},weight:e?500:400,isRecord:!1})}transformAbsoluteXYToPlotItem(e){const{x:t,y:i}=this.transformPointToView(e);return{time:this.xAxis.getValueOfCoord(t),value:this.yAxis.getValueOfCoord(i)}}transformXYToAbsoluteXY(e){const{x:t,y:i}=this.getBound();return{x:t+e.x,y:i-e.y}}getI18n(e,t){return this.getParent().getI18n(e,t)}getMainBound(){const e=this.getParent(),{right:t}=e.getAttr("margin"),{x:i,y:r,width:o,height:n}=this.bound;return{x:i,y:r,width:o-t,height:n}}getChartDatas(e){const{result:t=[]}=this._result.get(e)||{};return t}hasIndicator(e){return this._result.has(e)}updateParams(e,t,i){const r=this.getParent(),o=this._result.get(e),n=r.getIndicatorHelperByName(e);o&&n&&n.getResult(this.getSeriesData(),t,(e=>{o.result=e,this.setYAxis(),i?.()}))}getSeriesData(){const{seriesData:e=[]}=this._parent.getConfig();return e}getVisibleSeriesData(){return this._parent.getAttr("visibleSeriesData")||this.getSeriesData()}setParent(e){if(this._parent)throw new Error("Current Node had parent, Pls do not set parent repeatly!");this._parent=e,this._afterSetParent()}getParent(){return this._parent}afterSetParent(){this.initEvents()}getPosition({time:e,value:t}){return{x:this.xAxis.getCoordOfValue(e),y:this.yAxis.getCoordOfValue(t)}}getYPos(e){return this.yAxis?.getCoordOfValue(e)}getPriceOfYPos(e){return this.yAxis.getValueOfCoord(e)}getPlotItemByPosition(e,t){return{time:this.xAxis.getValueOfCoord(e),value:this.yAxis.getValueOfCoord(t)}}addWidget(e){return e.setParent(this),this.widgets.push(e),this}addWidgets(e){return e.forEach((e=>{e.setParent(this),this.widgets.push(e)})),this}eachWidgets(e){this.widgets.forEach((t=>{e.call(this,t)}))}setViewBound(e){e!==It.Vt.Width&&this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.updateTitleContainer()}getAllWeight(){const{iPanels:e}=this.getParent();return e.reduce(((e,t)=>e+t.weight),0)}updateViewBound(){this.setBound(this.getUpdatedBound()),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()}updateViewBoundHeight(e,t){const i=this.getParent(),{visibleViewHeight:r}=i,o=this.bound.height+e,n=this.getAllWeight();this._weight=o/r*n,this.setBound({...this.bound,y:this.bound.y+t,height:o}),this.setWidgetsBound(),this.setYAxis(),this.updateTitleContainer()}setWidgetsBound(){this.eachWidgets((e=>e.setViewBound()))}update(e=It.mB.All){if(this._isWaiting)return;this._isWaiting=!0;const t=this.getParent();setTimeout((()=>{t.hasPanel(this)&&(this.updateImmediate(e),t.getFrontGapOfIPanel(this)?.render(),this._isWaiting=!1)}),16)}updateImmediate(e=It.mB.All){this.drawLogo(e),this.yAxis&&(this.widgets.forEach((t=>{t.updateImmediate(e)})),this.updateTitleLabel(),this._isFirstRender=!1)}removeWidget(e){for(let t=0;t<this.widgets.length;t++)if(this.widgets[t]===e){this.widgets.splice(t,1);break}return this}removeIndicator(e){this._result.delete(e)}initEvents(){const e=this.getParent(),t=this.getPanelId(),i=e.getIndicatorHelperByName(t);i?.defaultProps.isDiffSource?(i?.subscribe?.((()=>{this.updateChartData(0,(()=>{this.setYAxis(),this.update()}))})),e.watch(["symbol","interval"],(()=>{if(this.getAttr("isDestryed"))return;const{symbol:t,interval:r}=e.getConfig();if(t&&r){const[o,n=Date.now()]=e.getTimeExtent();i.init(t,r,{startTime:o,endTime:n})}}),!0),e.on("afterTimeShifted",t,(0,_t.Ds)((({minTime:e,shiftedMinTime:t})=>{e-t>(this.xAxis?.getUnitTimeValue()||Number.MAX_SAFE_INTEGER)&&i.loadData({startTime:t,endTime:e-1})}),100))):e.watch("theme",this.watchTheme)}destroy(){const e=this.getParent(),{titleContainer:t}=e;this._wrapperContainer&&t.removeChild(this._wrapperContainer);const i=this.getPanelId(),r=e.getIndicatorHelperByName(i);r?.defaultProps.isDiffSource?(r?.unSusbcribe?.(),e.off("afterTimeShifted",i),e.unwatch(["symbol","interval"])):e.unwatch("theme",this.watchTheme),this.setAttr("isDestryed",!0)}updateYExtend(){if(!this.yAxis)return;const{default:e,...t}=this._getYExtent(),i=(e,{min:t,max:i,isScaleCenter:r})=>{const o=(t+i)/2,n=(i-t)/2,s=this.yAxis.getScaleCoeff();r?e.domainRange.setMinValue(o-n*s).setMaxValue(o+n*s):e.domainRange.setMinValue(0).setMaxValue(i*s)};i(this.yAxis,e),Object.keys(t||{}).forEach((e=>{const r=this.getYAxisByIndex(e);r&&i(r,t[e])}))}getCloseIconBound(){const{margin:e=10,iconSize:t=40}=this.getConfig();return{x:this.bound.width-e-t,y:this.bound.height-e-t,width:t,height:t}}getVisibleChartData(e){const t=this.getParent(),i=t.getColorFromColorTable("defaultColor"),r=this.xAxis.getUnitTimeValue(),o=this.xAxis.domainRange,n=new ji(o.getMinValue()-r,o.getMaxValue()+r),s=this.getChartDatas(e),a={},l=(e,t)=>{const{vals:i,stack:r}=a[e];if(!i)return[0,1,0];const{length:o}=i,n=i.indexOf(t);let s=0;return r[e]?.has(t)&&(s=r[e]?.get(t)||0),[n,o,s]},c=s.filter((({visible:e})=>!1!==t.getSettingValues(e))).map((({data:e,borderData:r,color:o,colors:s,labelColors:a,lineWidth:l,...c})=>{const h={...c,data:[],lineWidth:l?t.getSettingValues(`${l}`):1};try{const[t,l]=n.getSliceArrayIndexs(e,(e=>e.time)),c=s?s.slice(t,l):[],d=a?a.slice(t,l):[];h.data=e.slice(t,l).map(((e,t)=>({...e,color:c[t]||o||i,labelColor:d[t]||o||i}))),r&&(h.borderData=n.sliceArray(r,(e=>e.time)))}catch(t){Nr.error(n,e)}return h}));return c.forEach((e=>{const{data:t,chartType:i,visible:r=!0,stack:o,yAxisIndex:n}=e;if(i===It.oX.Bar&&r){let i;o&&(i=c.find((e=>e.name===o&&e.data!==t&&e.yAxisIndex===n))),t.forEach((({time:e})=>{if(void 0===a[e]&&(a[e]={vals:[],stack:{}}),i&&i?.data?.length>1){const r=(0,_t.ry)(i.data,(({time:t})=>e-t)),o=i.data[r];o?.time===e&&(void 0===a[e].stack[e]&&(a[e].stack[e]=new Map),a[e].stack[e].set(t,o.value))}void 0===i&&a[e].vals.push(t)})),e.getBarInfos=l}})),c}getVisibleResults(){const e=this.getParent();return Array.from(this._result?.keys?.()||{}).filter((t=>{const{visible:i=!0}=e.getIndicatorViewByName(t)||{};return i})).map((e=>this.getVisibleChartData(e)))}getBarDatas(e,{zeroBase:t=0,yAxisIndex:i,indicatorType:r},o){const n=this.getParent(),s=n.getSettingValues("@MACD.longGrowth.style"),a=n.getSettingValues("@MACD.longGrowth.color"),l=n.getSettingValues("@MACD.longFall.style"),c=n.getSettingValues("@MACD.longFall.color"),h=n.getSettingValues("@MACD.shortGrowth.style"),d=n.getSettingValues("@MACD.shortGrowth.color"),u=n.getSettingValues("@MACD.shortFall.style"),g=n.getSettingValues("@MACD.shortFall.color"),m=n.getAttr("candlestick")?.barWeight,p=this.getAttr("barWeight")||m,y=this.getFixedBarWidth(p),x=[],f=void 0!==i?this.getYAxisByIndex(i):this.yAxis;if(!f)return[];const C=f.getCoordOfValue(t);for(let i=0,m=e.length;i<m;i++){const{time:m,value:p,color:b}=e[i];if((0,di.hj)(m)&&(0,di.hj)(p)){const w=this.xAxis.getCoordOfValue(m),[v,L,S]=o?.(m,e)||[0,1,0];let E=p;const k=Math.max(1,Math.abs(f.getCoordOfValue(E)-C));p<0==S<0&&(E+=S);const V=f.getCoordOfValue(E),A=Math.min(-1,E>t?-V:-C),[T,M]=this.findPosition(w,v,L,y);let D=n.getColorFromColorTable(b||"defaultColor"),I=D;if(r===`@${It.A.MACD}`){const{value:t}=e[i-1]||{};p>0&&t>=p?(I=l===er.Hollow?"transparent":c,D=c):p<0&&t>=p?(I=u===er.Hollow?"transparent":g,D=g):p>0&&t<p?(I=s===er.Hollow?"transparent":a,D=a):p<0&&t<=p&&(I=h===er.Hollow?"transparent":d,D=d)}x.push({x:T,y:A,width:M,height:k,value:p,color:D,strokeColor:D,fillColor:I})}}return x}findPosition(e,t,i,r){if(1===i)return[e-.5*r,r];const o=r/(10*i+2*(i-1)),n=10*o,s=2*o,a=i/2;let l=0;return l=i%2==0?e+(t-a)*(n+s)+.5*s:e+(t-a)*n+Math.round(t-a)*s,[l,n]}getLineDatas(e,t){const i=this.getParent(),r=[],o=void 0!==t?this.getYAxisByIndex(t):this.yAxis;if(!o)return[];for(let t=0,n=e.length;t<n;t++){const{time:n,value:s,color:a,labelColor:l}=e[t];if((0,di.hj)(n)&&(0,di.hj)(s)){const e={x:this.xAxis.getCoordOfValue(n),y:-o.getCoordOfValue(s)};a&&(e.color=i.getColorFromColorTable(a)),l&&(e.labelColor=i.getColorFromColorTable(l)),r.push(e)}}return r}updateTitleContainer(){const e=this.getParent().getAttr("margin"),{x:t,y:i,width:r,height:o}=this.getBound(),n={position:"absolute",top:i-o+"px",left:`${t}px`,maxWidth:r-e.right+"px",padding:"3px 4px",boxSizing:"border-box"};if(this._wrapperContainer)(0,_t.AS)(this._wrapperContainer,n);else{const{titleContainer:e}=this.getParent();this._wrapperContainer=(0,_t.az)("div",n,"title-wrapper-container"),this._titleContainer=(0,_t.az)("div",{},"chart-title-row"),this._indicatorContainer=(0,_t.az)("div",{},"chart-title-indicator-container"),this._titleContainer.appendChild(this._indicatorContainer),this._wrapperContainer.appendChild(this._titleContainer),e.appendChild(this._wrapperContainer)}}formatterValue(e){if(!(0,di.hj)(e))return"";const t=this.getParent(),i=this.getAttr("isFormatNum")||!1,{dataFormatter:r=It.aI.Normal,isFloor:o}=t.getAttr("candlestick"),n=this.getAttr("precision")||t.getAttr("precision");return i?(0,_t.XR)(e):r===It.aI.Percentage&&this.panelType===It.wh.BASE?(0,_t.Lo)(e,n):(0,_t.gH)(e,n,!!o)}formatOCHL(e,t=hr()){if(!(0,di.hj)(e))return"";const i=this.getParent(),r=this.getAttr("precision")||i.getAttr("precision"),o=t(e,r);return(0,_t.uf)({number:o,digits:r})}updateTitleLabel(){const e=this.getParent()?.getAttr("currentItem");if(!e||!this._indicatorContainer)return;const t=this.getAttr("titleInfo"),i=this.getAttr("indicatorType"),r=this.getPanelId(),o=this.getParent(),{params:n={},visible:s=!0}=o.getIndicatorViewByName(r)||{},a=this._getTitleLabels(e,i,n);if(0===a.length)return;const l=o.regContetxt;a.length!==this._indicatorContainer.childNodes.length&&(this._indicatorContainer.innerHTML=""),a.forEach((e=>{const{label:i,key:r,styles:n={},className:s}=e,a=i.replace(/\{\{(.*?)\}\}/g,((e,t)=>l[t.trim()]||e));if(n.color&&(n.color=o.getColorFromColorTable(n.color)),!this._indicatorContainer.querySelector(`[key='${r}']`)){const e=(0,_t.az)("span",{paddingRight:"5px"},"default-label-box");e.setAttribute("key",r),this._indicatorContainer?.appendChild(e),t[r]="",s&&fr(e,s),this.watchProperty(r,e)}this.setWatchProperty(t,r,a,n)})),this._isFirstWatch&&a.length>0&&(this.addFoldIcon(this._titleContainer,r),this._panelType===It.wh.EXT&&this.addToolIcons(this._titleContainer,{id:r,indicatorType:i,visible:s}),this._isFirstWatch=!1),this._panelType===It.wh.BASE&&this.updateHistBaseChartsTitle(e)}setIndicatorVisible(e,t,i=!1){const r=this.getParent(),{visible:o,...n}=r.getIndicatorViewByName(e);if(o===t)return;const s=this._wrapperContainer&&this._wrapperContainer.querySelector(`[id="${e}-visible"`);if(s){const[e,i]=t?[pr.bM,this.getI18n("indicator-hide","Hide")]:[pr._q,this.getI18n("indicator-show","Show")];a=e,s.innerHTML=a,s.setAttribute("tooltip",i)}var a;r.setIndicatorView(e,{...n,visible:t,isTriggeredByClick:i}),this.setYAxis(),this.update(),this.save()}drawLogo(e=It.mB.Resize){this.getParent()?.getAttr("isHiddenLogo")||!this._isFirstRender&&e!==It.mB.Resize||this._panelType!==It.wh.BASE||this._mainWidget.drawLogo(e)}createIcon(e,t){const i=(0,_t.az)("div",{},"icon-box");return t&&i.setAttribute("id",t),i.innerHTML=e,(0,_t.AS)(i),i}addFoldIcon(e,t){const i=this.getParent(),r=i.getSettingManager(),o=`${t}-title-fold`,n=this.createIcon(pr.Y4);e?.insertBefore(n,e.firstChild);const s=t=>{t?fr(e,"fold"):Cr(e,"fold"),e.setAttribute("isFold",t?"true":"false")};n.addEventListener("click",(()=>{const t="true"===e.getAttribute("isFold");s(!t),i.setSettingValues(o,t?"false":"true")})),r?.isLoaded()?s("true"===r.getValue(o)):r?.addPenddingList((()=>{s("true"===r.getValue(o))}))}getFixedBarWidth(e=.8){const t=this.getParent().getXAxis(),i=t.unitWidth*e,r=t.unitWidth-3,o=t.unitWidth-2;return r>0?r:i>o&&o>0?o:i}addToolIcons(e,{indicatorType:t,visible:i,id:r}){if(!this.getAttr("isShowSetting"))return;const o=this.getParent(),[n,s]=i?[pr.bM,this.getI18n("indicator-hide","Hide")]:[pr._q,this.getI18n("indicator-show","Show")],a=this.createIcon(n,`${t}-visible`);a.setAttribute("tooltip",s);const l=this.createIcon(pr.qY),c=this.createIcon(pr.Tw),h=(0,_t.az)("div",{},"indicator-title-toolbox");h.append(a,l,c),e?.append(h),l.addEventListener("click",(()=>{o?.fire("showParamsSettingPanel",{id:r})})),l.setAttribute("tooltip",this.getI18n("indicator-settings","Settings")),c.setAttribute("tooltip",this.getI18n("indicator-close","Close")),a.addEventListener("click",(()=>{const{visible:e}=o.getIndicatorViewByName(r);this.setIndicatorVisible(r,!e,!0)})),c.addEventListener("click",(()=>{o.closeIndicatorByName(r)})),wr(a),wr(l),wr(c)}updateHistBaseChartsTitle(e){const{indicatorViews:t}=this.getParent(),i=this.getAttr("titleInfo"),r=this.getParent(),o=r.regContetxt;t.forEach((n=>{const{id:s,indicatorType:a,isHistBase:l,visible:c,subElement:h,params:d}=n;if(!l)return;const u=this._getTitleLabels(e,s,d);if(0===u.length)return;let g=h.querySelector(`[key='${s}']`);g||(g=this._indicatorContainer.cloneNode(),g.setAttribute("key",s),h.appendChild(g)),u.forEach((e=>{const{label:t,key:n,styles:s={},className:a}=e,l=t.replace(/\{\{(.*?)\}\}/g,((e,t)=>o[t.trim()]||e));if(s.color&&(s.color=r.getColorFromColorTable(s.color)),!g.querySelector(`[key='${n}']`)){const e=(0,_t.az)("span",{paddingRight:"5px"},"default-label-box");e.setAttribute("key",n),g?.appendChild(e),i[n]="",a&&fr(e,a),this.watchProperty(n,e)}this.setWatchProperty(i,n,l,s)})),h.parentNode||(this._wrapperContainer.appendChild(h),t.find((({isHistBase:e})=>e))?.id===s&&this.addFoldIcon(h,"main-indicators-fold"),this.addToolIcons(h,{id:s,indicatorType:a,visible:c}))}))}getUpdatedBound(){const e=this.getAllWeight(),t=this.getParent(),{width:i,margin:r}=t.getConfig(),{visibleViewHeight:o,iPanels:n}=t;let s=0;for(let e=0;e<n.length;e++){const t=n[e];if(t===this)break;s+=t.bound.height}const a=o*this._weight/e,l=i-r.left;return s+=a,{x:r.left,y:s,height:a,width:l}}_initWidgets(){this._axisWidget=new Or,this._panelType===It.wh.BASE?(this._mainWidget=new Pr,this.addWidgets([this._mainWidget,this._axisWidget])):(this._mainWidget=new Rr,this.addWidgets([this._mainWidget,this._axisWidget]))}_getYExtent(){const e=this.getAttr("indicatorType"),t=this.getParent(),i=t.getAttr("precision"),r=t.getSettingValues(t.getSettingManager().getSymbolDescription().styleKey),o={default:{max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!0,fixMax:!1,fixMin:!1}};if(e===It.A.CANDLE){const e=this.getVisibleSeriesData().reduce((({high:e,low:t},i)=>{const o=r===It.oX.CandleBar||It.oX.HollowCandleBar?i.high:i.close,n=r===It.oX.CandleBar||It.oX.HollowCandleBar?i.low:i.close;return{high:e=Math.max(e,o),low:t=Math.min(t,n)}}),{high:Number.MIN_SAFE_INTEGER,low:Number.MAX_SAFE_INTEGER});o.default.max=e.high,o.default.min=e.low,o.default.isScaleCenter=!0;const t=this.getVisibleResults();for(let e=0,i=t.length;e<i;e++)t[e].forEach((({data:e,yAxisIndex:t,isScaleCenter:i=!0,min:r,max:n})=>{let s={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==t?(o[t]||(o[t]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:i,fixMax:!1,fixMin:!1}),s=o[t]):s=o.default,(0,di.hj)(n))s.max=n,s.fixMax=!0;else if(!s.fixMax){const t=ur()(e,"value");t&&t.value>s.max&&(s.max=t.value)}if((0,di.hj)(r))s.min=r,s.fixMin=!0;else if(!s.fixMin){const t=mr()(e,"value");t&&t.value<s.min&&(s.min=t.value)}}))}else this.getVisibleChartData(e).forEach((({chartType:e,data:t=[],yAxisIndex:i,isScaleCenter:r=!0,min:n,max:s,stack:a,zeroBase:l=0,getBarInfos:c})=>{let h={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,fixMax:!1,fixMin:!1};if(void 0!==i?(o[i]||(o[i]={max:-Number.MAX_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,isScaleCenter:!!r,fixMin:!1,fixMax:!1}),h=o[i]):(h=o.default,o.default.isScaleCenter=!!r),(0,di.hj)(s))h.max=s,h.fixMax=!0;else if(!h.fixMax){const e=ur()(t,"value");e&&e.value>h.max&&(h.max=e.value)}if((0,di.hj)(n))h.min=n,h.fixMin=!0;else if(!h.fixMin){const e=mr()(t,"value");e&&e.value<h.min&&(h.min=e.value)}if(void 0!==a&&e===It.oX.Bar){const e=t.map((({time:e,value:i})=>{const[,,r=0]=c?.(e,t)||[0,1,0];return i<l==r<l?{time:e,value:i+r}:{time:e,value:i}})),i=ur()(e,"value");i&&i.value>h.max&&!h.fixMin&&(h.max=i.value);const r=mr()(t,"value");r&&r.value<h.min&&!h.fixMax&&(h.min=r.value)}}));return Object.keys(o).forEach((e=>{const{min:t,max:r,isScaleCenter:n}=o[e];if((0,_t.Fr)(r-t,10**-i)){const i=0===r?10:Math.abs(r),s=10**Math.floor(Math.log(i)/Math.log(10))/2;n||(o[e].max=r+s),o[e].min=t-s,o[e].max=r+s}})),o}_getTitleLabels(e,t,i={}){let r=[];const o=this.getParent(),n=o.getAttr("precision"),s=this.getAttr("isFormatNum"),a=o.getXAxis();if(t===It.A.CANDLE){const{time:t,open:i,high:n,low:s,close:l,change:c="0.00%",amplitude:h="0.00%"}=e,d=l>=i?{color:o.getColorFromColorTable("candle.upBarColor")}:{color:o.getColorFromColorTable("candle.downBarColor")},u=this.getI18n("open","Open"),g=this.getI18n("high","High"),m=this.getI18n("close","Close"),p=this.getI18n("low","Low"),y=this.getI18n("change","CHANGE"),x=this.getI18n("amplitude","AMPLITUDE");r.push({label:this._getTitleTime(t,a.getOriginTimeScaleType()),key:"t"},{label:`${u}:`,key:"O"},{label:this.formatOCHL(i),key:"o",styles:d},{label:`${g}:`,key:"H"},{label:this.formatOCHL(n,lr()),key:"h",styles:d},{label:`${p}:`,key:"L"},{label:this.formatOCHL(s),key:"l",styles:d},{label:`${m}:`,key:"C"},{label:this.formatOCHL(l),key:"c",styles:d},{label:`${y}:`,key:"CHANGE",className:"title_change_label"},{label:c,key:"change",styles:d,className:"title_change_value"},{label:`${x}:`,key:"AMP",className:"title_amplitude_label"},{label:h,key:"amp",styles:d,className:"title_amplitude_value"})}else{const a=o.getIndicatorHelperByName(t);if(void 0===a)return[];const l=this.getChartDatas(t).map((({visible:e,...t})=>({...t,visible:!1!==o.getSettingValues(e)})));r=a.getLabel(e.time,l,{...i,precision:n,isFormatNum:s})}return r}_getTitleTime(e,t){let i="YYYY/MM/DD";return t===It.QX.Month?i="YYYY/MM/01":t===It.QX.Minute?i="YYYY/MM/DD hh:mm":t===It.QX.Hour?i="YYYY/MM/DD hh:00":t===It.QX.Second&&(i="YYYY/MM/DD hh:mm:ss"),(0,_t.mr)(e,i)}_afterSetParent(){}}class Kr extends Ir{draw(e,t){const{width:i}=t;rr.Z.fillRect(e,0,0,i,1)}}var Ur=i(10359);class $r extends Tr{get frontPanel(){return this._frontPanel}set frontPanel(e){this._frontPanel=e}get nextPanel(){return this._nextPanel}set nextPanel(e){this._nextPanel=e}constructor(e,t){super(),this.config={...Wt()(Tr.defaultConfig),zIndex:100},this.renderer=new Kr,this._frontPanel=e,this._nextPanel=t,this._initEvents()}clear(){const e=this.getRoot().getContext(),{x:t,y:i,width:r}=this.getClearBound();rr.Z.clearRect(e,{x:t,y:i,width:r,height:1})}render(){const e=this.getRoot(),t=e.getContext();t.save(),this.setCanvasTransform(t);const i=e.getSettingValues("@background.frame.color");(0,_t.ui)(t,{fillStyle:i}),this.renderer.draw(t,this.bound),t.restore()}setViewBound(){const e=this._frontPanel.getBound();this.setBound({...e,height:0})}contain(e){const{x:t,y:i,width:r,height:o}=this.bound,n=new Ur.Z(t,0,r,o),s=[e.x,i-e.y];return n.expand(0,5).contain(s)}_initEvents(){this.on("mousedown",this._onmousedown),this.on("mousemove",this._onmousemove),this.on("mouseout",this._onmouseout)}_onmousemove(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:Dt.Li.NSRESIZE},weight:1e3,isRecord:!1,key:"gap"})}_onmouseout(){this.getRoot().setCursor({key:"gap",isClear:!0,config:{},weight:1e3})}_onmousedown(e){let{point:{y:t},originEvent:i}=e;const r=this.getRoot();this._clearDragEvent(),this._frontPanel.setAttr("isAbleTriggerMove",!1),this._nextPanel.setAttr("isAbleTriggerMove",!1);let o=!1;r.on("mousemove","gap",(e=>{const{y:i}=e.point,r=i-t,{height:n}=this._frontPanel.getBound(),{height:s}=this._nextPanel.getBound();n+r<=30||s-r<=30||(o=!0,this._frontPanel.updateViewBoundHeight(r,r),this.setBound({...this.bound,y:this.bound.y+r}),this._nextPanel.updateViewBoundHeight(-r,0),this._frontPanel.update(It.mB.Resize),this._nextPanel.update(It.mB.Resize),t=i)})),r.on("mouseup","gap",(()=>{this._frontPanel.setAttr("isAbleTriggerMove",!0),this._nextPanel.setAttr("isAbleTriggerMove",!0),this._clearDragEvent(),o&&(this._frontPanel.save(),this._nextPanel.save())})),i.preventDefault()}_clearDragEvent(){const e=this.getRoot();e.off("mousemove","gap"),e.off("mouseup","gap")}}class zr extends sr.Z{constructor(){super(...arguments),this.panels=[],this._indicatorViews=new Map,this._isLoaded=!1,this._isWaiting=!1,this._colorMode=Dt.UX,this.getI18n=(e,t)=>t,this.moduleManager={}}get indicatorViews(){return Array.from(this._indicatorViews.values())}registerModule(e,t){t&&this.moduleManager[e]!==t&&(this.moduleManager[e]=t)}getModule(e){return this.moduleManager[e]}getSettingManager(){return this.getModule(Dt.Jj.settingManager)}getSettingValues(e){const t=this.getSettingManager();return e&&t?t.getValue(e):void 0}setSettingValues(e,t){const i=this.getSettingManager();i?.setValue(e,t)}getIndicatorParams(e){const t=this.getSettingManager();return t?t.getValue(e):{}}getIndicatorViewByName(e){return this._indicatorViews.get(e)}setIndicatorView(e,t){this._indicatorViews.set(e,t)}deleteIndicatorViewByName(e){this._indicatorViews.delete(e)}getPanels(e){return e?this.panels.filter((t=>e(t))):this.panels}getIPanels(){return this.panels.filter((e=>e instanceof Fr))}getFrontGapOfIPanel(e){const t=this.getPanels();let i=!1;for(let r=t.length-1;r>=0;r--){const o=t[r];if(i&&o instanceof $r)return o;i=o===e}}addPanels(e){return e.forEach((e=>{this.setWidgetParent(e),this.panels.push(e)})),this}addElement(e){const t=this.getAttr("container");t&&e&&t.appendChild(e)}addElemens(e){const t=this.getAttr("container");t&&e.forEach((e=>t.appendChild(e)))}eachPanels(e,t){void 0===t?this.panels.forEach(((t,i)=>{e.call(this,t,i)})):t?this.panels.slice(0).sort(((e,t)=>t.getAttr("zIndex")-e.getAttr("zIndex"))).forEach((t=>{e.call(this,t)})):this.panels.slice(0).sort(((e,t)=>e.getAttr("zIndex")-t.getAttr("zIndex"))).forEach((t=>{e.call(this,t)}))}update(e=It.mB.All){!this._isWaiting&&this._isLoaded&&(this._isWaiting=!0,this._lastRenderTimer=requestAnimationFrame((()=>{cancelAnimationFrame(this._lastRenderTimer),this._lastRenderTimer=null,this.renderImmediate(e),this._isWaiting=!1})))}renderImmediate(e=It.mB.All){this._isLoaded&&(this._lastRenderTimer&&cancelAnimationFrame(this._lastRenderTimer),this.eachPanels((t=>{t.updateImmediate(e)}),!1),this._isWaiting=!1)}removePanel(e){for(let t=0;t<this.panels.length;t++)if(this.panels[t]===e){this.panels.splice(t,1),e instanceof Fr&&(this._indicatorViews.delete(e.getAttr("indicatorType")),e.destroy());break}return this}removePanels(e){for(let t=this.panels.length-1;t>=0;t--){const i=this.panels[t];if(e.has(i)&&(this.panels.splice(t,1),e.delete(i),i instanceof Fr&&(this._indicatorViews.delete(i.getAttr("indicatorType")),i.destroy()),0===e.size))return}}initPanelBound(e=It.Vt.All){this.eachPanels((t=>{t.setViewBound(e)}))}updatePanelBound(){this.eachPanels((e=>{e instanceof Fr&&e.updateViewBound(),e instanceof $r&&e.setViewBound()}))}resizeAllPanelBound(){this.eachPanels((e=>{e instanceof Fr?e.updateViewBound():e.setViewBound()}))}initPanelYAxis(){this.eachPanels((e=>{e instanceof Fr&&e.setYAxis()}))}filterPanels(e){return this.panels.filter((t=>e.call(this,t)))}getPanel(e){return this.panels.find(e)}hasPanel(e){return this.panels.some((t=>t===e))}setIsLoaded(e){this._isLoaded=e}isLoaded(){return this._isLoaded}registerColorTable(e,t){e=e.toLocaleLowerCase();const i=this._colorMode[e]||{},r=nr()({...i},t);Yi()(i,r)||(Object.assign(this._colorMode[e]||{},r),this.update())}getColorTableByTheme(e){return this._colorMode[e.toLocaleLowerCase()]}registerI18n(e){this.getI18n=e}}var Xr=i(73844),Gr=i(44458),Yr=i(83549),jr=i(98218);class qr extends Yr.Z{constructor(e={}){super(),this.config={...Yr.Z.defaultConfig,width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0},this.setAttrs(e),this.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],this.onCacheChange.bind(this))}onDataChange(){const e=this.getAttr("lineWidth"),t=new jr.Z.Polyline(this.getAttr("data")),{x:i,y:r,width:o,height:n}=t.getBound(),s=o+e,a=n+e;this.overrideSize({width:s,height:a}),this.setAttrs({width:s,height:a}),this.setAttr("origin",{x:i-.5*e,y:r-.5*e}),this.isDataUpdate=!0,this.isBatchUpdate=!0}getTransformOrigin(){return this.getAttr("origin")}getContextStyles(){const{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:o}=this.getConfig();return{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:o}}drawCacheScene(){if(!this.isBatchUpdate)return;const{lineDash:e,data:t,stroke:i,fill:r}=this.getConfig(),o=this.getContext(),n=this.getContextStyles();(!Yi()(n,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=n,(0,_t.ui)(o,n)),e&&o.setLineDash(e),o.beginPath(),rr.Z.clearRect(o);const{x:s,y:a}=this.getTransformOrigin();t.forEach((e=>{const t=e.map((({x:e,y:t})=>({x:e-s,y:t-a})));rr.Z.drawLines(o,t),r&&(o.closePath(),o.fill())})),i&&((0,_t.ui)(o,{globalAlpha:1}),o.stroke()),this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){const{lineDash:t,data:i,stroke:r,fill:o}=this.getConfig();(0,_t.ui)(e,this.getContextStyles()),t&&e.setLineDash(t),e.beginPath(),i.forEach((t=>{const i=t.map((({x:e,y:t})=>({x:e,y:t})));rr.Z.drawLines(e,i),o&&(e.closePath(),e.fill())})),r&&((0,_t.ui)(e,{globalAlpha:1}),e.stroke())}isHover(e,t=5){if(!this.preDetect())return!1;const i=new jr.Z.Polyline(this.getAttr("data")),{dis:r}=i.getNearestPoint(e);return t>=r}}var Qr,Jr=i(94405);!function(e){e.Up="UP",e.Down="DOWN",e.Right="RIGHT",e.Left="LEFT"}(Qr||(Qr={}));class eo{static createArrowData(e,t=Qr.Right){const i=t===Qr.Right?-this.Arrow_Offset:this.Arrow_Offset,r=new Jr.Z(e.x+i,e.y),o=new Jr.Z(0,1).rotate(120),n=new Jr.Z(0,0),s=n.clone().add(o.clone().scale(eo.Arrow_Len)),a=n.clone().substract(new Jr.Z(eo.Arrow_Len/2,0)),l=a.clone().substract(new Jr.Z(eo.Arrow_Len,0)),c=new Jr.Z(s.x,-s.y);return t===Qr.Right?[a,s,n,c,a,l].map((e=>e.clone().add(r).toXY())):[a,s,n,c,a,l].map((e=>e.clone().rotate(180).add(r).toXY()))}static createArrowPath(e,t,i={arrowLen:12,len:27,arrowAngle:45}){const r=i.arrowLen||12,o=i.len||27,n=i.arrowAngle||45,s=new Jr.Z(e.x,e.y),a=s.clone().add(t.clone().rotate(n).scale(r)).toXY(),l=s.clone().add(t.clone().rotate(-n).scale(r)).toXY(),c=s.clone().add(t.clone().scale(o)).toXY(),h=s.toXY();return[[a,h,l],[h,c]]}}eo.Arrow_Len=8,eo.Arrow_Offset=5;const to=eo;class io extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),dir:It.Us.LeftArrow,type:It.Us.Arrow},this.paths=(new qr).setAttrs({strokeStyle:Gr.e.default_line_color,lineWidth:4,fill:!1,lineJoin:"bevel"}),this.dragVertex=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"])}updateImmediate(){const e=this.getParent();if(!e)return;const{mainPane:t}=e,i=this.getData(),{x:r,y:o}=e.getPosition(i),n=this._getDirVector(),s=to.createArrowPath({x:r,y:-o},n);this.paths.setData(s),this.dragVertex.setAttrs({data:new jr.Z.Vector2(r,-o).add(n.clone().rotate(180).scale(15)).toXY()}),this.addWidgetShapes(t,[this.paths,this.dragVertex]),this.setAnnotationToWidgets([t])}getShapes(){return[this.paths,this.dragVertex]}getDescription(){const{data:e,dir:t,type:i,color:r,isLock:o}=this.getConfig();return{data:e,dir:t,type:i,color:r,isLock:o}}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t}=e;return[t]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.paths.isHover(e,20)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.dragVertex.setAttrs({isVisible:t||e,radius:Gr.e.radius,lineWidth:e?Gr.e.border_width:Gr.e.hover_border_width})}getVertexs(){return[this.dragVertex]}getEditAttribute(){const{color:e,isLock:t}=this.getConfig();return{showColor:!0,color:e,showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:"",showBg:!1,background:"",isLock:t,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}getCacheStyleKey(){return this.getAttr("dir")}updateColor(e){this.paths.setAttr("strokeStyle",e)}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}}getDragVertex(e){return this.dragVertex.isHover(e)?this.dragVertex:this.paths.isHover(e)?this.paths:void 0}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r};let n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n instanceof qr?this._dragPaths(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t,t.transformPointToView(e.point))))}_getDirVector(){const e=this.getAttr("dir"),t=new jr.Z.Vector2(1,0);return e===It.Us.DownArrow&&t.rotate(-90),e===It.Us.UpArrow&&t.rotate(90),e===It.Us.RightArrow&&t.rotate(180),t}_dragVertex(e,{x:t,y:i}){const{mainPane:r}=e,o=this.getData(),{x:n,y:s}=e.getPosition(o);r.on("mousemove",`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`,(r=>{const{x:o,y:a}=e.transformPointToView(r.point),l=o-t,c=a-i;this.setData(e.getPlotItemByPosition(n+l,s+c)),this.update()})),r.on("mouseup",`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`,(()=>{r.off(`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`),this.recoverDragVertexts(),this.compeleDraw()}))}_dragPaths(e,{x:t,y:i}){const{mainPane:r}=e,o=this.getData(),{x:n,y:s}=e.getPosition(o);r.on("mousemove",`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`,(r=>{const{x:o,y:a}=e.transformPointToView(r.point),l=o-t,c=a-i;this.setData(e.getPlotItemByPosition(n+l,s+c)),this.update()})),r.on("mouseup",`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`,(()=>{r.off(`${It.Us.LeftArrow}-${Dt.HD.MOUSE}`),this.compeleDraw()}))}}class ro extends Yr.Z{constructor(e={}){super(),this.config={...Yr.Z.defaultConfig,width:0,height:0,prevLineDash:[],fill:!0,stroke:!0,origin:{x:0,y:0},useCache:!0},this.setAttrs(e),this.watch(["lineWidth","fillStyle","strokeStyle","fill","stroke","globalAlpha"],this.onCacheChange.bind(this))}onDataChange(){const{minX:e,maxX:t,minY:i,maxY:r}=this.getMaxAndMin(),o=Math.max(t-e,1),n=Math.max(r-i,1);this.overrideSize({width:o,height:n}),this.setAttrs({width:o,height:n}),this.setAttr("origin",{x:e,y:i}),this.isDataUpdate=!0,this.isBatchUpdate=!0}getMaxAndMin(){const e=this.getAttr("data"),t=Number.MAX_SAFE_INTEGER,i=-Number.MAX_SAFE_INTEGER;return e.reduce((({minX:e,maxX:t,minY:i,maxY:r},{x:o,y:n})=>(e>o&&(e=o),t<o&&(t=o),i>n&&(i=n),r<n&&(r=n),{minX:e,maxX:t,minY:i,maxY:r})),{minX:t,maxX:i,minY:t,maxY:i})}getTransformOrigin(){return this.getAttr("origin")}getContextStyles(){const{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:o}=this.getConfig();return{strokeStyle:e,fillStyle:t,lineWidth:i,lineDash:r,globalAlpha:o}}drawCacheScene(){if(!this.isBatchUpdate)return;const{lineDash:e,data:t,stroke:i,fill:r}=this.getConfig(),o=this.getContext(),n=this.getContextStyles();(!Yi()(n,this.preContextStyles)||this.isDataUpdate)&&(this.preContextStyles=n,(0,_t.ui)(o,n)),e&&o.setLineDash(e),o.beginPath(),rr.Z.clearRect(o);const{x:s,y:a}=this.getTransformOrigin(),l=t.map((({x:e,y:t})=>({x:e-s,y:t-a})));rr.Z.drawLines(o,l),r&&(o.closePath(),o.fill()),i&&o.stroke(),this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){const{lineDash:t,data:i,stroke:r,fill:o}=this.getConfig();(0,_t.ui)(e,this.getContextStyles()),t&&e.setLineDash(t),e.beginPath(),rr.Z.drawLines(e,i),o&&(e.closePath(),e.fill()),r&&e.stroke()}isHover(e,t=5){if(!this.preDetect())return!1;const i=new jr.Z.Polyline(this.getAttr("data")),{dis:r}=i.getNearestPoint(e);return t>=r}}var oo=i(82668);class no extends Yr.Z{constructor(e={}){super(),this.config={...Yr.Z.defaultConfig,width:0,height:0,fontSize:10,fontFamily:"sans-serif",fontStyle:"",fontVariant:"",letterSpacing:0,textWidth:0,padding:0,borderRadius:0,borderColor:"#ddd",background:"#ddd",color:"#fff",text:"",dir:It.Nm.Right,useCache:!0},this.setAttrs(e),this.watch(["background","lineWidth","borderColor","color","text","fontSize","letterSpacing","fontFamily","fontStyle","fontVariant","dir","useCache","borderRadius"],this.onDataChange.bind(this))}beforeDrawHook(){const e=this.getAttr("fixWidth");if(this.isBatchUpdate&&void 0===e){const e=rr.Z.getContext();(0,_t.ui)(e,{font:this._getTextFont()});const t=this.getAttr("text");this.setAttr("textWidth",rr.Z.measureTextWidth(t))}}onDataChange(){this.isBatchUpdate=!0}getDirection(){return(this.getAttr("dir")||"").toUpperCase()}getTransformOrigin(){let{x:e,y:t}=this.getAttr("data");const i=this.getWidth(),r=this.getHeight(),o=this.getDirection();return o===It.Nm.Left&&(e-=i,t-=.5*r),o===It.Nm.Right&&(t-=.5*r),o===It.Nm.Up&&(e-=.5*i,t-=r),o===It.Nm.Down&&(e-=.5*i),{x:e,y:t}}getContextStyles(){const{color:e,lineWidth:t,background:i,borderColor:r,text:o}=this.getConfig(),n=this.getDirection();return{strokeStyle:e,lineWidth:t,fillStyle:e,background:i,borderColor:r,dir:n,text:o,font:this._getTextFont(),textBaseline:"middle",textAlign:n===It.Nm.Left?"right":n===It.Nm.Right?"left":"center"}}getWidth(){const{textWidth:e,padding:t,fixWidth:i,text:r}=this.getConfig();if((0,di.hj)(i))return i;const o=Array.isArray(t)?t[0]:t;return""!==r&&this.setAttr("textWidth",rr.Z.measureTextWidth(r)),e+2*o}getHeight(){const{padding:e,fontSize:t,fixHeight:i}=this.getConfig();return(0,di.hj)(i)?i:t+2*(Array.isArray(e)?e[1]:e)}drawCacheScene(){if(!this.isBatchUpdate)return;const e=this.getContext(),t=this.getWidth(),i=this.getHeight(),r=this.overrideSize({width:t,height:i});r&&this.setAttrs({width:t,height:i});const o=this.getContextStyles(),n=!Yi()(o,this.preContextStyles);if(n&&(this.preContextStyles=o),n||r){const{background:r,color:o,text:n,borderColor:s,stroke:a,fill:l,lineWidth:c,borderRadius:h}=this.getConfig();(0,_t.ui)(e,{fillStyle:r,strokeStyle:s,lineWidth:c}),this._hasBorderRadius(h)?(this._drawRoundRect(e,.5*c,.5*c,t-c,i-c,h),l&&e.fill(),a&&e.stroke()):(l&&rr.Z.fillRect(e,0,0,t,i),a&&rr.Z.strokeRect(e,.5*c,.5*c,t-c,i-c)),(0,_t.ui)(e,{fillStyle:o,textAlign:"center",textBaseline:"middle",font:this._getTextFont()});const d=.5*t,u=.5*i;rr.Z.drawText(e,n,d,u)}this.isBatchUpdate=!1}drawScene(e){const t=this.getAttr("data"),i=this.getWidth(),r=this.getHeight();this._drawLabel(e,i,r,t)}isHover(e){if(!this.getAttr("isContain"))return!1;const{x:t,y:i}=this.getTransformOrigin(),r=this.getWidth(),o=this.getHeight();return new jr.Z.Bound(t,i,r,o).contain([e.x,e.y])}_drawLabel(e,t,i,r){const{background:o,text:n,borderColor:s,color:a,stroke:l,fill:c,borderRadius:h}=this.getConfig();(0,_t.ui)(e,{fillStyle:o,strokeStyle:s});const{x:d=0,y:u=0}=r;this._hasBorderRadius(h)?(this._drawRoundRect(e,d,u,t,i,h),c&&e.fill(),l&&e.stroke()):(c&&rr.Z.fillRect(e,d,u,t,i),l&&rr.Z.strokeRect(e,d,u,t,i)),(0,_t.ui)(e,this.getContextStyles()),(0,_t.ui)(e,{fillStyle:a,textAlign:"center",textBaseline:"middle"});const g=.5*t,m=.5*i;rr.Z.drawText(e,n,g,m)}_drawRoundRect(e,t,i,r,o,n){const[s,a,l,c]="number"==typeof n?[n,n,n,n]:n;e.beginPath(),e.moveTo(t,i+s),e.arc(t+s,i+s,s,Math.PI,1.5*Math.PI),e.lineTo(t+r-a,i),e.arc(t+r-a,i+a,a,1.5*Math.PI,2*Math.PI),e.lineTo(t+r,i+o-l),e.arc(t+r-l,i+o-l,l,0,.5*Math.PI),e.lineTo(t+c,i+o),e.arc(t+c,i+o-c,c,.5*Math.PI,Math.PI),e.closePath()}_hasBorderRadius(e){return"number"==typeof e&&e>0||Array.isArray(e)&&e.some((e=>e>0))}_getTextFont(){const{fontStyle:e,fontVariant:t,fontSize:i,fontFamily:r}=this.getConfig();return`${e} ${t} ${i}px ${r}`}}var so=i(62554);class ao extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.TrendLine},this.line=new oo.Z({strokeStyle:Gr.e.default_line_color,lineWidth:1}),this.yLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.yLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.xLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),{x:h,y:d}=e.getPosition(l),{x:u,y:g}=e.getPosition(c);this.line.setData({p1:{x:h,y:-d},p2:{x:u,y:-g}});const{time:m=l.time}=t.getCurrentItemByTime(l.time)||{},{time:p=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:h,y:-a},text:(0,_t.XH)(m,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:u,y:-a},text:(0,_t.XH)(p,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(h,u),y:-a},width:Math.abs(h-u),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,g)},width:r.bound.width,height:Math.abs(d-g)}),this.dragVertex1.setAttrs({data:{x:h,y:-d}}),this.dragVertex2.setAttrs({data:{x:u,y:-g}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.TrendLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}updateColor(e){this.line.setAttr("strokeStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e)}isHover(e){return this.line.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e),this.dragVertex1.setAttrs({isVisible:t||e,radius:Gr.e.radius,lineWidth:e?Gr.e.border_width:Gr.e.hover_border_width}),this.dragVertex2.setAttrs({isVisible:t||e,radius:Gr.e.radius,lineWidth:e?Gr.e.border_width:Gr.e.hover_border_width})}getVertexs(){return[this.dragVertex1,this.dragVertex2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)?this.line:void 0}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o));(n||s)&&this.update()}}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n===this.line?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex1,n===this.dragVertex1),this.updateVertexBorderAndVisible(this.dragVertex2,n===this.dragVertex2),this._dragVertex(t,n)))}_dragVertex(e,t){const{mainPane:i}=e;let r;t===this.dragVertex1?(this.dragVertex2.setAttr("strokeStyle",Gr.e.hover_border_color),r="p1"):(this.dragVertex1.setAttr("strokeStyle",Gr.e.hover_border_color),r="p2"),i.on("mousemove",It.Us.TrendLine,(t=>{const i=e.transformAbsoluteXYToPlotItem(t.point),o=this.getAttr("data");this.setData({...o,[r]:i}),this.update()})),i.on("mouseup",It.Us.TrendLine,(()=>{i.off(It.Us.TrendLine),this.recoverDragVertexts(),this.compeleDraw()}))}_dragLine(e,{x:t,y:i}){const{mainPane:r}=e,{p1:o,p2:n}=this.getData(),{x:s,y:a}=e.getPosition(o),{x:l,y:c}=e.getPosition(n);let h=0,d=0;r.on("mousemove",It.Us.TrendLine,(r=>{const{x:o,y:n}=e.transformPointToView(r.point);h=o-t,d=n-i;const u=e.getPlotItemByPosition(s+h,a+d),g=e.getPlotItemByPosition(l+h,c+d);this.setData({p1:u,p2:g}),this.update()})),r.on("mouseup",It.Us.TrendLine,(()=>{r.off(It.Us.TrendLine),this.compeleDraw()}))}}class lo extends ao{constructor(){super(),this.path=new ro({strokeStyle:Gr.e.default_line_color,lineWidth:1,fill:!1}),this.setAttr("type",It.Us.ArrowLine)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),h=e.getPosition(l),{x:d,y:u}=h,g=e.getPosition(c),{x:m,y:p}=g,[y]=to.createArrowPath({x:m,y:p},new jr.Z.Vector2(d-m,u-p).normalize(),{arrowAngle:30});this.path.setData(y.map((({x:e,y:t})=>({x:e,y:-t})))),this.line.setData({p1:{x:d,y:-u},p2:{x:m,y:-p}});const{time:x=l.time}=t.getCurrentItemByTime(l.time)||{},{time:f=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:d,y:-a},text:(0,_t.XH)(x,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:m,y:-a},text:(0,_t.XH)(f,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-u},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-p},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(d,m),y:-a},width:Math.abs(d-m),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(u,p)},width:r.bound.width,height:Math.abs(u-p)}),this.dragVertex1.setAttrs({data:{x:d,y:-u}}),this.dragVertex2.setAttrs({data:{x:m,y:-p}}),this.addWidgetShapes(i,[this.line,this.path,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.line,this.path,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.line.isHover(e)||this.path.isHover(e)?this.line:void 0}updateColor(e){this.line.setAttr("strokeStyle",e),this.path.setAttr("strokeStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e),this.path.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e),this.path.setAttr("lineDash",e)}}var co=i(39907),ho=i.n(co),uo=i(50663),go=i.n(uo),mo=i(71635),po=i.n(mo);class yo extends Yr.Z{constructor(e={}){super(),this.config={...Yr.Z.defaultConfig,path:"",width:0,height:0,fill:!0,stroke:!0,useCache:!0},this.setAttrs(e),this.watch(["path","width","height","strokeStyle","fillStyle","fill","stroke"],this.onCacheChange.bind(this)),this.watch(["width","height"],this._onSizeChange.bind(this))}onDataChange(){this.isDataUpdate=!0}setPath(e){this.setAttrs({path:e})}getTransformOrigin(){return{...this.getAttr("data")}}getContextStyles(){const{strokeStyle:e,fillStyle:t,stroke:i,fill:r}=this.getConfig();return{strokeStyle:e,fillStyle:t,stroke:i,fill:r}}drawCacheScene(){if(!this.isBatchUpdate)return;const e=this.getWidth(),t=this.getHeight(),i=this.overrideSize({width:e,height:t});i&&this.setAttrs({width:e,height:t});const r=this.getContextStyles();if(!Yi()(r,this.preContextStyles)||i){const{path:e,fill:t,stroke:i}=this.getConfig(),o=this.getContext();(0,_t.ui)(o,r);const n=new Path2D(e);this.drawPath2D({context:o,path:n,fill:t,stroke:i})}this.isDataUpdate=!1,this.isBatchUpdate=!1}drawScene(e){this.drawCacheScene(),this.drawFromCache(e)}isHover(e){if(!this.preDetect())return!1;const{x:t,y:i}=this.getTransformOrigin();return new jr.Z.Bound(t,i,this.getWidth(),this.getHeight()).contain([e.x,e.y])}_onSizeChange(){const e={width:this.getWidth(),height:this.getHeight()};this.overrideSize(e)}drawPath2D({context:e,path:t,fill:i,stroke:r}){r&&rr.Z.strokePath2D(e,t),i&&rr.Z.fillPath2D(e,t)}}class xo extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.ExecutionOrders,isNeedStore:!1,orders:[]},this.executionOrders=[]}isIndependent(){return!0}updateImmediate(){const e=this.getParent();if(!e)return;const{mainPane:t,xAxis:i,yAxis:r}=e,o=e.getParent(),n=this.determineTolerance(),s=this.executionOrders.map((e=>{const{time:t=e.time,high:s=0,low:a=0}=o.getCurrentItemByTime(e.time,n)||{},l=r?.getCoordOfValue(s),c=r?.getCoordOfValue(a),h=i?.getCoordOfValue(t);return{candlestickTime:t,high:s,low:a,startX:h,startY:-(e.isBuy?c:l),...e}})),a=ho()(s,"candlestickTime");Object.keys(a).forEach((e=>{go()(a[e],"isBuy").forEach((e=>{po()(e,"time").forEach((({startX:e,startY:t,isBuy:i,text:r,color:o,tooltipBackgroundColor:n,tooltipBorderColor:s,tooltipTextColor:a,arrow:l,tooltip:c,tooltipArrow:h},d)=>{const u=e-l.getWidth()/2,g=(5+l.getHeight())*(d+1),m=5*(d+1)+l.getHeight()*d,p=i?t+m:t-g,y=e-c.getWidth()/2,x=p-l.getHeight()-15-5,f=e,C=x+c.getHeight()/2;l.setAttrs({data:{x:u,y:p},path:i?"M4.35355 0.646446C4.15829 0.451184 3.84171 0.451184 3.64645 0.646446L0.464466 3.82843C0.269204 4.02369 0.269204 4.34027 0.464466 4.53553C0.659728 4.7308 0.97631 4.7308 1.17157 4.53553L4 1.70711L6.82843 4.53553C7.02369 4.7308 7.34027 4.7308 7.53553 4.53553C7.7308 4.34027 7.7308 4.02369 7.53553 3.82843L4.35355 0.646446ZM4.5 11L4.5 1L3.5 1L3.5 11L4.5 11Z":"M3.64645 10.3536C3.84171 10.5488 4.15829 10.5488 4.35355 10.3536L7.53553 7.17157C7.7308 6.97631 7.7308 6.65973 7.53553 6.46447C7.34027 6.2692 7.02369 6.2692 6.82843 6.46447L4 9.29289L1.17157 6.46447C0.97631 6.2692 0.659728 6.2692 0.464466 6.46447C0.269204 6.65973 0.269204 6.97631 0.464466 7.17157L3.64645 10.3536ZM3.5 -2.18557e-08L3.5 10L4.5 10L4.5 2.18557e-08L3.5 -2.18557e-08Z",fillStyle:o}),c.setAttrs({data:{x:y,y:x},text:r,borderColor:s,background:n,color:a}),h.setAttrs({data:[{x:f+5,y:C},{x:f-5,y:C},{x:f,y:C+5}],fillStyle:s})}))}))})),this.addWidgetShapes(t,this.getShapes()),this.setAnnotationToWidgets([t])}getShapes(){return[...this.executionOrders.map((e=>e.arrow)),...this.executionOrders.map((e=>e.tooltip)),...this.executionOrders.map((e=>e.tooltipArrow))]}getDescription(){const{data:e,type:t,isNeedStore:i}=this.getConfig();return{id:this.id,data:e,type:t,isNeedStore:i}}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t}=e;return[t]}initCustomEvents(){this.on("mousemove",It.Us.ExecutionOrders,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("orders",(({newVal:e})=>{e.forEach((e=>{const t=this.executionOrders.findIndex((({id:t})=>e.id===t));if(t>-1){const i=this.executionOrders[t];this.executionOrders[t]={...i,...e}}else this.executionOrders.push((i=e,{...i,arrow:new yo({width:8,height:12,fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),tooltip:new no({background:"gray",color:It.E.White,borderColor:"gray",dir:It.Nm.Right,fill:!0,stroke:!0,padding:[12,8],fontSize:14,lineWidth:1,borderRadius:[4,4,4,4],isVisible:!1}),tooltipArrow:new ro({fillStyle:"#5E6673",stroke:!1,isVisible:!1})}));var i})),this.forceUpdate()}))}isHover(e){return this.executionOrders.reduce(((t,i)=>t&&i.arrow.isHover(e)),!1)}setVisibleShapes(){this.executionOrders.forEach((e=>{e.arrow.setAttr("isVisible",!0)}))}getVertexs(){return[]}_onMousemove(e){const t=this.getParent();if(!t)return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r};this.executionOrders.forEach((e=>{const t=!!e.tooltip.getAttr("text")&&e.arrow.isHover(o);e.tooltip.setAttrs({isVisible:t}),e.tooltipArrow.setAttrs({isVisible:t})})),this.update()}compeleDraw(){this.setAttrs({isComplete:!0})}forceUpdate(){this.setAttr("data",[]),this.update()}determineTolerance(){const e=this.getParent();if(!e)return;const{xAxis:t}=e;switch(t?.getOriginTimeScaleType()){case It.QX.Hour:case It.QX.Minute:case It.QX.Second:return t?.getUnitTimeValue();default:return}}}class fo extends ao{constructor(){super(),this.setAttr("type",It.Us.ExtendTrendLine)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),h=e.getPosition(l),{x:d,y:u}=h,g=e.getPosition(c),{x:m,y:p}=g,{width:y,height:x}=i.getBound();if(jr.Z.Algorith.isSamePoint(h,g))this.line.setData({p1:{x:d,y:-u},p2:{x:m,y:-p}});else{const e=new jr.Z.Bound(0,0,y,x),t=jr.Z.Line.getIntersectWidthBound(h,g,e);2===t.length?this.line.setData({p1:{x:t[0].x,y:-t[0].y},p2:{x:t[1].x,y:-t[1].y}}):this.line.setData(null)}const{time:f=l.time}=t.getCurrentItemByTime(l.time)||{},{time:C=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:d,y:-a},text:(0,_t.XH)(f,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:m,y:-a},text:(0,_t.XH)(C,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-u},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-p},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(d,m),y:-a},width:Math.abs(d-m),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(u,p)},width:r.bound.width,height:Math.abs(u-p)}),this.dragVertex1.setAttrs({data:{x:d,y:-u}}),this.dragVertex2.setAttrs({data:{x:m,y:-p}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}}class Co extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.FibonacciLine},this.rect=new so.Z({fillStyle:Gr.e.default_line_color,strokeStyle:Gr.e.default_line_color,stroke:!1,globalAlpha:.2}),this.line1=Gr.Z.line.clone(),this.line2=Gr.Z.line.clone(),this.line3=Gr.Z.line.clone(),this.line4=Gr.Z.line.clone(),this.line5=Gr.Z.line.clone(),this.line6=Gr.Z.line.clone().setAttrs({lineDash:[3,3]}),this.text1=Gr.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text2=Gr.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text3=Gr.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text4=Gr.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.text5=Gr.Z.text.clone(["fillStyle"]).setAttrs({textAlign:"right",textBaseline:"middle"}),this.yLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.yLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.xLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),{x:h,y:d}=e.getPosition(l),{x:u,y:g}=e.getPosition(c),m=d-g,p=l.value-c.value,y=Math.min(h,u)-10;this.rect.setData({x:h,y:-d}).setAnnotherVertex({x:u,y:-g});let x=-g,f=c.value;this.line1.setAttrs({data:{p1:{x:h,y:x},p2:{x:u,y:x}}}),this.text1.setAttrs({content:`0(${e.formatterValue(f)})`,data:{x:y,y:-g}}),x=-(g+.382*m),f=c.value+.382*p,this.line2.setAttrs({data:{p1:{x:h,y:x},p2:{x:u,y:x}}}),this.text2.setAttrs({content:`0.382(${e.formatterValue(f)})`,data:{x:y,y:x}}),x=-(g+.5*m),f=c.value+.5*p,this.line3.setData({p1:{x:h,y:x},p2:{x:u,y:x}}),this.text3.setAttrs({content:`0.5(${e.formatterValue(f)})`,data:{x:y,y:x}}),x=-(g+.618*m),f=c.value+.618*p,this.line4.setData({p1:{x:h,y:x},p2:{x:u,y:x}}),this.text4.setAttrs({content:`0.618(${e.formatterValue(f)})`,data:{x:y,y:x}}),x=-d,f=l.value,this.line5.setData({p1:{x:h,y:x},p2:{x:u,y:x}}),this.text5.setAttrs({content:`1(${e.formatterValue(f)})`,data:{x:y,y:x}}),this.line6.setData({p1:{x:h,y:-d},p2:{x:u,y:-g}});const{time:C=l.time}=t.getCurrentItemByTime(l.time)||{},{time:b=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:h,y:-a},text:(0,_t.XH)(C,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:u,y:-a},text:(0,_t.XH)(b,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(h,u),y:-a},width:Math.abs(h-u),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,g)},width:r.bound.width,height:Math.abs(d-g)}),this.dragVertex1.setAttrs({data:{x:h,y:-d}}),this.dragVertex2.setAttrs({data:{x:u,y:-g}}),this.addWidgetShapes(i,[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.rect,this.line1,this.line2,this.line3,this.line4,this.line5,this.line6,this.text1,this.text2,this.text3,this.text4,this.text5,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}updateColor(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((t=>{t.setAttr("strokeStyle",e)})),[this.text1,this.text2,this.text3,this.text4,this.text5].forEach((t=>{t.setAttr("fillStyle",e)})),this.rect.setAttrs({stroke:!0,strokeStyle:e})}updateLineWidth(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((t=>{t.setAttr("lineWidth",e)})),this.rect.setAttrs({stroke:!0,lineWidth:e})}updateLineStyle(e){[this.line1,this.line2,this.line3,this.line4,this.line5,this.line6].forEach((t=>{t.setAttr("lineDash",e)})),this.rect.setAttrs({stroke:!0,lineDash:e})}updateBackground(e){this.rect.setAttr("fillStyle",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.FibonacciLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.rect.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e);const i={isVisible:t||e,radius:Gr.e.radius,lineWidth:e?Gr.e.border_width:Gr.e.hover_border_width};this.updateVertex(this.getVertexs(),i)}getEditAttribute(){const{color:e,lineWidth:t,lineStyle:i,background:r,isLock:o}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!0,background:r,isLock:o,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o));(n||s)&&this.update()}}getVertexs(){return[this.dragVertex1,this.dragVertex2]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.rect.isHover(e)?this.rect:void 0}_onmousedown(e){const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(n,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(n),!1),this._dragVertex(t,n)))}_dragVertex(e,t){const{mainPane:i}=e;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Gr.e.hover_border_color}),i.on("mousemove",It.Us.FibonacciLine,(i=>{const r=e.transformAbsoluteXYToPlotItem(i.point),{p1:o,p2:n}=this.getAttr("data");t===this.dragVertex1&&this.setData({p1:r,p2:n}),t===this.dragVertex2&&this.setData({p1:o,p2:r}),this.update()})),i.on("mouseup",It.Us.FibonacciLine,(()=>{i.off(It.Us.FibonacciLine),this.recoverDragVertexts(),this.compeleDraw()}))}_dragRect(e,{x:t,y:i}){const{mainPane:r}=e,{p1:o,p2:n}=this.getData(),{x:s,y:a}=e.getPosition(o),{x:l,y:c}=e.getPosition(n);let h=0,d=0;r.on("mousemove",It.Us.FibonacciLine,(r=>{const{x:o,y:n}=e.transformPointToView(r.point);h=o-t,d=n-i;const u=e.getPlotItemByPosition(s+h,a+d),g=e.getPlotItemByPosition(l+h,c+d);this.setData({p1:u,p2:g}),this.update()})),r.on("mouseup",It.Us.FibonacciLine,(()=>{r.off(It.Us.FibonacciLine),this.compeleDraw()}))}}class bo extends Yr.Z{constructor(e={}){super(),this.config={...Yr.Z.defaultConfig,width:0,height:0,imageSource:null,globalAlpha:1,isLoading:!1,useCache:!0},this.setAttrs(e),this.watch(["imageSource"],this.onDataChange.bind(this))}onDataChange(){const e=this.getAttr("imageSource");if(e){const{width:t,height:i}=e;this.overrideSize({width:t,height:i}),this.setAttrs({width:t,height:i}),this.isBatchUpdate=!0}}setImage(e){this.setAttrs({imageSource:e,isLoading:!1})}getTransformOrigin(){return this.getAttr("data")}drawCacheScene(){if(!this.isBatchUpdate)return;const{width:e,height:t,imageSource:i}=this.getConfig();e<=0||t<=0||!i||(this.getContext().drawImage(i,0,0),this.isBatchUpdate=!1)}drawScene(e){const{data:{x:t,y:i},width:r,height:o,imageSource:n}=this.getConfig();r<=0||o<=0||!n||rr.Z.drawImage(e,n,t,i)}isHover(e){if(!this.preDetect())return!1;const{x:t,y:i}=this.getTransformOrigin();return new jr.Z.Bound(t,i,this.getWidth(),this.getHeight()).contain([e.x,e.y])}}class wo extends ao{constructor(){super(),this.rect=new so.Z({fillStyle:"rgba(42, 47, 55, 0.75)",stroke:!1}),this.barImage=new bo,this.priceDiffImage=new bo,this.text1=Gr.Z.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),this.text2=Gr.Z.text.clone().setAttrs({fillStyle:"#E6E8EA",textBaseline:"middle"}),this._textWidth=0,this.setAttr("type",It.Us.InfoLine),this.watch(["data"],this._updateInfo.bind(this))}updateImmediate(){this.barImage.getAttr("imageSource")||this.barImage.getAttr("isLoading")||(this.barImage.setAttr("isLoading",!0),vr(pr.P1).then((e=>{this.barImage.setImage(e)}))),this.priceDiffImage.getAttr("imageSource")||this.priceDiffImage.getAttr("isLoading")||(this.priceDiffImage.setAttr("isLoading",!0),vr(pr.Q$).then((e=>{this.priceDiffImage.setImage(e)})));const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),{x:h,y:d}=e.getPosition(l),{x:u,y:g}=e.getPosition(c);this.line.setData({p1:{x:h,y:-d},p2:{x:u,y:-g}});const m=this.barImage.getAttr("width"),p=this.barImage.getAttr("height"),y=this.priceDiffImage.getAttr("width"),x=this.priceDiffImage.getAttr("height"),f=Math.max(180,this._textWidth+16+Math.max(m,y)+5);let C=8,b=-80;const w=(h-u)*(d-g)>0;(0,_t.Fr)(h-u,10)?(C=8,b=-36):(0,_t.Fr)(d-g,10)?(C=.5*-f,b=-80):w&&(C=-f-8,b=-80);const v=.5*(h+u)+C;let L=.5*-(d+g)+b;this.rect.setAttrs({data:{x:v,y:L},width:f,height:72}),L+=12,this.barImage.setData({x:v+8,y:L}),this.text1.setData({x:v+8+m+5,y:L+.5*p}),L+=24,this.priceDiffImage.setData({x:v+8,y:L}),this.text2.setData({x:v+8+y+5,y:L+.5*x});const{time:S=l.time}=t.getCurrentItemByTime(l.time)||{},{time:E=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:h,y:-a},text:(0,_t.XH)(S,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:u,y:-a},text:(0,_t.XH)(E,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(h,u),y:-a},width:Math.abs(h-u),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,g)},width:r.bound.width,height:Math.abs(d-g)}),this.dragVertex1.setAttrs({data:{x:h,y:-d}}),this.dragVertex2.setAttrs({data:{x:u,y:-g}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.line,this.dragVertex1,this.dragVertex2,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.rect,this.barImage,this.priceDiffImage,this.text1,this.text2]}updateColor(e){this.line.setAttr("strokeStyle",e),this.text1.setAttr("fillStyle",e),this.text2.setAttr("fillStyle",e)}_updateInfo({newVal:{p1:e,p2:t}}){const i=this.getParent();if(!i)return;const r=i.getParent(),[o,n]=r.getTimeExtent(),{xAxis:s}=i,{unitWidth:a}=s;let l=Math.min(e.time,t.time),c=Math.max(e.time,t.time);l=Math.min(n,Math.max(o,l)),c=Math.max(o,Math.min(n,c));const{x:h}=i.getPosition({...e,time:l}),{x:d}=i.getPosition({...e,time:c});this.text1.setAttr("content",`${Math.round((d-h)/a)} ${i.getI18n(Dt.Wi.DRAW_BAR,"bars")}(${this._getFormatInterval(l,c,i)})`),this.text2.setAttr("content",`${i.formatterValue(t.value-e.value)}(${(0,_t.gt)((t.value-e.value)/e.value)})`);const u=this.text1.getAttr("textWidth"),g=this.text2.getAttr("textWidth");this._textWidth=Math.ceil(Math.max(u,g))}_getFormatInterval(e,t,i){const r=t-e;if(0===r)return"no data";const o=[],n=Math.floor(r/Dt.Ri.Day);let s=r%Dt.Ri.Day;n>0&&o.push(`${n}${i.getI18n(Dt.Wi.DRAW_DAY,"D")}`);const a=Math.floor(s/Dt.Ri.Hour);s=r%Dt.Ri.Hour,a>0&&o.push(`${a}${i.getI18n(Dt.Wi.DRAW_HOUR,"h")}`);const l=Math.floor(s/Dt.Ri.Minute);return l>0&&o.push(`${l}${i.getI18n(Dt.Wi.DRAW_MINUTE,"m")}`),o.join(", ")}}const vo={mousedown:{eventName:"mousedown",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mousemove:{eventName:"mousemove",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseup:{eventName:"mouseup",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},mouseout:{eventName:"mouseout",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},wheel:{eventName:"wheel",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},dblclick:{eventName:"dblclick",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},contextmenu:{eventName:"contextmenu",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},resize:{eventName:"resize",handler(e){e()}},gesturestart:{eventName:"gesturestart",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gesturechange:{eventName:"gesturechange",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},gestureend:{eventName:"gestureend",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}},Lo={mousedown:{eventName:"touchstart",handler(e,t){const i={originEvent:t};Array.from(t.targetTouches).forEach(((e,t)=>{const r=0===t?"clientY":`clientY${t}`;i[0===t?"clientX":`clientX${t}`]=e.clientX,i[r]=e.clientY})),e(i)}},mousemove:{eventName:"touchmove",handler(e,t){const i={originEvent:t};Array.from(t.touches).forEach(((e,t)=>{const r=0===t?"clientY":`clientY${t}`;i[0===t?"clientX":`clientX${t}`]=e.clientX,i[r]=e.clientY})),e(i)}},mouseup:{eventName:"touchend",handler(e,t){const i={originEvent:t};Array.from(t.changedTouches).forEach(((e,t)=>{const r=0===t?"clientY":`clientY${t}`;i[0===t?"clientX":`clientX${t}`]=e.clientX,i[r]=e.clientY})),e(i)}},wheel:{eventName:"wheel",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}},click:{eventName:"click",handler(e,t){e({originEvent:t,clientX:t.clientX,clientY:t.clientY})}}},So={eventPool:new Map,getEventName(e){const[t,i]=e.split("."),r=Object.assign(vo[t]||{},{nameSpace:i}),o=Object.assign(Lo[t]||{},{nameSpace:i});return r.eventName===o.eventName?[r]:[r,o]},on(e,t,i,r=!1){return this.getEventName(t).forEach((({eventName:t,nameSpace:o,handler:n})=>{if(!t)return;const s=n.bind(null,i);let a=this.eventPool.get(e);a||(a={[t]:new Map},this.eventPool.set(e,a)),a[t]||(a[t]=new Map);const l=new Map;l.set(i,s),a[t].set(o,l),e.addEventListener(t,s,r)})),this},off(e,t,i,r=!1){const o=this.getEventName(t),n=this.eventPool.get(e);return o.forEach((({eventName:t,nameSpace:o})=>{if(n&&n[t]){const s=n[t],a=s.get(o);if(i){if(a&&i){const o=a.get(i);o&&e.removeEventListener(t,o,r)}}else o?a&&Array.from(a.values()).forEach((i=>{e.removeEventListener(t,i,r)})):Array.from(s.values()).forEach((i=>{Array.from(i.values()).forEach((i=>{e.removeEventListener(t,i,r)}))})),s.clear();0===s.size&&delete n[t],0===Object.keys(n).length&&this.eventPool.delete(e)}})),this}};var Eo;!function(e){e.LINE="line",e.BODY="body"}(Eo||(Eo={}));class ko extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),orderId:"",isTextEdit:!1,type:It.Us.OrderLine,price:"",quantity:"",text:"",editable:!0,isNeedStore:!1},this.dragIcon=new yo({path:pr.Z4,width:6,height:12,fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),this.dragIconBorder=new so.Z({fill:!0,strokeStyle:"#474D57",fillStyle:"#1E2329",lineWidth:1,width:16,height:20,borderRadius:[2,0,0,2]}),this.closeIcon=new yo({path:pr.aE,width:12,height:12,fillStyle:"#848E9C",strokeStyle:"#474D57",fill:!0,stroke:!1}),this.closeIconBorder=new so.Z({fill:!0,strokeStyle:"#474D57",fillStyle:"#1E2329",lineWidth:1,width:20,height:20,borderRadius:[0,2,2,0]}),this.priceLabel=new no({background:"#0ECB81",color:It.E.White,borderColor:"#474D57",dir:It.Nm.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1}),this.quantityLabel=new no({background:"#1E2329",color:It.E.White,borderColor:"#474D57",dir:It.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1}),this.line=Gr.Z.line.clone().setAttrs({lineDash:[1,1]}),this.yLabel=new no({color:"#0ECB81",borderColor:"#0ECB81",dir:It.Nm.Right,fill:!0,stroke:!0,padding:6,fixHeight:21,lineWidth:1}),this.priceTooltip=new no({background:"gray",color:It.E.White,borderColor:"gray",dir:It.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,isVisible:!1}),this.quantityTooltip=new no({background:"gray",color:It.E.White,borderColor:"gray",dir:It.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,isVisible:!1}),this.closeTooltip=new no({background:"gray",color:It.E.White,borderColor:"gray",dir:It.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,isVisible:!1})}isIndependent(){return!0}updateImmediate(){const e=this.getParent(),{mainPane:t,axisPane:i}=e;if(e&&e.yAxis){const r=i.bound.width-1,{price:o,quantity:n,text:s,editable:a}=this.getConfig(),l=e.getYPos(+o);let c=230;this.dragIconBorder.setAttrs({data:a?{x:c,y:-l-.5*this.dragIconBorder.getHeight()}:{x:0,y:0},width:a?16:0,height:a?20:0}),this.dragIcon.setAttrs({data:a?{x:c+.5*(this.dragIconBorder.getWidth()-this.dragIcon.getWidth()),y:-l-.5*this.dragIcon.getHeight()}:{x:0,y:0},width:a?6:0,height:a?12:0}),c+=this.dragIconBorder.getWidth(),this.priceLabel.setAttrs({data:{x:c,y:-l},text:s,borderRadius:a?0:[2,0,0,2]}),c+=this.priceLabel.getWidth(),this.quantityLabel.setAttrs({data:{x:c,y:-l},text:n}),c+=this.quantityLabel.getWidth(),this.closeIconBorder.setAttrs({data:{x:c,y:-l-.5*this.closeIconBorder.getHeight()}}),this.closeIcon.setAttrs({data:{x:c+.5*(this.closeIconBorder.getWidth()-this.closeIcon.getWidth()),y:-l-.5*this.closeIcon.getHeight()}}),c+=this.closeIconBorder.getWidth(),this.line.setAttrs({data:{p1:{x:c,y:-l},p2:{x:t.getBound().width,y:-l}}}),this.yLabel.setAttrs({data:{x:0,y:-l},text:e.formatterValue(+o),fixWidth:r});const h=this.priceLabel.getAttr("data"),d=this.quantityLabel.getAttr("data"),u=this.closeIcon.getAttr("data"),g=5;this.priceTooltip.setAttrs({data:{x:h.x+(this.priceLabel.getWidth()-this.priceTooltip.getWidth())/2,y:h.y-g-this.priceLabel.getHeight()}}),this.quantityTooltip.setAttrs({data:{x:d.x+(this.quantityLabel.getWidth()-this.quantityTooltip.getWidth())/2,y:d.y-g-this.quantityLabel.getHeight()}}),this.closeTooltip.setAttrs({data:{x:u.x+(this.closeIcon.getWidth()-this.closeTooltip.getWidth())/2,y:u.y-g-this.closeIcon.getHeight()}})}this.addWidgetShapes(t,[this.dragIconBorder,this.dragIcon,this.priceLabel,this.quantityLabel,this.closeIconBorder,this.closeIcon,this.line,this.priceTooltip,this.quantityTooltip,this.closeTooltip]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,i])}getShapes(){return[this.priceLabel,this.quantityLabel,this.line,this.yLabel,this.dragIconBorder,this.dragIcon,this.closeIcon,this.closeIconBorder,this.priceTooltip,this.quantityTooltip,this.closeTooltip]}getDescription(){const{type:e,price:t,quantity:i,isNeedStore:r}=this.getConfig();return{id:this.id,type:e,price:t,prevPrice:this._prevPrice,quantity:i,prevQuantity:this._prevQuantity,isNeedStore:r}}getEditAttribute(){const{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:o,isLock:n}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:It.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:n,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t,axisPane:i}=e;return[t,i]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.OrderLine,this._onMousemove.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("quantity",(({newVal:e})=>{this.quantityLabel.setAttr("text",e),this.setAttr("data",[]),this.update()})),this.watch("dragSquareIconColor",(({newVal:e})=>{e&&this.dragIcon.setAttr("fillStyle",e)})),this.watch("price",this.forceUpdate.bind(this)),this.watch("text",this.forceUpdate.bind(this)),this.watch("closeIconColor",(({newVal:e})=>{e&&this.closeIcon.setAttr("fillStyle",e)})),this.watch("priceBackground",(({newVal:e})=>{e&&this.priceLabel.setAttr("background",e)})),this.watch("priceColor",(({newVal:e})=>{e&&this.priceLabel.setAttr("color",e)})),this.watch("priceBorderColor",(({newVal:e})=>{e&&this.priceLabel.setAttr("borderColor",e)})),this.watch("quantityBackground",(({newVal:e})=>{e&&this.quantityLabel.setAttr("background",e)})),this.watch("quantityColor",(({newVal:e})=>{e&&this.quantityLabel.setAttr("color",e)})),this.watch("quantityBorderColor",(({newVal:e})=>{e&&this.quantityLabel.setAttr("borderColor",e)})),this.watch("borderColor",(({newVal:e})=>{e&&(this.dragIconBorder.setAttr("strokeStyle",e),this.closeIconBorder.setAttr("strokeStyle",e))})),this.watch("lineColor",(({newVal:e})=>{e&&this.line.setAttr("strokeStyle",e)})),this.watch("priceLabelBackground",(({newVal:e})=>{e&&this.yLabel.setAttr("background",e)})),this.watch("priceLabelBorderColor",(({newVal:e})=>{e&&this.yLabel.setAttr("borderColor",e)})),this.watch("priceLabelColor",(({newVal:e})=>{e&&this.yLabel.setAttr("color",e)})),this.watch("lineDash",(({newVal:e})=>{e&&this.line.setAttr("lineDash",e)})),this.watch("tooltipBorderColor",(({newVal:e})=>{e&&(this.priceTooltip.setAttr("borderColor",e),this.quantityTooltip.setAttr("borderColor",e),this.closeTooltip.setAttr("borderColor",e))})),this.watch("tooltipBackgroundColor",(({newVal:e})=>{e&&(this.priceTooltip.setAttr("background",e),this.quantityTooltip.setAttr("background",e),this.closeTooltip.setAttr("background",e))})),this.watch("tooltipTextColor",(({newVal:e})=>{e&&(this.priceTooltip.setAttr("color",e),this.quantityTooltip.setAttr("color",e),this.closeTooltip.setAttr("color",e))})),this.watch("priceTooltipText",(({newVal:e})=>{null!=e&&this.priceTooltip.setAttr("text",e)})),this.watch("quantityTooltipText",(({newVal:e})=>{null!=e&&this.quantityTooltip.setAttr("text",e)})),this.watch("closeTooltipText",(({newVal:e})=>{null!=e&&this.closeTooltip.setAttr("text",e)}))}isHover(e){const{editable:t}=this.getConfig();return this.closeIconBorder.isHover(e)||!!t&&(this.dragIconBorder.isHover(e)||this.line.isHover(e)||this.priceLabel.isHover(e)||this.quantityLabel.isHover(e))}updateBackground(e){this.dragIconBorder.setAttr("fillStyle",e),this.closeIconBorder.setAttr("fillStyle",e)}setVisibleShapes(){this.priceLabel.setAttr("isVisible",!0),this.quantityLabel.setAttr("isVisible",!0)}getVertexs(){return[]}_onClickClose(){const{onClose:e}=this.getConfig();e&&e(this.getDescription())}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{price:i,quantity:r,editable:o}=this.getConfig();this._prevPrice=i,this._prevQuantity=r;const{x:n,y:s}=t.transformPointToView(e.point),a={x:n,y:-s};if(this.closeIconBorder.isHover(a))e.isDealed=!0,this._onClickClose();else if(this.dragIconBorder.isHover(a)||this.priceLabel.isHover(a)||this.line.isHover(a)){if(!o)return;this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0;const i=this.dragIconBorder.isHover(a)?"dragIcon":this.priceLabel.isHover(a)?"price":"line";this._drag(t,i)}else if(this.quantityLabel.isHover(a)){if(!o)return;const{onClickQuantity:e}=this.getConfig();e?.(this.getDescription())}}_onMousemove(e){const t=this.getParent(),{editable:i}=this.getConfig(),{x:r,y:o}=t.transformPointToView(e.point),n={x:r,y:-o};i&&(this.priceTooltip.setAttrs({isVisible:!!this.priceTooltip.getAttr("text")&&this.priceLabel.isHover(n)||this.dragIconBorder.isHover(n)}),this.quantityTooltip.setAttrs({isVisible:!!this.quantityTooltip.getAttr("text")&&this.quantityLabel.isHover(n)})),this.closeTooltip.setAttrs({isVisible:!!this.closeTooltip.getAttr("text")&&this.closeIcon.isHover(n)}),this.update()}_drag(e,t){const{mainPane:i}=e,{price:r,onClickDragArea:o,onClickPrice:n,dragSquareDraggingBackgroundColor:s,dragSquareBackgroundColor:a,lineDash:l,draggingLineDash:c,onPriceChange:h}=this.getConfig(),d=this.getDragType("line"===t);let u=r;i.on("mousemove",`${It.Us.OrderLine}`,(t=>{s&&this.dragIconBorder.setAttr("fillStyle",s),c&&this.line.setAttrs({lineDash:c});const{y:i}=e.transformPointToView(t.point),r=e.formatterValue(e.getPriceOfYPos(i));this.setAttr("price",`${r}`),u=r})),So.on(document,`mouseup.${It.Us.OrderLine}`,(()=>{a&&this.dragIconBorder.setAttr("fillStyle",a),l&&this.line.setAttrs({lineDash:l}),i.off("mousemove",`${It.Us.OrderLine}`),So.off(document,`mouseup.${It.Us.OrderLine}`),this.compeleDraw(),u!==r&&h?.({...this.getDescription(),price:u,triggerType:d}),o?.({triggerType:d,prevPrice:r,currentPrice:u}),"price"===t&&n?.({...this.getDescription(),prevPrice:r,currentPrice:u})}))}compeleDraw(){this.setAttrs({isTextEdit:!1,isComplete:!0})}forceUpdate(){this.setAttr("data",[]),this.update()}getDragType(e){return e?Eo.LINE:Eo.BODY}}var Vo=i(24997);class Ao extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.ParallelLine},this.path=new ro({fillStyle:Vo.e.default_area_color,stroke:!1}),this.line1=Gr.Z.line.clone(),this.line2=Gr.Z.line.clone(),this.yLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.yLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.yLabel3=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.xLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),this.dragVertex3=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c,p3:h}=this.getData(),{x:d,y:u}=e.getPosition(l),{x:g,y:m}=e.getPosition(c),{x:p,y}=e.getPosition(h),x=new jr.Z.Vector2(g-d,m-u),f=new jr.Z.Vector2(p-d,y-u),C=jr.Z.Algorith.getCrossMultiply(x,f),b=(0,_t.Fr)(d-g),w=m-u+C/(g-d)+u,v=C/(g-d)+u,L=Math.min(u,m,y),S=Math.max(u,m,y);this.path.setData([{x:d,y:-u},{x:g,y:-m},{x:g,y:-w},{x:d,y:-v}]).setAttr("isVisible",!b),this.line1.setData({p1:{x:d,y:-u},p2:{x:g,y:-m}}),this.line2.setData({p1:{x:d,y:-v},p2:{x:g,y:-w}}).setAttr("isVisible",!b);const{time:E=l.time}=t.getCurrentItemByTime(l.time)||{},{time:k=c.time}=t.getCurrentItemByTime(c.time)||{};if(this.xLabel1.setAttrs({data:{x:d,y:-a},text:(0,_t.XH)(E,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:g,y:-a},text:(0,_t.XH)(k,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-u},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-m},text:e.formatterValue(c.value),fixWidth:s}),this.yLabel3.setAttrs({data:{x:0,y:-y},text:e.formatterValue(h.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(d,g),y:-a},width:Math.abs(d-g),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-S},width:r.bound.width,height:S-L}),this.dragVertex1.setAttrs({data:{x:d,y:-u}}),this.dragVertex2.setAttrs({data:{x:g,y:-m}}),this.dragVertex3.setAttrs({data:{x:.5*(d+g),y:.5*-(w+v)}}),this.getAttr("isEdit")&&this.getAttr("isComplete")&&!(0,_t.Fr)(d-g)){const t=e.getPlotItemByPosition(d,v);this._diffPrice=t.value-l.value}this.addWidgetShapes(i,[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.path,this.line1,this.line2,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2,this.yLabel3]}updateColor(e){[this.line1,this.line2].forEach((t=>{t.setAttr("strokeStyle",e)})),this.path.setAttrs({stroke:!0,strokeStyle:e})}updateLineWidth(e){[this.line1,this.line2].forEach((t=>{t.setAttr("lineWidth",e)})),this.path.setAttrs({stroke:!0,lineWidth:e})}updateLineStyle(e){[this.line1,this.line2].forEach((t=>{t.setAttr("lineDash",e)})),this.path.setAttrs({stroke:!0,lineDash:e})}updateBackground(e){this.path.setAttr("fillStyle",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.ParallelLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.path.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yLabel3.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e);const i={isVisible:t||e,radius:Vo.e.radius,lineWidth:e?Vo.e.border_width:Vo.e.hover_border_width};this.updateVertex(this.getVertexs(),i)}isValid(){const{p1:e,p2:t,p3:i}=this.getData()||{};return!!(e&&t&&i)}getEditAttribute(){const{color:e,lineWidth:t,lineStyle:i,background:r,isLock:o}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!0,background:r,isLock:o,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o)),a=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(o));(n||s||a)&&this.update()}}getVertexs(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.line1.isHover(e)?this.line1:this.line2.isHover(e)?this.line2:void 0}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n instanceof oo.Z?this._dragLine(t,{x:i,y:r}):(this.updateVertexBorderAndVisible(n,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(n),!1),this._dragVertex(t,n,{x:i,y:r})))}_dragVertex(e,t,{x:i,y:r}){const{mainPane:o}=e;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Vo.e.hover_border_color});const{p3:n}=this.getData(),{x:s,y:a}=e.getPosition(n);let l=0,c=0;o.on("mousemove",It.Us.ParallelLine,(o=>{const n=e.transformAbsoluteXYToPlotItem(o.point),{p1:h,p2:d}=this.getAttr("data");if(t===this.dragVertex1&&this.setData({p1:n,p2:d,p3:{time:n.time,value:n.value+this._diffPrice}}),t===this.dragVertex2&&this.setData({p1:h,p2:n,p3:{time:h.time,value:h.value+this._diffPrice}}),t===this.dragVertex3){const{x:t,y:u}=e.transformPointToView(o.point);l=t-i,c=u-r;const g=e.getPlotItemByPosition(s+l,a+c);this.setData({p1:h,p2:d,p3:g}),this._diffPrice=n.value-h.value}this.update()})),o.on("mouseup",It.Us.ParallelLine,(()=>{o.off(It.Us.ParallelLine),this.recoverDragVertexts(),this.compeleDraw()}))}_dragLine(e,{x:t,y:i}){const{mainPane:r}=e,{p1:o,p2:n,p3:s}=this.getData(),{x:a,y:l}=e.getPosition(o),{x:c,y:h}=e.getPosition(n),{x:d,y:u}=e.getPosition(s);let g=0,m=0;r.on("mousemove",It.Us.ParallelLine,(r=>{const{x:o,y:n}=e.transformPointToView(r.point);g=o-t,m=n-i;const s=e.getPlotItemByPosition(a+g,l+m),p=e.getPlotItemByPosition(c+g,h+m),y=e.getPlotItemByPosition(d+g,u+m);this.setData({p1:s,p2:p,p3:y}),this.update()})),r.on("mouseup",It.Us.ParallelLine,(()=>{r.off(It.Us.ParallelLine),this.compeleDraw(),this.recoverDragVertexts(),this.update()}))}}class To extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.PositionLine,price:"",quantity:"",positionTypeText:"",pnl:"",isNeedStore:!1},this.priceLabel=new no({background:"#0ECB81",color:It.E.White,borderColor:"#474D57",dir:It.Nm.Right,stroke:!0,fill:!0,padding:[12,2],fixHeight:21,lineWidth:1,borderRadius:[2,0,0,2]}),this.quantityLabel=new no({background:"#1E2329",color:It.E.White,borderColor:"#474D57",dir:It.Nm.Right,fill:!0,stroke:!0,padding:[12,2],fixHeight:21,lineWidth:1,borderRadius:[0,2,2,0]}),this.line=Gr.Z.line.clone().setAttrs({lineDash:[1,1]}),this.yLabel=new no({color:"#0ECB81",borderColor:"#0ECB81",dir:It.Nm.Right,fill:!0,stroke:!0,padding:6,fixHeight:21,lineWidth:1})}isIndependent(){return!0}updateImmediate(){const e=this.getParent();if(!e)return;const{mainPane:t,axisPane:i}=e;if(e&&e.yAxis){const r=i.bound.width-1,{price:o,quantity:n,positionTypeText:s,pnl:a}=this.getConfig(),l=e.getYPos(+o);let c=0;this.priceLabel.setAttrs({data:{x:c,y:-l},text:`${s}${a}`}),c+=this.priceLabel.getWidth(),this.quantityLabel.setAttrs({data:{x:c,y:-l},text:n.toString()}),c+=this.quantityLabel.getWidth(),this.line.setAttrs({data:{p1:{x:c,y:-l},p2:{x:t.getBound().width,y:-l}}}),this.yLabel.setAttrs({data:{x:0,y:-l},text:e.formatterValue(+o),fixWidth:r})}this.addWidgetShapes(t,[this.priceLabel,this.quantityLabel,this.line]),this.addWidgetShapes(i,[this.yLabel]),this.setAnnotationToWidgets([t,i])}getShapes(){return[this.priceLabel,this.quantityLabel,this.line,this.yLabel]}getDescription(){const{type:e,price:t,quantity:i,isNeedStore:r}=this.getConfig();return{id:this.id,type:e,price:t,quantity:i,isNeedStore:r}}getEditAttribute(){const{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:o,isLock:n}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:It.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:n,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t,axisPane:i}=e;return[t,i]}initCustomEvents(){this.watch("data",this.updateImmediate.bind(this)),this.watch("price",this.forceUpdate.bind(this)),this.watch("quantity",(({newVal:e})=>{this.quantityLabel.setAttr("text",e),this.setAttr("data",[]),this.update()})),this.watch("pnl",this.forceUpdate.bind(this)),this.watch("positionTypeText",this.forceUpdate.bind(this)),this.watch("priceColor",(({newVal:e})=>e&&this.priceLabel.setAttr("color",e))),this.watch("priceBackgroundColor",(({newVal:e})=>e&&this.priceLabel.setAttr("background",e))),this.watch("priceBorderColor",(({newVal:e})=>e&&this.priceLabel.setAttr("borderColor",e))),this.watch("quantityColor",(({newVal:e})=>e&&this.quantityLabel.setAttr("color",e))),this.watch("quantityBackgroundColor",(({newVal:e})=>e&&this.quantityLabel.setAttr("background",e))),this.watch("quantityBorderColor",(({newVal:e})=>e&&this.quantityLabel.setAttr("borderColor",e))),this.watch("priceLabelBackgroundColor",(({newVal:e})=>e&&this.yLabel.setAttr("background",e))),this.watch("priceLabelBorderColor",(({newVal:e})=>e&&this.yLabel.setAttr("borderColor",e))),this.watch("priceLabelColor",(({newVal:e})=>e&&this.yLabel.setAttr("color",e))),this.watch("lineColor",(({newVal:e})=>e&&this.line.setAttr("strokeStyle",e))),this.watch("lineDash",(({newVal:e})=>e&&this.line.setAttr("lineDash",e)))}isHover(){return!1}updateBackground(e){this.priceLabel.setAttr("fillStyle",e),this.quantityLabel.setAttr("fillStyle",e)}setVisibleShapes(){this.quantityLabel.setAttr("isVisible",!0),this.priceLabel.setAttr("isVisible",!0)}getVertexs(){return[]}forceUpdate(){this.setAttr("data",[]),this.update()}}class Mo extends Gr.Z{constructor(){super(),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.PriceLine},this.line=Gr.Z.line.clone(),this.text=Gr.Z.text.clone().setAttrs({textAlign:"left",textBaseline:"bottom"}),this.dragVertex=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]),this.setAttr("type",It.Us.PriceLine)}updateImmediate(){const e=this.getParent();if(!e)return;const{mainPane:t}=e,i=this.getData(),{x:r,y:o}=e.getPosition(i),{width:n}=t.getBound();this.line.setData({p1:{x:r,y:-o},p2:{x:n,y:-o}}),this.text.setData({x:r,y:-(o+10)}).setText(`${e.formatterValue(i.value)}`),this.dragVertex.setData({x:r,y:-o}),this.addWidgetShapes(t,[this.line,this.dragVertex,this.text]),this.setAnnotationToWidgets([t])}getShapes(){return[this.line,this.dragVertex,this.text]}updateColor(e){this.line.setAttr("strokeStyle",e),this.text.setAttr("fillStyle",e)}updateLineWidth(e){this.line.setAttr("lineWidth",e)}updateLineStyle(e){this.line.setAttr("lineDash",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){return this.line.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.dragVertex.setAttrs({isVisible:t||e,lineWidth:e?Gr.e.border_width:Gr.e.hover_border_width})}getVertexs(){return[this.dragVertex]}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}}getDragVertex(e){return this.dragVertex.isHover(e)?this.dragVertex:this.line.isHover(e)?this.line:void 0}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n instanceof oo.Z?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}_dragVertex(e){const{mainPane:t}=e;t.on("mousemove",It.Us.HorizontalLine,(t=>{this.setData(e.transformAbsoluteXYToPlotItem(t.point)),this.update()})),t.on("mouseup",It.Us.HorizontalLine,(()=>{t.off(It.Us.HorizontalLine),this.recoverDragVertexts(),this.compeleDraw()}))}_dragLine(e,{x:t,y:i}){const{mainPane:r}=e,o=this.getData(),{x:n,y:s}=e.getPosition(o);r.on("mousemove",It.Us.HorizontalLine,(r=>{const{x:o,y:a}=e.transformPointToView(r.point),l=o-t,c=a-i;(0,_t.Fr)(l)&&(0,_t.Fr)(c)||(this.setData(e.getPlotItemByPosition(n+l,s+c)),this.update())})),r.on("mouseup",It.Us.HorizontalLine,(()=>{r.off(It.Us.HorizontalLine),this.compeleDraw()}))}}class Do extends ao{constructor(){super(),this.setAttr("type",It.Us.RayLine)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),h=e.getPosition(l),{x:d,y:u}=h,g=e.getPosition(c),{x:m,y:p}=g,{width:y,height:x}=i.getBound();if(jr.Z.Algorith.isSamePoint(h,g))this.line.setData({p1:{x:d,y:-u},p2:{x:m,y:-p}});else{const e=new jr.Z.Bound(0,0,y,x),t=jr.Z.Line.getIntersectWidthBound(h,g,e);if(2===t.length){const e=new jr.Z.Vector2(m-d,p-u),i=new jr.Z.Vector2(t[0].x-d,t[0].y-u),r=new jr.Z.Vector2(t[1].x-d,t[1].y-u),o=jr.Z.Algorith.getDotMultiply(e,i)>0,n=jr.Z.Algorith.getDotMultiply(e,r)>0;if(o&&n){const e=i.getSquareLength()>r.getSquareLength()?t[0]:t[1];this.line.setData({p1:{x:d,y:-u},p2:{x:e.x,y:-e.y}})}else n?this.line.setData({p1:{x:d,y:-u},p2:{x:t[1].x,y:-t[1].y}}):this.line.setData({p1:{x:d,y:-u},p2:{x:t[0].x,y:-t[0].y}})}}const{time:f=l.time}=t.getCurrentItemByTime(l.time)||{},{time:C=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:d,y:-a},text:(0,_t.XH)(f,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:m,y:-a},text:(0,_t.XH)(C,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-u},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-p},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(d,m),y:-a},width:Math.abs(d-m),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(u,p)},width:r.bound.width,height:Math.abs(u-p)}),this.dragVertex1.setAttrs({data:{x:d,y:-u}}),this.dragVertex2.setAttrs({data:{x:m,y:-p}}),this.addWidgetShapes(i,[this.line,this.dragVertex1,this.dragVertex2]),this.addWidgetShapes(o,[this.xRange,this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange,this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}}class Io extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),type:It.Us.Rectangle},this.rect=new so.Z({fillStyle:Vo.e.default_area_color,stroke:!1}),this.yLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.yLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.xLabel1=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xLabel2=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.xRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.yRange=new so.Z({fillStyle:"#2f3f59",stroke:!1,globalAlpha:.6}),this.dragVertex1=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]),this.dragVertex2=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),this.dragVertex3=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1),this.dragVertex4=Gr.Z.dragVertex.clone(["fillStyle","strokeStyle"]).setAttr("isVisible",!1)}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{p1:l,p2:c}=this.getData(),{x:h,y:d}=e.getPosition(l),{x:u,y:g}=e.getPosition(c);this.rect.setData({x:h,y:-d}).setAnnotherVertex({x:u,y:-g});const{time:m=l.time}=t.getCurrentItemByTime(l.time)||{},{time:p=c.time}=t.getCurrentItemByTime(c.time)||{};this.xLabel1.setAttrs({data:{x:h,y:-a},text:(0,_t.XH)(m,n.getOriginTimeScaleType()),fixHeight:a}),this.xLabel2.setAttrs({data:{x:u,y:-a},text:(0,_t.XH)(p,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel1.setAttrs({data:{x:0,y:-d},text:e.formatterValue(l.value),fixWidth:s}),this.yLabel2.setAttrs({data:{x:0,y:-g},text:e.formatterValue(c.value),fixWidth:s}),this.xRange.setAttrs({data:{x:Math.min(h,u),y:-a},width:Math.abs(h-u),height:o.bound.height}),this.yRange.setAttrs({data:{x:0,y:-Math.max(d,g)},width:r.bound.width,height:Math.abs(d-g)}),this.dragVertex1.setAttrs({data:{x:h,y:-d}}),this.dragVertex2.setAttrs({data:{x:u,y:-d}}),this.dragVertex3.setAttrs({data:{x:u,y:-g}}),this.dragVertex4.setAttrs({data:{x:h,y:-g}}),this.addWidgetShapes(i,[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]),this.addWidgetShapes(o,[this.xRange]),this.addWidgetShapes(o,[this.xLabel1,this.xLabel2]),this.addWidgetShapes(r,[this.yRange]),this.addWidgetShapes(r,[this.yLabel1,this.yLabel2]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.rect,this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4,this.xRange,this.xLabel1,this.xLabel2,this.yRange,this.yLabel1,this.yLabel2]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.Rectangle,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}updateColor(e){this.rect.setAttrs({stroke:!0,strokeStyle:e})}updateBackground(e){this.rect.setAttr("fillStyle",e)}updateLineWidth(e){this.rect.setAttrs({stroke:!0,lineWidth:e})}updateLineStyle(e){this.rect.setAttrs({stroke:!0,lineDash:e})}isHover(e){return this.rect.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.xLabel1.setAttr("isVisible",e),this.xLabel2.setAttr("isVisible",e),this.xRange.setAttr("isVisible",e),this.yLabel1.setAttr("isVisible",e),this.yLabel2.setAttr("isVisible",e),this.yRange.setAttr("isVisible",e);const i={isVisible:t||e,radius:Vo.e.radius,lineWidth:e?Vo.e.border_width:Vo.e.hover_border_width};this.updateVertex(this.getVertexs(),i)}getEditAttribute(){const{color:e,lineWidth:t,lineStyle:i,background:r,isLock:o}=this.getConfig();return{showColor:!0,color:e,showWidth:!0,lineWidth:t,showStyle:!0,lineStyle:i,showBg:!0,background:r,isLock:o,showTextColor:!1,textColor:"",showFontSize:!1,textFontSize:16,showTextBold:!1,isTextBold:!1,showTextEdit:!1,isTextEdit:!1,showLock:!0,showDelete:!0}}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.updateHighlightVertexBorderWidth(this.dragVertex1,this.dragVertex1.isHover(o)),s=this.updateHighlightVertexBorderWidth(this.dragVertex2,this.dragVertex2.isHover(o)),a=this.updateHighlightVertexBorderWidth(this.dragVertex3,this.dragVertex3.isHover(o)),l=this.updateHighlightVertexBorderWidth(this.dragVertex4,this.dragVertex4.isHover(o));(n||s||a||l)&&this.update()}}getVertexs(){return[this.dragVertex1,this.dragVertex2,this.dragVertex3,this.dragVertex4]}getDragVertex(e){return this.dragVertex1.isHover(e)?this.dragVertex1:this.dragVertex2.isHover(e)?this.dragVertex2:this.dragVertex3.isHover(e)?this.dragVertex3:this.dragVertex4.isHover(e)?this.dragVertex4:this.rect.isHover(e)?this.rect:void 0}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n===this.rect?this._dragRect(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(n,!0),this.updateVertexBorderAndVisible(this.getNoDragVertexs(n),!1),this._dragVertex(t,n)))}_dragVertex(e,t){const{mainPane:i}=e;this.updateVertex(this.getNoDragVertexs(t),{strokeStyle:Vo.e.hover_border_color}),i.on("mousemove",It.Us.Rectangle,(i=>{const r=e.transformAbsoluteXYToPlotItem(i.point),{p1:o,p2:n}=this.getAttr("data");t===this.dragVertex1&&this.setData({p1:r,p2:n}),t===this.dragVertex2&&this.setData({p1:{time:o.time,value:r.value},p2:{time:r.time,value:n.value}}),t===this.dragVertex3&&this.setData({p1:o,p2:r}),t===this.dragVertex4&&this.setData({p1:{time:r.time,value:o.value},p2:{time:n.time,value:r.value}}),this.update()})),i.on("mouseup",It.Us.Rectangle,(()=>{i.off(It.Us.Rectangle),this.recoverDragVertexts(),this.compeleDraw()}))}_dragRect(e,{x:t,y:i}){const{mainPane:r}=e,{p1:o,p2:n}=this.getData(),{x:s,y:a}=e.getPosition(o),{x:l,y:c}=e.getPosition(n);let h=0,d=0;r.on("mousemove",It.Us.Rectangle,(r=>{const{x:o,y:n}=e.transformPointToView(r.point);h=o-t,d=n-i;const u=e.getPlotItemByPosition(s+h,a+d),g=e.getPlotItemByPosition(l+h,c+d);this.setData({p1:u,p2:g}),this.update()})),r.on("mouseup",It.Us.Rectangle,(()=>{r.off(It.Us.Rectangle),this.compeleDraw()}))}}class _o extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),lineType:It.Us.HorizontalLine,type:It.Us.StraightLine},this.line1=Gr.Z.line.clone(),this.line2=Gr.Z.line.clone(),this.yLabel=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6}),this.xLabel=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.dragVertex=Gr.Z.dragRect.clone(["fillStyle","strokeStyle"]).setAttrs({width:12,height:12})}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent(),{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,{width:l,height:c}=i.getBound(),h=this.getData(),{x:d,y:u}=e.getPosition(h),g=this.getAttr("lineType");g===It.Us.VerticalLine?this.line1.setData({p1:{x:d,y:0},p2:{x:d,y:-c}}):g===It.Us.HorizontalLine?this.line1.setData({p1:{x:0,y:-u},p2:{x:l,y:-u}}):g===It.Us.CrossLine&&(this.line1.setData({p1:{x:d,y:0},p2:{x:d,y:-c}}),this.line2.setData({p1:{x:0,y:-u},p2:{x:l,y:-u}}));const{time:m=h.time}=t.getCurrentItemByTime(h.time)||{};this.xLabel.setAttrs({data:{x:d,y:-a},text:(0,_t.XH)(m,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel.setAttrs({data:{x:0,y:-u},text:e.formatterValue(h.value),fixWidth:s}),this.dragVertex.setAttrs({data:{x:d-6,y:-u-6}}),g===It.Us.CrossLine?this.addWidgetShapes(i,[this.line1,this.line2,this.dragVertex]):this.addWidgetShapes(i,[this.line1,this.dragVertex]),this.addWidgetShapes(o,[this.xLabel]),this.addWidgetShapes(r,[this.yLabel]),this.setAnnotationToWidgets([i,o,r])}isCross(){return this.getAttr("lineType")===It.Us.CrossLine}getShapes(){const e=[this.line1,this.dragVertex,this.xLabel,this.yLabel];return this.isCross()&&e.push(this.line2),e}updateColor(e){this.line1.setAttr("strokeStyle",e),this.line2.setAttr("strokeStyle",e)}updateLineWidth(e){this.line1.setAttr("lineWidth",e),this.line2.setAttr("lineWidth",e)}updateLineStyle(e){this.line1.setAttr("lineDash",e),this.line2.setAttr("lineDash",e)}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("mousemove",It.Us.HorizontalLine,this._highlightVertex.bind(this)),this.watch("data",this.updateImmediate.bind(this))}isHover(e){const t=this.getAttr("lineType");return this.line1.isHover(e)||t===It.Us.CrossLine&&this.line2.isHover(e)||!!this.getDragVertex(e)}setVisibleShapes(){const{isEdit:e,isHover:t}=this.getConfig();this.xLabel.setAttr("isVisible",e),this.yLabel.setAttr("isVisible",e),this.dragVertex.setAttrs({isVisible:t||e,lineWidth:e?Gr.e.border_width:Gr.e.hover_border_width})}getVertexs(){return[this.dragVertex]}getDescription(){const{data:e,lineType:t,type:i,background:r,color:o,lineWidth:n,lineStyle:s,isLock:a}=this.getConfig();return{data:e,type:i,color:o,background:r,lineType:t,isLock:a,lineWidth:n,lineStyle:s}}getCacheStyleKey(){return this.getAttr("lineType")}_highlightVertex(e){const{isEdit:t,isHover:i}=this.getConfig();if(t||i){const{mainPane:t}=this.parent,{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r};this.updateHighlightVertexBorderWidth(this.dragVertex,this.dragVertex.isHover(o))&&this.update()}}getDragVertex(e){const t=this.getAttr("lineType");return this.dragVertex.isHover(e)?this.dragVertex:this.line1.isHover(e)?this.line1:t===It.Us.CrossLine&&this.line2.isHover(e)?this.line2:void 0}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n instanceof oo.Z?this._dragLine(t,t.transformPointToView(e.point)):(this.updateVertexBorderAndVisible(this.dragVertex,!0),this._dragVertex(t)))}_dragVertex(e){const{mainPane:t}=e;t.on("mousemove",It.Us.HorizontalLine,(t=>{this.setData(e.transformAbsoluteXYToPlotItem(t.point)),this.update()})),t.on("mouseup",It.Us.HorizontalLine,(()=>{t.off(It.Us.HorizontalLine),this.recoverDragVertexts(),this.compeleDraw()}))}_dragLine(e,{x:t,y:i}){const{mainPane:r}=e,o=this.getData(),{x:n,y:s}=e.getPosition(o),a=this.getAttr("lineType");r.on("mousemove",It.Us.HorizontalLine,(r=>{const{x:o,y:l}=e.transformPointToView(r.point),c=o-t,h=l-i;if(a===It.Us.VerticalLine){if((0,_t.Fr)(c))return;this.setData(e.getPlotItemByPosition(n+c,s))}else if(a===It.Us.HorizontalLine){if((0,_t.Fr)(h))return;this.setData(e.getPlotItemByPosition(n,s+h))}else if(a===It.Us.CrossLine){if((0,_t.Fr)(c)&&(0,_t.Fr)(h))return;this.setData(e.getPlotItemByPosition(n+c,s+h))}this.update()})),r.on("mouseup",It.Us.HorizontalLine,(()=>{r.off(It.Us.HorizontalLine),this.compeleDraw()}))}}var Po=i(61111);class Wo extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),isTextEdit:!1,type:It.Us.Text,text:""},this.text=Gr.Z.text.clone().setAttrs({fillStyle:"#848E9C",fontSize:16,textBaseline:"top",padding:4,isCustomized:!0,isVisible:!1}),this.xLabel=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Down,fill:!0,padding:[6,2]}),this.yLabel=new no({background:It.E.Blue3,color:It.E.White,dir:It.Nm.Right,fill:!0,padding:6})}updateImmediate(){const e=this.getParent();if(!e)return;const t=e.getParent();!this._textArea&&this.createTextAreaElement();const{mainPane:i,axisPane:r,timeAxisPane:o,xAxis:n}=e,s=r.bound.width,a=o.bound.height,l=this.getData(),{x:c,y:h}=e.getPosition(l);this.setTextAreaPosition(e.transformXYToAbsoluteXY({x:c,y:h})),this.text.setData(this.transformYPoint({x:c,y:h}));const{time:d=l.time}=t.getCurrentItemByTime(l.time)||{};this.xLabel.setAttrs({data:{x:c,y:-a},text:(0,_t.XH)(d,n.getOriginTimeScaleType()),fixHeight:a}),this.yLabel.setAttrs({data:{x:0,y:-h},text:e.formatterValue(l.value),fixWidth:s}),this.addWidgetShapes(i,[this.text]),this.setAnnotationToWidgets([i]),this.addWidgetShapes(o,[this.xLabel]),this.addWidgetShapes(r,[this.yLabel]),this.setAnnotationToWidgets([i,o,r])}getShapes(){return[this.text,this.xLabel,this.yLabel]}updateBackground(e){this.text.setAttrs({fill:!0,background:e})}updateTextColor(e){this.text.setAttr("fillStyle",e)}updateTextSize(e){this.text.setAttr("fontSize",e)}updateTextBold(e){this.text.setAttr("fontVariant",e)}getDescription(){const{data:e,type:t,text:i,isLock:r,textColor:o,background:n,textFontSize:s,isTextBold:a}=this.getConfig();return{data:e,type:t,text:i,textColor:o,background:n,textFontSize:s,isTextBold:a,isLock:r}}getEditAttribute(){const{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:o,isLock:n}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:It.TD.SOLID,showTextColor:!0,textColor:e,showFontSize:!0,textFontSize:t,showTextBold:!0,isTextBold:i,showBg:!0,background:r,isLock:n,showTextEdit:!0,isTextEdit:o,showLock:!0,showDelete:!0}}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t,axisPane:i,timeAxisPane:r}=e;return[t,i,r]}initCustomEvents(){this.on("mousedown",this._onmousedown.bind(this)),this.on("dblclick",`${It.Us.Text}-${Dt.HD.MOUSE}`,this._dblclick.bind(this)),this.watch("data",this.updateImmediate.bind(this)),this.watch("text",(({newVal:e})=>{const t=e.split("\n").filter((e=>!!e));this.text.setText(t)})),this.watch("isTextEdit",(({newVal:e})=>{e&&this._activateEdit(),this.setVisibleShapes()}))}isHover(e){const{isTextEdit:t}=this.getConfig();return!t&&this.text.isHover(e)}setVisibleShapes(){const{isEdit:e,isTextEdit:t}=this.getConfig();this.xLabel.setAttr("isVisible",e),this.yLabel.setAttr("isVisible",e),this.text.setAttr("isVisible",!t),!t&&this._textArea&&this._textArea.remove()}getVertexs(){return[]}setTextAreaPosition(e){const t=this.getAttr("isTextEdit"),i=this.text.getWidth(),r=this.text.getHeight();(0,_t.AS)(this._textArea,{width:`${Math.max(150,Math.min(200,i))}px`,height:`${Math.max(100,Math.min(150,r))}px`,transform:`translate(${e.x}px, ${e.y}px)`,visibility:t?"visible":"hidden",fontVariant:this.getAttr("isTextBold")?"bold":"normal",color:this.getAttr("textColor")})}_activateEdit(){const e=this.getParent().getParent();(0,_t.AS)(this._textArea,{visibility:"visible"}),e.addElement(this._textArea),this._textArea.value=this.getAttr("text"),this.setAttr("isTextEdit",!0),this.setVisibleShapes(),this.update()}_dblclick(e){const t=this.getParent();if(!t)return;const{x:i,y:r}=t.transformPointToView(e.point);this.text.isHover({x:i,y:-r})&&!this._textArea.parentNode&&(this.setAttr("isTextEdit",!0),this.setAttr("isEdit",!0))}getDragVertex(e){if(this.text.isHover(e))return this.text}_onmousedown(e){if(e.isDealed)return;const t=this.getParent();if(this.isDisableDrag())return;const{x:i,y:r}=t.transformPointToView(e.point),o={x:i,y:-r},n=this.getDragVertex(o);n&&(this.setAttr("isEdit",!0),this.startDraw(),e.isDealed=!0,n instanceof Po.Z&&this._dragText(t,t.transformPointToView(e.point)))}_dragText(e,{x:t,y:i}){const{mainPane:r}=e,o=this.getData(),{x:n,y:s}=e.getPosition(o);r.on("mousemove",`${It.Us.Text}-${Dt.HD.MOUSE}`,(r=>{const{x:o,y:a}=e.transformPointToView(r.point),l=o-t,c=a-i;this.setData(e.getPlotItemByPosition(n+l,s+c)),this.update()})),r.on("mouseup",`${It.Us.Text}-${Dt.HD.MOUSE}`,(()=>{r.off(`${It.Us.Text}-${Dt.HD.MOUSE}`),this.compeleDraw()}))}createTextAreaElement(){const e=this.getParent();this._textArea=(0,_t.az)("textarea",{visibility:"hidden"},"text-area-wrap"),e&&e.getParent().addElement(this._textArea),this._textArea.addEventListener("input",(0,_t.P2)((()=>{const{value:e=""}=this._textArea;this.setAttr("text",e)}),10)),So.on(document,"mousedown",(e=>{const t=this.getAttr("isTextEdit"),{originEvent:i}=e;t&&i&&!i.target.contains(this._textArea)&&(this._textArea.remove(),this.compeleDraw(),this.update())}),!0)}compeleDraw(){this.setAttrs({isTextEdit:!1,isComplete:!0}),this.syncStorage()}}class Ro extends Gr.Z{constructor(){super(...arguments),this.config={...Wt()(Gr.Z.defaultConfig),isTextEdit:!1,type:It.Us.ToolTip,isNeedStore:!1,text:""},this.tooltipLabel=new no({background:"#5E6673",color:It.E.White,dir:It.Nm.Up,fill:!0,borderRadius:4,padding:[12,8],fixHeight:36,fontSize:14}),this.arrowIcon=new ro({fillStyle:"#5E6673",stroke:!1})}isIndependent(){return!0}updateImmediate(){const e=this.getParent(),t=e.getParent(),{mainPane:i,yAxis:r,xAxis:o}=e;if(e&&r){const{data:i,text:r}=this.getConfig(),n=t.getCloseItemByTime(i);if(n){const t=4,i=e.getYPos(+n.high)+t,s=o.getCoordOfValue(n.time),a=o.getOriginTimeScaleType();this.tooltipLabel.setAttrs({data:{x:s,y:-i-5+1},text:r||(0,_t.XH)(n.time,a)}),this.arrowIcon.setData([{x:s,y:-i},{x:s+5,y:-i-5},{x:s-5,y:-i-5}])}}this.addWidgetShapes(i,[this.tooltipLabel,this.arrowIcon]),this.setAnnotationToWidgets([i])}getShapes(){return[this.tooltipLabel,this.arrowIcon]}getDescription(){const{type:e,data:t,isNeedStore:i}=this.getConfig();return{id:this.id,type:e,data:t,isNeedStore:i}}setVisibleShapes(){}getEditAttribute(){const{textColor:e,textFontSize:t,isTextBold:i,background:r,isTextEdit:o,isLock:n}=this.getConfig();return{showColor:!1,color:"",showWidth:!1,lineWidth:1,showStyle:!1,lineStyle:It.TD.SOLID,showTextColor:!1,textColor:e,showFontSize:!1,textFontSize:t,showTextBold:!1,isTextBold:i,showBg:!1,background:r,isLock:n,showTextEdit:!1,isTextEdit:o,showLock:!1,showDelete:!1}}getRenderPanes(){const e=this.getParent();if(!e)return[];const{mainPane:t,axisPane:i}=e;return[t,i]}initCustomEvents(){this.watch("data",this.updateImmediate.bind(this)),So.on(document,`mousedown.${It.Us.ToolTip}`,(()=>{this.remove()}))}afterDestroy(){So.off(document,`mousedown.${It.Us.ToolTip}`)}isHover(e){const{isTextEdit:t}=this.getConfig();return!t&&this.tooltipLabel.isHover(e)}getVertexs(){return[]}compeleDraw(){this.setAttrs({isTextEdit:!1,isComplete:!0})}}const Bo="DRAW_EVENT";class Ho extends sr.Z{constructor(e){super(),this.config={...Wt()(sr.Z.defaultConfig),isKeepDrawing:!1,nextAction:It.Us.KeepDrawing},this._actionsMapping=new Map,this._isAbort=!1,this._candleInstance=e,this.initHotkeys(),this.registerActions()}setCompleteDrawCallback(e){this._completeDrawCallback=e}reset(){if(this._isAbort){const e=this.getSelectAnnotation();e&&!e.getAttr("isComplete")&&e.remove(),this._candleInstance.setAnnotationLockStatus(!1)}this.clearEvents()}disAbleDragAnnotations(){this._isAbort=!0,this._candleInstance.setAnnotationLockStatus(!0)}completeCallbackHook(e){if(this._isAbort=!1,this._candleInstance.setAnnotationLockStatus(!1),e&&this._candleInstance.selectAnnotation(e,e.getAttr("type")),this._completeDrawCallback&&this._completeDrawCallback(),this.getAttr("isKeepDrawing")){const e=this.getAttr("nextAction"),t=this.getActionByType(e);t&&t()}else this._completeDrawCallback=null}transformJSONToAnnotation(e,t){const{type:i}=e,r={[It.Us.TrendLine]:ao,[It.Us.StraightLine]:_o,[It.Us.Arrow]:io,[It.Us.ExtendTrendLine]:fo,[It.Us.RayLine]:Do,[It.Us.FibonacciLine]:Co,[It.Us.InfoLine]:wo,[It.Us.ParallelLine]:Ao,[It.Us.Rectangle]:Io,[It.Us.Text]:Wo,[It.Us.PriceLine]:Mo,[It.Us.ArrowLine]:lo,[It.Us.OrderLine]:ko,[It.Us.PositionLine]:To,[It.Us.ExecutionOrders]:xo,[It.Us.ToolTip]:Ro};if(i&&r[i]){const o=new r[i];return i===It.Us.Arrow&&e.background&&(e.color=e.color||e.background),o.setParent(t||this._getEditorPanel()).setAttrs({isComplete:!0,...e,isEdit:!1}).setAttr("isDawing",!1),o}}initHotkeys(){(0,Xr.Z)("backspace, del",(()=>{this.deleteCurrentAnnotation()})),(0,Xr.Z)("esc",(()=>{this.clear()}))}clear(){this.clearEvents(),this.makeAnnotationsDestroy(),this.completeCallbackHook()}clearEvents(){const e=this._getEditorPanel();if(e){const{mainPane:t}=e;t.off("mousedown",Bo),t.off("mousemove",Bo),t.off("mouseup",Bo),t.off("click",Bo),t.off("dbclick",Bo)}}registerActions(){const e=this._getEditorPanel();if(e){const t={[It.Us.TrendLine]:this._drawExtendLine.bind(this,e,ao,It.Us.TrendLine),[It.Us.ExtendTrendLine]:this._drawExtendLine.bind(this,e,fo,It.Us.ExtendTrendLine),[It.Us.RayLine]:this._drawExtendLine.bind(this,e,Do,It.Us.RayLine),[It.Us.InfoLine]:this._drawExtendLine.bind(this,e,wo,It.Us.InfoLine),[It.Us.ArrowLine]:this._drawExtendLine.bind(this,e,lo,It.Us.ArrowLine),[It.Us.HorizontalLine]:this._drawStraightLine.bind(this,e,It.Us.HorizontalLine),[It.Us.VerticalLine]:this._drawStraightLine.bind(this,e,It.Us.VerticalLine),[It.Us.CrossLine]:this._drawStraightLine.bind(this,e,It.Us.CrossLine),[It.Us.Rectangle]:this._drawRectangle.bind(this,e),[It.Us.ParallelLine]:this._drawParallelChannel.bind(this,e),[It.Us.FibonacciLine]:this._drawFibLine.bind(this,e),[It.Us.LeftArrow]:this._drawArrow.bind(this,e,It.Us.LeftArrow),[It.Us.RightArrow]:this._drawArrow.bind(this,e,It.Us.RightArrow),[It.Us.UpArrow]:this._drawArrow.bind(this,e,It.Us.UpArrow),[It.Us.DownArrow]:this._drawArrow.bind(this,e,It.Us.DownArrow),[It.Us.Text]:this._drawText.bind(this,e),[It.Us.PriceLine]:this._drawPriceLine.bind(this,e)};Object.keys(t).forEach((e=>{this._actionsMapping.set(e,(()=>{e!==It.Us.KeepDrawing&&(this.clearEvents(),this.disAbleDragAnnotations()),t[e]()}))}))}}getActionByType(e){return this._actionsMapping.get(e)}setNextAction(e){this.setAttr("nextAction",e)}getShapeById(e){return this._getEditorPanel().getAnnotations().find((t=>t.id===e))}manageOrders(e){const t=this._getEditorPanel(),i=t.getAnnotations().filter((e=>e.getAttr("type")===It.Us.OrderLine)),r=i.map((t=>[t,e.find((e=>t.getAttr("orderId")===e.orderId))])),o=r.filter((([,e])=>!e)),n=r.filter((([,e])=>!!e)),s=e.filter((e=>!i.find((t=>t.getAttr("orderId")===e.orderId))));o.forEach((([e])=>e.remove(!1))),n.forEach((([e,t])=>e.setAttrs(t))),s.forEach((e=>this.transformJSONToAnnotation({...e,type:It.Us.OrderLine}))),t.update(It.mB.Marks)}manageExecutionOrders(e){const t=this._getEditorPanel();this.deleteAnnotationBy((e=>e.getAttr("type")===It.Us.ExecutionOrders)),this.transformJSONToAnnotation({...e,type:It.Us.ExecutionOrders}),t.update(It.mB.Marks)}deleteAllOrderShape(e=(e=>e.getAttr("type")===It.Us.OrderLine)){const t=this._getEditorPanel();this.deleteAnnotationBy(e)&&t.update(It.mB.Marks)}deleteAllPositionShape(e=(e=>e.getAttr("type")===It.Us.PositionLine)){const t=this._getEditorPanel();this.deleteAnnotationBy(e)&&t.update(It.mB.Marks)}deleteAnnotationBy(e){return this._getEditorPanel().getAnnotations().reduce(((t,i)=>e(i)?(i.remove(!1),!0):t),!1)}getSelectAnnotation(){const e=this._getEditorPanel().getAnnotations();for(let t=0,i=e.length;t<i;t++)if(e[t].getAttr("isEdit"))return e[t]}clearSelectAnnotation(){const e=this._getEditorPanel().getAnnotations();for(let t=0,i=e.length;t<i;t++){const{isEdit:i}=e[t].getConfig();i&&e[t].setAttr("isEdit",!1)}}deleteAllAnnotation(){const e=this._getEditorPanel(),t=e.getAnnotations();for(let e=0,i=t.length;e<i;e++)t[e].isIndependent()||t[e].remove(!1);t.length>0&&e.update(It.mB.Marks)}deleteCurrentAnnotation(){const e=this._getEditorPanel().getAnnotations().find((e=>e.getAttr("isEdit")));e&&e.remove()}makeAnnotationsDestroy(){const e=this._getEditorPanel().getAnnotations();for(let t=0,i=e.length;t<i;t++)e[t].destroy()}keepDraw(){const e=this.getAttr("isKeepDrawing");this.setAttr("isKeepDrawing",!e)}_drawExtendLine(e,t,i){const r=(new t).setParent(e);let o=null,n=null;const{mainPane:s}=e;s.on("mousedown",Bo,(t=>{t.isDealed=!0,o||(r.setAttrs({color:Gr.Z.getCacheStyle(i,"color"),lineWidth:Gr.Z.getCacheStyle(i,"lineWidth"),lineStyle:Gr.Z.getCacheStyle(i,"lineStyle")}),o=e.transformAbsoluteXYToPlotItem(t.point)),s.off("mousemove",Bo),s.on("mousemove",Bo,(t=>{t.isDealed=!0,n=e.transformAbsoluteXYToPlotItem(t.point),r.setData({p1:o,p2:n}),r.update()})),s.once("mouseup",Bo,(()=>{!o||!n||(0,_t.Fr)(o.time-n.time)&&(0,_t.Fr)(o.value-n.value)||(s.off(Bo),r.compeleDraw(),r.recoverDragVertexts(),this.completeCallbackHook(r))}))}),!0)}_drawStraightLine(e,t){const i=(new _o).setParent(e),{mainPane:r}=e;r.once("click",Bo,(r=>{i.setAttrs({lineType:t,color:Gr.Z.getCacheStyle(t,"color"),lineWidth:Gr.Z.getCacheStyle(t,"lineWidth"),lineStyle:Gr.Z.getCacheStyle(t,"lineStyle")}),i.setData(e.transformAbsoluteXYToPlotItem(r.point)),i.compeleDraw(),this.completeCallbackHook(i)}))}_drawPriceLine(e){const t=(new Mo).setParent(e),{mainPane:i}=e;i.once("click",Bo,(i=>{t.setAttrs({color:Gr.Z.getCacheStyle(It.Us.PriceLine,"color"),lineWidth:Gr.Z.getCacheStyle(It.Us.PriceLine,"lineWidth"),lineStyle:Gr.Z.getCacheStyle(It.Us.PriceLine,"lineStyle")}),t.setData(e.transformAbsoluteXYToPlotItem(i.point)),t.compeleDraw(),this.completeCallbackHook(t)}))}_drawRectangle(e){const t=(new Io).setParent(e);let i=null,r=null;const{mainPane:o}=e;o.on("mousedown",Bo,(n=>{n.isDealed=!0,i||(t.setAttrs({color:Gr.Z.getCacheStyle(It.Us.Rectangle,"color"),lineWidth:Gr.Z.getCacheStyle(It.Us.Rectangle,"lineWidth"),lineStyle:Gr.Z.getCacheStyle(It.Us.Rectangle,"lineStyle"),background:Gr.Z.getCacheStyle(It.Us.Rectangle,"background")}),i=e.transformAbsoluteXYToPlotItem(n.point)),r||(r=e.transformAbsoluteXYToPlotItem(n.point)),o.off("mousemove",Bo),o.on("mousemove",Bo,(o=>{o.isDealed=!0,r=e.transformAbsoluteXYToPlotItem(o.point),t.setData({p1:i,p2:r}),t.update()})),o.once("mouseup",Bo,(()=>{!i||!r||(0,_t.Fr)(i.time-r.time)&&(0,_t.Fr)(i.value-r.value)||(o.off(Bo),t.compeleDraw(),t.recoverDragVertexts(),this.completeCallbackHook(t))}))}),!0)}_drawParallelChannel(e){const t=(new Ao).setParent(e);let i=null,r=null,o=null;const{mainPane:n}=e;n.on("mousedown",Bo,(s=>{s.isDealed=!0;const a=e.transformAbsoluteXYToPlotItem(s.point);i?r?o||(o=a):r=a:(t.setAttrs({color:Gr.Z.getCacheStyle(It.Us.ParallelLine,"color"),lineWidth:Gr.Z.getCacheStyle(It.Us.ParallelLine,"lineWidth"),lineStyle:Gr.Z.getCacheStyle(It.Us.ParallelLine,"lineStyle"),background:Gr.Z.getCacheStyle(It.Us.ParallelLine,"background")}),i=a),n.off("mousemove",Bo),n.on("mousemove",Bo,(n=>{n.isDealed=!0;const s=e.transformAbsoluteXYToPlotItem(n.point);r?o||t.setData({p1:i,p2:r,p3:s}):t.setData({p1:i,p2:s,p3:s}),t.update()})),n.once("mouseup",Bo,(()=>{i&&r&&o&&(n.off(Bo),t.compeleDraw(),t.recoverDragVertexts(),this.completeCallbackHook(t))}))}),!0)}_drawFibLine(e){const t=(new Co).setParent(e);let i=null,r=null;const{mainPane:o}=e;o.on("mousedown",Bo,(n=>{n.isDealed=!0,i||(t.setAttrs({color:Gr.Z.getCacheStyle(It.Us.FibonacciLine,"color"),lineWidth:Gr.Z.getCacheStyle(It.Us.FibonacciLine,"lineWidth"),lineStyle:Gr.Z.getCacheStyle(It.Us.FibonacciLine,"lineStyle"),background:Gr.Z.getCacheStyle(It.Us.FibonacciLine,"background")}),i=e.transformAbsoluteXYToPlotItem(n.point)),o.off("mousemove",Bo),o.on("mousemove",Bo,(o=>{o.isDealed=!0,r=e.transformAbsoluteXYToPlotItem(o.point),t.setData({p1:i,p2:r}),t.update()})),o.once("mouseup",Bo,(()=>{!i||!r||(0,_t.Fr)(i.time-r.time)&&(0,_t.Fr)(i.value-r.value)||(o.off(Bo),t.compeleDraw(),t.recoverDragVertexts(),this.completeCallbackHook(t))}))}),!0)}_drawArrow(e,t){const i=(new io).setParent(e),{mainPane:r}=e;r.once("mousedown",Bo,(r=>{i.setAttrs({dir:t,color:Gr.Z.getCacheStyle(t,"color")}),i.setData(e.transformAbsoluteXYToPlotItem(r.point)),i.compeleDraw(),this.completeCallbackHook(i)}))}_drawText(e){const t=(new Wo).setParent(e);t.createTextAreaElement();const{mainPane:i}=e;i.once("click",Bo,(i=>{t.setAttrs({textColor:Gr.Z.getCacheStyle(It.Us.Text,"textColor"),textFontSize:Gr.Z.getCacheStyle(It.Us.Text,"textFontSize"),isTextBold:Gr.Z.getCacheStyle(It.Us.Text,"isTextBold"),background:Gr.Z.getCacheStyle(It.Us.Text,"background")}),t.setAttr("isTextEdit",!0).setData(e.transformAbsoluteXYToPlotItem(i.point)),i.originEvent.stopPropagation(),this.completeCallbackHook(t),i.isDealed=!0}))}_getEditorPanel(){return this._candleInstance.getPanel((e=>e instanceof Fr&&e.panelType===It.wh.BASE))}}const Zo={theme:"",margin:{left:0,right:0,top:0,bottom:8},xAxis:{height:24,scaleRatio:.0025},yAxis:{width:40,isFloat:!1},crossHair:{show:!0,style:Dt.Li.CROSSHAIR},grid:{show:!0},candlestick:{barWeight:.8,dataFormatter:It.aI.Normal},indicators:[]};class Oo extends Ir{constructor(){super(...arguments),this.drawBorder=(e,t)=>{e.beginPath();const{width:i,height:r}=t;rr.Z.drawLine(e,0,-r,i,-r),e.stroke()},this.drawTicks=(e,t,i,r,o,n)=>{e.beginPath();const s=-i.height;t.forEach((t=>{const i=(0,_t.sL)(t.v,n);i&&(rr.Z.drawLine(e,t.p,s,t.p,s+o),rr.Z.drawText(e,i,t.p,s+o+r))})),e.stroke()}}draw(e,t){this.drawBorder(e,t)}}class No extends Tr{constructor(){super(),this.config={...Wt()(Tr.defaultConfig),zIndex:1e3},this.renderer=new Oo,this.on("mousemove",this.onmousemove),this.on("mouseout",this.onmouseout),this.on("mousedown",this.onmousedown)}getCtxsByDrawMode(e){const t=this.getRoot(),i=t.getContext(),r=t.getMarkContext();return{[It.mB.All]:[i,r],[It.mB.Resize]:[i,r],[It.mB.Marks]:[r]}[e]||[]}clear(e=[]){const t=this.getClearBound();e.forEach((e=>rr.Z.clearRect(e,t)))}render(e){const t=this.getRoot(),{xAxis:i,tick:{width:r=5,textMargin:o=0}}=t.getConfig(),n=t.getContext(),s=t.getMarkContext(),a=this.getCtxsByDrawMode(e);if(this.clear(a),this.initialCtxs(a),e===It.mB.All||e===It.mB.Resize){this.createClipBound(n);const e=t.getSettingValues("@background.frame.color");(0,_t.ui)(n,{strokeStyle:e}),this.renderer.drawPolyline(n,[{x:0,y:-i.height},{x:this.bound.width,y:-i.height}]);const s=this.getRoot().getXAxis(),a=this.getTicksData(),l=s.getCurrentTimeScale(),c=t.getColorFromColorTable("axis.tickLineColor"),h=t.getColorFromColorTable("axis.tickTextColor");(0,_t.ui)(n,{strokeStyle:c,fillStyle:h,textBaseline:It.Wr.Top,textAlign:It.PH.Center}),this.renderer.drawTicks(n,a,this.bound,o,r,l)}this.createClipBound(s),t.getAttr("annotationVisible")&&this.plotShapes(s),this.restoreCtxs(a)}setViewBound(){const e=this.getRoot(),{xAxis:t,margin:i,width:r,height:o}=e.getConfig();this.setBound({x:i.left,y:o-i.bottom,width:r-i.right,height:t.height})}getTicksData(){const e=this.getRoot();return e?e.getXAxis().getAxisData():[]}onmouseout(){const e=this.getRoot(),t=e.getHitContext();rr.Z.clearRect(t),this.clearDragEvent(),e.setCursor({key:"gap",isClear:!0,config:{},weight:1e3})}onmousedown(e){const t=this.getRoot();let{x:i}=e.point;this.on("mousemove","mousedown",(e=>{const{x:t}=e.point;this.getRoot().shiftTimeLine(i-t),i=t})),this.on("mouseup","mousedown",(()=>{this.clearDragEvent(),t.endShiftTime()}))}clearDragEvent(){this.off("mousemove","mousedown"),this.off("mouseup","mousedown")}onmousemove(e){e.isDealed=!0,this.getRoot().setCursor({config:{style:Dt.Li.EWRESIZE},weight:1e3,isRecord:!1})}}var Fo=i(59712);class Ko extends zr{get lastDataTime(){return this._lastDataTime}get visibleViewHeight(){return this._visibleViewHeight}get gapWidgetsLength(){return this.filterPanels((e=>e instanceof $r)).length}get iPanels(){return this.filterPanels((e=>e instanceof Fr))}get titleContainer(){return this._titleContainer}get editor(){return this._editor}get regContetxt(){return this._regContetxt}constructor(e){super(),this._visibleViewHeight=0,this._maxTimestamp=0,this._isFirstRender=!0,this._oldDevicePixelRatio=this.devicePixelRatio,this._regContetxt={baseAsset:"",quoteAsset:""},this.setCursor=(0,_t.R4)(((e,t)=>e.isClear&&e.key===t?.key?{config:{},weight:0}:t&&t.weight>e.weight?t:e),(e=>{const{config:t,isRecord:i=!0}=e,r=this.getAttr("container"),o=this.getAttr("crossHair"),n=t.style||o.style;r&&(0,_t.AS)(r,{cursor:n}),i&&n!==o.style&&(n===Dt.Li.DEFAULT&&rr.Z.clearRect(this.getHitContext()),this.setAttr("crossHair",{...o,...t}))})),this.unSelectAnnotation=(0,_t.Ds)((()=>{const e=this.getIPanels();for(let t=0;t<e.length;t++){const i=e[t].getAnnotations();for(let e=0,t=i.length;e<t;e++)if(i[e].getAttr("isEdit"))return}this.fire("unSelectAnnotation")}),100),this.saveChart=(0,_t.Ds)((()=>{try{this.fire("saveChartNeeded",{data:this.getStoreData()})}catch(e){Fo.warn(`save annotations occured error: ${e.message}`)}})),this.config=(0,_t.PM)(Wt()(Ko.defaultConfig),{...e,indicatorHelper:Xi()}),this.initStates(),this.initContainer(),this.initPanels(),this.initEvents(),this.initialData(),this._editor=new Ho(this)}getEditor(){return this._editor}getCanvasCollection(){return[this._canvas,this._hitCanvas,this._frameCanvas,this._markCanvas,this._countdownCanvas]}getCanvas(){return this._canvas}setCanvas(e){return this._canvas=e,this}getHitCanvas(){return this._hitCanvas}setHitCanvas(e){return this._hitCanvas=e,this}getMarkCanvas(){return this._markCanvas}setMarkCanvas(e){return this._markCanvas=e,this}getCountdownCanvas(){return this._countdownCanvas}setCountdownCanvas(e){return this._countdownCanvas=e,this}getFrameCanvas(){return this._frameCanvas}setFrameCanvas(e){return this._frameCanvas=e,this}getContext(){return this._ctx||this.setContext(this._canvas.getContext("2d")),this._ctx}setContext(e){return this._ctx=e,this}getHitContext(){return this._hitCtx||this.setHitContext(this._hitCanvas.getContext("2d")),this._hitCtx}setHitContext(e){return this._hitCtx=e,this}getMarkContext(){return this._markCtx||this.setMarkContext(this._markCanvas.getContext("2d")),this._markCtx}setMarkContext(e){return this._markCtx=e,this}getCountdownContext(){return this._countdownCtx||this.setCountdownContext(this._countdownCanvas.getContext("2d")),this._countdownCtx}setCountdownContext(e){return this._countdownCtx=e,this}getFrameContext(){return this._frameCtx||this.setFrameContext(this._frameCanvas.getContext("2d")),this._frameCtx}setFrameContext(e){return this._frameCtx=e,this}getXAxis(){return this._xAxis}getTimeAxisWidget(){return this._timeAxisWidget}getMaxTimestamp(){return this._maxTimestamp}getSeriesData(){const{seriesData:e=[]}=this.getConfig();return e}getVisibleSeriesData(){return this.getAttr("visibleSeriesData")||[]}setCurrentItemByTime(e){const t=this.getCurrentItemByTime(e);t&&this.setAttr("currentItem",t)}getCurrentItemByTime(e,t){if(isNaN(e))return;const i=this.getAttr("seriesData"),r=this.getVisibleSeriesData();if(i&&i.length>0){const o=i[0].time,n=r[r.length-1];if(e<o)return{time:e,open:NaN,high:NaN,low:NaN,close:NaN,volume:NaN,change:"NaN",amplitude:"NaN"};if(n&&e>=n.time){const e=i[i.length-1],t=i[i.length-2],r=e&&t?(0,_t.gt)((e.close-t.close)/t.close):"",o=e&&t?(0,_t.gt)((e.high-e.low)/t.close):"";return{...e,change:r,amplitude:o}}const s=t||this._xAxis.getUnitTimeValue()/2,a=(0,_t.ry)(i,(t=>Math.abs(e-t.time)<s?0:e-t.time)),l=i[a],c=i[a-1],h=l&&c?(0,_t.gt)((l.close-c.close)/c.close):"",d=l&&c?(0,_t.gt)((l.high-l.low)/c.close):"";return{...l,change:h,amplitude:d}}}getIndicatorHelperByName(e){let t=this.getAttr("indicatorHelper")?.[e];return"function"==typeof t&&(t=t()),t}resize(){const e=this.getAttr("container");if(!e)return;const{width:t,height:i}=this.getConfig(),r=e.clientWidth,o=e.clientHeight;if(0!==r&&0!==o&&(this.setAttrs({width:r,height:o}),t!==r||i!==o||this._oldDevicePixelRatio!==this.devicePixelRatio)){if(this._oldDevicePixelRatio=this.devicePixelRatio,this.updateContainerSize(),!this._xAxis)return;this.setTimeAxis(!0),this.setVisibleViewHeight(),this.resizeAllPanelBound(),this.renderImmediate(It.mB.Resize)}}clearPanel(){const e=this.getContext(),t=this.getMarkContext();rr.Z.clearRect(e),rr.Z.clearRect(t)}setWidgetParent(e){e.setParent(this),e.afterSetParent()}getYExtent(){const e=this.getVisibleSeriesData().reduce(((e,t)=>(e.push(t.high,t.low),e)),[]);return[Nt()(e),Zt()(e)]}getVisibleTimeExtent(){const e=this.getVisibleSeriesData().map((e=>e.time));return[Nt()(e),Zt()(e)]}getTimeExtent(){const e=this.getSeriesData();return[e[0]?.time,e[e.length-1]?.time]}setTimeAxis(e=!1){const{margin:t,width:i}=this.getConfig(),r=i-t.left-t.right,o=this.getTimeExtent(),[,n]=o;this._maxTimestamp=n;const s=this.getSeriesData(),a=this._xAxis;if(this._xAxis=new Qi(o,[0,r],s,a?.getCurrentScaleCoeff()),this._xAxis.updateSliceTimeInterval(s),e&&a?.isValid())this.setRightTime(a.domainRange.getMaxValue());else if(this.isLoaded()&&a?.isValid()&&a.getUnitTimeValue()===this._xAxis.getUnitTimeValue()){const e=this._xAxis.getDomainInterval(),{time:t}=this._xAxis.getEasedSliceTime(a.domainRange.getMaxValue(),.5*-e);this.setTimeAxisCenter(t);const i=this.getAttr("currentItem");i&&this.setCurrentItemByTime(i.time)}else if(r>0){const e=this._xAxis.getDomainInterval(),{time:t}=this._xAxis.getEasedSliceTime(this._xAxis.domainRange.getMaxValue(),-e*(.95-.5));this.setTimeAxisCenter(t),this.setCurrentItemByTime(this._maxTimestamp)}this.setVisibleSeriesData()}setVisibleSeriesData(){const e=this._xAxis.domainRange,t=new ji(e.getMinValue(),e.getMaxValue()).sliceArray(this.getSeriesData(),(e=>e.time));this.setAttr("visibleSeriesData",t)}initContainer(){const e=this.getAttr("container");if(!e)return;const t=e.clientWidth,i=e.clientHeight;this.setAttrs({width:t,height:i});const r={position:"absolute",left:"0",top:"0",width:"100%",height:"100%"};this.setHitCanvas((0,_t.O5)(t,i,{className:"hit",style:{...r,zIndex:"1000"}})),this.setMarkCanvas((0,_t.O5)(t,i,{className:"mark",style:{...r,zIndex:"900"}})),this.setCanvas((0,_t.O5)(t,i,{className:"scene",style:{...r,zIndex:"200"}})),this.setFrameCanvas((0,_t.O5)(t,i,{className:"frame",style:{...r,zIndex:"100"}})),this.setCountdownCanvas((0,_t.O5)(t,i,{className:"countdown",style:{...r,zIndex:"905"}})),this._titleContainer=(0,_t.az)("div",{...r,height:"0",zIndex:"2000"},"kline-title-wrap"),this.addElemens([this.getCanvas(),this.getFrameCanvas(),this.getMarkCanvas(),this.getCountdownCanvas(),this.getHitCanvas(),this._titleContainer])}initPanels(){this.setVisibleViewHeight(),this.initIndicatorViews();const e=new Fr(It.wh.BASE,{id:It.A.CANDLE,indicatorType:It.A.CANDLE,isScaleCenter:!0});this._timeAxisWidget=new No;const t=this.getIndicatorPanels(e);this.addPanels([this._timeAxisWidget,e,...t]),this.initPanelBound()}initIndicatorViews(){(this.getAttr("indicators")||[]).forEach((e=>{const t=e.type,i=this.getIndicatorHelperByName(t);if(!i)return;const{defaultProps:r}=i,o=(0,_t.az)("div",{},"chart-title-row"),n={params:{},styles:{},...e,indicatorType:t,...r,visible:!0,subElement:o};this.setIndicatorView(e.type,n)}))}getIndicatorPanels(e){const t=[];let i=e;return this.indicatorViews.forEach((e=>{const{isHistBase:r}=e;if(!r){const r=new Fr(It.wh.EXT,e),o=new $r(i,r);t.push(o,r),i=r}})),t}updateContainerSize(){const e=this.getCanvasCollection(),{width:t,height:i}=this.getConfig();this.setAttrs({width:t,height:i});const r={width:`${t}px`,height:`${i}px`};e.forEach((e=>{e.width=t*this.devicePixelRatio,e.height=i*this.devicePixelRatio,(0,_t.AS)(e,r)}))}shiftTimeLine(e){const t=this.getXAxis();if(0===e||!t)return;const i=e/t.unitWidth*t.getUnitTimeValue();this.shiftTimeLineByTime(i)}shiftTimeLineByTime(e){const t=this.getXAxis(),[i,r]=this.getTimeExtent(),o=t.getDomainInterval(),n=6*t.getUnitTimeValue(),s=t.domainRange.getMinValue(),{time:a}=t.getEasedSliceTime(s,e+o),{time:l}=t.getEasedSliceTime(s,e);r<l+n&&e>0||i+n>a&&e<0||(t.shiftTime(e),this.updateTimeExtent(),this.endShiftTime(),this.update())}endShiftTime(){const[e,t]=this.getTimeExtent(),i=this.getXAxis(),r=i.domainRange,[o,n]=[r.getMinValue(),r.getMaxValue()],s={minTime:e,maxTime:t,shiftedMinTime:Math.floor(o),shiftedMaxTime:Math.floor(n),interval:i.getDomainInterval()};this.fire("afterTimeShifted",s)}zoom(e,t){if(isNaN(e)||e<=0||isNaN(t))return;const{scaleRatio:i}=this.getAttr("xAxis"),r=2**(t*i);this.zoomByCoeff(r,e)}zoomIn(e=300){this.zoomAroundRight(e)}zoomOut(e=-300){this.zoomAroundRight(e)}zoomAroundRight(e){const{scaleRatio:t}=this.getAttr("xAxis"),i=2.5**(-e*t);this.zoomByCoeff(i),this.updateCurrentItem()}zoomByCoeff(e,t){const i=this._xAxis,r=i.getCurrentScaleCoeff();void 0!==t?i.scaleAroundTimestamp(t,e):i.scaleAroundRight(e);const o=this.getTimeExtent(),n=i.domainRange,s=6*i.getUnitTimeValue(),a=i.getDomainInterval();if(n.getMinValue()>o[1]){const{time:e}=i.getEasedSliceTime(o[1],.5*-a),{time:t}=i.getEasedSliceTime(o[1],.5*a);n.setMinValue(e).setMaxValue(t)}if(o[1]<n.getMinValue()+s){const{time:e}=i.getEasedSliceTime(o[1],-s),{time:t}=i.getEasedSliceTime(o[1],a-s);n.setMinValue(e).setMaxValue(t)}if(n.getMaxValue()<o[0]){const{time:e}=i.getEasedSliceTime(o[0],-a);n.setMinValue(e).setMaxValue(o[0])}const l=i.getCurrentScaleCoeff();(0,_t.Fr)(r-l)||(this.updateTimeExtent(),this.endShiftTime(),this.update())}addOrUpdateLastData(e){const t=this.getSeriesData();if(0===t.length)return;this._checkValid(e),this.formatItem(e),this.setAttr("lastUpdateItem",{...e});const i=t[t.length-1],r=i.time;if(r<e.time){if(t.push(e),2===t.length)return void this.setAttr("seriesData",[...t]);this.updateCacheResult(t.length-1);const i=this._xAxis.getUnitTimeValue();this._xAxis.domainRange.contain(r-.5*i)&&this._xAxis.shiftTime(i),this.updateTimeExtent()}else i.time===e.time&&(Object.assign(i||{},e),t.length>=2&&this.updateCacheResult(t.length-1),this.updateYExtend());this.update();const o=this.getAttr("currentItem");if(o&&o.time===this._maxTimestamp){const i=t[t.length-2],r=i?(0,_t.gt)((o.close-i.close)/i.close):"",n=i?(0,_t.gt)((e.high-e.low)/i.close):"";this.setAttr("currentItem",{...e,change:r,amplitude:n})}const n=this._xAxis?.getUnitTimeValue();if(n&&Math.abs(e.time-r)>=2*n&&(this._xAxis.updateSliceTimeInterval(t),e.time>this._lastDataTime+n)){const i=t[t.length-2],r=e;this.fire("dispatchErrorData",{data:{type:"disConnect",payload:{prevItem:i,nextItem:r}}})}this._maxTimestamp=e.time}setTimeAxisCenter(e){const t=this.getXAxis(),i=t.getDomainInterval(),{time:r}=t.getEasedSliceTime(e,-i/2),{time:o}=t.getEasedSliceTime(e,i/2);t.domainRange.setMinValue(r).setMaxValue(o)}setRightTime(e){const t=this.getXAxis(),i=t.getDomainInterval(),{time:r}=t.getEasedSliceTime(e,-i);t.domainRange.setMinValue(r).setMaxValue(e)}executeActionByType(e){const t=this._editor.getActionByType(e);if(t)return this.clearSelectAnnotation(),this._editor.setNextAction(e),void t();const i={[It.Us.DefaultCursor]:this.setCursor.bind(this,{config:{show:!1,style:Dt.Li.DEFAULT},weight:100}),[It.Us.CrossHairCursor]:this.setCursor.bind(this,{config:{show:!0,style:Dt.Li.CROSSHAIR},weight:100}),[It.Us.ToggleVisible]:this.toggleAnnotationsVisible.bind(this),[It.Us.Delete]:this._editor.deleteAllAnnotation.bind(this._editor),[It.Us.KeepDrawing]:this._editor.keepDraw.bind(this._editor),[It.Us.LockDraw]:this.setAnnotationLockStatus.bind(this)}[e];i&&i()}updateTimeExtent(){this.setVisibleSeriesData(),this.updateYExtend()}updateYExtend(){this.eachPanels((e=>{e instanceof Fr&&e.updateYExtend()}))}closeIndicatorByName(e){const t=this.getIndicatorViewByName(e);if(!t)return;const i=this.indicatorViews.find((({isHistBase:e})=>e));if(this.deleteIndicatorViewByName(e),t.subElement?.remove(),t.isHistBase)this._removeIndicatorFromBaseView(t.id,i?.id===t.id);else{const t=this.getPanel((t=>t instanceof Fr&&t.getPanelId()===e));t&&(this._removeIndicatorView(t),this.renderImmediate(It.mB.Resize))}t.subElement?.remove(),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}addIndicatorByName(e,{params:t={},styles:i={},visible:r=!0,isTriggeredByClick:o=!1,weight:n=0}={}){const s=this.getIndicatorHelperByName(e);if(!s||this._indicatorViews.has(e)||!s.getResult)return;const{defaultProps:a}=s,l=(0,_t.az)("div",{},"chart-title-row"),c={indicatorType:e,id:e,params:this.getIndicatorParams(e)||t,styles:i,...a,visible:r,subElement:l,isTriggeredByClick:o,weight:n};this.setIndicatorView(e,c),c.isHistBase?this._addIndicatorFromBaseView(c):this._addIndicatorView(c),this.fire("selectIndicatorsChange",{data:this.getSelectIndicators()})}setIndicatorVisibleByName(e,t){if(!this._indicatorViews.has(e))return;const i=this.getIPanels();for(let r=0;r<i.length;r++){const o=i[r];if(o.hasIndicator(e))return void o.setIndicatorVisible(e,t)}}showIndicatorsDialog(){this.fire("showParamsSettingPanel",{id:""})}resetChart(){this.clearData(),this.editor.clear()}clearData(){this.clearPanel(),this.setIsLoaded(!1),this.setAttr("lastUpdateItem",null)}setSymbolInfo(e,t){(0,di.Kn)(e)?this._regContetxt={...this._regContetxt,...e}:t&&(this._regContetxt[e]=t)}appendVolIndicators(e){const t=this.getAttr("indicatorHelper"),i=(()=>{const e=Xi();return zi.reduce(((t,i)=>(t[i]=e[i],t)),{})})();zi.forEach((r=>{t[r]=i[r],e.forEach((({indicators:e=[],weight:t})=>{e.forEach((({id:e,styles:i,visible:o,isTriggeredByClick:n})=>{e===r&&this.addIndicatorByName(e,{styles:i,visible:o,isTriggeredByClick:n,weight:t})}))}))})),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}removeVolIndicators(){const e=this.getAttr("indicatorHelper");zi.forEach((t=>{delete e[t],this.closeIndicatorByName(t)})),this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}getAllIndicators(){const e=this.getAttr("indicatorHelper")||{},t=Object.keys(e),i=[],r={};for(let e=0,o=t.length;e<o;e++){const o=this.getIndicatorHelperByName(t[e]);if(o){const{defaultProps:e}=o,{id:t="",title:n,isHistBase:s,isCustom:a}=e;r[t]||(i.push({id:t,name:n,isMain:s,isCustom:!!a}),r[t]=1)}}return i}getSelectIndicators(){return this.indicatorViews.map((({id:e,indicatorType:t,isHistBase:i,isCustom:r})=>({id:e,name:t,isMain:!!i,isCustom:!!r})))}hasIndicatorByName(e){return this._indicatorViews.has(e)}updateIndicatorParams(e){const t=this.getIndicatorViewByName(e);if(t){const i={...t};i.params=this.getIndicatorParams(e),this.setIndicatorView(e,i);const{isHistBase:r}=t,o=this.getPanel((t=>t instanceof Fr&&(r?t.panelType===It.wh.BASE:t.getPanelId()===e)));o.updateParams(e,i.params,(()=>{o.save(),o.update()}))}}registerCustomIndicator(e,t={}){const i=this.getAttr("indicatorHelper");t.defaultProps.isDiffSource&&(t=(e=>{let t,i=[],r=null,o="",n="",s=[],a=!1;const l=(0,_t.Ds)(((t={})=>{c(t,!0),function(){r&&r();const t={symbol:o,interval:n},i=d(t);r=e.subscribe(t,(e=>{if(!i({symbol:o,interval:n}))return;const{length:t}=s;if(t>0){const i=s[t-1]?.time;e.time>i?s.push(e):s.splice(t-1,1,e),h()}}))}()}),100);function c(i={},r=!1){if(a)return;if(i.endTime){if(i.startTime=i.startTime||i.endTime-500*(0,Dt.Sz)(n),i.endTime=t?Math.min(t,i.endTime):i.endTime,t=Math.min(i.startTime,t),i.endTime<i.startTime)throw new Error("custom indicator fetch data occured time error");i.limit=Math.ceil((i.endTime-i.startTime)/(0,Dt.Sz)(n)+1)}const l={...i,symbol:o,interval:n},c=d(l);e.getData(l,(({data:e,isLoadAll:t})=>{c({...l,symbol:o,interval:n})&&(s=r?e:(e=>{const t={};return e.filter((({time:e})=>!t[e]&&(t[e]=1,!0))).sort(((e,t)=>e.time-t.time))})(s.concat(e)),a=t,h())}))}function h(){i.forEach((e=>{e()}))}function d(e){return t=>Yi()(e,t)}return{...e,init:(e,i,c)=>{o=e,n=i,s.length=0,t=0,a=!1,r&&r(),l(c)},getResult:function(t,i,r){e.getResult(s,{},(e=>{r(e)}))},subscribe:function(e){-1===i.indexOf(e)&&i.push(e)},unSusbcribe:function(){r&&r(),r=null,i.length=0},loadData:(e={})=>c(e)}})(t)),i[e]=t,this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}removeCustomIndicatorByName(e){const t=this.getAttr("indicatorHelper");this.hasIndicatorByName(e)&&this.closeIndicatorByName(e),delete t[e],this.fire("allIndicatorsChange",{data:this.getAllIndicators()})}registerCustomIndicatorCallback({onAdd:e,onEdit:t,onRemove:i}){e&&this.setAttr("onAddCustomIndicator",e),t&&this.setAttr("onEditCustomIndicator",t),i&&this.setAttr("onRemoveCustomIndicator",i)}getColorFromColorTable(e,t){return this.getSettingValues(e)||this._colorTable[e]||t||e}selectAnnotation(e,t){this.fire("selectAnnotation",{data:e,action:t})}getStoreData(){const e=[];return this.eachPanels((t=>{t instanceof Fr&&e.push({type:t.getAttr("indicatorType"),...t.getSavedData()})})),e}loadChart(e){this._editor.deleteAllAnnotation();const t=this.getAttr("needToReloadIndicator");t&&this._clearAllIndicators();try{if(t)for(let t=0;t<e.length;t++){const{indicators:i=[],weight:r}=e[t];for(let e=0;e<i.length;e++){const{id:t,styles:o,visible:n,isTriggeredByClick:s}=i[e]||{};t&&this.addIndicatorByName(t,{styles:o,visible:n,isTriggeredByClick:s,weight:r})}}const i=this.filterPanels((e=>e instanceof Fr));for(let t=0;t<i.length;t++){const r=i[t];if(e[t]&&r){const{annotations:i=[]}=e[t];for(let e=0,t=i.length;e<t;e++)this.editor.transformJSONToAnnotation(i[e],r)}}return this.fire("chartLoaded"),Promise.resolve({})}catch(e){return Fo.error(`basicKline loadChart occured error: ${e.message}`),Promise.reject({error:e.message})}}setAnnotationLockStatus(e){if(void 0===e){const e=this.getAttr("annotationLock");this.setAttr("annotationLock",!e)}else this.setAttr("annotationLock",e)}toggleAnnotationsVisible(){const e=this.getAttr("annotationVisible");this.setAttr("annotationVisible",!e),e&&this.editor.clearEvents(),this.update()}clearSelectAnnotation(){this.eachPanels((e=>{const t=e.getAnnotations();for(let e=0,i=t.length;e<i;e++)t[e].setAttr("isEdit",!1)}))}createOrderLine(e){return this._editor.transformJSONToAnnotation({type:It.Us.OrderLine,...e})}manageOrderLines(e){this._editor.manageOrders(e)}manageExecutionOrders(e){this._editor.manageExecutionOrders(e)}createPositionLine(e){return this._editor.transformJSONToAnnotation({type:It.Us.PositionLine,...e})}createTooltip(e){return this._editor.transformJSONToAnnotation({type:It.Us.ToolTip,...e})}getShapeById(e){return this._editor.getShapeById(e)}deleteShapeById(e){this._editor.deleteAllOrderShape((t=>t.id===e)),this._editor.deleteAllPositionShape((t=>t.id===e))}deleteAllOrderShape(){this._editor.deleteAllOrderShape()}deleteAllPositionShape(){this._editor.deleteAllPositionShape()}updateCurrentItem(){const e=this.getPanel((e=>e instanceof Fr&&e.mainPane.getAttr("isMouseover")));e&&e.mainPane.drawCrossHairByTime()}updateTitle(e){if(e){const t=this.getPanel((e=>e instanceof Fr&&e.panelType===It.wh.BASE)),i=this.getPanel((t=>t instanceof Fr&&t.getPanelId()===e))||t;i?.updateTitleLabel()}else this.getIPanels().forEach((e=>{e.updateTitleLabel()}))}goForward(){const{unitWidth:e}=this._xAxis;this.shiftTimeLine(-e);const t=this.getAttr("currentItem");if(t){const e=this._xAxis.getUnitTimeValue();this.setCurrentItemByTime(t.time-e),this.updateCurrentItem()}}goNext(){const{unitWidth:e}=this._xAxis;this.shiftTimeLine(e);const t=this.getAttr("currentItem");if(t){const e=this._xAxis.getUnitTimeValue();this.setCurrentItemByTime(t.time+e),this.updateCurrentItem()}}getCloseItemByTime(e){const t=this._xAxis.getUnitTimeValue()/2,i=this.getAttr("seriesData")||[];return i[(0,_t.ry)(i,(i=>Math.abs(e-i.time)<t?0:e-i.time))]}goDate(e,t){const[i,r]=this.getTimeExtent(),o=e=>{const t=this.getCloseItemByTime(e);if(t){const e=t.time===i?this.getI18n("last-available-bar","Last available bar"):"";this.setTimeAxisCenter(t.time),this.updateTimeExtent(),this.createTooltip({data:t.time,text:e}),this.update()}};if(e>=i)o(e),t?.();else{const n=this.getXAxis(),s=n.domainRange,a=n.getDomainInterval(),{time:l}=n.getEasedSliceTime(e,-a/2),[,c]=[s.getMinValue(),s.getMaxValue()],h={minTime:i,maxTime:r,shiftedMinTime:Math.floor(l),shiftedMaxTime:Math.floor(c),interval:n.getDomainInterval(),cb:()=>{o(e),t?.()}};this.fire("afterTimeShifted",h)}}_clearAllIndicators(){this._indicatorViews.forEach(((e,t)=>{this.closeIndicatorByName(t)}))}_addIndicatorFromBaseView(e){const t=this.getPanel((e=>e instanceof Fr&&e.panelType===It.wh.BASE));t&&this.isLoaded()&&(t.updateChartData(0,(()=>{t.setYAxis(),t.updateTitleLabel(),t.update(It.mB.Resize)})),(0,di.hj)(e.weight)&&e.weight>0&&t.weight!==e.weight&&(t.updateWeight(e.weight),this.updatePanelBound()),t.save())}_checkValid(e){const t=["time","open","high","low","close","volume","quantity"];for(let i=0;i<t.length;i++)isNaN(parseFloat(e[t[i]]))&&this.fire("dispatchErrorData",{data:{type:"invalidData",payload:{data:e}}})}_addIndicatorView(e){let t;for(let e=this.panels.length-1;e>=0;e--){const i=this.panels[e];if(i instanceof Fr){t=i;break}}const i=new Fr(It.wh.EXT,e),r=new $r(t,i);this.addPanels([r,i]),i.save(),this.isLoaded()&&(this.updatePanelBound(),i.updateChartData(0,(()=>{i.setYAxis(),i.updateTitleLabel(),this.renderImmediate(It.mB.Resize)})))}_removeIndicatorFromBaseView(e,t){const i=this.getPanel((e=>e instanceof Fr&&e.panelType===It.wh.BASE)),r=this.indicatorViews.find((({isHistBase:e})=>e)),o=r?.subElement;i&&(i.setYAxis(),t&&o&&i.addFoldIcon(o,"main-indicators-fold"),i.removeIndicator(e),i.save(),i.update())}_removeIndicatorView(e){let t,i;const r=new Set([e]),o=this.filterPanels((e=>e instanceof $r));for(let r=0;r<o.length;r++){const n=o[r];n.nextPanel===e&&(t=n),n.frontPanel===e&&(i=n)}i?(r.add(i),t.nextPanel=i.nextPanel):r.add(t),e.save(),this.removePanels(r),this.updatePanelBound()}updateCacheResult(e){this.eachPanels((t=>{t instanceof Fr&&!t.isDiffPanel&&t.updateChartData(e,(()=>{t.setYAxis(),t.updateTitleLabel(),t.update()}))}))}setVisibleViewHeight(){const{margin:e,xAxis:t,height:i}=this.getConfig();this._visibleViewHeight=i-e.top-e.bottom-t.height}getYAxisWidth(e){let t=1,i=0;const{tickSize:r}=this.getAttr("candlestick");for(let o=0;o<e.length;o++){const{open:n,high:s,low:a,close:l}=e[o],c=[n,s,a,l].reduce((({strLen:e,precision:t},i)=>{const o=(0,di.hj)(r)?i.toFixed(r):`${(0,_t.Hf)(i)}`,n=`${o}`.split("."),s=n[1]?n[1].length:0;return t=Math.max(t,s),{strLen:e=Math.max(e,`${o}`.length),precision:t}}),{strLen:1,precision:0});t=Math.max(t,c.strLen),i=Math.max(i,c.precision)}i=(0,di.hj)(r)?Math.max(r,0):Math.max(i,0),this.setAttr("precision",i);const o="a".repeat(t+2);return rr.Z.measureTextWidth(o)}initialData(){const e=this.isLoaded(),t=this.getSeriesData();t.length<=0||(this.setYAxisWidth(t),this.setTimeAxis(),this.updateCacheResult(),this.initPanelYAxis(),this.setIsLoaded(!0),!e&&this.fire("chartReady"),this._isFirstRender=!1,this._lastDataTime=t[t.length-1].time)}setYAxisWidth(e){const{width:t=5,textMargin:i=5}=this.getAttr("tick"),r=this.getYAxisWidth(e)+t+i,o=this.getAttr("margin"),n=o.right;o.right=Math.max(30,r),this.setVisibleViewHeight();const s=this._isFirstRender?It.Vt.All:n!==r&&It.Vt.Width;s&&this.initPanelBound(s)}setThemeColorTable(e){this._colorTable=this.getColorTableByTheme(e)}initStates(){const e=this.getAttr("theme");this.setThemeColorTable(e)}initEvents(){this.watch("candlestick",(({newVal:e,oldVal:t})=>{Bt()(e,t)||this.initialData()})),this.watch("seriesData",(()=>{this.initialData()})),this.watch("nextData",(({newVal:e=[]})=>{e.forEach(this.addOrUpdateLastData.bind(this))})),this.watch("currentItem",(0,_t.P2)((()=>{this.updateTitle()}),0)),this.watch("theme",(({newVal:e})=>{this.setThemeColorTable(e)}));const e=this.getHitCanvas();e&&Dt.X8.forEach((t=>{So.on(e,t,this.eventHandler.bind(this,t),!0)}));const t=this.getAttr("container");t&&So.on(t,"mouseout",(e=>{const{originEvent:i}=e,r=i.target;t.contains(r)||this.setCurrentItemByTime(this._maxTimestamp)}));const i=this.getAttr("container");i&&(0,_t.Xp)(i,(()=>{this.resize()}))}eventHandler(e,t){if(!this._xAxis)return;const i={click:this.onclick,dblclick:this.ondblclick,mousedown:this.onmousedown,mousemove:this.onmousemove,wheel:this.onmousewheel,mouseup:this.onmouseup,mouseout:this.onmouseout,gesturestart:this.ongesturestart,gesturechange:this.ongesturechange,gestureend:this.ongestureend,contextmenu:this.oncontextmenu},{originEvent:r}=t;void 0!==t.clientX&&void 0!==t.clientY&&(t.point=(0,_t.CN)({...t,target:r.target})),i[e]&&(t.isDealed=!1,i[e].call(this,t))}onclick(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i instanceof Tr&&i.eachAnnotations(t),i.fire("click",e))};this.eachPanels(t),this.fire("click",e)}ondblclick(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i instanceof Tr&&i.eachAnnotations(t),i.fire("dblclick",e))};this.eachPanels(t)}onmousedown(e){const t=i=>{const r=i.contain(e.point);r&&(i instanceof Fr&&i.eachWidgets(t),i instanceof Tr&&i.eachAnnotations(t),i.fire("mousedown",e)),i.setAttr("isMousedown",r)};this.eachPanels(t),this.fire("mousedown",e)}onmousemove(e){let t=!1;const i=r=>{r instanceof Fr&&r.eachWidgets(i),r instanceof Tr&&r.eachAnnotations(i);const o=r.getAttr("isMouseover"),n=r.contain(e.point);n&&r.fire("mousemove",e),!t&&n?(t=r instanceof Tr||r instanceof Fr,!o&&r.fire("mouseover",e),r.setAttr("isMouseover",!0)):o&&(r.fire("mouseout",e),r.setAttr("isMouseover",!1))};this.eachPanels(i,!0),this.fire("mousemove",e)}onmouseup(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i instanceof Tr&&i.eachAnnotations(t),i.fire("mouseup",e))};this.eachPanels(t),this.fire("mouseup",e)}onmouseout(){const e=t=>{t instanceof Fr&&t.eachWidgets(e),t.getAttr("isMouseover")&&(t.fire("mouseout"),t.setAttr("isMouseover",!1))};this.eachPanels(e),this.setCurrentItemByTime(this._maxTimestamp)}onmousewheel(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i.fire("mousewheel",e))};this.eachPanels(t),this.fire("mousewheel",e)}ongesturestart(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i.fire("gesturestart",e))};this.eachPanels(t),this.fire("gesturestart",e)}ongesturechange(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i.fire("gesturechange",e))};this.eachPanels(t),this.fire("gesturechange",e)}ongestureend(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i.fire("gestureend",e))};this.eachPanels(t),this.fire("gestureend",e)}oncontextmenu(e){const t=i=>{i.contain(e.point)&&(i instanceof Fr&&i.eachWidgets(t),i instanceof Tr&&i.eachAnnotations(t),i.fire("contextmenu",e))};this.eachPanels(t),this.fire("contextmenu",e),e.originEvent.preventDefault()}formatItem(e){["time","open","high","low","close","volume","quantity"].forEach((t=>{e[t]=parseFloat(e[t])}))}}Ko.defaultConfig={...sr.Z.defaultConfig,...Zo,precision:2,margin:{left:0,top:0,right:30,bottom:0},tick:{width:5,textMargin:2},width:0,height:0,symbol:"",interval:"",indicators:[],lastUpdateItem:null,annotationVisible:!0,annotationLock:!1,onAddCustomIndicator:()=>!1,onEditCustomIndicator:()=>!1,onRemoveCustomIndicator:()=>!1,needToReloadIndicator:!0,isHiddenLogo:!1,needToHiddenAnnotationTool:!0};const Uo=Ko;var $o=i(2479),zo=i(82669);It.E.White,It.E.Dark2,It.E.Dark4,It.E.Dark2,It.E.White,It.E.GrayE,It.E.Gray200,It.E.YellowF,It.E.Gray50,It.E.Gray800,It.E.White,It.E.Gray8,It.E.White,It.E.Gray800,It.E.Dark2,It.E.Gray500,It.E.YellowF,It.E.Gray600;const Xo=(e,t)=>{if(!e.startsWith("#"))return e;const i=e.replace("#","");return`rgba(${parseInt(i.substring(0,2),16)},${parseInt(i.substring(2,4),16)},${parseInt(i.substring(4,6),16)},${t})`},Go=e=>({background:e.colors.moduleBg,"candle.upBarColor":e.colors.buy,"candle.downBarColor":e.colors.sell,"volume.upBarColor":Xo(e.colors.buy,.5),"volume.downBarColor":Xo(e.colors.sell,.5),"volume.upTextColor":e.colors.t.buy,"volume.downTextColor":e.colors.t.sell,"cross.upLabelBgColor":e.colors.buy,"cross.upLabelBorderColor":e.colors.buy,"cross.downLabelBgColor":e.colors.sell,"cross.downLabelBorderColor":e.colors.sell,"cross.defaultLabelTextColor":e.colors.t.primary,"cross.defaultLabelBgColor":e.colors.bg3,"cross.defaultLabelBorderColor":e.colors.bg3,"cross.borderLineColor":e.colors.t.third,"frame.borderLineColor":e.colors.overallBg,"vertGridLine.color":Xo(e.colors.newLine,.5),"horzGridLine.color":Xo(e.colors.newLine,.5),"countdown.upTextColor":e.colors.t.white,"countdown.upBgColor":e.colors.buyHover,"countdown.upBorderColor":e.colors.buyHover,"countdown.downTextColor":e.colors.t.white,"countdown.downBgColor":e.colors.sellHover,"countdown.downBorderColor":e.colors.sellHover,"LSratio.outline":e.colors.buy,"LSratio.area":Xo(e.colors.buy,.2),"oi.bar":Xo(e.colors.buy,.5),"BS.buy":Xo(e.colors.buy,.65),"BS.sell":Xo(e.colors.sell,.65),"basis.area":Xo(e.colors.sell,.2)});var Yo=i(43559);const jo=(e,t)=>{const i=(0,g.useRef)(1),r=(0,g.useRef)(t);Mt()(r.current,t)||(i.current*=-1),(0,g.useLayoutEffect)(e,[i.current])},qo=e=>g.createElement(J.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},g.createElement("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM6.883 12.705a.998.998 0 011.412-1.41l2.115 2.115 4.833-4.833a1.003 1.003 0 011.419 1.42l-5.544 5.536a1 1 0 01-1.415-.001l-2.82-2.827z",clipRule:"evenodd"})),Qo=g.createContext({hotUpdateTrigger:!1,getI18n:()=>"",updateValue:()=>null,reset:()=>null,closeDialog:()=>null}),Jo=({toggled:e,...t})=>g.createElement(m.Z,{...t,sx:{width:"100%",fontSize:"sm",px:"sm",py:"10px",cursor:"pointer",alignItems:"center",justifyContent:"space-between",borderLeftWidth:"2px",borderLeftStyle:"solid",borderLeftColor:e?"primary":"transparent",color:e?"t.primary":"t.third","&:hover":{bg:"bg3"}}},t.children),en=({title:e,options:t})=>g.createElement(m.Z,{sx:{flexDirection:"column",width:"100%"}},e,t.map((({value:e,children:t})=>g.createElement(g.Fragment,{key:`${e}`},t)))),tn=({options:e,children:t})=>g.createElement(L.Z,{sx:{display:"grid",gridTemplateColumns:"156px auto",gridTemplateRows:"auto"}},g.createElement(L.Z,{sx:{paddingTop:"15px",borderRight:e=>`1px solid ${e.colors.line}`}},g.createElement(en,{options:e})),t);var rn=i(99210);const on=({header:e,children:t,onClose:i,...r})=>g.createElement(Ye.ZP.Modal,{...r,sx:{px:0,width:["auto","640px"],height:["100vh","560px"],pt:"var(--safe-area-inset-top)",...r.sx}},g.createElement(L.Z,{sx:{bg:"modalBg",display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"min-content auto",borderRadius:"6px",height:"100%"}},g.createElement(m.Z,{sx:{justifyContent:"space-between",paddingTop:"20px",px:"25px",lineHeight:"1em",borderBottom:e=>`1px solid ${e.colors.line}`}},e,g.createElement(rn.Z,{size:24,color:"t.third",sx:{"&:hover":{color:"primary",cursor:"pointer"}},onClick:i})),t));var nn=i(21316);const sn=({colorPickerProps:e,...t})=>g.createElement(P.ZP,{enablePortal:!0,trigger:"click",placement:"bottom",overlay:g.createElement(nn.Z,{...e}),overlayProps:{sx:{mt:"minor",zIndex:1e4}},sx:{height:"100%",cursor:"pointer"},...t},g.createElement(L.Z,{sx:{width:"32px",height:"32px",borderRadius:"4px",borderWidth:"1px",borderStyle:"solid",borderColor:"t.third",backgroundImage:`url(${Lr(pr.Je)})`}},g.createElement(L.Z,{height:"100%",bg:e.color,sx:{borderRadius:"4px"}})));var an=i(35795),ln=i(25745);const cn=e=>g.createElement(J.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},g.createElement("path",{d:"M16.5 15.51v-2.25L12 8.49l-4.5 4.77v2.25h9z",fill:"currentColor"}));var hn=i(57546);const dn=({value:e,options:t,onValueChange:i,...r})=>{const[o,{width:n}]=(0,an.Z)(),s=(0,g.useRef)(null),a=(0,g.useRef)(null),[l,c]=(0,g.useState)(!1),h=t.map((({value:t,children:r})=>g.createElement(m.Z,{key:`${t}`,onClick:()=>i(t),sx:{width:"100%",height:"100%",minHeight:"40px",py:"s",px:"sm",bg:"bg3",color:t===e?"t.yellow":"t.primary",textTransform:"capitalize",fontSize:"sm",cursor:"pointer",alignItems:"center",":hover":{bg:"line"},":first-of-type":{borderTopLeftRadius:"default",borderTopRightRadius:"default"},":last-of-type":{borderBottomLeftRadius:"default",borderBottomRightRadius:"default"}}},r))),{children:d}=t.find((t=>t.value===e))||{},u=l?cn:hn.Z;return(0,ln.Z)(a,(e=>{s.current?.contains(e.target)||c(!1)})),g.createElement(P.ZP,{...r,ref:o,enablePortal:!0,open:l,onClick:()=>c((e=>!e)),overlay:g.createElement(L.Z,{ref:a,sx:{minWidth:n}},h),overlayProps:{sx:{zIndex:1e5}}},g.createElement(m.Z,{ref:s,sx:{bg:"bg3",width:"100%",height:"100%",alignItems:"center",cursor:"pointer",color:r.disabled?"t.disabled":"t.primary",textTransform:"capitalize",fontSize:"sm",borderRadius:"default",p:"xs"}},g.createElement(L.Z,{sx:{flex:"1"}},d),g.createElement(u,{size:16,sx:{color:"t.third"}})))},un=({children:e,wrapWithLabel:t=!0,...i})=>t?g.createElement(v.Z,null,g.createElement(ce.Z,{...i}),e):g.createElement(m.Z,null,g.createElement(v.Z,{sx:{width:"auto"}},g.createElement(ce.Z,{...i})),e);var gn=i(73969);const mn=({title:e,description:t,children:i,footer:r,headerHeight:o="66px",showBack:n,onBack:s=(()=>null)})=>g.createElement(L.Z,{sx:{display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"auto min-content",maxHeight:`calc(100vh - ${o})`,width:"100%",overflow:"hidden"}},g.createElement(L.Z,{sx:{overflow:"hidden"}},g.createElement(L.Z,{sx:{display:"grid",px:"25px",py:"20px",gap:"20px",gridAutoFlow:"row",gridAutoRows:"min-content",height:"100%",overflow:"auto"}},g.createElement(m.Z,{sx:{flexDirection:"row",alignItems:"center"}},n&&g.createElement(gn.Z,{size:15,color:"t.third",onClick:s,sx:{mr:"10px",cursor:"pointer"}}),g.createElement(b.Z,{sx:{fontSize:"md",lineHeight:"24px",color:"t.primary"}},e)),t?g.createElement(b.Z,{sx:{fontSize:"sm",lineHeight:"20px",color:"t.third"}},t):null,i)),g.createElement(L.Z,{sx:{p:"25px"}},r)),pn=({resetField:e,saveField:t})=>g.createElement(L.Z,{sx:{display:"grid",gap:"10px",justifyContent:["center","end"],gridAutoColumns:["1fr","auto"],gridAutoFlow:"column"}},g.createElement(A.Z,{sz:"normal",variant:"default",colorStyle:"secondary",sx:{width:["100%","128px"]},...e}),g.createElement(A.Z,{sz:"normal",variant:"default",sx:{width:["100%","128px"]},...t})),yn=({fields:e,wrapperProps:t={},headProps:i={},bodyProps:r={}})=>g.createElement(L.Z,{...t,sx:{display:"grid",gridTemplateColumns:"1fr 1fr",rowGap:"20px",columnGap:"10px",...t?.sx}},e.map((({head:e,children:t},o)=>[g.createElement(m.Z,{key:`head-${o}`,...i,sx:{display:"grid",gridAutoRows:"30px",alignItems:"center",...i?.sx}},e),g.createElement(L.Z,{key:`children-${o}`,...r,sx:{display:["grid","flex"],gap:["10px","20px"],gridTemplateColumns:"1fr 1fr",gridAutoRows:"30px",...r?.sx}},t)]))),xn=({title:e,colorLabel:t,resetField:i,saveField:r,colorField:o,vertGridLinesField:n,vertGridLinesWidthField:s,vertGridLinesColorField:a,horzGridLinesField:l,horzGridLinesWidthField:c,horzGridLinesColorField:h})=>{const d=[{head:g.createElement(b.Z,{sx:{fontSize:"sm",color:"t.primary"}},t),children:g.createElement(sn,{colorPickerProps:o})},{head:g.createElement(un,{...n}),children:[g.createElement(dn,{key:"1",...s}),g.createElement(sn,{key:"2",colorPickerProps:a})]},{head:g.createElement(un,{...l}),children:[g.createElement(dn,{key:"1",...c}),g.createElement(sn,{key:"2",colorPickerProps:h})]}];return g.createElement(mn,{title:e,footer:g.createElement(pn,{resetField:i,saveField:r})},g.createElement(yn,{fields:d}))};var fn;!function(e){e.CandleBar="CANDLEBAR",e.HollowCandleBar="HOLLOW_CANDLEBAR"}(fn||(fn={}));const Cn=Object.values(tr),bn=Object.values(ir),wn=["0.5","1","2","3"],vn=wn.map((e=>({value:e,children:g.createElement(L.Z,{sx:{bg:"t.third",width:"100%",height:`${Math.ceil(+e)}px`}})}))),Ln=[{value:Ji.High,i18nKey:"indicator-high-label"},{value:Ji.Low,i18nKey:"indicator-low-label"},{value:Ji.Open,i18nKey:"indicator-open-label"},{value:Ji.Close,i18nKey:"indicator-close-label"}],Sn=e=>Ln.map((({value:t,i18nKey:i})=>({value:t,children:e(i,(0,_t.kC)(t))}))),En=[{value:fn.CandleBar,defaultText:"Solid",i18nKey:"chartSetting-solid"},{value:fn.HollowCandleBar,defaultText:"Hollow",i18nKey:"chartSetting-hollow"}],kn=e=>En.map((({value:t,defaultText:i,i18nKey:r})=>({value:t,children:e(r,i)}))),Vn=[{value:er.Hollow,defaultText:"Hollow",i18nKey:"chartSetting-hollow"},{value:er.Solid,defaultText:"Solid",i18nKey:"chartSetting-solid"}],An=({settingManager:e})=>{const{getI18n:t,updateValue:i,reset:r,closeDialog:o}=(0,g.useContext)(Qo),n=e.getBackgroundDescription(),s=(0,g.useCallback)((()=>r("@background")),[r]),a=(0,g.useCallback)((e=>i(n.colorKey,e,n.pristineKey)),[i,n.colorKey]),l=(0,g.useCallback)((e=>i(n.vertGridLineShowKey,!!e.currentTarget.checked,n.pristineKey)),[i,n.vertGridLineShowKey]),c=(0,g.useCallback)((e=>i(n.vertGridLineLineWidthKey,e,n.pristineKey)),[i,n.vertGridLineLineWidthKey]),h=(0,g.useCallback)((e=>i(n.vertGridLineColorKey,e,n.pristineKey)),[i,n.vertGridLineColorKey]),d=(0,g.useCallback)((e=>i(n.horzGridLineShowKey,!!e.currentTarget.checked,n.pristineKey)),[i,n.horzGridLineShowKey]),u=(0,g.useCallback)((e=>i(n.horzGridLineLineWidthKey,e,n.pristineKey)),[i,n.horzGridLineLineWidthKey]),m=(0,g.useCallback)((e=>i(n.horzGridLineColorKey,e,n.pristineKey)),[i,n.horzGridLineColorKey]);return g.createElement(xn,{title:t("chartSetting-background","Background"),colorLabel:t("chartSetting-color","Color"),resetField:{children:t("chartSetting-reset","Reset"),onClick:s},saveField:{children:t("chartSetting-save","Save"),onClick:o},colorField:{color:n.color,onChange:a,getI18n:t},vertGridLinesField:{checked:n.vertGridLineShow,onChange:l,children:g.createElement(b.Z,{variant:"formLabel"},t("chartSetting-vertGridLines","Vert Grid Lines"))},vertGridLinesWidthField:{value:n.vertGridLineLineWidth,options:vn,onValueChange:c,sx:{width:"100px"}},vertGridLinesColorField:{color:n.vertGridLineColor,onChange:h,getI18n:t},horzGridLinesField:{checked:n.horzGridLineShow,onChange:d,children:g.createElement(b.Z,{variant:"formLabel"},t("chartSetting-horzGridLines","Horz Grid Lines"))},horzGridLinesWidthField:{value:n.horzGridLineLineWidth,options:vn,onValueChange:u,sx:{width:"100px"}},horzGridLinesColorField:{color:n.horzGridLineColor,onChange:m,getI18n:t}})},Tn=({title:e,candlestickStyleLabel:t,candlestickColorLabel:i,candlestickBorderLabel:r,candlestickWickLabel:o,resetField:n,saveField:s,candletsickStyleField:a,candlestickUpColorField:l,candlestickDownColorField:c,candlestickBorderUpColorField:h,candlestickBorderDownColorField:d,candlestickWickUpColorField:u,candlestickWickDownColorField:m})=>{const p=[{head:g.createElement(b.Z,{sx:{fontSize:"sm",color:"t.primary"}},t),children:g.createElement(dn,{...a})},{head:g.createElement(b.Z,{sx:{fontSize:"sm",color:"t.primary"}},i),children:[g.createElement(sn,{key:"1",colorPickerProps:l}),g.createElement(sn,{key:"2",colorPickerProps:c})]},{head:g.createElement(b.Z,{sx:{fontSize:"sm",color:"t.primary"}},r),children:[g.createElement(sn,{key:"1",colorPickerProps:h}),g.createElement(sn,{key:"2",colorPickerProps:d})]},{head:g.createElement(b.Z,{sx:{fontSize:"sm",color:"t.primary"}},o),children:[g.createElement(sn,{key:"1",colorPickerProps:u}),g.createElement(sn,{key:"2",colorPickerProps:m})]}];return g.createElement(mn,{title:e,footer:g.createElement(pn,{resetField:n,saveField:s})},g.createElement(yn,{fields:p}))},Mn=({settingManager:e})=>{const{getI18n:t,reset:i,updateValue:r,closeDialog:o}=(0,g.useContext)(Qo),n=e.getSymbolDescription(),s=(0,g.useCallback)((()=>i("@symbol")),[i]),a=(0,g.useCallback)((e=>r(n.styleKey,e,n.pristineKey)),[r,n.styleKey]),l=(0,g.useCallback)((e=>r(n.upColorKey,e,n.pristineKey)),[r,n.upColorKey]),c=(0,g.useCallback)((e=>r(n.downColorKey,e,n.pristineKey)),[r,n.downColorKey]),h=(0,g.useCallback)((e=>r(n.upBorderColorKey,e,n.pristineKey)),[r,n.upBorderColorKey]),d=(0,g.useCallback)((e=>r(n.downBorderColorKey,e,n.pristineKey)),[r,n.downBorderColorKey]),u=(0,g.useCallback)((e=>r(n.upWickColorKey,e,n.pristineKey)),[r,n.upWickColorKey]),m=(0,g.useCallback)((e=>r(n.downWickColorKey,e,n.pristineKey)),[r,n.downWickColorKey]);return g.createElement(Tn,{title:t("chartSetting-symbol","Symbol"),candlestickStyleLabel:t("chartSetting-candlestick-style","Bullish Candle Stick"),candlestickColorLabel:t("chartSetting-candlestick","Candle Stick"),candlestickBorderLabel:t("chartSetting-candlestick-borders","Borders"),candlestickWickLabel:t("chartSetting-candlestick-wick","Wick"),resetField:{children:t("chartSetting-reset","Reset"),onClick:s},saveField:{children:t("chartSetting-save","Save"),onClick:o},candletsickStyleField:{value:n.style,options:kn(t),onValueChange:a,sx:{width:"100px"}},candlestickUpColorField:{color:n.upColor,onChange:l,getI18n:t},candlestickDownColorField:{color:n.downColor,onChange:c,getI18n:t},candlestickBorderUpColorField:{color:n.upBorderColor,onChange:h,getI18n:t},candlestickBorderDownColorField:{color:n.downBorderColor,onChange:d,getI18n:t},candlestickWickUpColorField:{color:n.upWickColor,onChange:u,getI18n:t},candlestickWickDownColorField:{color:n.downWickColor,onChange:m,getI18n:t}})},Dn=["symbol","background"],In=({visible:e,setVisible:t,getI18n:i,settingManager:r,candlestickInstance:o,forceUpdate:n,onSettingChanged:s,onSettingReseted:a})=>{const[l,c]=(0,g.useState)(!1),h=(0,g.useCallback)((()=>c((e=>!e))),[c]),d=(0,g.useCallback)(((e,t,i)=>{r.setValue(e,t),i&&r.setValue(i,!1),o?.update(),s(e,t),h(),n()}),[r,h,n]),u=(0,g.useCallback)((e=>{const t=r.getDefaultValue(e);r.setValues({[e]:t}),o?.update(),a(e),h(),n()}),[r,h,n]),m=(0,g.useCallback)((()=>t(!1)),[t]),[p,y]=(0,g.useState)(Dn[0]),x=(0,g.useMemo)((()=>[{value:Dn[0],children:g.createElement(Jo,{toggled:p===Dn[0],onClick:()=>y(Dn[0])},i("chartSetting-symbol","Symbol"))},{value:Dn[1],children:g.createElement(Jo,{toggled:p===Dn[1],onClick:()=>y(Dn[1])},i("chartSetting-background","Background"))}]),[i,p]),f=(0,g.useMemo)((()=>{switch(p){case Dn[0]:return g.createElement(Mn,{settingManager:r});case Dn[1]:return g.createElement(An,{settingManager:r});default:return null}}),[p]);return g.createElement(Qo.Provider,{value:{getI18n:i,updateValue:d,reset:u,closeDialog:m,hotUpdateTrigger:l}},g.createElement(on,{header:g.createElement(b.Z,{sx:{color:"t.primary",fontSize:"20px"}},i("chartSetting-title","Chart Setting")),visible:e,onClose:m},g.createElement(tn,{options:x},f)))};var _n=i(88927),Pn=i(17871),Wn=i(6901),Rn=i.n(Wn),Bn=i(87608),Hn=i.n(Bn),Zn=i(56863),On=i(76899),Nn=i(69625),Fn=i(15383),Kn=i(20083),Un=i(45156),$n=i(61163),zn=i(99051),Xn=i(87772),Gn=i(81672);const Yn=(0,g.forwardRef)(((e,t)=>{const{containerSx:i,locale:r,dropdownClassName:o,direction:n="ltr",allowClear:s=!0,...a}=e,l=(e=>{const t={};if("value"in e&&/^\d+$/.test(`${e.value}`)){const i=Rn()(+e.value);""+ +i==`${e.value}`&&(t.value=i)}return t})(e),c=(0,Fn.Fg)(),h=(0,zn.N)(c),[d,u]=(0,g.useState)(!1),m=(0,Xn.bU)(r),p=Hn()(o,"single-picker"),y={generateConfig:On.Z};return g.createElement(L.Z,{sx:i,__css:{display:"inline-flex",width:"184px",height:"32px",border:`1px solid ${d?c.colors.primary:c.colors.line}`,borderRadius:"small",".rc-picker .rc-picker-input > input":{pl:"xs",py:"0px",outline:"none",border:"none",color:"t.primary",bg:"inherit",fontSize:"sm","&::placeholder":{color:"t.placeholder"}},".rc-picker":{width:"100%",paddingRight:"xs",".rc-picker-input":{justifyContent:"space-between"},"&:hover":{".rc-picker-clear":{opacity:1}}},".rc-picker-clear":{position:"absolute",display:"flex",alignItems:"center",right:0,top:"50%",transform:"translateY(-50%)",color:"t.third",opacity:0,transition:".3s opacity linear",cursor:"pointer"},".rc-picker-suffix":{display:"flex",alignItems:"center",color:"t.third"}}},g.createElement(Zn.Z,{dropdownClassName:p,ref:t,...y,locale:m.content,"data-bn-type":"picker",placeholder:"YYYY-MM-DD",allowClear:s,open:d,direction:n,onOpenChange:e=>{u(e)},clearIcon:g.createElement(Kn.Z,{size:16}),suffixIcon:g.createElement(Un.Z,{size:16}),...Gn.m[n],...a,...l}),g.createElement(Nn.xB,{styles:Nn.iv`
          ${$n.Z}
        `}),g.createElement(Nn.xB,{styles:h}))}));Yn.displayName="Picker";const jn=Yn,qn={width:"100%",".rc-picker .rc-picker-input > input":{cursor:"not-allowed",color:"t.disabled",borderColor:"line"},"> .bn-picker-input-suffix > svg":{color:"t.disabled"}},Qn={width:"100%",".rc-picker .rc-picker-input > input":{cursor:"pointer"}},Jn=({visible:e=!0,querying:t=!1,getI18n:i=(e=>e),onClose:r,onDateChange:o})=>{const n=(0,g.useRef)(Date.now()),[s,a]=(0,g.useState)(!1),l=(0,g.useMemo)((()=>t?qn:Qn),[t]),c=(0,g.useMemo)((()=>i("go-to-date-querying","Querying...")||""),[i]),h=(0,g.useCallback)((e=>{o?.(e.valueOf()),a(!1)}),[o]);return(0,g.useLayoutEffect)((()=>{t||setTimeout((()=>{a(!0)}),500)}),[]),g.createElement(_n.Z,{visible:e,sx:{width:"552px",borderRadius:"6px",overflow:"hidden"}},g.createElement(m.Z,{sx:{bg:"modalBg",height:"100%",p:"md",flexDirection:"column"}},g.createElement(m.Z,{sx:{justifyContent:"space-between",mb:"22px"}},g.createElement(b.Z,{sx:{color:"t.primary",fontSize:"20px"}},i("contextMenu-goDate","Go to date")),g.createElement(Pn.Z,{size:16,color:"t.third",sx:{cursor:"pointer",":hover":{color:"t.primary"}},onClick:r})),g.createElement(b.Z,{sx:{color:"t.yellow",fontSize:"12px",lineHeight:"16px",mb:"6px",whiteSpace:"no-wrap"}},t?c:g.createElement("span",null,"")),g.createElement(jn,{dropdownAlign:{overflow:{alwaysByViewport:!1}},showTime:!0,mVisible:!0,allowClear:!1,containerSx:l,onChange:h,open:s,defaultValue:Rn()(),disabled:!s,disabledDate:e=>e.valueOf()>n.current})))},es="goDate",ts="countDown",is="setting",rs="priceLine",os=[{id:es,label:"Go to Date",i18nKey:"contextMenu-goDate",needShowActiveIcon:!1},{id:ts,label:"Count Down",i18nKey:"contextMenu-countdown",needShowActiveIcon:!0},{id:rs,label:"Market Price Line",i18nKey:"contextMenu-priceLine",needShowActiveIcon:!0},{id:is,label:"Setting",i18nKey:"contextMenu-setting"}],ns={cursor:"pointer",px:"xs",justifyContent:"space-between",lineHeight:"40px",fontSize:"xs",alignItems:"center","&:hover":{bg:"search.hoverBg"}},ss=({id:e,label:t,isActive:i=!1,isShowSelectIcon:r=!1,onClick:o})=>g.createElement(m.Z,{onClick:()=>o(e),color:"t.primary",sx:ns},t,r&&i&&g.createElement(qo,{size:16,ml:"sm",color:"primary"})),as={position:"absolute",borderRadius:"4px",py:"minor",zIndex:9999},ls=({visible:e,candlestickInstance:t,left:i,top:r,close:o,getI18n:n,settingManager:s,forceUpdate:a,onSettingChanged:l,onSettingReseted:c})=>{const h=(0,g.useRef)(),[d,u]=(0,g.useState)(!1),[m,p]=(0,g.useState)(!1),[y,x]=(0,g.useState)(!1),[f,C]=(0,g.useState)({}),b=(0,g.useCallback)(((e,t)=>{C((i=>({...i,[e]:t})))}),[]);(0,g.useEffect)((()=>{if(!s.isLoaded())return;const e=s.getValue("@contextMenu.countDown")||s.getDefaultValue("@contextMenu.countDown"),t=s.getValue("@contextMenu.priceLine")||s.getDefaultValue("@contextMenu.priceLine");b(ts,e),b(rs,t)}),[s.isLoaded()]);const w=(0,g.useCallback)((e=>{switch(e){case es:u(!0);break;case is:p(!0);break;case ts:{const e=t?.getSettingValues("@contextMenu.countDown");b(ts,!e),t?.setSettingValues("@contextMenu.countDown",!e),t?.update(),o();break}case rs:{const e=t?.getSettingValues("@contextMenu.priceLine");b(rs,!e),t?.setSettingValues("@contextMenu.priceLine",!e),t?.update(),o();break}}}),[o,t,b]),v=(0,g.useCallback)((()=>{o&&o()}),[o]),S=(0,g.useCallback)((()=>{u(!1),o&&o()}),[o]),E=(0,g.useCallback)((e=>{p(e),o&&o()}),[o]);var k,V;k=h,V=v,(0,g.useEffect)((()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&V(e)};return document.addEventListener("click",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("click",e),document.removeEventListener("touchstart",e)}}),[k,V]);const A=(0,g.useCallback)((e=>{x(!0),t?.goDate(e,(()=>{S(),x(!1)}))}),[t,x,S]);return(0,g.useEffect)((()=>{b(ts,t?.getSettingValues("@contextMenu.countDown"))}),[b,t]),e?d?g.createElement(Jn,{visible:d,querying:y,getI18n:n,onClose:S,onDateChange:A}):m?g.createElement(In,{visible:m,setVisible:E,getI18n:n,settingManager:s,candlestickInstance:t,forceUpdate:a,onSettingChanged:l,onSettingReseted:c}):g.createElement(L.Z,{ref:h,sx:{...as,left:`${i}px`,top:`${r}px`},bg:"popupBg"},os.map((({label:e,i18nKey:t,id:i,needShowActiveIcon:r})=>g.createElement(ss,{key:i,label:n(t,e),id:i,isActive:!!f[i],isShowSelectIcon:r,onClick:w})))):null};var cs=i(1138);const hs=e=>g.createElement(je.Z,{...e,variant:"filled",sx:{bg:"inputBg",height:"auto",...e.sx},boxProps:{sx:{height:"auto",...e?.boxProps?.sx}}}),ds={wrapperProps:{sx:{gridTemplateColumns:["auto 1fr","175px 1fr"]}},bodyProps:{sx:{display:"grid",gridTemplateColumns:["1fr 1fr","repeat(auto-fit, minmax(50px, 1fr))"],gridAutoFlow:["dense","column"],gap:"10px"}}},us=({id:e,key:t,needReload:i=!0,updateValue:r})=>o=>{isNaN(+o.target.value)||r({id:e,key:t,value:o.target.value,needReload:i})},gs=({id:e,key:t,needReload:i=!1,updateValue:r})=>o=>r({id:e,key:t,value:!!o.currentTarget.checked,needReload:i}),ms=({id:e,key:t,needReload:i=!0,updateValue:r})=>o=>r({id:e,key:t,value:o,needReload:i}),ps=({id:e,key:t,needReload:i=!1,updateValue:r})=>o=>r({id:e,key:t,value:o,needReload:i}),ys=({title:e,id:t,name:i,settingManager:r,getI18n:o,updateValue:n})=>{const s=r.getMADescriptions(i).map((({label:e,visible:i,source:r,period:s,lineWidth:a,color:l,periodsKey:c,sourcesKey:h,colorsKey:d,lineWidthsKey:u,visiblesKey:m})=>({head:g.createElement(un,{checked:i,onChange:gs({id:t,key:m,updateValue:n})},g.createElement(b.Z,{variant:"formLabel"},e)),children:[g.createElement(hs,{key:c,defaultValue:`${s}`,onBlur:us({id:t,key:c,updateValue:n})}),g.createElement(dn,{key:h,options:Sn(o),value:`${r}`,onValueChange:ms({id:t,key:h,updateValue:n})}),g.createElement(dn,{key:u,options:vn,value:`${a}`,onValueChange:ms({id:t,key:u,needReload:!1,updateValue:n})}),g.createElement(sn,{key:d,colorPickerProps:{color:l,onChange:ps({id:t,key:d,updateValue:n}),getI18n:o}})]})));return{title:e,description:"",component:g.createElement(yn,{fields:s,...ds,wrapperProps:{sx:{gridTemplateColumns:"auto 1fr"}}})}};var xs=i(22613);const fs=({bg:e})=>g.createElement(L.Z,{sx:{width:"32px",height:"32px",borderRadius:"4px",borderWidth:"1px",borderStyle:"solid",borderColor:"line"}},g.createElement(L.Z,{sx:{height:"100%",borderRadius:"4px",bg:e}})),Cs=({checked:e,onClick:t,...i})=>g.createElement(L.Z,{onClick:()=>t(i.bg),sx:{position:"relative",cursor:"pointer"}},g.createElement(fs,{...i}),e&&g.createElement(xs.Z,{color:"line",size:32,sx:{pointerEvents:"none",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}})),bs=({value:e,options:t,onChange:i})=>g.createElement(m.Z,{sx:{bg:"modalBg",flexDirection:"row",borderRadius:"4px",py:"10px",px:"16px","& > *:not(:last-child)":{mr:"16px"}}},t.map(((t,r)=>g.createElement(Cs,{key:r,bg:t,checked:e===t,onClick:i})))),ws=({value:e,options:t,onChange:i})=>g.createElement(P.ZP,{enablePortal:!0,trigger:"click",placement:"bottom",overlay:g.createElement(bs,{value:e,options:t,onChange:i}),overlayProps:{sx:{mt:"minor",zIndex:1e4}},sx:{height:"100%",cursor:"pointer"}},g.createElement(fs,{bg:e})),vs=e=>{switch(e.id){case tr.MA:return t=e,ys({...t,title:"MA - Moving Average",name:"MA"});case tr.EMA:return(e=>ys({...e,title:"EMA - Exponential Moving Average",name:"EMA"}))(e);case tr.WMA:return(e=>ys({...e,title:"WMA - Weighted Moving Average",name:"WMA"}))(e);case tr.BOLL:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getBOLLDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.stdDevLabel),children:[g.createElement(hs,{key:o.stdDevKey,defaultValue:`${o.stdDev}`,onBlur:us({id:e,key:o.stdDevKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(un,{key:o.upVisibleKey,checked:o.upVisible,onChange:gs({id:e,key:o.upVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.upLabel)),children:[g.createElement(dn,{key:o.upLineWidthKey,options:vn,value:`${o.upLineWidth}`,onValueChange:ms({id:e,key:o.upLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.upColorKey,colorPickerProps:{color:o.upColor,onChange:ps({id:e,key:o.upColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.mbVisibleKey,checked:o.mbVisible,onChange:gs({id:e,key:o.mbVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.mbLabel)),children:[g.createElement(dn,{key:o.mbLineWidthKey,options:vn,value:`${o.mbLineWidth}`,onValueChange:ms({id:e,key:o.mbLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.mbColorKey,colorPickerProps:{color:o.mbColor,onChange:ps({id:e,key:o.mbColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.dnVisibleKey,checked:o.dnVisible,onChange:gs({id:e,key:o.dnVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.dnLabel)),children:[g.createElement(dn,{key:o.dnLineWidthKey,options:vn,value:`${o.dnLineWidth}`,onValueChange:ms({id:e,key:o.dnLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.dnColorKey,colorPickerProps:{color:o.dnColor,onChange:ps({id:e,key:o.dnColorKey,updateValue:i}),getI18n:r}})]}];return{title:"BOLL - Bollinger Bands",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case tr.VWAP:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getVWAPDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"VWAP - Volume Weighted Average Price",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case tr.AVL:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getAVLDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.label),children:[g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"AVL - Average Value Line",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case tr.TRIX:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getTRIXDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"TRIX - Triple Exponentially Smoothed Average",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case tr.SAR:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getSARDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.startLabel),children:[g.createElement(hs,{key:o.startKey,defaultValue:`${o.start}`,onBlur:us({id:e,key:o.startKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.maxLabel),children:[g.createElement(hs,{key:o.maxKey,defaultValue:`${o.max}`,onBlur:us({id:e,key:o.maxKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.colorLabel),children:[g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"SAR - Stop and Reverse",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.VOL:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getVOLDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement(sn,{key:o.maColorKey,colorPickerProps:{color:o.maColor,onChange:ps({id:e,key:o.maColorKey,updateValue:i}),getI18n:r}})]}];return{title:"Vol - Volume",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.MACD:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getMACDDescriptions(),n=(e=>Vn.map((({value:t,defaultText:i,i18nKey:r})=>({value:t,children:e(r,i)}))))(r),s=[t.getDefaultValue(o.longGrowthColorKey),t.getDefaultValue(o.shortGrowthColorKey)],a=[{head:g.createElement(b.Z,{variant:"formLabel"},o.fastLabel),children:[g.createElement(hs,{key:o.fastKey,defaultValue:`${o.fastLength}`,onBlur:us({id:e,key:o.fastKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.slowLabel),children:[g.createElement(hs,{key:o.slowKey,defaultValue:`${o.slowLength}`,onBlur:us({id:e,key:o.slowKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.signalLabel),children:[g.createElement(hs,{key:o.signalKey,defaultValue:`${o.signalLength}`,onBlur:us({id:e,key:o.signalKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(un,{key:o.deaVisibleKey,checked:o.deaVisible,onChange:gs({id:e,key:o.deaVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.deaLabel)),children:[g.createElement(dn,{key:o.deaLineWidthKey,options:vn,value:`${o.deaLineWidth}`,onValueChange:ms({id:e,key:o.deaLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.deaColorKey,colorPickerProps:{color:o.deaColor,onChange:ps({id:e,key:o.deaColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.difVisibleKey,checked:o.difVisible,onChange:gs({id:e,key:o.difVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.difLabel)),children:[g.createElement(dn,{key:o.difLineWidthKey,options:vn,value:`${o.difLineWidth}`,onValueChange:ms({id:e,key:o.difLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.difColorKey,colorPickerProps:{color:o.difColor,onChange:ps({id:e,key:o.difColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.macdVisibleKey,checked:o.macdVisible,onChange:gs({id:e,key:o.macdVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.macdLabel)),children:[g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.longGrowthLabel),children:[g.createElement(dn,{key:o.longGrowthStyleKey,options:n,value:o.longGrowthStyle,onValueChange:ms({id:e,key:o.longGrowthStyleKey,needReload:!1,updateValue:i})}),g.createElement(ws,{key:o.longGrowthColorKey,options:s,value:o.longGrowthColor,onChange:ms({id:e,key:o.longGrowthColorKey,needReload:!1,updateValue:i})})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.longFallLabel),children:[g.createElement(dn,{key:o.longFallStyleKey,options:n,value:o.longFallStyle,onValueChange:ms({id:e,key:o.longFallStyleKey,needReload:!1,updateValue:i})}),g.createElement(ws,{key:o.longFallColorKey,options:s,value:o.longFallColor,onChange:ms({id:e,key:o.longFallColorKey,needReload:!1,updateValue:i})})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.shortGrowthLabel),children:[g.createElement(dn,{key:o.shortGrowthStyleKey,options:n,value:o.shortGrowthStyle,onValueChange:ms({id:e,key:o.shortGrowthStyleKey,needReload:!1,updateValue:i})}),g.createElement(ws,{key:o.shortGrowthColorKey,options:s,value:o.shortGrowthColor,onChange:ms({id:e,key:o.shortGrowthColorKey,needReload:!1,updateValue:i})})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.shortFallLabel),children:[g.createElement(dn,{key:o.shortFallStyleKey,options:n,value:o.shortFallStyle,onValueChange:ms({id:e,key:o.shortFallStyleKey,needReload:!1,updateValue:i})}),g.createElement(ws,{key:o.shortFallColorKey,options:s,value:o.shortFallColor,onChange:ms({id:e,key:o.shortFallColorKey,needReload:!1,updateValue:i})})]}];return{title:"Moving Average Convergence Divergence",description:"",component:g.createElement(yn,{fields:a,...ds})}})(e);case ir.RSI:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getRSIDescriptions().map((({label:t,periodsKey:o,lineWidthsKey:n,colorsKey:s,visiblesKey:a,period:l,lineWidth:c,color:h,visible:d})=>({head:g.createElement(un,{key:a,checked:d,onChange:gs({id:e,key:a,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},t)),children:[g.createElement(hs,{key:o,defaultValue:`${l}`,onBlur:us({id:e,key:o,updateValue:i})}),g.createElement(dn,{key:n,options:vn,value:`${c}`,onValueChange:ms({id:e,key:n,needReload:!1,updateValue:i})}),g.createElement(sn,{key:s,colorPickerProps:{color:h,onChange:ps({id:e,key:s,updateValue:i}),getI18n:r}})]})));return{title:"RSI - Relative Strength Index",description:"",component:g.createElement(yn,{fields:o,...ds})}})(e);case ir.KDJ:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getKDJDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.ma1Label),children:[g.createElement(hs,{key:o.ma1Key,defaultValue:`${o.ma1}`,onBlur:us({id:e,key:o.ma1Key,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.ma2Label),children:[g.createElement(hs,{key:o.ma2Key,defaultValue:`${o.ma2}`,onBlur:us({id:e,key:o.ma2Key,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(un,{key:o.kVisibleKey,checked:o.kVisible,onChange:gs({id:e,key:o.kVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.kLabel)),children:[g.createElement(dn,{key:o.kLineWidthKey,options:vn,value:`${o.kLineWidth}`,onValueChange:ms({id:e,key:o.kLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.kColorKey,colorPickerProps:{color:o.kColor,onChange:ps({id:e,key:o.kColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.dVisibleKey,checked:o.dVisible,onChange:gs({id:e,key:o.dVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.dLabel)),children:[g.createElement(dn,{key:o.dLineWidthKey,options:vn,value:`${o.dLineWidth}`,onValueChange:ms({id:e,key:o.dLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.dColorKey,colorPickerProps:{color:o.dColor,onChange:ps({id:e,key:o.dColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.jVisibleKey,checked:o.jVisible,onChange:gs({id:e,key:o.jVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.jLabel)),children:[g.createElement(dn,{key:o.jLineWidthKey,options:vn,value:`${o.jLineWidth}`,onValueChange:ms({id:e,key:o.jLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.jColorKey,colorPickerProps:{color:o.jColor,onChange:ps({id:e,key:o.jColorKey,updateValue:i}),getI18n:r}})]}];return{title:"KDJ - Stochastic Indicator",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.OBV:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getOBVDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.label),children:[g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"OBV - On Balance Volume",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.CCI:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getCCIDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"CCI - Commodity Channel Index",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.StochRSI:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getStochRSIDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.rsiPeriodLabel),children:[g.createElement(hs,{key:o.rsiPeriodKey,defaultValue:`${o.rsiPeriod}`,onBlur:us({id:e,key:o.rsiPeriodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.stochasticPeriodLabel),children:[g.createElement(hs,{key:o.stochasticPeriodKey,defaultValue:`${o.stochasticPeriod}`,onBlur:us({id:e,key:o.stochasticPeriodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.smoothKPeriodLabel),children:[g.createElement(hs,{key:o.smoothKPeriodKey,defaultValue:`${o.smoothKPeriod}`,onBlur:us({id:e,key:o.smoothKPeriodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.smoothDPeriodLabel),children:[g.createElement(hs,{key:o.smoothDPeriodKey,defaultValue:`${o.smoothDPeriod}`,onBlur:us({id:e,key:o.smoothDPeriodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(un,{key:o.smoothKVisibleKey,checked:o.smoothKVisible,onChange:gs({id:e,key:o.smoothKVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.smoothKLabel)),children:[g.createElement(dn,{key:o.smoothKLineWidthKey,options:vn,value:`${o.smoothKLineWidth}`,onValueChange:ms({id:e,key:o.smoothKLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.smoothKColorKey,colorPickerProps:{color:o.smoothKColor,onChange:ps({id:e,key:o.smoothKColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.smoothDVisibleKey,checked:o.smoothDVisible,onChange:gs({id:e,key:o.smoothDVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.smoothDLabel)),children:[g.createElement(dn,{key:o.smoothDLineWidthKey,options:vn,value:`${o.smoothDLineWidth}`,onValueChange:ms({id:e,key:o.smoothDLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.smoothDColorKey,colorPickerProps:{color:o.smoothDColor,onChange:ps({id:e,key:o.smoothDColorKey,updateValue:i}),getI18n:r}})]}];return{title:"StochRSI - Stochastic RSI",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.WR:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getWRDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]}];return{title:"WR - Wm%R",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.DMI:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getDMIDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement("span",{key:""},"")]},{head:g.createElement(un,{key:o.pDIVisibleKey,checked:o.pDIVisible,onChange:gs({id:e,key:o.pDIVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.pDILabel)),children:[g.createElement(dn,{key:o.pDILineWidthKey,options:vn,value:`${o.pDILineWidth}`,onValueChange:ms({id:e,key:o.pDILineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.pDIColorKey,colorPickerProps:{color:o.pDIColor,onChange:ps({id:e,key:o.pDIColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.nDIVisibleKey,checked:o.nDIVisible,onChange:gs({id:e,key:o.nDIVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.nDILabel)),children:[g.createElement(dn,{key:o.nDILineWidthKey,options:vn,value:`${o.nDILineWidth}`,onValueChange:ms({id:e,key:o.nDILineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.nDIColorKey,colorPickerProps:{color:o.nDIColor,onChange:ps({id:e,key:o.nDIColorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(un,{key:o.dxVisibleKey,checked:o.dxVisible,onChange:gs({id:e,key:o.dxVisibleKey,updateValue:i})},g.createElement(b.Z,{variant:"formLabel"},o.dxLabel)),children:[g.createElement(dn,{key:o.dxLineWidthKey,options:vn,value:`${o.dxLineWidth}`,onValueChange:ms({id:e,key:o.dxLineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.dxColorKey,colorPickerProps:{color:o.dxColor,onChange:ps({id:e,key:o.dxColorKey,updateValue:i}),getI18n:r}})]}];return{title:"DMI - Directional Movement Index",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.MTM:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getMTMDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:r})}),g.createElement(dn,{key:o.sourceKey,options:Sn(i),value:`${o.source}`,onValueChange:ms({id:e,key:o.sourceKey,updateValue:r})}),g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:r})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:r}),getI18n:i}})]}];return{title:"MTM - Momentum Index",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.EMV:return(({id:e,settingManager:t,updateValue:i,getI18n:r})=>{const o=t.getEMVDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.periodLabel),children:[g.createElement(hs,{key:o.periodKey,defaultValue:`${o.period}`,onBlur:us({id:e,key:o.periodKey,updateValue:i})}),g.createElement(dn,{key:o.lineWidthKey,options:vn,value:`${o.lineWidth}`,onValueChange:ms({id:e,key:o.lineWidthKey,needReload:!1,updateValue:i})}),g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:i}),getI18n:r}})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.divisorLabel),children:[g.createElement(hs,{key:o.divisorKey,defaultValue:`${o.divisor}`,onBlur:us({id:e,key:o.divisorKey,updateValue:i})}),g.createElement("span",{key:"1"},""),g.createElement("span",{key:"2"},"")]}];return{title:"EMV - Ease of Movement Value",description:"",component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.OI_UM:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getOIUMDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.oiLabel),children:[g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:r}),getI18n:i}})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.nvLabel),children:[g.createElement(dn,{key:o.nvLineWidthKey,options:vn,value:`${o.nvLineWidth}`,onValueChange:ms({id:e,key:o.nvLineWidthKey,needReload:!1,updateValue:r})}),g.createElement(sn,{key:o.nvColorKey,colorPickerProps:{color:o.nvColor,onChange:ps({id:e,key:o.nvColorKey,updateValue:r}),getI18n:i}})]}];return{title:"O.I. - Open Interest",description:i("indicator-OI-description","Open Interest, Notional Value of Open Interest"),component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.OI_CM:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getOIUMDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.oiLabel),children:[g.createElement(sn,{key:o.colorKey,colorPickerProps:{color:o.color,onChange:ps({id:e,key:o.colorKey,updateValue:r}),getI18n:i}})]}];return{title:"O.I. - Open Interest",description:i("indicator-OI-description","Open Interest, Notional Value of Open Interest"),component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.LS_ACCO:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getLSAccoDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.barLabel),children:[g.createElement(sn,{key:o.barBuyColorKey,colorPickerProps:{color:o.barBuyColor,onChange:ps({id:e,key:o.barBuyColorKey,updateValue:r}),getI18n:i}}),g.createElement(sn,{key:o.barSellColorKey,colorPickerProps:{color:o.barSellColor,onChange:ps({id:e,key:o.barSellColorKey,updateValue:r}),getI18n:i}}),g.createElement("span",{key:"1"},""),g.createElement("span",{key:"2"},""),g.createElement("span",{key:"3"},""),g.createElement("span",{key:"4"},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.ratioLabel),children:[g.createElement(dn,{key:o.ratioLineWidthKey,options:vn,value:`${o.ratioLineWidth}`,onValueChange:ms({id:e,key:o.ratioLineWidthKey,needReload:!1,updateValue:r})}),g.createElement(sn,{key:o.ratioColorKey,colorPickerProps:{color:o.ratioColor,onChange:ps({id:e,key:o.ratioColorKey,updateValue:r}),getI18n:i}})]}];return{title:"L.S Acco. - Long/Short Account Ratio",description:i("indicator-LSAcco-description","The proportion of net long and net short positions to total open positions of the top 20% users with the\n    highest margin balance. Long Position % = Long positions of top traders / Total open positions of top traders\n    Short Position % = Short positions of top traders / Total open positions of top traders Long/Short Ratio\n    (Positions) = Long Position % / Short Position %"),component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.LS_POSIT:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getLSPositDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.barLabel),children:[g.createElement(sn,{key:o.barBuyColorKey,colorPickerProps:{color:o.barBuyColor,onChange:ps({id:e,key:o.barBuyColorKey,updateValue:r}),getI18n:i}}),g.createElement(sn,{key:o.barSellColorKey,colorPickerProps:{color:o.barSellColor,onChange:ps({id:e,key:o.barSellColorKey,updateValue:r}),getI18n:i}}),g.createElement("span",{key:"1"},""),g.createElement("span",{key:"2"},""),g.createElement("span",{key:"3"},""),g.createElement("span",{key:"4"},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.ratioLabel),children:[g.createElement(dn,{key:o.ratioLineWidthKey,options:vn,value:`${o.ratioLineWidth}`,onValueChange:ms({id:e,key:o.ratioLineWidthKey,needReload:!1,updateValue:r})}),g.createElement(sn,{key:o.ratioColorKey,colorPickerProps:{color:o.ratioColor,onChange:ps({id:e,key:o.ratioColorKey,updateValue:r}),getI18n:i}})]}];return{title:"L.S Posit. - Long/Short Postion Ratio",description:i("indicator-LSPosit-description","The proportion of net long and net short positions to total open positions of the top 20% users with the\n    highest margin balance. Long Position % = Long positions of top traders / Total open positions of top traders\n    Short Position % = Short positions of top traders / Total open positions of top traders Long/Short Ratio\n    (Positions) = Long Position % / Short Position %"),component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.LS_RATIO:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getLSRatioDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.barLabel),children:[g.createElement(sn,{key:o.barBuyColorKey,colorPickerProps:{color:o.barBuyColor,onChange:ps({id:e,key:o.barBuyColorKey,updateValue:r}),getI18n:i}}),g.createElement(sn,{key:o.barSellColorKey,colorPickerProps:{color:o.barSellColor,onChange:ps({id:e,key:o.barSellColorKey,updateValue:r}),getI18n:i}}),g.createElement("span",{key:"1"},""),g.createElement("span",{key:"2"},""),g.createElement("span",{key:"3"},""),g.createElement("span",{key:"4"},"")]},{head:g.createElement(b.Z,{variant:"formLabel"},o.ratioLabel),children:[g.createElement(dn,{key:o.ratioLineWidthKey,options:vn,value:`${o.ratioLineWidth}`,onValueChange:ms({id:e,key:o.ratioLineWidthKey,needReload:!1,updateValue:r})}),g.createElement(sn,{key:o.ratioColorKey,colorPickerProps:{color:o.ratioColor,onChange:ps({id:e,key:o.ratioColorKey,updateValue:r}),getI18n:i}})]}];return{title:"L.S Ratio - Long/Short Ratio",description:i("indicator-LSRatio-description","The proportion of net long and net short accounts to total accounts with positions. Each account is counted\n    once only. Long Account % =Accounts with net long positions / Total Accounts with positions Short Account %\n    =Accounts with net short positions / Total Accounts with positions Long/Short Ratio = Long Account % / Short\n    Account %"),component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.BS_VOL:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getBSVolDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.label),children:[g.createElement(sn,{key:o.buyColorKey,colorPickerProps:{color:o.buyColor,onChange:ps({id:e,key:o.buyColorKey,updateValue:r}),getI18n:i}}),g.createElement(sn,{key:o.sellColorKey,colorPickerProps:{color:o.sellColor,onChange:ps({id:e,key:o.sellColorKey,updateValue:r}),getI18n:i}}),g.createElement("span",{key:"1"},""),g.createElement("span",{key:"2"},""),g.createElement("span",{key:"3"},""),g.createElement("span",{key:"4"},"")]}];return{title:"B.S Vol. - Buyer Seller Volume",description:i("indicator-BSVol-description","Taker Buy Volume: the total volume of buy orders filled by takers within the period. Taker Sell Volume: the\n    total volume of sell orders filled by takers within the period."),component:g.createElement(yn,{fields:n,...ds})}})(e);case ir.BASIS:return(({id:e,settingManager:t,getI18n:i,updateValue:r})=>{const o=t.getBasisDescriptions(),n=[{head:g.createElement(b.Z,{variant:"formLabel"},o.basisLabel),children:[g.createElement(sn,{key:o.basisColorKey,colorPickerProps:{color:o.basisColor,onChange:ps({id:e,key:o.basisColorKey,updateValue:r}),getI18n:i}})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.futurePriceLabel),children:[g.createElement(sn,{key:o.futurePriceColorKey,colorPickerProps:{color:o.futurePriceColor,onChange:ps({id:e,key:o.futurePriceColorKey,updateValue:r}),getI18n:i}})]},{head:g.createElement(b.Z,{variant:"formLabel"},o.priceIndexLabel),children:[g.createElement(sn,{key:o.priceIndexColorKey,colorPickerProps:{color:o.priceIndexColor,onChange:ps({id:e,key:o.priceIndexColorKey,updateValue:r}),getI18n:i}})]}];return{title:"Basis",description:i("indicator-Basis-description","The difference between the futures price and the price index at a given time. Basis = Futures Price - Price\n    Index Basis Rate = ( Futures Price - Price Index ) / Price Index"),component:g.createElement(yn,{fields:n,...ds})}})(e);default:return{title:"",description:"",component:null}}var t},Ls=({addText:e,onAdd:t})=>g.createElement(b.Z,{id:"electron_add_now_empty",sx:{color:"primary",cursor:"pointer",textDecoration:"underline"},onClick:t},e),Ss=e=>g.createElement(J.Z,{width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none",...e},g.createElement("g",{clipPath:"url(#page-blank-b96_svg__clip0)"},g.createElement("path",{d:"M18 88h-2.5v-2.53H18V88zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5V74.4H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.54H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.53H18v2.53zm0-5.53h-2.5v-2.54H18v2.54zm0-5.53h-2.5v-2.54H18v2.54zm0-5.54h-2.5v-2.53H18v2.53zm0-5.53h-2.5V8H18v2.55zM18 2.5h-2.5V5H18V2.5zM63.08 5h-2.57V2.5h2.57V5zm5.6 0h-2.56V2.5h2.56V5zM57.44 5h-2.56V2.5h2.56V5zm-5.63 0h-2.56V2.5h2.56V5zm-5.64 0h-2.56V2.5h2.56V5zm-5.63 0H38V2.5h2.56L40.54 5zM34.9 5h-2.56V2.5h2.56V5zm-5.63 0h-2.56V2.5h2.56V5zm-5.63 0h-2.57V2.5h2.57V5zM76.32 12.44l-1.8-1.8 1.77-1.77 1.8 1.8-1.77 1.77zm-4-4l-1.8-1.8 1.77-1.77 1.8 1.8-1.77 1.77zM68.65 14.36h-2.5v2.5h2.5v-2.5zM68.65 8.84h-2.5v2.5h2.5v-2.5zM74.36 14.36h-2.5v2.5h2.5v-2.5z",fill:"currentColor"}),g.createElement("path",{d:"M65.46 94.5c8.864 0 16.05-7.186 16.05-16.05S74.324 62.4 65.46 62.4s-16.05 7.186-16.05 16.05S56.596 94.5 65.46 94.5z",fill:"url(#page-blank-b96_svg__paint0_linear)"}),g.createElement("path",{d:"M78 63.78v-2.51h2.5v2.5l-2.5.01zM78 58.58v-2.52h2.5v2.5l-2.5.02zm0-5.22v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.22V30h2.5v2.5l-2.5.01zm0-5.21v-2.52h2.5v2.5l-2.5.02zm0-5.21v-2.52h2.5v2.5l-2.5.02zM78 16.87v-2.51h2.5v2.5l-2.5.01zM50.46 93.5h-2.51V91h2.5l.01 2.5zM45.06 93.5h-2.52V91H45l.06 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0h-2.52V91h2.5l.02 2.5zm-5.41 0H20.9V91h2.5l.02 2.5zM18.01 93.5H15.5V91H18l.01 2.5zM66.71 85.5h-2.5V88h2.5v-2.5zM66.71 69h-2.5v14.1h2.5V69z",fill:"currentColor"})),g.createElement("defs",null,g.createElement("linearGradient",{id:"page-blank-b96_svg__paint0_linear",x1:54.111,y1:89.799,x2:76.809,y2:67.1,gradientUnits:"userSpaceOnUse"},g.createElement("stop",{stopColor:"#F0B90B"}),g.createElement("stop",{offset:.28,stopColor:"#F1BC0F"}),g.createElement("stop",{offset:.569,stopColor:"#F4C41C"}),g.createElement("stop",{offset:.862,stopColor:"#F8D230"}),g.createElement("stop",{offset:.993,stopColor:"#FBDA3C"})),g.createElement("clipPath",{id:"page-blank-b96_svg__clip0"},g.createElement("path",{fill:"#fff",d:"M0 0h96v96H0z"})))),Es=({children:e})=>g.createElement(m.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"md"}},g.createElement(Ss,{color:"t.third",size:60}),e),ks=e=>g.createElement(J.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},g.createElement("path",{fillRule:"evenodd",d:"M3 16.814a1 1 0 01.293-.707l13.4-13.4a1 1 0 011.414 0l3.186 3.186a1 1 0 010 1.414L9.6 19H20a1 1 0 110 2H4a1 1 0 01-1-1v-3.186zM5 19h1.388a1 1 0 00.704-.29l8.976-8.914-1.782-1.782-8.993 8.993a1 1 0 00-.293.707V19zM15.7 6.6l1.79 1.79L19.3 6.6l-1.8-1.8-1.8 1.8z",clipRule:"evenodd"})),Vs=({isActive:e,children:t,...i})=>g.createElement(m.Z,{...i,sx:{width:"100%",height:"24px",color:e?"primary":"t.primary",cursor:"pointer",px:"sm",justifyContent:"space-between",alignItems:"center",lineHeight:"12px","&:hover":{color:"primary",bg:"line"},"&:hover .icon-wrap":{display:"flex"},...i.sx}},t),As=({title:e,indicators:t,activePredicate:i,addText:r,onAdd:o,onSelect:n,onEdit:s,onRemove:a})=>g.createElement(m.Z,{sx:{py:"sm",gap:"xs",flexDirection:"column"}},g.createElement(m.Z,{sx:{px:"sm",height:"24px",fontSize:"12px",alignItems:"center",justifyContent:"space-between"}},g.createElement(b.Z,{sx:{color:"t.third"}},e),g.createElement(Ls,{addText:r,onAdd:o})),g.createElement(m.Z,{sx:{flexWrap:"wrap",flexDirection:"column"}},t.map((e=>g.createElement(Vs,{isActive:i(e),key:e.id},g.createElement(L.Z,{sx:{fontSize:0,width:"calc(100% - 52px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},onClick:()=>n(e)},e.name),g.createElement(L.Z,{className:"icon-wrap",sx:{gap:"xs",display:"none",color:"t.third"}},g.createElement(ks,{size:16,sx:{"&:hover":{color:"t.primary"}},onClick:()=>s(e)}),g.createElement(Pn.Z,{size:16,sx:{"&:hover":{color:"t.primary"}},onClick:()=>a(e)}))))))),Ts=e=>0===e.indicators.length?g.createElement(Es,null,g.createElement(Ls,{addText:e.addText,onAdd:e.onAdd})):g.createElement(As,{...e});var Ms=i(78863);const Ds=({children:e,withArrow:t=!1,isActive:i=!1,onClick:r=(()=>null)})=>g.createElement(m.Z,{onClick:r,sx:{width:"100%",justifyContent:"space-between",alignItems:"center",cursor:"pointer",ml:"8px"}},g.createElement(b.Z,{variant:"formLabel",sx:{color:i?"t.primary":"t.third"}},e),t?g.createElement(Ms.Z,{size:13,color:"t.third"}):null),Is=({label:e,checked:t,isActive:i,disabled:r,onChange:o,onClick:n})=>g.createElement(L.Z,{sx:{pl:"13px",pr:"15px",py:"10px",borderLeftStyle:"solid",borderLeftWidth:"2px",borderLeftColor:i?"primary":"transparent"}},g.createElement(un,{checked:t,disabled:r,wrapWithLabel:!1,onChange:o},g.createElement(Ds,{withArrow:!0,isActive:i,onClick:n},e))),_s=({children:e})=>g.createElement(b.Z,{sx:{color:"t.secondary",fontSize:"xs",lineHeight:"16px",mb:["20px","5px"],px:"15px"}},e),Ps=({menus:e})=>g.createElement(L.Z,{sx:{width:["100%","156px"],minWidth:["100%","156px"],overflow:"auto",py:"20px",flexDirection:"column","& > *:not(:last-of-type)":{mb:"15px"}}},e.map((({title:e,options:t},i)=>{const r=g.createElement(_s,null,e),o=t.map((e=>({value:e.value,children:g.createElement(Is,{label:e.label,checked:e.checked,disabled:e.disabled,isActive:e.isActive,onChange:()=>e.onChangeCheckbox(e.value),onClick:()=>e.onClickLabel(e.value)})})));return g.createElement(en,{key:i,title:r,options:o})}))),Ws=({index:e,children:t})=>e>-1?g.createElement(g.Fragment,null,t[e]):g.createElement(m.Z,{sx:{overflow:"hidden","& > *:not(:last-child)":{borderRightWidth:"1px",borderRightStyle:"solid",borderRightColor:"line"}}},t.map((e=>e)));var Rs,Bs,Hs=i(97214),Zs=i.n(Hs),Os=i(86041),Ns=i(36829);!function(e){e.Main="Main",e.Sub="Sub",e.SubTradingData="SubTradingData",e.All="All"}(Rs||(Rs={})),function(e){e.Main="Main",e.Sub="Sub",e.SubTradingData="SubTradingData",e.Customized="Customized"}(Bs||(Bs={}));const Fs=[[tr.MA,"MA"],[tr.EMA,"EMA"],[tr.WMA,"WMA"],[tr.BOLL,"BOLL"],[tr.VWAP,"VWAP"],[tr.AVL,"AVL"],[tr.TRIX,"TRIX"],[tr.SAR,"SAR"]],Ks=[[ir.VOL,"VOL"],[ir.MACD,"MACD"],[ir.RSI,"RSI"],[ir.KDJ,"KDJ"],[ir.OBV,"OBV"],[ir.CCI,"CCI"],[ir.StochRSI,"StochRSI"],[ir.WR,"WR"],[ir.DMI,"DMI"],[ir.MTM,"MTM"],[ir.EMV,"EMV"],[ir.OI_UM,"O.I."],[ir.OI_CM,"O.I."],[ir.LS_ACCO,"L.S Acco."],[ir.LS_POSIT,"L.S Posit."],[ir.LS_RATIO,"L.S Ratio"],[ir.BS_VOL,"B.S Vol."],[ir.BASIS,"Basis"]],Us=[ir.OI_UM,ir.OI_CM,ir.LS_ACCO,ir.LS_POSIT,ir.LS_RATIO,ir.BS_VOL,ir.BASIS],$s=({getI18n:e,activeKey:t,onChange:i,indicators:r,showCustomIndicator:o})=>{const{isMobile:n}=(0,cs.F)(),s=(0,g.useMemo)((()=>{const e=r.map((({id:e})=>e));return Zs()(Us,e).length>0}),[r]),a=(0,g.useMemo)((()=>e("indicator-default-title","Indicators")),[e]),l=(0,g.useMemo)((()=>e("indicator-main-title","Main")),[e]),c=(0,g.useMemo)((()=>e("indicator-sub-title","Sub")),[e]),h=(0,g.useMemo)((()=>e("indicator-sub-trading-data-title","Sub - Trading Data")),[e]),d=(0,g.useMemo)((()=>e("indicator-customized-title","Customized")),[e]),u=[g.createElement(Os.Z,{key:Bs.Main,tab:l,tabKey:Bs.Main}),g.createElement(Os.Z,{key:Bs.Sub,tab:c,tabKey:Bs.Sub}),...s?[g.createElement(Os.Z,{key:Bs.SubTradingData,tab:h,tabKey:Bs.SubTradingData})]:[],...o?[g.createElement(Os.Z,{key:Bs.Customized,tab:d,tabKey:Bs.Customized})]:[]];return g.createElement(m.Z,{sx:{flexDirection:"column"}},g.createElement(b.Z,{sx:{color:"t.primary",fontSize:"20px",marginBottom:"20px"}},a),n?null:g.createElement(Ns.Z,{tabDefaultNodeSx:{py:"20px"},size:"small",variant:"standard",defaultActiveKey:t,onChange:i},u))};var zs=i(45470),Xs=i.n(zs);const Gs=({visible:e,onClose:t=(()=>null),allIndicators:i,activeIndicatorId:r,setActiveIndicatorId:o,selectedIndicators:n,selectIndicator:s,updateIndicator:a,handleIndicator:l,settingManager:c,getI18n:h,isShowCustomIndicator:d})=>{const{isMobile:u}=(0,cs.F)(),[m,p]=(0,g.useState)(2),[y,x]=(0,g.useState)(-1),[f,C]=(0,g.useState)(Bs.Main),[,b]=(0,g.useState)(!1),w=(0,g.useCallback)((()=>b((e=>!e))),[b]),v=(0,g.useMemo)((()=>i.filter((({isCustom:e})=>e))),[i]),L=(0,g.useMemo)((()=>r||tr.MA),[r]),S=(0,g.useCallback)((()=>p((e=>-1*e))),[p]),E=(0,g.useCallback)((({id:e,key:t,value:i,needReload:r=!1})=>{c.setValue(t,i),a(e,r),S()}),[c,a,S]);(0,g.useEffect)((()=>{x(u?""===r?0:1:-1)}),[r,u]);const k=(0,g.useCallback)((e=>{o(e),u&&x(1)}),[o,x,u]),V=(0,g.useCallback)((()=>{x(0)}),[x]),A=(0,g.useCallback)((()=>{const e=c.getDefaultValue(L);c.setValues({[L]:e}),a(L,!0),w(),S()}),[c,L]),T=(0,g.useCallback)((e=>{t(e),w()}),[t]),M=(0,g.useCallback)((e=>n.includes(e.id)),[n]),D=(0,g.useCallback)((()=>l(It.Bf.ADD)),[l]),I=(0,g.useCallback)((e=>s(e)),[s]),_=(0,g.useCallback)((e=>l(It.Bf.EDIT,e)),[l]),P=(0,g.useCallback)((e=>l(It.Bf.REMOVE,e.id)),[l]),W=(0,g.useMemo)((()=>{if(u)return Rs.All;switch(f){case Bs.Main:return Rs.Main;case Bs.Sub:return Rs.Sub;case Bs.SubTradingData:return Rs.SubTradingData;default:return Rs.All}}),[u,f]),{menus:R,subTradingDataOptions:B}=(({allIndicators:e,displayMode:t,values:i,activeIndicatorId:r,onClickLabel:o,getI18n:n,selectIndicator:s,maxMainIndicatorLimit:a=5,maxSubIndicatorLimit:l=5})=>{const c=(0,g.useMemo)((()=>e.map((({id:e})=>e))),[e]),h=(0,g.useMemo)((()=>Zs()(c,Cn)),[c]),d=(0,g.useMemo)((()=>Zs()(c,bn)),[c]),u=(0,g.useCallback)((t=>{const r=Xs()(i,[t]);if(Zs()(r,h).length<=a&&Zs()(r,d).length<=l){const i=e.find((({id:e})=>e===t));i&&s(i)}}),[s,i,h,d,e,a,l]),m=(0,g.useMemo)((()=>Fs.filter((([e])=>h.includes(e)))),[h]),p=(0,g.useMemo)((()=>Ks.filter((([e])=>d.includes(e)))),[d]),y=(0,g.useMemo)((()=>Zs()(i,h)),[i]),x=(0,g.useMemo)((()=>Zs()(i,d)),[i]),f=(0,g.useMemo)((()=>m.map((([e,t])=>{const i=y.includes(e);return{value:e,label:t,checked:i,disabled:!i&&y.length>=a,isActive:e===r,onChangeCheckbox:u,onClickLabel:o}}))),[m,y,r,u,o]),C=(0,g.useMemo)((()=>p.map((([e,t])=>{const i=x.includes(e);return{value:e,label:t,checked:i,disabled:!i&&x.length>=l,isActive:e===r,onChangeCheckbox:u,onClickLabel:o}}))),[p,x,r,u,o]),[b,w]=(0,g.useMemo)((()=>go()(C,(({value:e})=>Us.some((t=>t===e))))),[C]),v=(0,g.useMemo)((()=>`${n("indicator-main-title","Main")} (${y.length}/${a})`),[n,y]),L=(0,g.useMemo)((()=>`${n("indicator-sub-title","Sub")} (${x.length}/${l})`),[n,x]);return{menus:(0,g.useMemo)((()=>{switch(t){case Rs.Main:return[{title:v,options:f}];case Rs.Sub:return[{title:L,options:w}];case Rs.SubTradingData:return[{title:L,options:b}];case Rs.All:default:return[{title:v,options:f},{title:L,options:C}]}}),[t,v,L,f,w,b,C]),mainOptions:f,subOptions:C,subCommonOptions:w,subTradingDataOptions:b}})({allIndicators:i,displayMode:W,values:n,activeIndicatorId:L,onClickLabel:k,getI18n:h,selectIndicator:s}),H=(0,g.useCallback)((e=>{switch(C(e),e){case Bs.Main:return o(tr.MA);case Bs.Sub:return o(ir.VOL);case Bs.SubTradingData:return o(B[0].value)}}),[C]),{title:Z,description:O,component:N}=vs({id:L,settingManager:c,getI18n:h,updateValue:E});return g.createElement(on,{header:g.createElement($s,{getI18n:h,activeKey:f,onChange:H,indicators:i,showCustomIndicator:d}),visible:e,onClose:t},f===Bs.Customized?g.createElement(Ts,{key:"custom",indicators:v,activePredicate:M,title:h("indicator-custom-title","Customized Indicator"),addText:h("indicator-add","Add"),onAdd:D,onSelect:I,onEdit:_,onRemove:P}):g.createElement(Ws,{key:"default",index:y},[g.createElement(Ps,{key:"1",menus:R}),g.createElement(mn,{key:m,title:Z,description:O,showBack:u,onBack:V,footer:g.createElement(pn,{resetField:{children:h("indicator-btn-reset","Reset"),onClick:A},saveField:{children:h("indicator-btn-save","Save"),onClick:T}})},N)]))},Ys=["seriesData","candlestick","nextData","grid","theme","getI18n","symbol","interval","css","isHiddenLogo"],js=(0,g.forwardRef)(((e,t)=>{const{seriesData:i,candlestick:r,nextData:o,grid:n,theme:s=It.hY.LIGHT,isShowDrawPanel:a=!1,isShowAnnotationPanel:l=!0,isShowCustomIndicator:c=!1,isHiddenLogo:h=!1,symbol:d,interval:u,getI18n:p=(()=>""),sensorsManager:y,css:x,settingStore:f,forceUpdate:C=(()=>null),background:b="",onModalClose:w,onSettingChanged:v=(()=>null),onSettingReseted:S=(()=>null),enableContextMenu:E=!0}=e,[k,V]=(0,g.useState)(!1),[A,T]=(0,g.useState)(tr.MA),[M,D]=(0,g.useState)({show:!1,left:0,top:0}),[I,_]=(0,g.useState)(null),[P,W]=(0,g.useState)(""),[R,{updateValue:B,getValue:H}]=(0,Yo.O)({visible:!1,allIndicators:[],selectIndicators:[]}),Z=(0,g.useRef)(null),O=(0,g.useRef)(),N=(0,g.useRef)(y);N.current=y,(0,g.useImperativeHandle)(t,(()=>({getCandlestick:()=>O.current,registerColorTable:K})));const F=(0,g.useCallback)((()=>{const e="\n  .kline-container {\n    position: relative;\n    height: 100%;\n    flex: 1;\n    z-index: 0;\n  }\n  .pointer:hover {\n    cursor: pointer;\n  }\n  .kline-wrap .kline-wrap-mask {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    z-index: 201;\n  }\n  .kline-wrap .kline-title-wrap {\n    color: #76808F;\n  }\n  .kline-wrap .kline-title-wrap .default-label-box {\n    font-size: 12px\n  }\n  .kline-wrap.light .indicator-title-toolbox svg path {\n    fill: #d8d8d8;\n    fill-opacity: 0.5;\n  }\n  .kline-wrap.dark .indicator-title-toolbox svg path {\n    fill: #3A3F46;\n    fill-opacity: 0.5;\n  }\n  .kline-wrap.dark .kline-title-wrap .indicator-title-toolbox svg:hover > path {\n    fill: #848E9C;\n  }\n  .kline-wrap.light .kline-title-wrap .indicator-title-toolbox svg:hover > path {\n    fill: #707A8A;\n  }\n  .kline-title-wrap .tooltip-wrap {\n    position: absolute;\n    z-index: 10;\n  }\n  .tooltip-wrap.up {\n    left: 50%;\n    top: -6px;\n    transform: translate(-50%, -100%);\n  }\n  .tooltip-wrap.right {\n    left: 100%;\n    top: -6px;\n    transform: translate(0%, 0%);\n  }\n  .kline-title-wrap .tooltip-arrow {\n    position: absolute;\n    width: 6px;\n    height: 6px;\n    top: 100%;\n    left: 50%;\n    transform: translate(-50%, -50%) rotate(45deg);\n  }\n  .kline-title-wrap .tooltip-text {\n    padding: 6px 8px;\n    white-space: nowrap;\n    border-radius: 2px;\n  }\n\n  .right .tooltip-text {\n    margin-left: 6px;\n  }\n  .right .tooltip-arrow {\n    top: 50%;\n    left: 0;\n    transform: translate(50%, 0%) rotate(45deg);\n  }\n  .kline-wrap .tooltip-wrap {\n    background: #5E6673;\n    color: #ffffff\n  }\n  .kline-wrap .tooltip-arrow {\n    background: #5E6673;\n  }\n  .kline-wrap .title-wrapper-container {\n    height: 0;\n  }\n  .kline-wrap .chart-title-row {\n    display: flex;\n    font-size: 12px;\n    flex-wrap: wrap;\n    align-items: center;\n    width: fit-content;\n    width: -moz-max-content;\n    line-height: 18px;\n    margin-left: 16px;\n  }\n  .kline-wrap .chart-title-row .chart-title-indicator-container {\n    display: inline-flex;\n    flex-wrap: wrap;\n  }\n  .kline-wrap .chart-title-row .icon-box {\n    display: inline-flex;\n    position: relative;\n    font-size: 12px;\n    line-height: 14px;\n    cursor: pointer;\n  }\n  .kline-wrap .chart-title-row .icon-box {\n    margin-right: 6px;\n  }\n  div.chart-title-row:nth-child(2) ~ div > .chart-title-indicator-container {\n    margin-left: 22px;\n  }\n  div.chart-title-row.fold:nth-child(2) ~ div {\n    display: none;\n  }\n  .chart-title-row.fold > .chart-title-indicator-container, .chart-title-row.fold > .indicator-title-toolbox{\n    display: none;\n  }\n  .icon-box svg {\n    transition: transform 0.5s ease-out;\n  }\n  .chart-title-row.fold svg {\n    transform: rotate(-90deg);\n  }\n  .indicator-title-toolbox {\n    display: flex;\n    align-items: center;\n  }\n  .kline-wrap .text-area-wrap {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 150px;\n    height: 80px;\n    z-index: 10001;\n    background: #ddd;\n    outline: none;\n    padding: 4px;\n    border-radius: 4px;\n    border: 1px solid #328DFD;\n  }\n  .kline-wrap.dark .text-area-wrap {\n    color: #E6E8EA;\n    background: rgb(0, 0, 0);\n  }\n  .kline-wrap.light .text-area-wrap {\n    color: #1E2026;\n    background: rgba(0, 0, 0, 0.2);\n  }\n  .kline-draw-menu-container {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    scroll-behavior: smooth;\n    ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n  .kline-draw-menu-container::-webkit-scrollbar {\n    display: none;\n  }\n  .draw-tool-item {\n    cursor: pointer;\n  }\n  .draw-tool-item.active svg path {\n    fill: #F0B90B;\n  }\n  .kline-wrap .kline-draw-menu-divider {\n    margin: 4px 0;\n    border-top: 1px solid #ddd;\n  }\n  @media screen and (max-width: 767px) {\n    .kline-draw-panel {\n      display: none;\n    }\n  }\n\n    .kline-wrap {\n      height: 100%;\n      position: relative;\n      line-height: 1;\n      z-index: 0;\n      user-select: none;\n    }";e&&W(e)}),[b,s]),K=(0,g.useCallback)(((e,t)=>{const i=O.current;i&&i.registerColorTable(e,t),s===e&&F()}),[s,F]),U=(0,g.useCallback)(((e,t="")=>p(e,{defaultValue:t||e})||t),[p]),$=(0,g.useMemo)((()=>({seriesData:i,candlestick:r,nextData:o,grid:n,symbol:d,interval:u,theme:s.toLowerCase(),isHiddenLogo:h})),[i,r,o,s,n,d,u,h]),z=(0,g.useCallback)((()=>{D((e=>({...e,show:!1})))}),[]),X=(0,g.useCallback)(((e,t=!1)=>{const i=O.current;t?i?.updateIndicatorParams(e):(i?.updateTitle(e),i?.update())}),[]),G=(0,g.useCallback)((e=>{if(H("visible")!==e){const t=O.current;t&&t.fire("indicatorDialogVisibleChange",{data:e})}B({visible:e})}),[]),Y=(0,g.useCallback)((({id:e,name:t,isCustom:i,isMain:r=!1})=>{const o=O.current;o&&(o.hasIndicatorByName(e)?o.closeIndicatorByName(e):i?o.fire("customIndicatorClick",{data:{id:e,name:t,isMain:r}}):o.addIndicatorByName(e))}),[]),j=(0,g.useCallback)(((e,...t)=>{const i=O.current;if(!i)return;const r={[It.Bf.ADD]:i.getAttr("onAddCustomIndicator"),[It.Bf.EDIT]:i.getAttr("onEditCustomIndicator"),[It.Bf.REMOVE]:i.getAttr("onRemoveCustomIndicator")}[e];r&&r.apply(null,t)}),[]);return jo((()=>{F(),Gr.Z.dragVertex.setAttr("fillStyle",(0,Dt.dt)(s)),Gr.Z.dragRect.setAttr("fillStyle",(0,Dt.dt)(s)),Gr.Z.text.setAttr("fillStyle",(0,Dt.oO)(s,"text.defaultColor"))}),[s,F]),(0,g.useEffect)((()=>{const e=O.current;e&&e.registerI18n(U)}),[U]),(0,g.useEffect)((()=>{const e=O.current;setTimeout((()=>{e&&e.resize()}))}),[]),jo((()=>{const e={};if(Ys.forEach((t=>{void 0!==$[t]&&(e[t]=$[t])})),O.current)((e,t)=>{const i=e.getConfig(),r={},o={};let n=!1;Object.keys(t||{}).forEach((e=>{if(Ys.includes(e)&&!Mt()(t[e],i[e])){if((0,di.Kn)(t[e])&&(0,di.Kn)(i[e])&&(0,_t.r3)(i[e],t[e]))return;n=!0,r[e]=t[e],o[e]=i[e]}})),n&&(e.setAttrs((0,_t.PM)({},o,r)),e.update())})(O.current,e);else{O.current=new Uo({container:Z.current,...e});const t=O.current;t.registerModule(Dt.Jj.settingManager,f),t.on("showParamsSettingPanel",(({id:e})=>{T(e),V(!0)})),t.on("showIndicatorDialog",(()=>{G(!H("visible"))})),t.on("allIndicatorsChange",(({data:e})=>{B({allIndicators:e})})),t.on("selectIndicatorsChange",(({data:e})=>{const t=e.map((({id:e})=>e));B({selectIndicators:t})})),t.on("dispatchErrorData",(({data:e})=>{N.current?.logOnErrorData?.(e)})),B({allIndicators:t.getAllIndicators(),selectIndicators:t.getSelectIndicators().map((({name:e})=>e))}),e.seriesData&&e.seriesData.length>0&&t.update()}}),[$,f]),(0,g.useEffect)((()=>{const e=({point:e})=>{E&&D((t=>t.show?t:{show:!0,left:e.x,top:e.y}))};return O.current?.on?.("contextmenu",e),()=>O.current?.off?.("contextmenu",e)}),[E]),g.createElement(g.Fragment,null,g.createElement("style",null,`${P}\n${x}`),g.createElement(m.Z,{ref:_,className:`kline-wrap ${s}`,style:{...e.style},sx:{background:(0,_t.Vq)(b),".chart-title-row":{background:(0,_t.Vq)(b,.5)}},dir:"ltr"},a&&I&&g.createElement($o.Z,{wrapRef:I,candlestickInstance:O.current}),g.createElement(L.Z,{ref:Z,className:"kline-container"},k&&!!f&&g.createElement(Gs,{visible:k,onClose:()=>{w?.(R.selectIndicators.join("_")),V(!1)},getI18n:U,activeIndicatorId:A,setActiveIndicatorId:T,selectedIndicators:R.selectIndicators,allIndicators:R.allIndicators,settingManager:f,selectIndicator:Y,updateIndicator:X,handleIndicator:j,isShowCustomIndicator:c})),l&&g.createElement(zo.Z,{wrapRef:Z,candlestickInstance:O.current}),!!f&&g.createElement(ls,{visible:M.show,candlestickInstance:O.current,left:M.left,top:M.top,close:z,getI18n:U,settingManager:f,forceUpdate:C,onSettingChanged:v,onSettingReseted:S})))})),qs=js;var Qs=i(59712);class Js{constructor(){this._seriesData=[],this.interval="",this.isLoadAll=!1}setDataProvider(e){return this._dataProvider=e,this}setInterval(e){return e&&!Bt()(this.interval,e)&&(this.interval=e,this._clearData()),this}setSymbol(e){return e&&!Bt()(this.symbol,e)&&(this.symbol=e,this._clearData()),this}setLoadCallback(e){this._loadCallbak=e}triggerLoading(e){this._loadCallbak&&this._loadCallbak(e)}getCleanDatas(e){const t={};return e.filter((({time:e})=>!t[e]&&(t[e]=1,!0))).sort(((e,t)=>e.time-t.time))}async getData(e={},t,i=!1){const r=this._dataProvider,{interval:o,symbol:n}=this;let{startTime:s,endTime:a}=e,l=this._getSyncParams();s&&a&&a>s&&(l={...l,startTime:s,endTime:a,limit:Math.ceil((a-s)/(0,Dt.Sz)(o))});try{o&&n&&(r.getData||r.getBarDatas).call(r,l,(e=>{const{data:r=[],isLoadAll:s}=e;this._isSync({interval:o,symbol:n})&&(this.isLoadAll=this.isLoadAll||s,r.length>0?(this._seriesData=i?this.getCleanDatas(r):this.getCleanDatas(this._seriesData.concat(r)),t(this._seriesData)):t([]))}))}catch(e){Qs.error(`basicKline getData occured error: ${e.message}`)}}subcribe(e){const t=this._dataProvider,{interval:i,symbol:r}=this;i&&r&&(t.subscribe||t.subcribe).call(t,this._getSyncParams(),(t=>{this._isSync({interval:i,symbol:r})&&e(t)}))}unSubcribe(){(this._dataProvider.unsubscribe||this._dataProvider.unSubcribe).call(this._dataProvider,this._getSyncParams())}_clearData(){this._seriesData.length=0,this.isLoadAll=!1}_getSyncParams(){const{interval:e,symbol:t}=this;return{interval:e,symbol:t}}_isSync({interval:e,symbol:t}){return Bt()(e,this.interval)&&Bt()(t,this.symbol)}}var ea=i(58096),ta=i.n(ea),ia=i(77837),ra=i.n(ia);class oa{constructor(e,t){this._namespace="",this._storeKey="CANDLESTICK_SETTING_INDICATOR",this._isLoaded=!1,this._pendingList=new Set,this._i18n=(e,t)=>t,this._restoreValue=ra()((async()=>{const e=At().createInstance({name:this._namespace});await e.setItem(this._storeKey,this._storeValue)})),this._namespace=e,this.setDefaultValue(t)}setDefaultValue(e){this._defaultValue=e}isLoaded(){return this._isLoaded}async loadStoreValue(){const e=At().createInstance({name:this._namespace}),t=await e.getItem(this._storeKey);t?this._storeValue=t:(this._storeValue=Wt()(this._defaultValue),await this._restoreValue()),this._isLoaded=!0,this._clearPendingist()}addPenddingList(e){this._pendingList.add(e)}registerI18n(e){this._i18n=e}_clearPendingist(){[...this._pendingList].forEach((e=>{e()})),this._pendingList.clear()}getValues(){return this._storeValue}hasValue(e){return ta()(this._storeValue,e)||ta()(this._defaultValue,e)}getValue(e){return ta()(this._storeValue,e)?$t()(this._storeValue,e):$t()(this._defaultValue,e)}getDefaultValue(e){return $t()(this._defaultValue,e)}async setValue(e,t){Kt()(this._storeValue,e,t),await this._restoreValue()}async setValues(e){if((0,di.Kn)(e)){const t=Wt()(e);Object.keys(t).forEach((e=>{Kt()(this._storeValue,e,t[e])})),await this._restoreValue()}}getSymbolDescription(){return{candlestickKey:"@symbol.candlestick",style:this.getValue("@symbol.candlestick.style"),styleKey:"@symbol.candlestick.style",upColor:this.getValue("@symbol.candlestick.up.color"),upColorKey:"@symbol.candlestick.up.color",upBorderColor:this.getValue("@symbol.candlestick.up.borderColor"),upBorderColorKey:"@symbol.candlestick.up.borderColor",upWickColor:this.getValue("@symbol.candlestick.up.wickColor"),upWickColorKey:"@symbol.candlestick.up.wickColor",downColor:this.getValue("@symbol.candlestick.down.color"),downColorKey:"@symbol.candlestick.down.color",downBorderColor:this.getValue("@symbol.candlestick.down.borderColor"),downBorderColorKey:"@symbol.candlestick.down.borderColor",downWickColor:this.getValue("@symbol.candlestick.down.wickColor"),downWickColorKey:"@symbol.candlestick.down.wickColor",pristine:this.getValue("@symbol.pristine"),pristineKey:"@symbol.pristine"}}getBackgroundDescription(){return{color:this.getValue("@background.color"),colorKey:"@background.color",vertGridLineShow:this.getValue("@background.vertGridLine.show"),vertGridLineShowKey:"@background.vertGridLine.show",vertGridLineLineWidth:this.getValue("@background.vertGridLine.lineWidth"),vertGridLineLineWidthKey:"@background.vertGridLine.lineWidth",vertGridLineColor:this.getValue("@background.vertGridLine.color"),vertGridLineColorKey:"@background.vertGridLine.color",horzGridLineShow:this.getValue("@background.horzGridLine.show"),horzGridLineShowKey:"@background.horzGridLine.show",horzGridLineLineWidth:this.getValue("@background.horzGridLine.lineWidth"),horzGridLineLineWidthKey:"@background.horzGridLine.lineWidth",horzGridLineColor:this.getValue("@background.horzGridLine.color"),horzGridLineColorKey:"@background.horzGridLine.color",pristine:this.getValue("@background.pristine"),pristineKey:"@background.pristine"}}getCountdonwDescription(){return{upTextColor:this.getValue("@countdown.upTextColor"),upTextColorKey:"@countdown.upTextColor",upBgColor:this.getValue("@countdown.upBgColor"),upBgColorKey:"@countdown.upBgColor",upBorderColor:this.getValue("@countdown.upBorderColor"),upBorderColorKey:"@countdown.upBorderColor",downTextColor:this.getValue("@countdown.downTextColor"),downTextColorKey:"@countdown.downTextColor",downBgColor:this.getValue("@countdown.downBgColor"),downBgColorKey:"@countdown.downBgColor",downBorderColor:this.getValue("@countdown.downBorderColor"),downBorderColorKey:"@countdown.downBorderColor"}}getMADescriptions(e="MA"){return[...Array(10).keys()].map((t=>({label:`${e}${t+1}`,periodsKey:`@${e}.periods[${t}]`,sourcesKey:`@${e}.sources[${t}]`,colorsKey:`@${e}.colors[${t}]`,lineWidthsKey:`@${e}.lineWidths[${t}]`,visiblesKey:`@${e}.visibles[${t}]`,period:this.getValue(`@${e}.periods[${t}]`),source:this.getValue(`@${e}.sources[${t}]`),color:this.getValue(`@${e}.colors[${t}]`),lineWidth:this.getValue(`@${e}.lineWidths[${t}]`),visible:!!this.getValue(`@${e}.visibles[${t}]`)})))}getMACDDescriptions(){return{fastLabel:this._i18n("macd-fast-label","Fast Length"),slowLabel:this._i18n("macd-short-label","Slow Length"),signalLabel:this._i18n("macd-signal-label","Signal Length"),fastKey:"@MACD.fastPeriod",slowKey:"@MACD.slowPeriod",signalKey:"@MACD.signalPeriod",fastLength:this.getValue("@MACD.fastPeriod"),slowLength:this.getValue("@MACD.slowPeriod"),signalLength:this.getValue("@MACD.signalPeriod"),deaLabel:"DEA",difLabel:"DIF",macdLabel:"MACD",deaVisibleKey:"@MACD.visibles.DEA",deaVisible:this.getValue("@MACD.visibles.DEA"),difVisibleKey:"@MACD.visibles.DIF",difVisible:this.getValue("@MACD.visibles.DIF"),macdVisibleKey:"@MACD.visibles.MACD",macdVisible:this.getValue("@MACD.visibles.MACD"),deaColorKey:"@MACD.colors.DEA",deaColor:this.getValue("@MACD.colors.DEA"),difColorKey:"@MACD.colors.DIF",difColor:this.getValue("@MACD.colors.DIF"),deaLineWidthKey:"@MACD.lineWidths.DEA",deaLineWidth:this.getValue("@MACD.lineWidths.DEA"),difLineWidthKey:"@MACD.lineWidths.DIF",difLineWidth:this.getValue("@MACD.lineWidths.DIF"),longGrowthLabel:this._i18n("macd-long-growth-label","Long (Grow)"),longGrowthStyleKey:"@MACD.longGrowth.style",longGrowthStyle:this.getValue("@MACD.longGrowth.style"),longGrowthColorKey:"@MACD.longGrowth.color",longGrowthColor:this.getValue("@MACD.longGrowth.color"),longFallLabel:this._i18n("macd-long-fall-label","Long (Fall)"),longFallStyleKey:"@MACD.longFall.style",longFallStyle:this.getValue("@MACD.longFall.style"),longFallColorKey:"@MACD.longFall.color",longFallColor:this.getValue("@MACD.longFall.color"),shortGrowthLabel:this._i18n("macd-short-growth-label","Short (Grow)"),shortGrowthStyleKey:"@MACD.shortGrowth.style",shortGrowthStyle:this.getValue("@MACD.shortGrowth.style"),shortGrowthColorKey:"@MACD.shortGrowth.color",shortGrowthColor:this.getValue("@MACD.shortGrowth.color"),shortFallLabel:this._i18n("macd-short-fall-label","Short (Fall)"),shortFallStyleKey:"@MACD.shortFall.style",shortFallStyle:this.getValue("@MACD.shortFall.style"),shortFallColorKey:"@MACD.shortFall.color",shortFallColor:this.getValue("@MACD.shortFall.color")}}getVOLDescriptions(){return{periodLabel:this._i18n("vol-period-label","Period"),periodKey:"@VOL.period",period:this.getValue("@VOL.period"),maColorKey:"@VOL.maColor",maColor:this.getValue("@VOL.maColor")}}getTRIXDescriptions(e="@TRIX"){return{periodLabel:this._i18n("trix-length-label","Length"),periodKey:`${e}.period`,period:this.getValue(`${e}.period`),colorKey:`${e}.color`,color:this.getValue(`${e}.color`),lineWidthKey:`${e}.lineWidth`,lineWidth:this.getValue(`${e}.lineWidth`)}}getStochRSIDescriptions(){return{rsiPeriodLabel:this._i18n("stochRSI-rsi-label","Length RSI"),rsiPeriodKey:"@Stoch RSI.rsiPeriod",rsiPeriod:this.getValue("@Stoch RSI.rsiPeriod"),stochasticPeriodLabel:this._i18n("stochRSI-stoch-label","Length Stoch"),stochasticPeriodKey:"@Stoch RSI.stochasticPeriod",stochasticPeriod:this.getValue("@Stoch RSI.stochasticPeriod"),smoothKPeriodLabel:this._i18n("stochRSI-k-label","Smooth K"),smoothKLabel:"K%",smoothKPeriod:this.getValue("@Stoch RSI.kPeriod"),smoothKPeriodKey:"@Stoch RSI.kPeriod",smoothKVisible:this.getValue("@Stoch RSI.visibles.smoothK"),smoothKVisibleKey:"@Stoch RSI.visibles.smoothK",smoothKLineWidth:this.getValue("@Stoch RSI.lineWidths.smoothK"),smoothKLineWidthKey:"@Stoch RSI.lineWidths.smoothK",smoothKColor:this.getValue("@Stoch RSI.colors.smoothK"),smoothKColorKey:"@Stoch RSI.colors.smoothK",smoothDPeriodLabel:this._i18n("stochRSI-d-label","Smooth D"),smoothDLabel:"D%",smoothDPeriod:this.getValue("@Stoch RSI.dPeriod"),smoothDPeriodKey:"@Stoch RSI.dPeriod",smoothDVisible:this.getValue("@Stoch RSI.visibles.smoothD"),smoothDVisibleKey:"@Stoch RSI.visibles.smoothD",smoothDLineWidth:this.getValue("@Stoch RSI.lineWidths.smoothD"),smoothDLineWidthKey:"@Stoch RSI.lineWidths.smoothD",smoothDColor:this.getValue("@Stoch RSI.colors.smoothD"),smoothDColorKey:"@Stoch RSI.colors.smoothD"}}getWRDescriptions(){return{...this.getTRIXDescriptions("@Wm %R"),periodLabel:this._i18n("wr-length-label","Length")}}getMTMDescriptions(e="@MTM"){return{periodLabel:this._i18n("mtm-length-label","Length"),periodKey:`${e}.period`,period:this.getValue(`${e}.period`),sourceKey:`${e}.source`,source:this.getValue(`${e}.source`),colorKey:`${e}.color`,color:this.getValue(`${e}.color`),lineWidthKey:`${e}.lineWidth`,lineWidth:this.getValue(`${e}.lineWidth`)}}getDMIDescriptions(e="@DMI"){return{periodLabel:this._i18n("dmi-length-label","Length"),periodKey:`${e}.period`,period:this.getValue(`${e}.period`),pDILabel:"+DI",pDIVisibleKey:`${e}.visibles.pDI`,pDILineWidthKey:`${e}.lineWidths.pDI`,pDIColorKey:`${e}.colors.pDI`,pDIVisible:this.getValue(`${e}.visibles.pDI`),pDILineWidth:this.getValue(`${e}.lineWidths.pDI`),pDIColor:this.getValue(`${e}.colors.pDI`),nDILabel:"-DI",nDIVisibleKey:`${e}.visibles.nDI`,nDILineWidthKey:`${e}.lineWidths.nDI`,nDIColorKey:`${e}.colors.nDI`,nDIVisible:this.getValue(`${e}.visibles.nDI`),nDILineWidth:this.getValue(`${e}.lineWidths.nDI`),nDIColor:this.getValue(`${e}.colors.nDI`),dxLabel:"ADX",dxVisibleKey:`${e}.visibles.dx`,dxLineWidthKey:`${e}.lineWidths.dx`,dxColorKey:`${e}.colors.dx`,dxVisible:this.getValue(`${e}.visibles.dx`),dxLineWidth:this.getValue(`${e}.lineWidths.dx`),dxColor:this.getValue(`${e}.colors.dx`)}}getEMVDescriptions(e="@EMV"){return{periodLabel:this._i18n("emv-length-label","Length"),periodKey:`${e}.period`,period:this.getValue(`${e}.period`),colorKey:`${e}.color`,color:this.getValue(`${e}.color`),lineWidthKey:`${e}.lineWidth`,lineWidth:this.getValue(`${e}.lineWidth`),divisorLabel:this._i18n("emv-divisor-label","Divisor"),divisor:this.getValue(`${e}.x`),divisorKey:`${e}.x`}}getSARDescriptions(e="@SAR"){return{startLabel:this._i18n("sar-start-label","Start"),startKey:`${e}.step`,start:this.getValue(`${e}.step`),colorKey:`${e}.color`,color:this.getValue(`${e}.color`),colorLabel:"SAR",maxLabel:this._i18n("sar-max-label","Maximum"),max:this.getValue(`${e}.x`),maxKey:`${e}.x`}}getRSIDescriptions(e="RSI"){return[...Array(3).keys()].map((t=>({label:e,periodsKey:`@${e}.periods[${t}]`,colorsKey:`@${e}.colors[${t}]`,lineWidthsKey:`@${e}.lineWidths[${t}]`,visiblesKey:`@${e}.visibles[${t}]`,period:this.getValue(`@${e}.periods[${t}]`),color:this.getValue(`@${e}.colors[${t}]`),lineWidth:this.getValue(`@${e}.lineWidths[${t}]`),visible:!!this.getValue(`@${e}.visibles[${t}]`)})))}getCCIDescriptions(){return{...this.getTRIXDescriptions("@CCI"),periodLabel:this._i18n("cci-length-label","Length")}}getKDJDescriptions(e="@KDJ"){return{periodLabel:this._i18n("kdj-k-label","Calculating Period"),periodKey:`${e}.period[0]`,period:this.getValue(`${e}.period[0]`),ma1Label:this._i18n("kdj-d-label","MA Period 1"),ma1Key:`${e}.period[1]`,ma1:this.getValue(`${e}.period[1]`),ma2Label:this._i18n("kdj-j-label","MA Period 2"),ma2Key:`${e}.period[2]`,ma2:this.getValue(`${e}.period[2]`),kLabel:"K",kVisible:this.getValue(`${e}.visibles[0]`),kVisibleKey:`${e}.visibles[0]`,kLineWidth:this.getValue(`${e}.lineWidths[0]`),kLineWidthKey:`${e}.lineWidths[0]`,kColor:this.getValue(`${e}.colors[0]`),kColorKey:`${e}.colors[0]`,dLabel:"D",dVisible:this.getValue(`${e}.visibles[1]`),dVisibleKey:`${e}.visibles[1]`,dLineWidth:this.getValue(`${e}.lineWidths[1]`),dLineWidthKey:`${e}.lineWidths[1]`,dColor:this.getValue(`${e}.colors[1]`),dColorKey:`${e}.colors[1]`,jLabel:"J",jVisible:this.getValue(`${e}.visibles[2]`),jVisibleKey:`${e}.visibles[2]`,jLineWidth:this.getValue(`${e}.lineWidths[2]`),jLineWidthKey:`${e}.lineWidths[2]`,jColor:this.getValue(`${e}.colors[2]`),jColorKey:`${e}.colors[2]`}}getOBVDescriptions(e="@OBV"){return{label:"OBV",colorKey:`${e}.color`,color:this.getValue(`${e}.color`),lineWidthKey:`${e}.lineWidth`,lineWidth:this.getValue(`${e}.lineWidth`)}}getBOLLDescriptions(e="@BOLL"){return{periodLabel:this._i18n("boll-length-label","Length"),periodKey:`${e}.period`,period:this.getValue(`${e}.period`),stdDevLabel:this._i18n("boll-multiplier-label","Multiplier"),stdDevKey:`${e}.stdDev`,stdDev:this.getValue(`${e}.stdDev`),upLabel:"UP",upVisible:this.getValue(`${e}.visibles[0]`),upVisibleKey:`${e}.visibles[0]`,upLineWidth:this.getValue(`${e}.lineWidths[0]`),upLineWidthKey:`${e}.lineWidths[0]`,upColor:this.getValue(`${e}.colors[0]`),upColorKey:`${e}.colors[0]`,mbLabel:"MB",mbVisible:this.getValue(`${e}.visibles[1]`),mbVisibleKey:`${e}.visibles[1]`,mbLineWidth:this.getValue(`${e}.lineWidths[1]`),mbLineWidthKey:`${e}.lineWidths[1]`,mbColor:this.getValue(`${e}.colors[1]`),mbColorKey:`${e}.colors[1]`,dnLabel:"DN",dnVisible:this.getValue(`${e}.visibles[2]`),dnVisibleKey:`${e}.visibles[2]`,dnLineWidth:this.getValue(`${e}.lineWidths[2]`),dnLineWidthKey:`${e}.lineWidths[2]`,dnColor:this.getValue(`${e}.colors[2]`),dnColorKey:`${e}.colors[2]`}}getVWAPDescriptions(){return{...this.getTRIXDescriptions("@VWAP"),periodLabel:this._i18n("vwap-length-label","Length")}}getAVLDescriptions(e="@AVL"){return{label:"AVL",colorKey:`${e}.color`,color:this.getValue(`${e}.color`),lineWidthKey:`${e}.lineWidth`,lineWidth:this.getValue(`${e}.lineWidth`)}}getOIUMDescriptions(e="@OI-UM"){return{oiLabel:"OI",colorKey:`${e}.bar.color`,color:this.getValue(`${e}.bar.color`),nvLabel:"Notional Value of O.I.",nvLineWidthKey:`${e}.nv.lineWidth`,nvLineWidth:this.getValue(`${e}.nv.lineWidth`),nvColorKey:`${e}.nv.color`,nvColor:this.getValue(`${e}.nv.color`)}}getOICMDescriptions(e="@OI-CM"){return{oiLabel:"OI",colorKey:`${e}.bar.color`,color:this.getValue(`${e}.bar.color`)}}getLSAccoDescriptions(e="@LS-Acco"){return{barLabel:"L.S Acco.",barBuyColorKey:`${e}.bar.buyColor`,barBuyColor:this.getValue(`${e}.bar.buyColor`),barSellColorKey:`${e}.bar.sellColor`,barSellColor:this.getValue(`${e}.bar.sellColor`),ratioLabel:"L/S Ratio (Acco.)",ratioColorKey:`${e}.ratio.color`,ratioColor:this.getValue(`${e}.ratio.color`),ratioLineWidthKey:`${e}.ratio.lineWidth`,ratioLineWidth:this.getValue(`${e}.ratio.lineWidth`)}}getLSPositDescriptions(e="@LS-Posit"){return{barLabel:"L.S Posit.",barBuyColorKey:`${e}.bar.buyColor`,barBuyColor:this.getValue(`${e}.bar.buyColor`),barSellColorKey:`${e}.bar.sellColor`,barSellColor:this.getValue(`${e}.bar.sellColor`),ratioLabel:"L/S Ratio (Posit.)",ratioColorKey:`${e}.ratio.color`,ratioColor:this.getValue(`${e}.ratio.color`),ratioLineWidthKey:`${e}.ratio.lineWidth`,ratioLineWidth:this.getValue(`${e}.ratio.lineWidth`)}}getLSRatioDescriptions(e="@LS-Ratio"){return{barLabel:"L.S Acco.",barBuyColorKey:`${e}.bar.buyColor`,barBuyColor:this.getValue(`${e}.bar.buyColor`),barSellColorKey:`${e}.bar.sellColor`,barSellColor:this.getValue(`${e}.bar.sellColor`),ratioLabel:"L/S Ratio",ratioColorKey:`${e}.ratio.color`,ratioColor:this.getValue(`${e}.ratio.color`),ratioLineWidthKey:`${e}.ratio.lineWidth`,ratioLineWidth:this.getValue(`${e}.ratio.lineWidth`)}}getBSVolDescriptions(e="@BSVol"){return{label:"B.S Vol.",buyColorKey:`${e}.buyColor`,buyColor:this.getValue(`${e}.buyColor`),sellColorKey:`${e}.sellColor`,sellColor:this.getValue(`${e}.sellColor`)}}getBasisDescriptions(e="@Basis"){return{basisLabel:"Basis",basisColorKey:`${e}.basisColor`,basisColor:this.getValue(`${e}.basisColor`),futurePriceLabel:"Future Price",futurePriceColorKey:`${e}.futurePriceColor`,futurePriceColor:this.getValue(`${e}.futurePriceColor`),priceIndexLabel:"Price Index",priceIndexColorKey:`${e}.priceIndexColor`,priceIndexColor:this.getValue(`${e}.priceIndexColor`)}}}var na=i(59712);const sa="BASIC-KLINE",aa=(0,g.forwardRef)(((e,t)=>{const{dataProvider:i,interval:r,symbol:o,theme:n,themeKey:s=n,setLoading:a,baseAsset:l="",quoteAsset:c="",namespace:h,isStock:d=!1,customTheme:u,defaultSettings:m,sensorsManager:p,storeSymbol:y="",onDataArrived:x,needStore:f=!0,beforeChartReady:C=(()=>Promise.resolve()),...b}=e,[,w]=(0,g.useState)(!1),[v]=(0,g.useState)(new Js),[L,S]=(0,g.useState)([]),[E,k]=(0,g.useState)([]),[V,A]=(0,g.useState)(""),T=(0,g.useRef)(null),M=(0,g.useRef)(o),D=(0,g.useRef)(p),I=(0,g.useRef)(),_=(0,g.useRef)(),P=(0,g.useRef)(!1);P.current=T.current?.getCandlestick()?.isLoaded()||!1,D.current=p;const W=(0,g.useCallback)((()=>w((e=>!e))),[w]),R=(0,g.useMemo)((()=>e.candlestick?.type?.toUpperCase()),[e.candlestick]),B=(0,g.useMemo)((()=>u?Object.keys(u).reduce(((e,t)=>{return e[t]=(i=u[t],{...i,kline:Go(i)}).kline,e;var i}),{}):{}),[u]),H=(0,g.useMemo)((()=>B[n||"dark"]),[B,n,s]),Z=(0,g.useMemo)((()=>(({symbol:e={candlestickStyle:fn.CandleBar},customTheme:t=Dt.kn})=>{const i={periods:[7,25,99,0,0,0,0,0,0,0],sources:[Ji.Close,Ji.Close,Ji.Close,Ji.Close,Ji.Close,Ji.Close,Ji.Close,Ji.Close,Ji.Close,Ji.Close],lineWidths:["1","1","1","1","1","1","1","1","1","1"],colors:["rgba(241, 156, 56, 0.7)","rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)","rgba(139, 43, 246, 0.7)","rgba(0, 32, 245, 0.7)","rgba(234, 51, 35, 0.7)","rgba(87, 134, 224, 0.7)","rgba(255, 254, 85, 0.7)","rgba(117, 250, 76, 0.7)","rgba(138, 26, 16, 0.7)"],visibles:[!0,!0,!0,!1,!1,!1,!1,!1,!1,!1]};return{"@symbol":{candlestick:{style:e.candlestickStyle,up:{color:t["candle.upBarColor"],borderColor:t["candle.upBarColor"],wickColor:t["candle.upBarColor"]},down:{color:t["candle.downBarColor"],borderColor:t["candle.downBarColor"],wickColor:t["candle.downBarColor"]}},pristine:!0},"@background":{color:t.background,vertGridLine:{show:!0,lineWidth:wn[1],color:t["vertGridLine.color"]},horzGridLine:{show:!0,lineWidth:wn[1],color:t["horzGridLine.color"]},crosshairCursorLabel:{backgroundColor:t["cross.defaultLabelBgColor"],borderColor:t["cross.defaultLabelBorderColor"],textColor:t["cross.defaultLabelTextColor"]},crosshairBorderLine:{color:t["cross.borderLineColor"]},grid:{show:!0,color:t["grid.borderLineColor"]},frame:{color:t["frame.borderLineColor"]},pristine:!0},"@countdown":{upTextColor:t["countdown.upTextColor"],upBgColor:t["countdown.upBgColor"],upBorderColor:t["countdown.upBorderColor"],downTextColor:t["countdown.downTextColor"],downBgColor:t["countdown.downBgColor"],downBorderColor:t["countdown.downBorderColor"]},"@contextMenu":{countDown:!1,priceLine:!1},"@MA":i,"@EMA":Wt()(i),"@WMA":Wt()(i),"@MACD":{fastPeriod:12,slowPeriod:26,signalPeriod:9,visibles:{DEA:!0,DIF:!0,MACD:!0},lineWidths:{DEA:wn[1],DIF:wn[1]},colors:{DEA:"rgba(234, 61, 247, 0.7)",DIF:"rgba(116, 252, 253, 0.7)"},longGrowth:{style:er.Hollow,color:t["volume.upBarColor"]},longFall:{style:er.Solid,color:t["volume.upBarColor"]},shortGrowth:{style:er.Hollow,color:t["volume.downBarColor"]},shortFall:{style:er.Solid,color:t["volume.downBarColor"]}},"@VOL":{period:0,maColor:"rgba(14, 203, 129, 0.5)",visibles:[!1]},"@TRIX":{period:9,color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@Stoch RSI":{rsiPeriod:14,stochasticPeriod:14,kPeriod:3,dPeriod:3,visibles:{smoothK:!0,smoothD:!0},lineWidths:{smoothK:wn[1],smoothD:wn[1]},colors:{smoothK:"rgba(234, 61, 247, 0.7)",smoothD:"rgba(116, 252, 253, 0.7)"}},"@Wm %R":{period:14,color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@MTM":{period:14,source:Ji.Close,color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@DMI":{period:14,visibles:{pDI:!0,nDI:!0,dx:!0},lineWidths:{pDI:wn[1],nDI:wn[1],dx:wn[1]},colors:{pDI:"rgba(234, 61, 247, 0.7)",nDI:"rgba(116, 252, 253, 0.7)",dx:"rgba(241, 156, 56, 0.7)"}},"@EMV":{period:14,x:1e4,color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@SAR":{step:.02,x:.2,color:"rgba(241, 156, 56, 0.7)"},"@RSI":{periods:[6,12,24],lineWidths:[wn[1],wn[1],wn[1]],colors:["rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)","rgba(241, 156, 56, 0.7)"],visibles:[!0,!0,!0]},"@CCI":{period:9,color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@KDJ":{period:[9,3,3],lineWidths:[wn[1],wn[1],wn[1]],colors:["rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)","rgba(241, 156, 56, 0.7)"],visibles:[!0,!0,!0]},"@OBV":{color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@BOLL":{period:21,stdDev:2,lineWidths:[wn[1],wn[1],wn[1]],colors:["rgba(116, 252, 253, 0.7)","rgba(234, 61, 247, 0.7)","rgba(116, 252, 253, 0.7)"],visibles:[!0,!0,!0]},"@VWAP":{period:14,color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@AVL":{color:"rgba(241, 156, 56, 0.7)",lineWidth:wn[1]},"@OI-UM":{bar:{color:"rgba(14, 203, 129, 0.7)"},nv:{color:"rgba(234, 51, 35, 0.7)",lineWidth:wn[2]}},"@OI-CM":{bar:{color:"rgba(14, 203, 129, 0.7)"}},"@LS-Acco":{bar:{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},ratio:{color:"rgba(234, 61, 247, 0.7)",lineWidth:wn[2]}},"@LS-Posit":{bar:{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},ratio:{color:"rgba(234, 61, 247, 0.7)",lineWidth:wn[2]}},"@LS-Ratio":{bar:{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},ratio:{color:"rgba(234, 61, 247, 0.7)",lineWidth:wn[2]}},"@BSVol":{buyColor:"rgba(117, 250, 76, 0.7)",sellColor:"rgba(234, 51, 35, 0.7)"},"@Basis":{basisColor:"rgba(241, 156, 56, 0.7)",futurePriceColor:"rgba(234, 51, 35, 0.7)",priceIndexColor:"rgba(117, 250, 76, 0.7)"}}})({symbol:m?.symbol,customTheme:H})),[m,H]),O=(0,g.useMemo)((()=>{if(!h)return;const e=At().createInstance({name:h}),t="BASIC_KLINE_INDICATOR",i=(0,di.Kn)(o)?`BASIC_KLINE_${(0,_t.T)(o)}`:`BASIC_KLINE_${o}`;return{getValue:()=>Promise.all([e.getItem(t),e.getItem(i)]).then((([e=[],t=[]])=>{try{return(e=e||[{type:"CANDLE",indicators:[{type:"MA",id:"@MA"}]},{type:"VOL",indicators:[{type:"VOL",id:"@VOL"}]}]).map((({type:e,indicators:i=[],weight:r=0},o)=>({annotations:t?.[o]?.annotations||[],type:e,indicators:i,weight:r})))}catch(e){return na.error(`get previous data occured error: ${e.message}`),[]}})),setValue:r=>{const{indicators:o,annotations:n}=r.reduce(((e,t)=>(e.indicators.push({type:t.type,indicators:t.indicators,weight:t?.weight}),e.annotations.push({type:t.type,annotations:t?.annotations||[]}),e)),{indicators:[],annotations:[]});(i=>{e.setItem(t,i)})(o),(t=>{e.setItem(i,t)})(n)},clear:()=>e.clear()}}),[h,o,y]);(0,g.useLayoutEffect)((()=>{const e=T.current?.getCandlestick();I.current!==h&&(e?.setAttr("needToReloadIndicator",!0),I.current=h),h&&(_.current=new oa(h,Z),e?.registerModule(Dt.Jj.settingManager,_.current),(async()=>{await(_.current?.loadStoreValue()),e?.update()})())}),[h]),(0,g.useImperativeHandle)(t,(()=>({getCandlestick:()=>T.current?.getCandlestick()}))),(0,g.useEffect)((()=>{(async()=>{const e=T.current?.getCandlestick();if(d)e?.removeVolIndicators();else{if(!O)return;const t=await O.getValue();e?.appendVolIndicators(t)}})()}),[d]),(0,g.useEffect)((()=>{const e=T.current?.registerColorTable;e&&B&&Object.keys(B).forEach((t=>{e(t,B[t])}))}),[B]),(0,g.useEffect)((()=>{a&&(0,di.mf)(a)?v.setLoadCallback(a):v.setLoadCallback((()=>{}))}),[a]),(0,g.useEffect)((()=>{let e=!1;const t=D.current;v.setDataProvider(i).setInterval(r).setSymbol(o);const n=!Mt()(M.current,o);try{v.triggerLoading(!0),t?.logOnFetchStart?.(),v.getData({},(i=>{t?.logOnFetchEnd?.(),e||(S(i),n||v.triggerLoading(!1))}),!0)}catch(e){na.error(`basic kline fetch data occured error: ${e.message}`),n||v.triggerLoading(!1)}v.subcribe((t=>{e||(x?.(t),k([{...t}]))}));const s=T.current?.getCandlestick();return n&&s?.resetChart(),M.current=o,()=>{e=!0,v.unSubcribe()}}),[r,o,i]),(0,g.useEffect)((()=>{let e=!1;const t=D.current,i=T.current?.getCandlestick();return i?.on("afterTimeShifted",sa,(0,_t.Ds)((({minTime:e,shiftedMinTime:t,cb:i})=>{v.isLoadAll?i&&i():e-t>(0,Dt.Sz)(v.interval)&&v.getData({startTime:t,endTime:e-1},(e=>{e.length>0&&S(e),i&&i()}))}),100)),O&&i?.on("saveChartNeeded",sa,(({data:t=[]})=>{i.isLoaded()&&!e&&O.setValue(t)})),i?.on("chartReady",sa,(async()=>{if(t?.logOnKlineReady?.(),e||!O||!f)return;const r=await O.getValue();if(await C({storedData:r}),!e){try{_.current&&i.registerModule(Dt.Jj.settingManager,_.current);const e=await(i?.loadChart(r||[]));t?.logOnCatchChart?.(e),i?.setAttr("needToReloadIndicator",!1)}catch(e){na.error("kline load chart occured error"),O.clear()}v.triggerLoading(!1)}})),()=>{i?.off("afterTimeShifted",sa),i?.off("saveChartNeeded",sa),i?.off("chartReady",sa),e=!0}}),[O,f]),(0,g.useEffect)((()=>{let e=!1;return(async()=>{if(!O||!R||!P)return;const t=T.current?.getCandlestick(),i=await O.getValue()||[];e||(R.toUpperCase()===It.oX.Line?i[0]?.indicators.forEach((e=>{const{type:i,isTriggeredByClick:r,visible:o}=e;t?.setIndicatorVisibleByName(i,!(!r||!o))})):i[0]?.indicators.forEach((e=>{const{type:i,isTriggeredByClick:r,visible:o}=e;t?.setIndicatorVisibleByName(i,!r||!!o)})))})(),()=>{e=!0}}),[R,O,P]),(0,g.useEffect)((()=>{const e=T.current?.getCandlestick();e?.setSymbolInfo({baseAsset:l,quoteAsset:c})}),[l,c]);const N=_.current?.isLoaded(),F=T.current?.getCandlestick()?.getSettingValues("@background.color");(0,g.useEffect)((()=>{A(F)}),[F]);const K=(0,g.useCallback)((async()=>{const e=_.current,t=T.current?.getCandlestick();if(!N||!e||!t)return;const i=e.getValues();e.setDefaultValue(Z);const r=i?.["@symbol"]||{},o=i?.["@background"]||{},n=i?.["@countdown"]||{};await e.setValues({...Z,...i,"@symbol":{...Z["@symbol"],candlestick:{style:r.candlestick.style},...!r.pristine&&r},"@background":{...Z["@background"],...!o.pristine&&o},"@countdown":{...Z["@coutndown"],...!o.pristine&&n},"@MACD":{...i["@MACD"],longGrowth:{...i["@MACD"].longGrowth,color:Z["@MACD"].longGrowth.color},longFall:{...i["@MACD"].longFall,color:Z["@MACD"].longFall.color},shortGrowth:{...i["@MACD"].shortGrowth,color:Z["@MACD"].shortGrowth.color},shortFall:{...i["@MACD"].shortFall,color:Z["@MACD"].shortFall.color}}}),t.update(),W(),A(e.getValues()["@background"].color)}),[N,Z]);return(0,g.useEffect)((()=>{K()}),[K]),(0,ft.Z)((()=>{const e=_.current;if(!e)return;const t=e.getSymbolDescription();e.setValue(t.styleKey,R)}),[R]),(0,g.useEffect)((()=>{_.current?.registerI18n(((e,t)=>b.getI18n?.(e,{defaultValue:t})||t))}),[b.getI18n]),g.createElement(qs,{...b,ref:T,seriesData:L,nextData:E,symbol:o,interval:r,settingStore:_.current,sensorsManager:p,theme:n,forceUpdate:W,background:V,defaultSettings:m})})),la=aa,ca={line:"LINE",histogram:"BAR",area:"AREA",point:"POINT",cross:"CROSSLINE"},ha={int:"INT",float:"FLOAT",source:"SOURCE"};var da=i(59712);const ua=e=>({defaultProps:{id:"",title:"",isCustom:!0,isHistBase:!1,isScaleCenter:!1},paramMetas:[],getResult(t,i,r){let o=-1;this.paramMetas=[],e.ChartInterface.Chart.input=e=>(-1===o&&(this.paramMetas=[]),o++,this.paramMetas.push({key:`params${o}`,label:e.title,type:ha[e.type],defaultValue:e.defval}),i[`params${o}`]||e.defval);try{e.runSync(t)}catch(e){da.warn(e.message)}const n=[],s=pt()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{},a=pt()(e.ChartInterface.Chart&&e.ChartInterface.Chart.fills)||[];Object.keys(s).forEach((e=>{const i=s[e],r=i.series||[],[o]=((e,t)=>t.map((t=>{const i=e.length-t.length;return t.map(((t,r)=>({time:e[r+i].time,value:t})))})))(t,[r]),l=ca[i.style];switch(l){case"POINT":case"AREA":case"BAR":case"LINE":Object.keys(a).forEach((e=>{const t=a[e];-1!==t.data.indexOf(i.id)&&(t.source||(t.source=[]),t.source.push(o))}));case"CROSSLINE":n.push({data:o,colors:i.color,transp:i.transp||0,chartType:l,lineWidth:i.linewidth,histBase:i.histbase,zIndex:1})}})),Object.keys(a).forEach((e=>{const t=a[e];n.push({data:t.source[0],borderData:t.source[1],colors:t.color,transp:t.transp||0,type:"nolabel",chartType:"AREA",zIndex:1})})),r(n)},updateResult(t,i,r,o){if(!o)return;try{e.update(o)}catch(e){da.warn(e)}const n=pt()(i),s=pt()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{};try{Object.keys(s).forEach(((e,i)=>{const r=s[e];n[i].data[t]=n[i].data[t]||{},n[i].data[t].time=o.time,n[i].data[t].value=r.series[t],n[i].colors=r.color}))}catch(e){da.warn(e)}return n},getLabel(e,t,i){const r=[];return 0===this.paramMetas.length?r.push({label:`${this.defaultProps.title||""}()`,key:"title",styles:{paddingRight:"0px"}}):r.push({label:`${this.defaultProps.title||""}(`,key:"title",styles:{paddingRight:"0px"}}),this.paramMetas.forEach(((e,t)=>{const o=this.paramMetas.find((e=>e.key===`params${t}`))?.defaultValue;r.push({label:t===this.paramMetas.length-1?`${i[`params${t}`]||o})`:`${i[`params${t}`]||o}`,key:`${t}`})})),t.forEach((({data:t,colors:o,type:n},s)=>{const a=t.findIndex((t=>t.time===e)),l=((e,t)=>{const i=((e,t)=>{let i,r=0,o=e.length;for(;r<o;){i=Math.floor((o+r)/2);let n=t(e[i]);if(n<0&&(o=i),0===n)return i;n>0&&(r=i+1)}return i=Math.floor((o+r)/2),i})(e,(e=>{const{time:i}=e;return t-i}));return e[i]&&e[i].time===t?e[i]:void 0})(t,e);if(l&&"nolabel"!==n){const e=`${c=l.value,h=i.precision,void 0!==h?Number(isNaN(c)?NaN:c?.toFixed(h)):c}`;r.push({label:e,key:`CUSTOM${s}`,styles:{color:o?.[a]}})}var c,h})),r},getMobileLabel:()=>[]}),ga=({bizType:e,symbolDisplay:t})=>{window.open(`binance://customindicator/${e}/workspace/${t}`)},ma=({checker:e,interval:t=1e3,timeout:i=1e4})=>{let r;return Promise.race([new Promise((i=>{r=setInterval((()=>e()&&i()),t)})),new Promise(((e,t)=>{setTimeout((()=>t(new Error("timeout"))),i)}))]).finally((()=>clearInterval(r)))};var pa=i(59712);const ya=(e,t)=>{try{return JSON.parse(e)}catch{return t||e}};var xa=i(73656);const fa=(0,g.forwardRef)((({klineOptions:e,showIndicatorMenu:t,customIndicators:r=[],electronShortcutOptions:o={symbol:"",value:"",options:[],setInterval:()=>null,setChartType:()=>null,enabled:!1},userDefinedIndicatorOptions:n={getNextChartTick:()=>null,setMessageInfo:()=>null,symbolDisplay:"",bizType:"",enabled:!1,compiler:null,electron:{}}},s)=>{const a=(0,g.useRef)(null),l=(0,g.useRef)(null),c=(0,g.useRef)(n?.symbolDisplay);c.current=n?.symbolDisplay,(0,g.useEffect)((()=>{xa.electron&&(async()=>{const e=await Promise.all([i.e(8057),i.e(4804)]).then(i.bind(i,38057));l.current=e.Compiler})()}),[]),(0,g.useImperativeHandle)(s,(()=>({getCandlestick:()=>a.current?.getCandlestick(),registerColorTable:()=>null}))),(0,ft.Z)((()=>{a.current?.getCandlestick?.()?.showIndicatorsDialog()}),[t]),(({candlestick:e,options:t,symbol:i,value:r,setInterval:o,setChartType:n,electron:s,enabled:a})=>{const[l,c]=(0,g.useState)(!1),h=(0,g.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),d=(0,g.useCallback)((()=>c(!0)),[c]),u=(0,g.useCallback)((e=>t=>{t.target?.matches(".focus-area")||t.composedPath().some((t=>e.includes(t)))||c(!1)}),[c]),m=(0,g.useCallback)((t=>{if(l)switch(t.key){case"+":case"ArrowUp":e?.zoomIn(),h(t);break;case"-":case"ArrowDown":e?.zoomOut(),h(t);break;case"ArrowLeft":e?.goForward(),h(t);break;case"ArrowRight":e?.goNext(),h(t)}}),[h,l,e]),p=(0,g.useCallback)((()=>{let e=t.indexOf(r)+1;const i=t[e%t.length];o("Time"===i?"1m":i),n("Time"===i?It.oX.Line:It.oX.CandleBar)}),[r,t,o,n]);(0,g.useEffect)((()=>{if(!a||!s)return;const e=document.querySelectorAll(".focus-area"),t=u(Array.from(e));e.forEach((e=>e.addEventListener("click",d))),document.addEventListener("click",t),document.addEventListener("keydown",m);const i=s.registerActionHandle((({name:e})=>{l&&e===s.constants.ACTION_K_LINE_SWITCH_PERIOD&&p()}));return()=>{i(),e?.forEach((e=>e.removeEventListener("click",d))),document.removeEventListener("click",t),document.removeEventListener("keydown",m)}}),[l,i,h,d,u,m,p,s,a])})({...o,candlestick:a.current?.getCandlestick()});const h=e.beforeChartReady,d=(0,g.useCallback)((()=>(({customIndicators:e,candleRef:t})=>{e.forEach((({name:e,indicator:i})=>{t.current?.getCandlestick?.()?.registerCustomIndicator(e,i)}))})({candleRef:a,customIndicators:r})),[r]),u=(0,g.useCallback)((e=>(async({candleRef:e,symbolDisplayRef:t,bizType:i,setMessageInfo:r,storedData:o,electron:n,enabled:s,compiler:a})=>{if(!s||!n||!e.current)return;try{await ma({checker:()=>!!a})}catch(e){pa.error(`Compiler module not found ${e.message}`)}if(!a)return;const l=new a,c=e.current?.getCandlestick();let h,d;const u=()=>{l.Errors?.length<=0||r({message:"Failed to compile custom indicator, please check your code!",variant:"error",autoHideDuration:3500})},g=await(n?.storage.getItem("customIndicatorPassFiles")),m=ya(g);m&&(h=m,Object.entries(h).forEach((([e,t])=>{const i=t.id||`@${e}_v1`;c?.registerCustomIndicator(i,{defaultProps:{isCustom:!0,id:i,title:e}})})));const p=function(e){const t=e.length;return function i(r){if(r>=t)return null;const{indicators:o}=e[r];return o?.find((e=>e.isCustom))||i(r+1)}(0)}(o||[]);if(p){const{id:e,name:t,type:i}=p,r=m[i]||m[t];if(r){const{code:i}=r;try{l.compile(i),u(),l.runOnce();const r=ua(l),o=l.ChartInterface?.Chart;o.study&&(r.defaultProps={...r.defaultProps,isHistBase:o.study.overlay||!1,title:t||o.study.title||"",isScaleCenter:!0,isCustom:!0,id:e}),c?.registerCustomIndicator(e,r),c?.addIndicatorByName(e),d=e}catch(e){pa.error(e)}}}c?.registerCustomIndicatorCallback({onAdd:async()=>{const e=await(n?.storage.getItem("customIndicatorPassFiles")),r=ya(e,{}),o=Object.keys(r);if(o.find((e=>e.startsWith("untitled-")))){const e=Math.max.apply(null,o.filter((e=>e.startsWith("untitled-"))).map((e=>+e.split("-")[1])));await(n?.storage.setItem("customIndicatorCurFileName",`untitled-${e+1}`))}else o.find((e=>e.startsWith("untitled")))?await(n?.storage.setItem("customIndicatorCurFileName","untitled-1")):await(n?.storage.setItem("customIndicatorCurFileName","untitled"));ga({symbolDisplay:t.current,bizType:i})},onEdit:async({name:e})=>{await(n?.storage.setItem("customIndicatorCurFileName",e)),ga({symbolDisplay:t.current,bizType:i})},async onRemove(e){c.removeCustomIndicatorByName(e);const t=await(n?.storage.getItem("customIndicatorPassFiles")),i=ya(t,{}),r=Object.fromEntries(Object.entries(i).filter((([t,i])=>(i.id||`@${t}_v1`)!==e)));await(n?.storage.setItem("customIndicatorPassFiles",JSON.stringify(r)))}}),c?.on("customIndicatorClick",(({data:{name:e,id:t}})=>{c.closeIndicatorByName(d);const{code:i=""}=h?.[e]||h?.[t]||{};try{l.compile(i),u(),l.runOnce();const r=ua(l),o=l.ChartInterface.Chart;o.study&&(r.defaultProps={...r.defaultProps,isHistBase:o.study.overlay||!1,title:e||o.study.title||"",isScaleCenter:!0,isCustom:!0,id:t}),c.registerCustomIndicator(t,r),c.addIndicatorByName(t),d=t}catch(e){pa.error(e)}}))})({...n,symbolDisplayRef:c,compiler:l.current,enabled:!!xa.electron,storedData:e.storedData,candleRef:a})),[n]),m=(0,g.useCallback)((async e=>{await(h?.(e)),d(),await u(e)}),[d,u,h]),p=(0,g.useMemo)((()=>kt()(m)),[]);return g.createElement(la,{style:{width:"100%",height:"100%",position:"relative"},...e,beforeChartReady:p,ref:a})})),Ca=({promptText:e,buttonText:t,onClick:i})=>g.createElement(m.Z,{sx:{flexDirection:"column",px:"4px",py:"4px"}},g.createElement(b.Z,{sx:{color:"bg5",fontSize:"14px"}},e),g.createElement(m.Z,{sx:{justifyContent:"flex-end",marginTop:"10px"}},g.createElement(A.Z,{onClick:i,sx:{borderRadius:"12px",bg:"t.white",backgroundImage:"none",color:"bg5",minWidth:"62px",height:"24px"}},t)));var ba=i(48330),wa=i(74730),va=i(75343),La=i(79025),Sa=i(73656);const Ea=({basicKline:e,tradingView:t,depth:i,symbol:r,namespace:o,unmountTime:n=6e5,electron:s})=>{const a=(0,va.createStore)(o),l=(0,La.createStore)(o),[c,h]=(0,g.useState)(!1),[d,u]=(0,g.useState)(!1),[m,p]=(0,g.useState)(!1),y=(0,g.useRef)(),x=(0,g.useRef)(!0),[f]=a(va.getActiveTab),[C]=a(va.getInterval),[b]=a(va.getPriceType),[w,v]=l(La.getTvKey),[L,S]=l(La.getCandlestickKey);(0,g.useEffect)((()=>{const e=()=>{v(),S()};return window.addEventListener("online",e),()=>window.removeEventListener("online",e)}),[S,v]);const E=(0,g.useCallback)((({key:e,newValue:t,oldValue:i})=>{"customIndicatorPassFilesTime"!==e&&"customIndicatorPassFiles"!==e||t===i||S()}),[S]);return(0,g.useEffect)((()=>(Sa.electron?s?.storage.onStorageEvent(E):window.addEventListener("storage",E),()=>window.removeEventListener("storage",E))),[s?.storage,E]),(0,g.useEffect)((()=>{if(f===va.Tabs.TradingView&&x.current&&(x.current=!1),f===va.Tabs.TradingView){if(u(!1),clearTimeout(y.current),y.current=window.setTimeout(h,n,!0),!m)return;S(),p(!1)}else if(f===va.Tabs.Origin){if(h(!1),clearTimeout(y.current),y.current=window.setTimeout(u,n,!0),!m)return;S(),p(!1)}else f===va.Tabs.Depth&&(clearTimeout(y.current),y.current=window.setTimeout((()=>{h(!0),u(!0),p(!0)}),n));return()=>clearTimeout(y.current)}),[f]),(0,g.useEffect)((()=>{switch(f){case va.Tabs.TradingView:h(!0);break;case va.Tabs.Origin:u(!0)}}),[r,C,b]),g.createElement(g.Fragment,null,c?null:g.createElement(g.Fragment,{key:`bk-${L}`},e({symbol:r,namespace:o})),d||x.current&&f!==va.Tabs.TradingView?null:g.createElement(g.Fragment,{key:`tv-${w}`},t({symbol:r,namespace:o})),f===va.Tabs.Depth?i({symbol:r,namespace:o}):null)};var ka=i(30923),Va=i(27166);const Aa=(e,t)=>{const i=localStorage.getItem(e);if(""===i||null==i)return;let r=i;try{r=JSON.parse(i)}catch(e){}""!==r&&null!=r&&(t(r),localStorage.removeItem(e))};var Ta=i(73656);const Ma=Object.values(va.DisplayIntervals),Da=g.lazy((()=>i.e(9050).then(i.bind(i,29050))));var Ia=i(26312),_a=i(20324);const Pa={hasError:!1,error:null,info:null};class Wa extends g.Component{constructor(){super(...arguments),this.state=Pa,this.resetErrorBoundary=(...e)=>{this.props?.onReset?.apply(this,e),this.setState(Pa)}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){const{track:i}=this.props;"undefined"!=typeof Sentry&&Sentry.configureScope((t=>{t.setTag("widget",this.props.name),t.setExtra("widget",this.props.name),Sentry.captureException(e)})),this.props.onError?.(e,t?.componentStack),i&&i("widget_error",{widget:this.props.name}),this.setState({error:e,info:t,hasError:!0})}componentDidMount(){const{onComponentMounting:e}=this.props;e&&e()}render(){const{error:e,info:t,hasError:i}=this.state,{fallbackRender:r,FallbackComponent:o,fallback:n}=this.props;if(i){const i={componentStack:t?.componentStack,error:e,resetErrorBoundary:this.resetErrorBoundary};return g.isValidElement(n)?n:"function"==typeof r?r(i):"function"==typeof o?g.createElement(o,{...i}):g.createElement(b.Z,{fontSize:3,color:"t.primary",p:3},`${this.props.name||"Something"} went wrong.`)}return this.props.children}}const Ra=Wa,Ba={line:"LINE",histogram:"BAR",area:"AREA",point:"POINT",cross:"CROSSLINE"},Ha={int:"INT",float:"FLOAT",source:"SOURCE"};var Za=i(59712);const Oa=e=>({defaultProps:{id:"",title:"",isCustom:!0,isHistBase:!1,isScaleCenter:!1},paramMetas:[],getResult(t,i,r){let o=-1;this.paramMetas=[],e.ChartInterface.Chart.input=e=>(-1===o&&(this.paramMetas=[]),o++,this.paramMetas.push({key:`params${o}`,label:e.title,type:Ha[e.type],defaultValue:e.defval}),i[`params${o}`]||e.defval);try{e.runSync(t)}catch(e){Za.warn(e.message)}const n=[],s=pt()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{},a=pt()(e.ChartInterface.Chart&&e.ChartInterface.Chart.fills)||[];Object.keys(s).forEach((e=>{const i=s[e],r=i.series||[],[o]=((e,t)=>t.map((t=>{const i=e.length-t.length;return t.map(((t,r)=>({time:e[r+i].time,value:t})))})))(t,[r]),l=Ba[i.style];switch(l){case"POINT":case"AREA":case"BAR":case"LINE":Object.keys(a).forEach((e=>{const t=a[e];-1!==t.data.indexOf(i.id)&&(t.source||(t.source=[]),t.source.push(o))}));case"CROSSLINE":n.push({data:o,colors:i.color,transp:i.transp||0,chartType:l,lineWidth:i.linewidth,histBase:i.histbase,zIndex:1})}})),Object.keys(a).forEach((e=>{const t=a[e];n.push({data:t.source[0],borderData:t.source[1],colors:t.color,transp:t.transp||0,type:"nolabel",chartType:"AREA",zIndex:1})})),r(n)},updateResult(t,i,r,o){if(!o)return;try{e.update(o)}catch(e){Za.warn(e)}const n=pt()(i),s=pt()(e.ChartInterface.Chart&&e.ChartInterface.Chart.plots)||{};try{Object.keys(s).forEach(((e,i)=>{const r=s[e];n[i].data[t]=n[i].data[t]||{},n[i].data[t].time=o.time,n[i].data[t].value=r.series[t],n[i].colors=r.color}))}catch(e){Za.warn(e)}return n},getLabel(e,t,i){const r=[];return 0===this.paramMetas.length?r.push({label:`${this.defaultProps.title||""}()`,key:"title",styles:{paddingRight:"0px"}}):r.push({label:`${this.defaultProps.title||""}(`,key:"title",styles:{paddingRight:"0px"}}),this.paramMetas.forEach(((e,t)=>{const o=this.paramMetas.find((e=>e.key===`params${t}`))?.defaultValue;r.push({label:t===this.paramMetas.length-1?`${i[`params${t}`]||o})`:`${i[`params${t}`]||o}`,key:`${t}`})})),t.forEach((({data:t,colors:o,type:n},s)=>{const a=t.findIndex((t=>t.time===e)),l=((e,t)=>{const i=((e,t)=>{let i,r=0,o=e.length;for(;r<o;){i=Math.floor((o+r)/2);let n=t(e[i]);if(n<0&&(o=i),0===n)return i;n>0&&(r=i+1)}return i=Math.floor((o+r)/2),i})(e,(e=>{const{time:i}=e;return t-i}));return e[i]&&e[i].time===t?e[i]:void 0})(t,e);if(l&&"nolabel"!==n){const e=`${c=l.value,h=i.precision,void 0!==h?Number(isNaN(c)?NaN:c?.toFixed(h)):c}`;r.push({label:e,key:`CUSTOM${s}`,styles:{color:o?.[a]}})}var c,h})),r},getMobileLabel:()=>[]});var Na=i(73656);const Fa=({bizType:e,symbolDisplay:t})=>{const i=`${e}/workspace/${t}`,r=window?.location.pathname.split("/")[1]||"en";Na.electron?window.open(`binance://customindicator/${i}`):(({url:e,width:t,height:i})=>{const r=window?.screenLeft||window.screenX,o=window?.screenTop||window.screenY,n=window?.innerWidth||document.documentElement?.clientWidth||screen.width,s=window?.innerHeight||document.documentElement?.clientHeight||screen.height,a=n/window.screen.availWidth,l=(s-i)/2/a+o,c=(n-t)/2/a+r,h=window.open(e,"_blank",`\n    popup=true,\n    width=${t},\n    height=${i},\n    top=${l},\n    left=${c}`);h?.focus()})({url:`/${r}/customindicator/${i}`,width:1e3,height:600})};var Ka=i(59712);const Ua=(e,t)=>{try{return JSON.parse(e)}catch{return t||e}},$a=({isBuy:e,theme:t})=>{const i=e?t?.colors?.buy:t?.colors?.sell;return{dragSquareIconColor:i,dragSquareBackgroundColor:t?.colors?.popupBg,dragSquareDraggingBackgroundColor:t?.colors?.line,closeIconColor:t?.colors?.t?.secondary,priceBackground:i,priceColor:t?.colors?.t?.primary,priceBorderColor:i,quantityBackground:t?.colors?.popupBg,quantityColor:t?.colors?.t?.primary,quantityBorderColor:t?.colors?.line,borderColor:t?.colors?.line,priceLabelBackground:t?.colors?.moduleBg,priceLabelBorderColor:i,priceLabelColor:i,background:t?.colors?.popupBg,lineColor:i,lineDash:[2,2],draggingLineDash:[0,0],tooltipBorderColor:t?.colors?.tooltipBg,tooltipBackgroundColor:t?.colors?.tooltipBg,tooltipTextColor:t?.colors?.t?.primary}},za=({isBuy:e,pnl:t,theme:i})=>{const r=e?i?.colors?.buy:i?.colors?.sell,o=t>0?i?.colors?.buy:t<0?i?.colors?.sell:r;return{priceColor:i?.colors?.t?.primary,priceBackgroundColor:o,priceBorderColor:o,quantityColor:i?.colors?.t?.primary,quantityBackgroundColor:i?.colors?.popupBg,quantityBorderColor:r,priceLabelColor:i?.colors?.t?.white,priceLabelBackgroundColor:r,priceLabelBorderColor:r,lineColor:r,lineDash:[2,2]}},Xa=({isBuy:e,theme:t})=>({color:e?t?.colors?.buy:t?.colors?.sell,tooltipBorderColor:t?.colors?.bg4,tooltipBackgroundColor:t?.colors?.bg4,tooltipTextColor:t?.colors?.t?.white});var Ga=i(73656);const Ya=({klineOptions:e,customIndicators:t=[],setMessageInfo:r=(()=>null),symbolDisplay:o="",bizType:n="",orders:s=[],positions:a=[],executionOrders:l=[],theme:c,enableCustomIndicator:h=!!Ga.electron,electron:d={}})=>{const u=(0,va.createStore)(e.namespace),m=(0,La.createStore)(e.namespace),[p]=u(va.getChartMode),[y]=u(va.getInterval),x=u(va.getTrueInterval),[f,C]=u(va.getOriginalChartStyle),[b]=u(va.getPriceType),[w]=u(va.getActiveTab),[,v]=m(La.getLoading),{isMobile:S,isIPad:E}=(0,cs.F)(),[k,V]=m(La.getCandlestickReference),A=y===va.DisplayIntervals.Time?It.oX.Line:f,T=(0,g.useMemo)((()=>h&&!S&&!E),[h,E,S]),M=(0,g.useCallback)(((e,t)=>{"@symbol.candlestick.style"===e&&C(t)}),[C]),{getI18n:D}=(0,Ia.Z)("","kline-ui"),[I,_]=(0,g.useState)(1),P=(0,g.useMemo)((()=>`${e.symbol}${I}`),[e.symbol,I]),W=(0,g.useCallback)((e=>w===va.Tabs.Origin&&v(e)),[w,v]),R=(0,g.useCallback)((()=>_((e=>e+1))),[_]),B=(0,_a.z)((()=>{x!==va.DisplayIntervals["1M"]&&x!==va.DisplayIntervals["1s"]&&R()}),1e3),H=(0,g.useRef)(null),Z=(0,g.useRef)(null),O=(0,g.useRef)(o);(0,g.useEffect)((()=>{O.current=o}),[o]),(0,g.useEffect)((()=>{V(H.current?.getCandlestick())}),[V,e.symbol]),(0,g.useEffect)((()=>{k&&k.on("dispatchErrorData",B)}),[k,B]),(0,g.useEffect)((()=>{T&&(async()=>{const e=await Promise.all([i.e(8057),i.e(4804)]).then(i.bind(i,38057));Z.current=e.Compiler})()}),[T]);const N=(0,g.useCallback)((()=>(({customIndicators:e,candleRef:t})=>{e.forEach((({name:e,indicator:i})=>{t.current?.getCandlestick?.()?.registerCustomIndicator(e,i)}))})({candleRef:H,customIndicators:t})),[t]),F=(0,g.useCallback)((async e=>Ga.electron?d?.storage.getItem(e):window.localStorage.getItem(e)||""),[d?.storage]),K=(0,g.useCallback)((async(e,t)=>{Ga.electron?d?.storage.setItem(e,t):window.localStorage.setItem(e,t)}),[d?.storage]),U=(0,g.useCallback)((e=>(async({candleRef:e,symbolDisplayRef:t,bizType:i,setMessageInfo:r,storedData:o,enabled:n,compiler:s,onGetStorageItem:a,onSetStorageItem:l})=>{if(!n||!e.current)return;try{await ma({checker:()=>!!s})}catch(e){Ka.error(`Compiler module not found ${e.message}`)}if(!s)return;const c=new s,h=e.current.getCandlestick();let d,u;const g=()=>{c.Errors?.length<=0||r({message:"Failed to compile custom indicator, please check your code!",variant:"error",autoHideDuration:3500})},m=await a("customIndicatorPassFiles"),p=Ua(m);p&&(d=p,Object.entries(d).forEach((([e,t])=>{const i=t.id||`@${e}_v1`;h?.registerCustomIndicator(i,{defaultProps:{isCustom:!0,id:i,title:e}})})));const y=function(e){const t=e.length;return function i(r){if(r>=t)return null;const{indicators:o}=e[r];return o?.find((e=>e.isCustom))||i(r+1)}(0)}(o||[]);if(y){const{id:e,name:t,type:i}=y,r=p[i]||p[t];if(r){const{code:i}=r;try{c.compile(i),g(),c.runOnce();const r=Oa(c),o=c.ChartInterface?.Chart;o.study&&(r.defaultProps={...r.defaultProps,isHistBase:o.study.overlay||!1,title:t||o.study.title||"",isScaleCenter:!0,isCustom:!0,id:e}),h?.registerCustomIndicator(e,r),h?.addIndicatorByName(e),u=e}catch(e){Ka.error(e)}}}h?.registerCustomIndicatorCallback({onAdd:async()=>{const e=await a("customIndicatorPassFiles"),r=Ua(e,{}),o=Object.keys(r);if(o.find((e=>e.startsWith("untitled-")))){const e=Math.max.apply(null,o.filter((e=>e.startsWith("untitled-"))).map((e=>+e.split("-")[1])));await l("customIndicatorCurFileName",`untitled-${e+1}`)}else o.find((e=>e.startsWith("untitled")))?await l("customIndicatorCurFileName","untitled-1"):await l("customIndicatorCurFileName","untitled");Fa({symbolDisplay:t.current,bizType:i})},onEdit:async({name:e})=>{await l("customIndicatorCurFileName",e),Fa({symbolDisplay:t.current,bizType:i})},async onRemove(e){h.removeCustomIndicatorByName(e);const t=await a("customIndicatorPassFiles"),i=Ua(t,{}),r=Object.fromEntries(Object.entries(i).filter((([t,i])=>(i.id||`@${t}_v1`)!==e)));await l("customIndicatorPassFiles",JSON.stringify(r))}}),h?.on("customIndicatorClick",(({data:{name:e,id:t}})=>{h.closeIndicatorByName(u);const{code:i=""}=d?.[e]||d?.[t]||{};try{c.compile(i),g(),c.runOnce();const r=Oa(c),o=c.ChartInterface.Chart;o.study&&(r.defaultProps={...r.defaultProps,isHistBase:o.study.overlay||!1,title:e||o.study.title||"",isScaleCenter:!0,isCustom:!0,id:t}),h.registerCustomIndicator(t,r),h.addIndicatorByName(t),u=t}catch(e){Ka.error(e)}}))})({setMessageInfo:r,bizType:n,symbolDisplayRef:O,compiler:Z.current,enabled:T,storedData:e.storedData,candleRef:H,onGetStorageItem:F,onSetStorageItem:K})),[n,F,K,r,T]),$=(0,g.useCallback)((async t=>{await(e.beforeChartReady?.(t)),N(),await U(t)}),[N,U,e]),z=(0,g.useMemo)((()=>kt()($)),[]);return(({namespace:e,orders:t,theme:i})=>{const r=(0,va.createStore)(e),o=(0,La.createStore)(e),[n]=r(va.getShowLimitOrder),[s]=o(La.getCandlestickReference),{getI18n:a}=(0,Ia.Z)("","kline-ui"),l=(0,g.useMemo)((()=>a("order-drag-tooltip",{defaultValue:"Drag for price modify"})),[a]),c=(0,g.useMemo)((()=>a("order-modify-tooltip",{defaultValue:"Click for modify"})),[a]),h=(0,g.useMemo)((()=>a("order-cancel-tooltip",{defaultValue:"Click for cancel"})),[a]),d=(0,g.useMemo)((()=>t.map((({isBuy:e,...t})=>({...t,...$a({isBuy:e,theme:i}),priceTooltipText:l,quantityTooltipText:c,closeTooltipText:h})))),[h,t,l,c,i]);(0,g.useEffect)((()=>{const t=e&&n?d:[];s?.manageOrderLines(t)}),[s,e,d,n])})({namespace:e.namespace,orders:s,theme:c}),(({namespace:e,positions:t,theme:i})=>{const r=(0,va.createStore)(e),o=(0,La.createStore)(e),[n]=r(va.getShowPositionOrder),[s]=o(La.getCandlestickReference);(0,g.useEffect)((()=>(e&&n&&t.forEach((({isBuy:e,...t})=>{s?.createPositionLine({...t,...za({isBuy:e,pnl:+(t?.pnl||0),theme:i})})})),()=>s?.deleteAllPositionShape())),[s,e,t,n,i])})({namespace:e.namespace,positions:a,theme:c}),(({namespace:e,executionOrders:t,theme:i})=>{const r=(0,va.createStore)(e),o=(0,La.createStore)(e),[n]=r(va.getShowExecutionOrder),[s]=o(La.getCandlestickReference),a=(0,g.useMemo)((()=>t.map((e=>({...e,...Xa({isBuy:e.isBuy,theme:i})})))),[t,i]);(0,g.useEffect)((()=>{const t=e&&n?a:[];s?.manageExecutionOrders({orders:t})}),[s,e,a,n])})({namespace:e.namespace,executionOrders:l,theme:c}),g.createElement(L.Z,{key:P,className:"focus-area","data-testid":"kline",sx:{flex:1,overflow:"hidden",height:"100%",display:w!==va.Tabs.Origin?"none":"block"}},g.createElement(la,{...e,style:{width:"100%",height:"100%",position:"relative"},beforeChartReady:z,ref:H,getI18n:D,interval:x,candlestick:{type:A,isFloor:!0,...e.candlestick},isStock:b!==va.PriceType.Last,setLoading:W,isShowDrawPanel:p===va.ChartMode.Single,isShowAnnotationPanel:p===va.ChartMode.Single,isShowCustomIndicator:T,onSettingChanged:M}))};var ja=i(79607);const qa=["1S","1","3","5","15","30","60","120","240","360","480","720","1D","3D","1W","1M"],Qa={createDatafeed:gt,createDatafeedTP:()=>{const e=new Map;let t={},i=[],r={onReady:()=>null,resolveSymbol:()=>null,searchSymbols:()=>null,getBars:()=>null,subscribeBars:()=>null,unsubscribeBars:()=>null};return({config:o,onSymbolResolved:n,onFetchSymbolsInfo:s,onFetchBars:a,onSubscribeBars:l,onUnsubscribeBars:c,onFetchServerTimeApi:h,onTransformSymbolInfo:d=(({template:e})=>e)})=>(r={onReady:e=>{setTimeout((async()=>{t=await s(),i=Object.keys(t).map((e=>{const{ticker:i,name:r,fullName:o,description:n="",exchange:s="",type:a=""}=t[e];return{symbol:r,ticker:i,full_name:o,description:n,exchange:s,type:a}})),e({exchanges:[],symbols_types:[],supported_resolutions:qa,supports_marks:!1,supports_timescale_marks:!1,supports_time:!0,...o})}))},resolveSymbol:(e,i,r)=>{const o=t[e];if(!o)return void r(`cannot resolve symbol - ${e}`);const s=d({info:o,template:{description:o.description||"",fractional:!1,has_seconds:!0,seconds_multipliers:["1"],has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,minmov:1,minmove2:0,name:o.name,full_name:o.fullName,ticker:o.ticker,timezone:"Etc/UTC",pricescale:o.tickSize,session:"24x7",type:o.type||"",exchange:o.exchange||"",listed_exchange:o.exchange||"",format:"price",supported_resolutions:o.supportedResolutions||qa}});setTimeout((()=>{i(s),n?.(s)}))},searchSymbols:(e,t,r,o)=>{const n=new RegExp(e,"i"),s=new RegExp(t,"i"),a=new RegExp(r,"i");o(i.filter((({symbol:e,ticker:t,full_name:i,description:r="",exchange:o="",type:l=""})=>[e,t,i,r].some((e=>n.test(e)))&&s.test(o)&&a.test(l))))},getBars:async(e,t,i,r,o)=>{const{from:n,to:s}=i;let l=[];try{s>=0&&(l=await a({symbolInfo:e,resolution:t,rangeStartDate:n,rangeEndDate:s})),r(l,{noData:0===l.length})}catch(e){o(e.toString())}},subscribeBars:(t,i,r,o,n)=>{const s=l({symbolInfo:t,resolution:i,callback:r,onResetCacheNeededCallback:n});e.set(o,s)},unsubscribeBars:t=>{e?.get(t)?.(),e?.delete(t),c?.(t)},getServerTime:async e=>{try{e(await h())}catch(t){e(Date.now()/1e3)}}},{datafeed:r,observers:e,symbolsInfo:t})}},Ja={[va.DisplayIntervals["1s"]]:"1S",[va.DisplayIntervals["1m"]]:"1",[va.DisplayIntervals["3m"]]:"3",[va.DisplayIntervals["5m"]]:"5",[va.DisplayIntervals["15m"]]:"15",[va.DisplayIntervals["30m"]]:"30",[va.DisplayIntervals["1h"]]:"60",[va.DisplayIntervals["2h"]]:"120",[va.DisplayIntervals["4h"]]:"240",[va.DisplayIntervals["6h"]]:"360",[va.DisplayIntervals["8h"]]:"480",[va.DisplayIntervals["12h"]]:"720",[va.DisplayIntervals["1d"]]:"1D",[va.DisplayIntervals["3d"]]:"3D",[va.DisplayIntervals["1w"]]:"1W",[va.DisplayIntervals["1M"]]:"1M"},el={"1S":va.DisplayIntervals["1s"],1:va.DisplayIntervals["1m"],3:va.DisplayIntervals["3m"],5:va.DisplayIntervals["5m"],15:va.DisplayIntervals["15m"],30:va.DisplayIntervals["30m"],60:va.DisplayIntervals["1h"],120:va.DisplayIntervals["2h"],240:va.DisplayIntervals["4h"],360:va.DisplayIntervals["6h"],480:va.DisplayIntervals["8h"],720:va.DisplayIntervals["12h"],"1D":va.DisplayIntervals["1d"],"3D":va.DisplayIntervals["3d"],"1W":va.DisplayIntervals["1w"],"1M":va.DisplayIntervals["1M"]},tl=e=>{const[,t,i]=/^(\d+)(\w)$/.exec(e)||[],r=+t;switch(i){case"M":return 1e3*r*60*60*24*30;case"w":return 1e3*r*60*60*24*7;case"d":return 1e3*r*60*60*24;case"h":return 1e3*r*60*60;case"m":return 1e3*r*60;default:return 1e3*r}},il=(e,t)=>{const i=tl(t);for(let t=0;t<e.length;t++){const r=e[t];if(tl(r)%i==0)return r}return null},rl=e=>{const[t]=e.reduce(((e,t)=>{const i=tl(t),[,r]=e;return i>r?[t,i]:e}),["",Number.MIN_SAFE_INTEGER]);return t};var ol=i(85022),nl=i(57386),sl=i(47176);const al="myTradingView",ll=e=>(0,g.useMemo)((()=>At().createInstance({name:e})),[e]),cl=({tradingViewProps:e,namespace:t,theme:i,storageName:r=al,containerId:o=`${t}-tradingview`})=>{const n=(0,va.createStore)(t),s=(0,La.createStore)(t),a=(0,g.useRef)(),l=ll(t),[c]=n(va.getInterval),h=n(va.getTrueInterval),[d]=n(va.getActiveTab),[u]=n(va.getTvChartStyle),[m]=n(va.getShowLimitOrder),[p]=n(va.getShowPositionOrder),[y]=n(va.getShowExecutionOrder),[,x]=s(La.getLoading),[,f]=s(La.getTradingViewReference),{getI18n:C}=(0,Ia.Z)("","kline-ui"),b=(0,ja.tZ)(),w=(0,g.useMemo)((()=>(e=>{switch(e){case"zh-CN":case"cn":return"zh";case"zh-HK":case"zh-TW":case"zh-TC":case"tw":return"zh_TW";case"ja":return"ja";case"ko":return"ko";case"th":return"th";case"he":return"he_IL";case"ru":return"ru";case"cs":return"cs";case"sv":return"sv";case"vi":case"vn":return"vi";case"tr":return"tr";case"ro":return"ro";case"pt-PT":case"pt-BR":case"pt":return"pt";case"pl":return"pl";case"nl":return"nl_NL";case"it":return"it";case"fr":return"fr";case"es":case"es-LA":return"es";case"de":return"de";case"id":return"id_ID";default:return"en"}})(b)),[b]),v=(0,g.useMemo)((()=>C("order-drag-tooltip",{defaultValue:"Drag for price modify"})||""),[C]),S=(0,g.useMemo)((()=>C("order-modify-tooltip",{defaultValue:"Click for modify"})||""),[C]),E=(0,g.useMemo)((()=>C("order-cancel-tooltip",{defaultValue:"Click for cancel"})||""),[C]),k=(0,g.useMemo)((()=>e.limitOrders.map((e=>({...e,tooltip:e.tooltip||v,modifyTooltip:e.modifyTooltip||S,cancelTooltip:e.cancelTooltip||E})))),[E,v,S,e.limitOrders]),{onSetThemeDone:V,overwritingThemeOnLoaded:A}=(({namespace:e})=>{const{getThemeCounter:t}=(0,sl.Fg)(),[i,r]=(0,ol.Z)(`${e}_tvThemeCounter`,0),[o,n]=(0,g.useState)(-1),s=(0,g.useCallback)((()=>n(t())),[t]);(0,nl.Z)((()=>s())),(0,ft.Z)((()=>s()));const a=(0,g.useCallback)((()=>{r(t())}),[t,r]),l=(0,g.useMemo)((()=>-1!==o),[o]);return{onSetThemeDone:a,overwritingThemeOnLoaded:(0,g.useMemo)((()=>l&&o!==i),[l,o,i])}})({namespace:t}),T=(0,g.useMemo)((()=>dt(i)),[i]),M=(0,g.useMemo)((()=>`${t}-${o}`),[o,t]),D=(0,g.useMemo)((()=>c===va.DisplayIntervals.Time?va.SeriesStyle.Line:u),[c,u]),I=(0,g.useMemo)((()=>Ja[h]),[h]),_=(0,g.useCallback)((async t=>{await l.setItem(r,t),await(e.initialConfig.onSave?.(t))}),[l,r,e.initialConfig]),P=(0,g.useCallback)((async()=>{const t=await l.getItem(r);return e.initialConfig.onLoadConfig?.(),t}),[l,r,e.initialConfig]),W=(0,g.useCallback)((t=>{x(t),e.initialConfig.onLoading?.(t)}),[x,e.initialConfig]),R=(0,g.useCallback)((()=>{f(a.current),e.initialConfig.onChartReadyDone?.()}),[f,e.initialConfig]),B=(0,g.useCallback)((()=>{V(),e.initialConfig.onSetThemeDone?.()}),[V,e.initialConfig]),H=(0,g.useCallback)((()=>{V(),e.initialConfig.onFirstTimeSetThemeDone?.()}),[V,e.initialConfig]),Z=(0,g.useCallback)((({widget:e,tradingViewSave:t})=>{t||(e.chart().createStudy("Moving Average",!1,!1,[7],{"plot.linewidth":1,"plot.color":"rgba(241, 156, 56, 0.7)",precision:8}),e.chart().createStudy("Moving Average",!1,!1,[25],{"plot.linewidth":1,"plot.color":"rgba(234, 61, 247, 0.7)",precision:8}),e.chart().createStudy("Moving Average",!1,!1,[99],{"plot.linewidth":1,"plot.color":"rgba(116, 252, 253, 0.7)",precision:8}))}),[]),O=(0,g.useMemo)((()=>e.initialConfig.onInitStudies||Z),[Z,e.initialConfig.onInitStudies]),{showError:N,mainText:F,buttonText:K,buttonCallback:U,onScriptLoadingError:$,onTradingViewInitError:z,onChartReadyError:X}=(({storage:e,storageName:t})=>{const{getI18n:i}=(0,Ia.Z)("","trade-ui"),r=(0,g.useMemo)((()=>i("trd-chart-tv-load-timeout",{defaultValue:"Failed to load TradingView due to network issues."})||""),[i]),o=(0,g.useMemo)((()=>i("trd-chart-tv-initialization-error",{defaultValue:"Something went wrong while initializing TradingView."})||""),[i]),n=(0,g.useMemo)((()=>i("trd-chart-crash-reload",{defaultValue:"Refresh"})||""),[i]),s=(0,g.useMemo)((()=>i("trd-chart-init-error",{defaultValue:"Failed to initialize TradingView due to malformed config, please try to refresh"})||""),[i]),a=(0,g.useCallback)((()=>window.location.reload()),[]),l=(0,g.useCallback)((async()=>{await e.removeItem(t),a()}),[a,e,t]),[c,h]=(0,g.useState)(!1),[d,u]=(0,g.useState)(""),[m,p]=(0,g.useState)(""),y=(0,g.useRef)((()=>Promise.resolve())),x=(0,g.useCallback)((()=>{h(!0),u(r),p(n),y.current=a}),[r,n,a]),f=(0,g.useCallback)((()=>{h(!0),u(s),p(n),y.current=l}),[l,n,s]),C=(0,g.useCallback)((()=>{h(!0),u(o),p(n),y.current=a}),[o,n,a]);return{showError:c,mainText:d,buttonText:m,buttonCallback:y.current,onScriptLoadingError:x,onTradingViewInitError:f,onChartReadyError:C}})({storage:l,storageName:r});return N?g.createElement(Q,{mainText:F,btnText:K,resetErrorBoundary:U}):g.createElement(L.Z,{sx:{height:"100%",display:d!==va.Tabs.TradingView?"none":"block"}},g.createElement(St,{...e,interval:I,styles:T,limitOrders:m?k:[],positionOrders:p?e.positionOrders:[],executionOrders:y?e.executionOrders:[],seriesStyle:D,widget:a,overwritingThemeOnLoaded:A,initialConfig:{...e.initialConfig,tvConfig:{...e.initialConfig.tvConfig,container_id:M,interval:I,locale:w},onSave:_,onLoadConfig:P,onLoading:W,onChartReadyDone:R,onChartReadyError:X,onScriptLoadingError:$,onTradingViewInitError:z,onFirstTimeSetThemeDone:H,onSetThemeDone:B,onInitStudies:O}}))},hl=e=>({volumePaneSize:"medium","symbolWatermarkProperties.transparency":85,"symbolWatermarkProperties.color":"rgba(0, 0, 0, 0)","scalesProperties.textColor":e?.colors?.t?.third,"scalesProperties.lineColor":e?.colors?.line,"scalesProperties.backgroundColor":e?.colors?.background,"paneProperties.background":e?.colors?.moduleBg,"paneProperties.horzGridProperties.color":e?.colors?.lineForK,"paneProperties.vertGridProperties.color":e?.colors?.lineForK,"paneProperties.crossHairProperties.color":e?.colors?.t?.secondary,"candleStyle.upColor":e?.colors?.buy,"candleStyle.downColor":e?.colors?.sell,"candleStyle.drawWick":!0,"candleStyle.drawBorder":!0,"candleStyle.borderColor":"transparent","candleStyle.borderUpColor":e?.colors?.buy,"candleStyle.borderDownColor":e?.colors?.sell,"candleStyle.wickUpColor":e?.colors?.buy,"candleStyle.wickDownColor":e?.colors?.sell,"hollowCandleStyle.upColor":e?.colors?.buy,"hollowCandleStyle.downColor":e?.colors?.sell,"hollowCandleStyle.drawWick":!0,"hollowCandleStyle.drawBorder":!0,"hollowCandleStyle.borderColor":"transparent","hollowCandleStyle.borderUpColor":e?.colors?.buy,"hollowCandleStyle.borderDownColor":e?.colors?.sell,"hollowCandleStyle.wickUpColor":e?.colors?.buy,"hollowCandleStyle.wickDownColor":e?.colors?.sell,"haStyle.upColor":e?.colors?.buy,"haStyle.downColor":e?.colors?.sell,"haStyle.drawWick":!0,"haStyle.drawBorder":!0,"haStyle.borderColor":"transparent","haStyle.borderUpColor":e?.colors?.buy,"haStyle.borderDownColor":e?.colors?.sell,"haStyle.wickUpColor":e?.colors?.buy,"haStyle.wickDownColor":e?.colors?.sell,"barStyle.upColor":e?.colors?.buy,"barStyle.downColor":e?.colors?.sell,"lineStyle.color":e?.colors?.buy,"areaStyle.color1":e?.colors?.buy,"areaStyle.color2":e?.colors?.sell,"areaStyle.linecolor":e?.colors?.sell,"baselineStyle.baselineColor":e?.colors?.buy,"baselineStyle.topFillColor1":e?.colors?.buy,"baselineStyle.topFillColor2":e?.colors?.sell,"baselineStyle.bottomFillColor1":e?.colors?.buy,"baselineStyle.bottomFillColor2":e?.colors?.sell,"baselineStyle.topLineColor":e?.colors?.buy,"baselineStyle.bottomLineColor":e?.colors?.sell}),dl=["dont_show_boolean_study_arguments","hide_last_na_study_output","left_toolbar","timeframes_toolbar","keep_left_toolbar_visible_on_small_screens","save_chart_properties_to_local_storage","compare_symbol","snapshot_trading_drawings"],ul=["header_widget","header_symbol_search","symbol_info","header_compare","header_chart_type","display_market_status","symbol_search_hot_key","border_around_the_chart","remove_library_container_border","symbol_info","header_interval_dialog_button","show_interval_dialog_on_key_press","volume_force_overlay","header_resolutions","legend_context_menu","right_toolbar","trading_account_manager","order_panel"],gl=({widget:e,theme:t,styles:i,onSave:r=(()=>null),onSetThemeDone:o})=>((({widget:e,theme:t})=>{const i=e.chart().getCheckableActionState("showCountdown");e.changeTheme(t),i?new Promise((t=>{setTimeout((()=>{e.chart().executeActionById("showCountdown"),t()}),0)})):Promise.resolve()})({widget:e,theme:t}),new Promise((t=>{setTimeout((()=>{e?.applyOverrides(i.overrides),(({widget:e,styles:t})=>{try{const i=e.activeChart().getAllStudies().find((e=>"volume"===e?.name?.toLowerCase()));i&&e.activeChart().getStudyById(i.id).applyOverrides({"volume.color.0":(0,k.D)(t.overrides["candleStyle.downColor"],.5),"volume.color.1":(0,k.D)(t.overrides["candleStyle.upColor"],.5)})}catch(e){}})({widget:e,styles:i}),e.save(r),o?.(),t()}),0)}))),ml=({widget:e,seriesStyle:t})=>{e.applyOverrides({"mainSeriesProperties.style":t})},pl=({symbol:e,symbolsInfo:t={},interval:i,theme:r,styles:o,limitOrders:n=[],positionOrders:s=[],executionOrders:a=[],seriesStyle:l,showIndicators:c,isChartReady:h,overwritingThemeOnLoaded:d=!1,widget:u,initialConfig:{tvConfig:m,onSave:p,onCreateOrderShapesError:y,onLoadConfig:x=(()=>Promise.resolve(null)),onLoading:f,onWidgetInitialized:C,onChartReadyDone:b,onChartReadyError:w,onWillUnmount:v,onWidgetRefNotFoundError:S,onScriptLoaded:E,onScriptLoadingError:k,onFirstTimeSetThemeDone:V,onSetThemeDone:A,onFirstTimeDataLoadedDone:T,onDataLoadedDone:M,onTradingViewInitError:D,onVisibleRangeChanged:I,onSymbolWillChange:_,onSymbolChanged:P,onIntervalChanged:W,onInitStudies:R}})=>{const[B,H]=(0,g.useState)(0),Z=(0,g.useCallback)((()=>H((e=>e+1))),[H]),O=(0,g.useRef)([]),N=(0,g.useRef)([]),F=(0,g.useRef)([]),K=(0,g.useRef)(),U=(0,g.useRef)(e),$=(0,g.useRef)(t),z=(0,g.useRef)(r),X=(0,g.useRef)(o),G=(0,g.useRef)(d);(0,g.useEffect)((()=>{z.current=r}),[r]),(0,g.useEffect)((()=>{X.current=o}),[o]),(0,g.useEffect)((()=>{G.current=d}),[d]),(0,g.useEffect)((()=>{U.current=e}),[e]),(0,g.useEffect)((()=>{$.current=t}),[t]);const Y=(0,g.useCallback)((()=>{K.current&&(({widget:e,onSave:t=(()=>Promise.resolve())})=>{e.save(t)})({widget:K.current,onSave:p})}),[p]),j=(0,g.useCallback)((e=>{if(!K.current||!e)return;const t=K.current.activeChart().getStudyById(e),i=U.current,r=$.current[i],{tickSize:o=1e7}=r||{},n=Math.log10(o);t?.applyOverrides({precision:n})}),[]),q=(0,g.useCallback)((()=>{K.current&&K.current.activeChart().getAllStudies().filter((({name:e})=>"Volume"!==e)).forEach((({id:e})=>j(e)))}),[j]),Q=(0,g.useCallback)((()=>{setTimeout((()=>{if(!K.current)return;const e=K.current.activeChart().getAllStudies();j(e[0]?.id),Y()}),0)}),[j,Y]),J=(0,g.useCallback)((()=>{f?.(!0),P?.(),q()}),[q,f,P]),ee=(0,g.useCallback)((()=>{f?.(!0),W?.()}),[W,f]),te=(0,g.useCallback)((()=>{f?.(!1),Z(),T?.(),q()}),[q,Z,T,f]),ie=(0,g.useCallback)((()=>{f?.(!1),Z(),M?.()}),[Z,M,f]),re=(0,g.useCallback)((({from:e,to:t})=>{I?.({startTime:1e3*e,endTime:1e3*t})}),[I]),oe=(0,g.useCallback)((async()=>{E?.();const e=await x(),t=(({tradingViewSave:e,styles:t},{symbol:i,interval:r,theme:o="Dark",library_path:n,custom_css_url:s="./themed.css",locale:a="en",overrides:l,debug:c=!1,time_frames:h=[],autosize:d=!0,toolbar_bg:u="transparent",studies_overrides:g,loading_screen:m,enabled_features:p=dl,disabled_features:y=ul,...x})=>{let f="Asia/Shanghai";try{f=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}const C=pt()(e);if(C)for(let e=0;e<C.charts[0].panes.length;e++)C.charts[0].panes[e].sources[0].state.symbol=i,C.charts[0].panes[e].sources[0].state.interval=r;return{...x,symbol:i,interval:r,timezone:f,theme:o,library_path:n,custom_css_url:s,locale:a,overrides:l,debug:c,time_frames:h,autosize:d,toolbar_bg:u,studies_overrides:g,loading_screen:m||{backgroundColor:t.overrides["paneProperties.background"]},enabled_features:p,disabled_features:y,saved_data:C||void 0}})({tradingViewSave:e,styles:o},m);try{K.current=new window.TradingView.widget(t),C?.(),K.current?.onChartReady((async()=>{if(!K.current)return S?.();try{K.current.subscribe("onAutoSaveNeeded",Y),K.current.subscribe("study",Q),K.current.chart().onDataLoaded().subscribe(null,te,!0),K.current.chart().onDataLoaded().subscribe(null,ie),K.current.chart().onSymbolChanged().subscribe(null,J),K.current.chart().onIntervalChanged().subscribe(null,ee),K.current.chart().onVisibleRangeChanged().subscribe(null,re),await(async({tradingViewSave:e,theme:t,styles:i,seriesStyle:r,widget:o,onInitStudies:n})=>{await(async({tradingViewSave:e,widget:t,theme:i,styles:r})=>{if(e)return Promise.resolve();await gl({widget:t,theme:i,styles:r})})({widget:o,tradingViewSave:e,theme:t,styles:i}),n?.({tradingViewSave:e,widget:o}),ml({widget:o,seriesStyle:r})})({tradingViewSave:e,theme:r,styles:o,seriesStyle:l,widget:K.current,onInitStudies:R}),G.current&&await gl({widget:K.current,theme:z.current,styles:X.current,onSave:p,onSetThemeDone:V}),setTimeout(q,0),b?.()}catch(e){w?.(e)}}))}catch(e){D?.(e)}}),[]);return(0,g.useLayoutEffect)((()=>{if(window.TradingView)oe();else{const e=document.createElement("script");e.src=`${m.library_path}charting_library.js`,e.async=!1,e.addEventListener("load",oe),e.addEventListener("error",(e=>k?.(e))),document.head.appendChild(e)}}),[]),(0,xt.Z)((()=>{K.current&&(K.current?.remove(),K.current=void 0,v?.())})),(0,ft.Z)((()=>{if(0!==B&&K.current)try{O.current?.forEach((e=>e.remove())),O.current=(({widget:e,shapes:t,styles:i})=>t.map((t=>(({widget:e,order:{id:t,text:i,price:r,quantity:o,isBuy:n,tooltip:s="",modifyTooltip:a="",cancelTooltip:l="",editable:c,onMove:h,onModify:d,onCancel:u},styles:g})=>{const m=n?g.originalTheme?.colors?.buy:g.originalTheme?.colors?.sell,p=e.chart().createOrderLine({}).setText(i).setPrice(r).setQuantity(o).setTooltip(s).setModifyTooltip(a).setCancelTooltip(l).setEditable(c).setExtendLeft(!1).setLineLength(65).setLineStyle(2).setLineColor(m).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(m).setBodyBackgroundColor(m).setBodyTextColor(g.originalTheme?.colors?.t?.primary).setQuantityBorderColor(g.originalTheme?.colors?.line).setQuantityBackgroundColor(g.originalTheme?.colors?.popupBg).setQuantityTextColor(g.originalTheme?.colors?.t?.secondary).setCancelButtonBorderColor(g.originalTheme?.colors?.line).setCancelButtonBackgroundColor(g.originalTheme?.colors?.popupBg).setCancelButtonIconColor(g.originalTheme?.colors?.t?.secondary);return p.onModify((()=>d({id:t,text:p.getText(),price:p.getPrice(),quantity:p.getQuantity()}))).onMove((()=>h({id:t,text:p.getText(),price:p.getPrice(),quantity:p.getQuantity()}))).onCancel((()=>u({id:t,text:p.getText(),price:p.getPrice(),quantity:p.getQuantity()}))),p})({widget:e,order:t,styles:i}))))({widget:K.current,styles:o,shapes:n})}catch(e){y?.(e)}}),[B,n,o]),(0,ft.Z)((()=>{if(0!==B&&K.current)try{N.current?.forEach((e=>e.remove())),N.current=(({widget:e,shapes:t,styles:i})=>t.map((t=>(({widget:e,position:{text:t,price:i,PNL:r,quantity:o,tooltip:n},styles:s})=>{const a=+o>0?s.originalTheme?.colors?.buy:s.originalTheme?.colors?.sell,l=r>0?s.originalTheme?.colors?.buy:r<0?s.originalTheme?.colors?.sell:a;return e.chart().createPositionLine({}).setText(t).setPrice(i).setQuantity(o).setTooltip(n).setExtendLeft(!1).setLineLength(100).setLineStyle(2).setLineColor(l).setBodyFont("normal 14pt Verdana").setQuantityFont("normal 14pt Verdana").setBodyBorderColor(l).setBodyBackgroundColor(l).setBodyTextColor(s.originalTheme?.colors?.t?.primary).setQuantityBorderColor(a).setQuantityBackgroundColor(s.originalTheme?.colors?.popupBg).setQuantityTextColor(s.originalTheme?.colors?.t?.primary)})({widget:e,position:t,styles:i}))))({widget:K.current,styles:o,shapes:s})}catch(e){y?.(e)}}),[B,s,o]),(0,ft.Z)((()=>{if(0!==B&&K.current)try{F.current?.forEach((e=>e.remove())),F.current=(({widget:e,shapes:t,styles:i})=>t.map((t=>(({widget:e,executionShape:{price:t,time:i,text:r,tooltip:o,isBuy:n},styles:s})=>{const a=n?s.originalTheme?.colors?.buy:s.originalTheme?.colors?.sell;return e.chart().createExecutionShape({}).setPrice(t).setTime(i).setDirection(n?"buy":"sell").setText(r).setTooltip(o).setArrowHeight(8).setArrowSpacing(1).setArrowColor(a).setTextColor(s.originalTheme?.colors?.t?.primary).setFont("normal 14pt Verdana")})({widget:e,executionShape:t,styles:i}))))({widget:K.current,styles:o,shapes:a})}catch(e){y?.(e)}}),[B,a,o]),(0,ft.Z)((()=>{h&&K.current&&ml({widget:K.current,seriesStyle:l})}),[l]),(0,ft.Z)((()=>{h&&K.current&&_?.(e)}),[h,_,e]),(0,ft.Z)((()=>{h&&K.current&&(({widget:e,symbol:t,interval:i,onDone:r=(()=>null)})=>{e.setSymbol(t,i,(()=>{e.activeChart().symbol()!==t?e.setSymbol(t,i,r):r()}))})({widget:K.current,symbol:e,interval:i})}),[e,i]),(0,ft.Z)((()=>{h&&K.current&&gl({widget:K.current,theme:r,styles:o,onSetThemeDone:A,onSave:p})}),[r,o,p]),(0,ft.Z)((()=>{h&&K.current&&(e=>{e.chart().executeActionById("insertIndicator")})(K.current)}),[c]),(0,g.useImperativeHandle)(u,(()=>K.current)),g.createElement(L.Z,{id:m.container_id,style:{height:"100%"}})},yl=e=>{const[t,i]=(0,g.useState)(!1),r=(0,g.useMemo)((()=>pt()(e.initialConfig)),[]),o=(0,g.useCallback)((()=>{i(!0),r.onChartReadyDone?.()}),[r]),n={...e,isChartReady:t,initialConfig:{...r,onChartReadyDone:o}};return g.createElement(L.Z,{sx:{height:"100%",position:"relative"}},g.createElement(pl,{...n}),!t&&g.createElement(L.Z,{sx:{height:"100%",width:"100%",background:e.styles.overrides["paneProperties.background"],position:"absolute",left:0,top:0}},g.createElement(z,null)))},xl=e=>(0,g.useMemo)((()=>At().createInstance({name:e})),[e]),fl=({tradingViewProps:e,namespace:t,theme:i,storageName:r="myTradingView",containerId:o=`${t}-tradingview`})=>{const n=(0,va.createStore)(t),s=(0,La.createStore)(t),a=(0,g.useRef)(),l=xl(t),[c]=n(va.getInterval),h=n(va.getTrueInterval),[d]=n(va.getActiveTab),[u]=n(va.getTvChartStyle),[m]=n(va.getShowLimitOrder),[p]=n(va.getShowPositionOrder),[y]=n(va.getShowExecutionOrder),[,x]=s(La.getLoading),[,f]=s(La.getTradingViewReference),{getI18n:C}=(0,Ia.Z)("","kline-ui"),b=(0,ja.tZ)(),w=(0,g.useMemo)((()=>(e=>{switch(e){case"zh-CN":case"cn":return"zh";case"zh-HK":case"zh-TW":case"zh-TC":case"tw":return"zh_TW";case"ja":return"ja";case"ko":return"ko";case"th":return"th";case"he":return"he_IL";case"ru":return"ru";case"cs":return"cs";case"sv":return"sv";case"vi":case"vn":return"vi";case"tr":return"tr";case"ro":return"ro";case"pt-PT":case"pt-BR":case"pt":return"pt";case"pl":return"pl";case"nl":return"nl_NL";case"it":return"it";case"fr":return"fr";case"es":case"es-LA":return"es";case"de":return"de";case"id":return"id_ID";default:return"en"}})(b)),[b]),v=(0,g.useMemo)((()=>C("order-drag-tooltip",{defaultValue:"Drag for price modify"})||""),[C]),S=(0,g.useMemo)((()=>C("order-modify-tooltip",{defaultValue:"Click for modify"})||""),[C]),E=(0,g.useMemo)((()=>C("order-cancel-tooltip",{defaultValue:"Click for cancel"})||""),[C]),k=(0,g.useMemo)((()=>e.limitOrders.map((e=>({...e,tooltip:e.tooltip||v,modifyTooltip:e.modifyTooltip||S,cancelTooltip:e.cancelTooltip||E})))),[E,v,S,e.limitOrders]),{onSetThemeDone:V,overwritingThemeOnLoaded:A}=(({namespace:e})=>{const{getThemeCounter:t}=(0,sl.Fg)(),[i,r]=(0,ol.Z)(`${e}_tvThemeCounter`,0),[o,n]=(0,g.useState)(-1),s=(0,g.useCallback)((()=>n(t())),[t]);(0,nl.Z)((()=>s())),(0,ft.Z)((()=>s()));const a=(0,g.useCallback)((()=>{r(t())}),[t,r]),l=(0,g.useMemo)((()=>-1!==o),[o]);return{onSetThemeDone:a,overwritingThemeOnLoaded:(0,g.useMemo)((()=>l&&o!==i),[l,o,i])}})({namespace:t}),T=(0,g.useMemo)((()=>(e=>({originalTheme:e,overrides:hl(e)}))(i)),[i]),M=(0,g.useMemo)((()=>`${t}-${o}`),[o,t]),D=(0,g.useMemo)((()=>c===va.DisplayIntervals.Time?va.SeriesStyle.Line:u),[c,u]),I=(0,g.useMemo)((()=>Ja[h]),[h]),_=(0,g.useCallback)((async t=>{await l.setItem(r,t),await(e.initialConfig.onSave?.(t))}),[l,r,e.initialConfig]),P=(0,g.useCallback)((async()=>{const t=await l.getItem(r);return e.initialConfig.onLoadConfig?.(),t}),[l,r,e.initialConfig]),W=(0,g.useCallback)((t=>{x(t),e.initialConfig.onLoading?.(t)}),[x,e.initialConfig]),R=(0,g.useCallback)((()=>{f(a.current),e.initialConfig.onChartReadyDone?.()}),[f,e.initialConfig]),B=(0,g.useCallback)((()=>{V(),e.initialConfig.onSetThemeDone?.()}),[V,e.initialConfig]),H=(0,g.useCallback)((()=>{V(),e.initialConfig.onFirstTimeSetThemeDone?.()}),[V,e.initialConfig]),Z=(0,g.useCallback)((({widget:e,tradingViewSave:t})=>{t||(e.activeChart().createStudy("Moving Average",!1,!1,{length:7},{"plot.linewidth":1,"plot.color":"rgba(241, 156, 56, 0.7)",precision:8,showLabelsOnPriceScale:!1}),e.activeChart().createStudy("Moving Average",!1,!1,{length:25},{"plot.linewidth":1,"plot.color":"rgba(234, 61, 247, 0.7)",precision:8,showLabelsOnPriceScale:!1}),e.activeChart().createStudy("Moving Average",!1,!1,{length:99},{"plot.linewidth":1,"plot.color":"rgba(116, 252, 253, 0.7)",precision:8,showLabelsOnPriceScale:!1}))}),[]),O=(0,g.useMemo)((()=>e.initialConfig.onInitStudies||Z),[Z,e.initialConfig.onInitStudies]),{showError:N,mainText:F,buttonText:K,buttonCallback:U,onScriptLoadingError:$,onTradingViewInitError:z,onChartReadyError:X}=(({storage:e,storageName:t})=>{const{getI18n:i}=(0,Ia.Z)("","trade-ui"),r=(0,g.useMemo)((()=>i("trd-chart-tv-load-timeout",{defaultValue:"Failed to load TradingView due to network issues."})||""),[i]),o=(0,g.useMemo)((()=>i("trd-chart-tv-initialization-error",{defaultValue:"Something went wrong while initializing TradingView."})||""),[i]),n=(0,g.useMemo)((()=>i("trd-chart-crash-reload",{defaultValue:"Refresh"})||""),[i]),s=(0,g.useMemo)((()=>i("trd-chart-init-error",{defaultValue:"Failed to initialize TradingView due to malformed config, please try to refresh"})||""),[i]),a=(0,g.useCallback)((()=>window.location.reload()),[]),l=(0,g.useCallback)((async()=>{await e.removeItem(t),a()}),[a,e,t]),[c,h]=(0,g.useState)(!1),[d,u]=(0,g.useState)(""),[m,p]=(0,g.useState)(""),y=(0,g.useRef)((()=>Promise.resolve())),x=(0,g.useCallback)((()=>{h(!0),u(r),p(n),y.current=a}),[r,n,a]),f=(0,g.useCallback)((()=>{h(!0),u(s),p(n),y.current=l}),[l,n,s]),C=(0,g.useCallback)((()=>{h(!0),u(o),p(n),y.current=a}),[o,n,a]);return{showError:c,mainText:d,buttonText:m,buttonCallback:y.current,onScriptLoadingError:x,onTradingViewInitError:f,onChartReadyError:C}})({storage:l,storageName:r});return N?g.createElement(Q,{mainText:F,btnText:K,resetErrorBoundary:U}):g.createElement(L.Z,{sx:{height:"100%",display:d!==va.Tabs.TradingView?"none":"block"}},g.createElement(yl,{...e,interval:I,styles:T,limitOrders:m?k:[],positionOrders:p?e.positionOrders:[],executionOrders:y?e.executionOrders:[],seriesStyle:D,widget:a,overwritingThemeOnLoaded:A,initialConfig:{...e.initialConfig,tvConfig:{...e.initialConfig.tvConfig,container:M,container_id:M,interval:I,locale:w},onSave:_,onLoadConfig:P,onLoading:W,onChartReadyDone:R,onChartReadyError:X,onScriptLoadingError:$,onTradingViewInitError:z,onFirstTimeSetThemeDone:H,onSetThemeDone:B,onInitStudies:O}}))};var Cl=i(71882);const bl=(e,t,i,r)=>r-e(t)>=e(i)-r?i:t,wl=(e,t,i)=>{const r=e.length;if(i<=t(e[0]))return e[0];if(i>=t(e[r-1]))return e[r-1];let o=0,n=r,s=0;for(;o<n;){if(s=(o+n)/2>>>0,t(e[s])===i)return e[s];if(i<t(e[s])){if(s>0&&i>t(e[s-1]))return bl(t,e[s-1],e[s],i);n=s}else{if(s<r-1&&i<t(e[s+1]))return bl(t,e[s],e[s+1],i);o=s+1}}return e[s]},vl=(e,t)=>{if(!e.length)return null;let i=e.length-1,r=0;const o=t(e[r]);if(t(e[i])===o)return null;let n,s;for(;i>=r;)n=(i+r)/2>>>0,s=t(e[n]),s===o?r=n+1:i=n-1;return r},Ll={desktop:1260,tablet:768,phone:480},Sl=({xData:e,yData:t})=>({xData:t,yData:e}),El=e=>"undefined"!=typeof window&&(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=Ll[e],kl=({symbol:e,d1Group:t,d2Group:i,width:r,height:o,cursor:n,scale:s,yAxisScale:a=.6})=>{const l=r/2,c=(0,g.useRef)(Number.NEGATIVE_INFINITY),h=(0,g.useRef)(Number.NEGATIVE_INFINITY);(0,g.useEffect)((()=>{c.current=Number.NEGATIVE_INFINITY,h.current=Number.NEGATIVE_INFINITY}),[e]);const{d1:d,d2:u}=((e,t,i=10)=>({d1:{low:e[0]?.xData,high:e[e.length-1]?.xData,atIndex:e[i-1]?.xData},d2:{low:t[t.length-1]?.xData,high:t[0]?.xData,atIndex:t[i-1]?.xData}}))(t,i),m=(u.high+d.low)/2;const{min:p,max:y}=((e,t)=>({min:1/Math.max(e.high-e.low,t.high-t.low)||-1/0,max:1/Math.max((e.atIndex||e.high)-e.low,t.high-(t.atIndex||t.low))||-1/0}))(d,u);c.current=Math.max(p,c.current),h.current=Math.max(y,h.current);const x=((e,t,i)=>e+(t-e)/1e3*i)(c.current,h.current,s),f=(0,g.useCallback)((e=>(({value:e,width:t,scale:i,midValue:r})=>(e-r)*i*t+t)({value:e,width:l,scale:x,midValue:m})),[l,x,m]),C=(0,g.useCallback)((e=>(({x:e,width:t,scale:i,midValue:r})=>(e-t)/t/i+r)({x:e,width:l,scale:x,midValue:m})),[l,x,m]),{max:b,maxD1Index:w,maxD2Index:v}=(({d1Group:e,d2Group:t,d1Predicate:i,d2Predicate:r})=>{const o=vl(e,i)||e.length,n=vl(t,r)||t.length,s=e[o-1]?.yData,a=t[n-1]?.yData;return{max:Math.max(a,s),maxD1Index:o,maxD2Index:n}})({d1Group:t,d2Group:i,d1Predicate:e=>f(e.xData)>r,d2Predicate:e=>f(e.xData)<0}),L=(0,g.useCallback)((e=>(({value:e,height:t,scale:i,maxValue:r})=>t-e/r*i*t-1)({value:e,height:o,scale:a,maxValue:b})),[o,b]),S=t.slice(0,w-1),E=i.slice(0,v-1),{d1:k,d2:V}=(({d1Group:e,d2Group:t,x:i,midValue:r,breakpoint:o,xToValueFn:n,valueToXFn:s,valueToYFn:a})=>{let l={xData:NaN,yData:NaN},c={xData:NaN,yData:NaN};if(i&&e.length){let s;i>o?(l=wl(e,(e=>e?.xData),n(i)),s=2*r-l?.xData,c=wl(t,(e=>-e?.xData),-s)):(c=wl(t,(e=>-e?.xData),-n(i)),s=2*r-c?.xData,l=wl(e,(e=>e?.xData),s))}return{d1:{...l,x:s(l?.xData)||0,y:a(l?.yData)||0},d2:{...c,x:s(c?.xData)||0,y:a(c?.yData)||0}}})({d1Group:S,d2Group:E,x:n.x,midValue:m,breakpoint:l,xToValueFn:C,valueToXFn:f,valueToYFn:L}),A=b/a,T=((e,t,i)=>{let r;r=e>=t?El("mobile")||e<500?3:El("tablet")||e<800?5:10:t<500?3:t<800?5:10;const o=i(0),n=(i(e)-o)/r,s=[];let a=o+n/2;for(let e=0;e<r;e++)a&&(a>0&&s.push(a),a+=n);return s})(r,o,C),M=((e,t,i)=>{const r=[20,50,100],o=(t-0)/Math.floor(i/40);let n=Math.floor(Math.log10(o)-1);n=10**n;const s=o/n;let a=0,l=0;for(l=0;l<r.length;l++)if(r[l]>=s){a=r[l]*n;break}let c=0,h=0;c=Math.ceil(t/a)*a,h=Math.floor(0/a)*a;const d=[];for(;h<c;)d.push(parseFloat((h+a).toPrecision(12))),h+=a;return d})(0,A,o);return{width:r,height:o,halfWidth:l,midValue:m,d1:k,d2:V,xTicks:T,yTicks:M,valueToX:f,valueToY:L}},Vl=({initCursorState:e={x:0,y:0},scale:t,setScale:i=(()=>null)})=>{const[r,o]=(0,g.useState)(e);return{cursor:r,onMouseMove:e=>o({x:e.evt.offsetX,y:e.evt.offsetY}),onMouseLeave:()=>o(e),onMouseWheel:(0,g.useCallback)((e=>{const r=e?.evt?.deltaY<0?Math.min(t+5,1e3):Math.max(0,t-5);i?.(r),e?.evt?.preventDefault()}),[t,i])}},Al=({symbol:e,d1Group:t,d2Group:i,canvas:{width:r,height:o},scale:n,setScale:s,styles:a,yAxisScale:l=.6,xAxisVerticalOffset:c=22,yAxisHorizontalOffset:h=50,strokeWidth:d=1,graphStrokeWidth:u=1,xTicksFormatter:m=(e=>e.toString()),yTicksFormatter:p=(e=>e.toString()),d1XValueFormatter:y=(e=>e.toString()),d2XValueFormatter:x=(e=>e.toString()),d1YValueFormatter:f=(e=>e.toString()),d2YValueFormatter:C=(e=>e.toString()),d1DeltaXValueFormatter:b=(e=>e.toString()),d2DeltaXValueFormatter:w=(e=>e.toString())})=>{const{cursor:v,onMouseMove:L,onMouseLeave:S,onMouseWheel:E}=Vl({scale:n,setScale:s}),{width:k,height:V,halfWidth:A,midValue:T,d1:M,d2:D,xTicks:I,yTicks:_,valueToX:P,valueToY:W}=kl({symbol:e,d1Group:t,d2Group:i,width:r-h,height:o-c,cursor:v,scale:n,yAxisScale:l});return g.createElement(Je.Stage,{width:r,height:o,onMouseMove:L,onMouseOut:S,onWheel:E},g.createElement(Je.Layer,{hitGraphEnabled:!1},g.createElement(Je.Group,{height:V},g.createElement(Je.Line,{points:[A,0,A,V],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:d}),g.createElement(Je.Shape,{sceneFunc:(e,t)=>{e.beginPath();let r=A,o=V,n=!0;i.forEach((({xData:t,yData:i})=>{if(r=P(t),r<0||r>A)return;const s=W(i);n?(e.moveTo(r,o),n=!1):e.lineTo(r,o),o=s,e.lineTo(r,o)})),e.lineTo(-d,o),e.lineTo(-d,V),e.fillStrokeShape(t)},fill:a.d2.fillColor,stroke:a.d2.lineColor,strokeWidth:u}),g.createElement(Je.Shape,{sceneFunc:(e,i)=>{e.beginPath();let r=A,o=V,n=!1;t.forEach((({xData:t,yData:i})=>{if(r=P(t),r>k||r<A)return;const s=W(i);n?(e.moveTo(r,o),n=!1):e.lineTo(r,o),o=s,e.lineTo(r,o)})),e.lineTo(k+d,o),e.lineTo(k+d,V),e.fillStrokeShape(i)},fill:a.d1.fillColor}),g.createElement(Je.Shape,{sceneFunc:(e,i)=>{e.beginPath();let r=A,o=V,n=!1;t.forEach((({xData:t,yData:i})=>{if(r=P(t),r>k||r<A)return;const s=W(i);n?(e.moveTo(r,o),n=!1):e.lineTo(r,o),o=s,e.lineTo(r,o)})),e.lineTo(k+d,o),e.fillStrokeShape(i)},stroke:a.d1.lineColor,strokeWidth:u}),M.x?g.createElement(g.Fragment,null,g.createElement(Je.Line,{points:[M.x,0,M.x,V],stroke:a.d1.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Line,{points:[A,M.y,k,M.y],stroke:a.d1.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Line,{points:[D.x,0,D.x,V],stroke:a.d2.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Line,{points:[a.tag.width,D.y,A,D.y],stroke:a.d2.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Circle,{x:M.x,y:M.y,radius:3,fill:a.d1.lineColor}),g.createElement(Je.Label,{x:.5*(M.x+A),y:M.y+.5*a.tag.height},g.createElement(Je.Tag,{pointerDirection:"down",fill:a.background}),g.createElement(Je.Text,{text:b(M.xData,T),fill:a.d1.lineColor,padding:3})),g.createElement(Je.Circle,{x:D.x,y:D.y,radius:3,fill:a.d2.lineColor}),g.createElement(Je.Label,{x:.5*(D.x+A),y:D.y+.5*a.tag.height},g.createElement(Je.Tag,{pointerDirection:"down",fill:a.background}),g.createElement(Je.Text,{text:w(D.xData,T),fill:a.d2.lineColor,padding:3})),g.createElement(Je.Label,{x:k,y:M.y},g.createElement(Je.Tag,{pointerDirection:"left",pointerWidth:a.tag.width,pointerHeight:a.tag.height,fill:a.background}),g.createElement(Je.Text,{text:f(M.yData),fill:a.d1.lineColor,padding:3})),g.createElement(Je.Label,{x:0,y:D.y},g.createElement(Je.Tag,{pointerDirection:"left",pointerWidth:a.tag.width,pointerHeight:a.tag.height,fill:a.d2.fillColor}),g.createElement(Je.Text,{text:C(D.yData),fill:a.d2.lineColor,padding:3})),g.createElement(Je.Rect,{x:M.x,y:0,width:k-M.x,height:V,fill:a.hoverBgColor}),g.createElement(Je.Rect,{x:0,y:0,width:D.x,height:V,fill:a.hoverBgColor})):null),g.createElement(Je.Group,{y:V},I.map(((e,t)=>g.createElement(g.Fragment,{key:t},g.createElement(Je.Line,{points:[P(e),0,P(e),4],stroke:a.textColor,strokeWidth:d}),g.createElement(Je.Text,{x:P(e)-20,y:3,text:m(e),fill:a.textColor,padding:3})))),M.x?g.createElement(g.Fragment,null,g.createElement(Je.Label,{x:M.x,y:2},g.createElement(Je.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:a.background}),g.createElement(Je.Text,{text:y(M.xData),fill:a.d1.lineColor,padding:3})),g.createElement(Je.Line,{points:[M.x,0,M.x,4],stroke:a.d1.lineColor,strokeWidth:d}),g.createElement(Je.Label,{x:D.x,y:2},g.createElement(Je.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:a.background}),g.createElement(Je.Text,{text:x(D.xData),fill:a.d2.lineColor,padding:3})),g.createElement(Je.Line,{points:[D.x,0,D.x,4],stroke:a.d2.lineColor,strokeWidth:d})):null),g.createElement(Je.Group,{x:k},_.map(((e,t)=>g.createElement(g.Fragment,{key:t},g.createElement(Je.Line,{points:[0,W(e),4,W(e)],stroke:a.textColor,strokeWidth:d}),g.createElement(Je.Text,{x:8,y:W(e)-5,text:p(e),fill:a.textColor})))))))},Tl=({symbol:e,d1Group:t,d2Group:i,canvas:r,scale:o,setScale:n,styles:s,yAxisScale:a=.9,xAxisVerticalOffset:l=0,yAxisHorizontalOffset:c=60,strokeWidth:h=1,graphStrokeWidth:d=2,yTicksFormatter:u=(e=>e.toString()),d1XValueFormatter:m=(e=>e.toString()),d2XValueFormatter:p=(e=>e.toString()),d1YValueFormatter:y=(e=>e.toString()),d2YValueFormatter:x=(e=>e.toString())})=>{const f=t.map(Sl),C=i.map(Sl),{cursor:b,onMouseMove:w,onMouseLeave:v,onMouseWheel:L}=Vl({scale:o,setScale:n}),{height:S,halfWidth:E,d1:k,d2:V,xTicks:A,valueToX:T,valueToY:M}=kl({symbol:e,d1Group:f,d2Group:C,width:r.height-l,height:r.width-c,cursor:{x:r.height-b.y,y:b.x},scale:o,yAxisScale:a});return g.createElement(Je.Stage,{width:r.width,height:r.height,onMouseMove:w,onMouseOut:v,onWheel:L},g.createElement(Je.Layer,{hitGraphEnabled:!1},g.createElement(Je.Group,{x:c},g.createElement(Je.Line,{points:[0,E,S,E],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:h}),g.createElement(Je.Shape,{sceneFunc:(e,t)=>{e.beginPath();let i=S,o=E,n=!0;C.forEach((({xData:t,yData:s})=>{if(o=r.height-T(t),o>r.height||o<E)return;const a=M(s);n?(e.moveTo(i,o),n=!1):e.lineTo(i,o),i=a,e.lineTo(i,o)})),e.lineTo(i,r.height+h),e.lineTo(S+h,r.height+h),e.fillStrokeShape(t)},fill:s.d2.fillColor,stroke:s.d2.lineColor,strokeWidth:d}),g.createElement(Je.Shape,{sceneFunc:(e,t)=>{e.beginPath();let i=S,o=E,n=!1;f.forEach((({xData:t,yData:s})=>{if(o=r.height-T(t),o<0||o>E)return;const a=M(s);n?(e.moveTo(i,o),n=!1):e.lineTo(i,o),i=a,e.lineTo(i,o)})),e.lineTo(i,-h),e.lineTo(S,-h),e.fillStrokeShape(t)},fill:s.d1.fillColor,stroke:s.d1.lineColor,strokeWidth:d}),k.x?g.createElement(g.Fragment,null,g.createElement(Je.Line,{points:[0,r.height-k.x,S,r.height-k.x],stroke:s.d1.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Line,{points:[k.y,0,k.y,E],stroke:s.d1.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Line,{points:[0,r.height-V.x,S,r.height-V.x],stroke:s.d2.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Line,{points:[V.y,E,V.y,r.height],stroke:s.d2.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Circle,{x:k.y,y:r.height-k.x,radius:3,fill:s.d1.lineColor}),g.createElement(Je.Circle,{x:V.y,y:r.height-V.x,radius:3,fill:s.d2.lineColor}),g.createElement(Je.Label,{x:k.y,y:0},g.createElement(Je.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:2,fill:s.d1.fillColor}),g.createElement(Je.Text,{text:y(k.yData),fill:s.d1.lineColor,padding:3})),g.createElement(Je.Label,{x:V.y,y:r.height},g.createElement(Je.Tag,{pointerDirection:"down",pointerWidth:4,pointerHeight:2,fill:s.d2.fillColor}),g.createElement(Je.Text,{text:x(k.yData),fill:s.d2.lineColor,padding:3})),g.createElement(Je.Rect,{x:0,y:0,width:S,height:r.height-k.x,fill:s.hoverBgColor}),g.createElement(Je.Rect,{x:0,y:r.height-V.x,width:S,height:V.x,fill:s.hoverBgColor})):null),g.createElement(Je.Group,null,g.createElement(Je.Line,{points:[c,0,c,r.height],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:h}),A.map(((e,t)=>{const i=r.height-T(e);return g.createElement(g.Fragment,{key:t},g.createElement(Je.Line,{points:[c-4,i,c,i],stroke:s.textColor,strokeWidth:h}),g.createElement(Je.Label,{x:c-4,y:i},g.createElement(Je.Tag,{pointerDirection:"right",pointerWidth:0,pointerHeight:0,strokeWidth:0}),g.createElement(Je.Text,{text:u(e),fill:s.textColor,padding:3})))})),k.x?g.createElement(g.Fragment,null,g.createElement(Je.Label,{x:c-4,y:r.height-k.x},g.createElement(Je.Tag,{pointerDirection:"right",pointerWidth:s.tag.width,pointerHeight:s.tag.height,fill:s.background}),g.createElement(Je.Text,{text:m(k?.xData),fill:s.d1.lineColor,padding:3})),g.createElement(Je.Line,{points:[c-4,r.height-k.x,c,r.height-k.x],stroke:s.d1.lineColor,strokeWidth:h}),g.createElement(Je.Label,{x:c-4,y:r.height-V.x},g.createElement(Je.Tag,{pointerDirection:"right",pointerWidth:s.tag.width,pointerHeight:s.tag.height,fill:s.background}),g.createElement(Je.Text,{text:p(V?.xData),fill:s.d2.lineColor,padding:3})),g.createElement(Je.Line,{points:[c-4,r.height-V.x,c,r.height-V.x],stroke:s.d2.lineColor,strokeWidth:h})):null)))};var Ml=i(67997),Dl=i.n(Ml),Il=i(28280);const _l=e=>({depthScale:0,setDepthScale:t=>e({depthScale:t})}),Pl=Dl()(((e="unspecific-chart-namespace")=>(0,Il.Ue)(((...e)=>({..._l(...e)}))))),Wl=e=>[e.depthScale,e.setDepthScale],Rl=(e,t=2)=>isNaN(e)?"0.00%":`${(100*e).toFixed(t)}%`,Bl=(e,t=2)=>{if(Math.abs(e)<1e-9&&Math.abs(e)>0)return`${e.toExponential(2)}`;if(Math.abs(e)<1e3)return`${e.toFixed(0)}`;const i=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];let r=0;for(r=i.length-1;r>0&&!(Math.abs(e)>=i[r].value);r--);return(e/i[r].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i[r].symbol},Hl=(e,t=-1)=>{const i=e&&t>=0?Number(e).toFixed(t):`${e}`;let r=i,o="";const n=i.indexOf(".");return n>-1&&(r=i.slice(0,n),o=i.slice(n)),r.replace(/\d{1,3}(?=(\d{3})+$)/g,(e=>`${e},`))+o};var Zl;!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"}(Zl||(Zl={}));var Ol=i(6093),Nl=i(5007),Fl=i(67219),Kl=i.n(Fl);const Ul=e=>({orderHistory:[],setOrderHistory:t=>e({orderHistory:t}),appendOrderHistory:t=>e((e=>({orderHistory:Kl()(t,e.orderHistory,"id")}))),clearOrderHistory:()=>e({orderHistory:[]})}),$l=Dl()(((e="unspecific-chart-namespace")=>(0,Il.Ue)(((...e)=>({...Ul(...e)}))))),zl=e=>[e.orderHistory,e.setOrderHistory,e.appendOrderHistory,e.clearOrderHistory],Xl={Containers:{Chart:({namespace:e,hostAddress:t,themeName:i,getSymbolDisplayName:r,checkMiniSymbolAvaliablility:o,beforeMiniChartSymbolChange:n,hasDoneFetchingSymbols:s,generateToolbar:a,generateMiniToolbar:l,basicKline:c,tradingView:h,depth:d,symbol:u,checkTradeStatus:m,isHiddenLogo:p,electron:y})=>{(({namespace:e})=>{(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getInterval),r=(0,g.useMemo)((()=>`${e}-chart-interval`),[e]);(0,g.useEffect)((()=>Aa(r,(e=>i(e)))),[r,e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getSelectedIntervals);(0,g.useEffect)((()=>Aa(`${e}-selected-intervals`,(e=>i(e.map((({value:e})=>e)))))),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getActiveTab);(0,g.useEffect)((()=>Aa(`${e}-chart-active-tab`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getShowLimitOrder);(0,g.useEffect)((()=>Aa(`${e}-show-limit-orders`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getShowPositionOrder);(0,g.useEffect)((()=>Aa(`${e}-show-position-orders`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getShowExecutionOrder);(0,g.useEffect)((()=>Aa(`${e}-show-execution-orders`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getPriceType);(0,g.useEffect)((()=>Aa(`${e}-chart-priceType`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getOriginalChartStyle);(0,g.useEffect)((()=>Aa(`${e}-chart-type`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getTvChartStyle);(0,g.useEffect)((()=>Aa(`${e}-chart-tvChartStyle`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getChartMode);(0,g.useEffect)((()=>Aa(`${e}-chart-miniMultiChartType`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getLastSelectedMiniMultiChartWindow);(0,g.useEffect)((()=>Aa(`${e}-chart-lastSelectedMiniMultiChartWindow`,i)),[e,i])})(e),(e=>{const t=(0,va.createStore)(e),[,i]=t(va.getMiniMultiChartWindows);(0,g.useEffect)((()=>Aa(`${e}-chart-miniMultiChartWindows`,i)),[e,i])})(e),(e=>{(0,g.useEffect)((()=>{localStorage.removeItem(`${e}-interval-config-open`)}),[e])})(e)})({namespace:e});const x=(0,va.createStore)(e),[f]=x(va.getChartMode),C=(e=>{const t=(0,La.createStore)(e),[i]=t(La.getLayoutWidth),{isMobile:r}=(0,cs.F)();return(0,g.useMemo)((()=>r||i<580&&i>0?Va.l.Small:Va.l.Medium),[r,i])})(e),b=(0,g.useMemo)((()=>f===va.ChartMode.Single),[f]),w=(({namespace:e,beforeMiniChartSymbolChange:t})=>{const i=(0,va.createStore)(e),[,r]=i(va.getLastSelectedMiniMultiChartWindow),[o]=i(va.getMiniMultiChartWindows);return(0,g.useCallback)((e=>{const i=o[e];t({symbol:i}),r(e)}),[o,t,r])})({namespace:e,beforeMiniChartSymbolChange:n}),v=g.createElement(g.Suspense,{fallback:null},g.createElement(Da,{namespace:e,symbol:u,hostAddress:t,themeName:i,checkMiniSymbolAvaliablility:o,checkTradeStatus:m,onSymbolChange:w,getSymbolDisplayName:r,basicKline:c,generateToolbar:l,isHiddenLogo:p,hasDoneFetchingSymbols:s})),L=g.createElement(Ea,{basicKline:c,tradingView:h,depth:d,symbol:u,namespace:e,electron:y});return(({namespace:e,electron:t,focusAreaClassName:i=".focus-area"})=>{const r=(0,va.createStore)(e),o=(0,La.createStore)(e),[n]=r(va.getActiveTab),[s]=o(La.getCandlestickReference),[a,l]=r(va.getInterval),[c,h]=(0,g.useState)(!1),d=(0,g.useCallback)((()=>h(!0)),[h]),u=(0,g.useCallback)((e=>t=>{t.target?.matches(i)||t.composedPath().some((t=>e.includes(t)))||h(!1)}),[i]),m=(0,g.useCallback)((()=>{let e=Ma.indexOf(a)+1;const t=Ma[e%Ma.length];l(t)}),[a,l]),p=(0,g.useCallback)((()=>{n===va.Tabs.Origin&&s?.zoomIn()}),[s,n]),y=(0,g.useCallback)((()=>{n===va.Tabs.Origin&&s?.zoomOut()}),[s,n]),x=(0,g.useCallback)((()=>{n===va.Tabs.Origin&&s?.goForward()}),[s,n]),f=(0,g.useCallback)((()=>{n===va.Tabs.Origin&&s?.goNext()}),[s,n]);(0,g.useEffect)((()=>{if(!t||!Ta.electron)return;const e=document.querySelectorAll(i),r=u(Array.from(e));e.forEach((e=>e.addEventListener("click",d))),document.addEventListener("click",r);const o=t.registerActionHandle((({name:e})=>{if(c)switch(e){case t.constants.ACTION_K_LINE_SWITCH_PERIOD:return m();case t.constants.ACTION_K_LINE_ZOOM_IN:return p();case t.constants.ACTION_K_LINE_ZOOM_OUT:return y();case t.constants.ACTION_K_LINE_MOVE_LEFT:return f();case t.constants.ACTION_K_LINE_MOVE_RIGHT:return x()}}));return()=>{o(),e?.forEach((e=>e.removeEventListener("click",d))),document.removeEventListener("click",r)}}),[c,d,u,m,t,p,y,f,x,i])})({namespace:e,electron:y}),g.createElement(wa.Z,{symbol:u,symbolDisplay:r(u),hostAddress:t,themeName:i,checkTradeStatus:m},g.createElement(ba.Z,{useMiniHeader:!b,namespace:e,headerSlot:g.createElement(ka.ZP,{symbol:u,getSymbolDisplayName:r,namespace:e,headerType:ka.vb.Medium,generateToolbar:a({onSymbolChange:w}),intervalFilterType:C})},b?L:v))},BasicKline:({onError:e,...t})=>{const{getI18n:i}=(0,Ia.Z)("","trade-ui"),r=(0,g.useMemo)((()=>i("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""),[i]),o=(0,g.useMemo)((()=>i("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""),[i]);return g.createElement(Ra,{name:"origin_kline",FallbackComponent:({resetErrorBoundary:e})=>g.createElement(Q,{mainText:r,btnText:o,resetErrorBoundary:e}),onError:e},g.createElement(Ya,{...t}))},TradingView:({errorBoundaryProps:e,...t})=>{const{namespace:i}=t,{getI18n:r}=(0,Ia.Z)("","trade-ui"),o=ll(i),n=(0,g.useMemo)((()=>r("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""),[r]),s=(0,g.useMemo)((()=>r("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""),[r]),a=(0,g.useCallback)((()=>{o.removeItem("myTradingView"),e?.onReset?.()}),[e,o]);return g.createElement(Ra,{...e,name:"trading_view",FallbackComponent:({resetErrorBoundary:e})=>g.createElement(Q,{mainText:n,btnText:s,resetErrorBoundary:e}),onReset:a},g.createElement(cl,{...t}))},TradingViewTP:({errorBoundaryProps:e,...t})=>{const{namespace:i}=t,{getI18n:r}=(0,Ia.Z)("","trade-ui"),o=xl(i),n=(0,g.useMemo)((()=>r("trd-chart-crash-info",{defaultValue:"Something is wrong with the chart."})||""),[r]),s=(0,g.useMemo)((()=>r("trd-chart-crash-refresh",{defaultValue:"Refresh"})||""),[r]),a=(0,g.useCallback)((()=>{o.removeItem("myTradingView"),e?.onReset?.()}),[e,o]);return g.createElement(Ra,{...e,name:"trading_view",FallbackComponent:({resetErrorBoundary:e})=>g.createElement(Q,{mainText:n,btnText:s,resetErrorBoundary:e}),onReset:a},g.createElement(fl,{...t}))},DepthChart:({namespace:e,symbol:t,theme:i,asks:r,bids:o,width:n,height:s,mode:a,pricePrecision:l,filterPricePrecision:c})=>{const h=Pl(e),[d,u]=h(Wl),m=(0,g.useMemo)((()=>((e,t)=>({tag:{width:2,height:18},background:e?.colors?.background,d1:{lineColor:e?.colors?.sell,fillColor:(0,k.D)(e?.colors?.sell,.1)},d2:{lineColor:e?.colors?.buy,fillColor:(0,k.D)(e?.colors?.buy,.1)},hoverBgColor:(0,k.D)(e?.colors?.newLine,.4),textColor:e?.colors?.t?.third}))(i)),[i]),p=(0,g.useCallback)((e=>Hl((0,Cl.uf)(e,l))),[l]),y=(0,g.useCallback)((e=>Bl(e,2)),[]),x=(0,g.useCallback)((e=>Hl(e,c)),[c]),f=(0,g.useCallback)((e=>Bl(e)),[]),C=(0,g.useCallback)(((e,t)=>`+${Rl((e-t)/t,1)}`),[]),b=(0,g.useCallback)(((e,t)=>`${Rl((e-t)/t,1)}`),[]);return a===Zl.Horizontal?g.createElement(Al,{symbol:t,d1Group:r,d2Group:o,canvas:{width:n,height:s},styles:m,scale:d,setScale:u,xTicksFormatter:p,yTicksFormatter:y,d1XValueFormatter:x,d2XValueFormatter:x,d1YValueFormatter:f,d2YValueFormatter:f,d1DeltaXValueFormatter:C,d2DeltaXValueFormatter:b}):g.createElement(Tl,{symbol:t,d1Group:r,d2Group:o,canvas:{width:n,height:s},styles:m,scale:d,setScale:u,yTicksFormatter:e=>(0,Cl.uf)(e,l),d1XValueFormatter:x,d2XValueFormatter:x,d1YValueFormatter:f,d2YValueFormatter:f})},SettingsDropdown:Ol.default},Store:va,SessionStore:La,CandlestickHistoryStore:Nl,OrderHistoryStore:u,DepthStore:d,DepthChartMode:Zl,DefaultTVEnabledFeatures:lt,DefaultTVDisabledFeatures:ct,DefaultTVStorageName:al,utils:h,getDepthChartStyles:(e,t)=>({tag:t,background:e?.colors?.background,d1:{lineColor:e?.colors?.sell,fillColor:(0,k.D)(e?.colors?.sell,.1)},d2:{lineColor:e?.colors?.buy,fillColor:(0,k.D)(e?.colors?.buy,.1)},hoverBgColor:(0,k.D)(e?.colors?.newLine,.4),textColor:e?.colors?.t?.third}),getTradingViewNextStyles:dt,createDatafeed:gt,DefaultResolutions:ut,IntervalFilter:r,OpeningCountdown:K.OpeningCountdown,OrderModificationModal:({visible:e,priceField:t,amountField:i,submitText:r,cancelText:o,onSubmit:n,onCancel:s})=>g.createElement(Ye.ZP.Modal,{visible:e,sx:{minWidth:"288px",height:"176px",p:0,bg:"modalBg"},onMaskClick:s},g.createElement(m.Z,{sx:{p:"16px",flexDirection:"column","& > *:not(:last-child)":{marginBottom:"16px"}}},g.createElement(L.Z,null,g.createElement(je.Z,{variant:"filled",textAlign:"right",prefix:g.createElement(qe,null,t.placeholder),suffix:g.createElement(Qe,null,t.suffixText),boxProps:{sx:{width:"100%",height:"40px",bg:"bg3"}},...t})),g.createElement(L.Z,null,g.createElement(je.Z,{variant:"filled",textAlign:"right",prefix:g.createElement(qe,null,i.placeholder),suffix:g.createElement(Qe,null,i.suffixText),boxProps:{sx:{width:"100%",height:"40px"}},...i})),g.createElement(m.Z,{sx:{"& > *":{width:"100%",height:"32px"},"& > *:not(:last-child)":{marginRight:"8px"}}},g.createElement(A.Z,{onClick:s,sx:{bg:"line",backgroundImage:"none",color:"t.primary","&:hover:not(:disabled):not(:active):not(.inactive)":{bg:"bg3",backgroundImage:"none"}}},o),g.createElement(A.Z,{onClick:n,sx:{bg:"primary",backgroundImage:"none",color:"bg5","&:hover:not(:disabled):not(:active):not(.inactive)":{backgroundImage:"none"}}},r)))),Chart:G,ChartHeader:o,ChartFallback:Q,ChartPlaceholder:()=>g.createElement(m.Z,{sx:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},g.createElement(ee,null)),MultiChartManager:({windows:e,value:t,onChange:i,onCloseTab:r,utilityTray:o,sidebar:n,draggable:s=!1})=>{const a=e.filter((e=>e.visible));return g.createElement(m.Z,{sx:{height:"100%",flexDirection:"column"}},g.createElement(m.Z,{sx:{height:"34px"}},g.createElement(le,{options:a,value:t,onChange:i,onClose:r}),g.createElement(m.Z,{className:s?"draggableHandle":"",sx:{minWidth:s?"100px":"0px",flex:"1"}}),g.createElement(m.Z,{sx:{alignItems:"center",justifyContent:"flex-end",paddingRight:"ls","& > *:not(:last-child)":{paddingRight:"sm"}}},o)),g.createElement(m.Z,{sx:{height:"100%"}},n,g.createElement(L.Z,{sx:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:`repeat(${Math.ceil(e.length/2)}, 50%)`,gridTemplateRows:"repeat(2, 50%)"}},e.map(((e,r)=>g.createElement(L.Z,{key:r,sx:{borderWidth:"1px",borderStyle:"solid",borderColor:"newLine",...e.value===t?{boxShadow:e=>`0px -2px 0px 0px ${e.colors.t.yellow}`,borderColor:e=>(0,k.D)(e.colors.t.yellow,.25)}:{}},onClick:()=>i(e)},e.children))))))},Dropdowns:s,RadioGroups:a,DepthChart:({symbol:e,d1Group:t,d2Group:i,canvas:{width:r,height:o},scale:n,setScale:s,styles:a,yAxisScale:l=.6,xAxisVerticalOffset:c=22,yAxisHorizontalOffset:h=50,strokeWidth:d=1,graphStrokeWidth:u=1,xTicksFormatter:m=(e=>e.toString()),yTicksFormatter:p=(e=>e.toString()),d1XValueFormatter:y=(e=>e.toString()),d2XValueFormatter:x=(e=>e.toString()),d1YValueFormatter:f=(e=>e.toString()),d2YValueFormatter:C=(e=>e.toString()),d1DeltaXValueFormatter:b=(e=>e.toString()),d2DeltaXValueFormatter:w=(e=>e.toString())})=>{const{cursor:v,onMouseMove:L,onMouseLeave:S,onMouseWheel:E}=at({scale:n,setScale:s}),{width:k,height:V,halfWidth:A,midValue:T,d1:M,d2:D,xTicks:I,yTicks:_,valueToX:P,valueToY:W}=st({symbol:e,d1Group:t,d2Group:i,width:r-h,height:o-c,cursor:v,scale:n,yAxisScale:l});return g.createElement(Je.Stage,{width:r,height:o,onMouseMove:L,onMouseOut:S,onWheel:E},g.createElement(Je.Layer,{hitGraphEnabled:!1},g.createElement(Je.Group,{height:V},g.createElement(Je.Line,{points:[A,0,A,V],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:d}),g.createElement(Je.Shape,{sceneFunc:(e,t)=>{e.beginPath();let r=A,o=V,n=!0;i.forEach((({xData:t,yData:i})=>{if(r=P(t),r<0||r>A)return;const s=W(i);n?(e.moveTo(r,o),n=!1):e.lineTo(r,o),o=s,e.lineTo(r,o)})),e.lineTo(-d,o),e.lineTo(-d,V),e.fillStrokeShape(t)},fill:a.d2.fillColor,stroke:a.d2.lineColor,strokeWidth:u}),g.createElement(Je.Shape,{sceneFunc:(e,i)=>{e.beginPath();let r=A,o=V,n=!1;t.forEach((({xData:t,yData:i})=>{if(r=P(t),r>k||r<A)return;const s=W(i);n?(e.moveTo(r,o),n=!1):e.lineTo(r,o),o=s,e.lineTo(r,o)})),e.lineTo(k+d,o),e.lineTo(k+d,V),e.fillStrokeShape(i)},fill:a.d1.fillColor}),g.createElement(Je.Shape,{sceneFunc:(e,i)=>{e.beginPath();let r=A,o=V,n=!1;t.forEach((({xData:t,yData:i})=>{if(r=P(t),r>k||r<A)return;const s=W(i);n?(e.moveTo(r,o),n=!1):e.lineTo(r,o),o=s,e.lineTo(r,o)})),e.lineTo(k+d,o),e.fillStrokeShape(i)},stroke:a.d1.lineColor,strokeWidth:u}),M.x?g.createElement(g.Fragment,null,g.createElement(Je.Line,{points:[M.x,0,M.x,V],stroke:a.d1.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Line,{points:[A,M.y,k,M.y],stroke:a.d1.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Line,{points:[D.x,0,D.x,V],stroke:a.d2.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Line,{points:[a.tag.width,D.y,A,D.y],stroke:a.d2.lineColor,strokeWidth:d,dash:[2,2]}),g.createElement(Je.Circle,{x:M.x,y:M.y,radius:3,fill:a.d1.lineColor}),g.createElement(Je.Label,{x:.5*(M.x+A),y:M.y+.5*a.tag.height},g.createElement(Je.Tag,{pointerDirection:"down",fill:a.background}),g.createElement(Je.Text,{text:b(M.xData,T),fill:a.d1.lineColor,padding:3})),g.createElement(Je.Circle,{x:D.x,y:D.y,radius:3,fill:a.d2.lineColor}),g.createElement(Je.Label,{x:.5*(D.x+A),y:D.y+.5*a.tag.height},g.createElement(Je.Tag,{pointerDirection:"down",fill:a.background}),g.createElement(Je.Text,{text:w(D.xData,T),fill:a.d2.lineColor,padding:3})),g.createElement(Je.Label,{x:k,y:M.y},g.createElement(Je.Tag,{pointerDirection:"left",pointerWidth:a.tag.width,pointerHeight:a.tag.height,fill:a.background}),g.createElement(Je.Text,{text:f(M.yData),fill:a.d1.lineColor,padding:3})),g.createElement(Je.Label,{x:0,y:D.y},g.createElement(Je.Tag,{pointerDirection:"left",pointerWidth:a.tag.width,pointerHeight:a.tag.height,fill:a.d2.fillColor}),g.createElement(Je.Text,{text:C(D.yData),fill:a.d2.lineColor,padding:3})),g.createElement(Je.Rect,{x:M.x,y:0,width:k-M.x,height:V,fill:a.hoverBgColor}),g.createElement(Je.Rect,{x:0,y:0,width:D.x,height:V,fill:a.hoverBgColor})):null),g.createElement(Je.Group,{y:V},I.map(((e,t)=>g.createElement(g.Fragment,{key:t},g.createElement(Je.Line,{points:[P(e),0,P(e),4],stroke:a.textColor,strokeWidth:d}),g.createElement(Je.Text,{x:P(e)-20,y:3,text:m(e),fill:a.textColor,padding:3})))),M.x?g.createElement(g.Fragment,null,g.createElement(Je.Label,{x:M.x,y:2},g.createElement(Je.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:a.background}),g.createElement(Je.Text,{text:y(M.xData),fill:a.d1.lineColor,padding:3})),g.createElement(Je.Line,{points:[M.x,0,M.x,4],stroke:a.d1.lineColor,strokeWidth:d}),g.createElement(Je.Label,{x:D.x,y:2},g.createElement(Je.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:1,fill:a.background}),g.createElement(Je.Text,{text:x(D.xData),fill:a.d2.lineColor,padding:3})),g.createElement(Je.Line,{points:[D.x,0,D.x,4],stroke:a.d2.lineColor,strokeWidth:d})):null),g.createElement(Je.Group,{x:k},_.map(((e,t)=>g.createElement(g.Fragment,{key:t},g.createElement(Je.Line,{points:[0,W(e),4,W(e)],stroke:a.textColor,strokeWidth:d}),g.createElement(Je.Text,{x:8,y:W(e)-5,text:p(e),fill:a.textColor})))))))},VerticalDepthChart:({symbol:e,d1Group:t,d2Group:i,canvas:r,scale:o,setScale:n,styles:s,yAxisScale:a=.9,xAxisVerticalOffset:l=0,yAxisHorizontalOffset:c=60,strokeWidth:h=1,graphStrokeWidth:d=2,yTicksFormatter:u=(e=>e.toString()),d1XValueFormatter:m=(e=>e.toString()),d2XValueFormatter:p=(e=>e.toString()),d1YValueFormatter:y=(e=>e.toString()),d2YValueFormatter:x=(e=>e.toString())})=>{const f=t.map(ot),C=i.map(ot),{cursor:b,onMouseMove:w,onMouseLeave:v,onMouseWheel:L}=at({scale:o,setScale:n}),{height:S,halfWidth:E,d1:k,d2:V,xTicks:A,valueToX:T,valueToY:M}=st({symbol:e,d1Group:f,d2Group:C,width:r.height-l,height:r.width-c,cursor:{x:r.height-b.y,y:b.x},scale:o,yAxisScale:a});return g.createElement(Je.Stage,{width:r.width,height:r.height,onMouseMove:w,onMouseOut:v,onWheel:L},g.createElement(Je.Layer,{hitGraphEnabled:!1},g.createElement(Je.Group,{x:c},g.createElement(Je.Line,{points:[0,E,S,E],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:h}),g.createElement(Je.Shape,{sceneFunc:(e,t)=>{e.beginPath();let i=S,o=E,n=!0;C.forEach((({xData:t,yData:s})=>{if(o=r.height-T(t),o>r.height||o<E)return;const a=M(s);n?(e.moveTo(i,o),n=!1):e.lineTo(i,o),i=a,e.lineTo(i,o)})),e.lineTo(i,r.height+h),e.lineTo(S+h,r.height+h),e.fillStrokeShape(t)},fill:s.d2.fillColor,stroke:s.d2.lineColor,strokeWidth:d}),g.createElement(Je.Shape,{sceneFunc:(e,t)=>{e.beginPath();let i=S,o=E,n=!1;f.forEach((({xData:t,yData:s})=>{if(o=r.height-T(t),o<0||o>E)return;const a=M(s);n?(e.moveTo(i,o),n=!1):e.lineTo(i,o),i=a,e.lineTo(i,o)})),e.lineTo(i,-h),e.lineTo(S,-h),e.fillStrokeShape(t)},fill:s.d1.fillColor,stroke:s.d1.lineColor,strokeWidth:d}),k.x?g.createElement(g.Fragment,null,g.createElement(Je.Line,{points:[0,r.height-k.x,S,r.height-k.x],stroke:s.d1.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Line,{points:[k.y,0,k.y,E],stroke:s.d1.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Line,{points:[0,r.height-V.x,S,r.height-V.x],stroke:s.d2.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Line,{points:[V.y,E,V.y,r.height],stroke:s.d2.lineColor,strokeWidth:h,dash:[2,2]}),g.createElement(Je.Circle,{x:k.y,y:r.height-k.x,radius:3,fill:s.d1.lineColor}),g.createElement(Je.Circle,{x:V.y,y:r.height-V.x,radius:3,fill:s.d2.lineColor}),g.createElement(Je.Label,{x:k.y,y:0},g.createElement(Je.Tag,{pointerDirection:"up",pointerWidth:4,pointerHeight:2,fill:s.d1.fillColor}),g.createElement(Je.Text,{text:y(k.yData),fill:s.d1.lineColor,padding:3})),g.createElement(Je.Label,{x:V.y,y:r.height},g.createElement(Je.Tag,{pointerDirection:"down",pointerWidth:4,pointerHeight:2,fill:s.d2.fillColor}),g.createElement(Je.Text,{text:x(k.yData),fill:s.d2.lineColor,padding:3})),g.createElement(Je.Rect,{x:0,y:0,width:S,height:r.height-k.x,fill:s.hoverBgColor}),g.createElement(Je.Rect,{x:0,y:r.height-V.x,width:S,height:V.x,fill:s.hoverBgColor})):null),g.createElement(Je.Group,null,g.createElement(Je.Line,{points:[c,0,c,r.height],stroke:"rgba(100, 100, 100, 0.4)",strokeWidth:h}),A.map(((e,t)=>{const i=r.height-T(e);return g.createElement(g.Fragment,{key:t},g.createElement(Je.Line,{points:[c-4,i,c,i],stroke:s.textColor,strokeWidth:h}),g.createElement(Je.Label,{x:c-4,y:i},g.createElement(Je.Tag,{pointerDirection:"right",pointerWidth:0,pointerHeight:0,strokeWidth:0}),g.createElement(Je.Text,{text:u(e),fill:s.textColor,padding:3})))})),k.x?g.createElement(g.Fragment,null,g.createElement(Je.Label,{x:c-4,y:r.height-k.x},g.createElement(Je.Tag,{pointerDirection:"right",pointerWidth:s.tag.width,pointerHeight:s.tag.height,fill:s.background}),g.createElement(Je.Text,{text:m(k?.xData),fill:s.d1.lineColor,padding:3})),g.createElement(Je.Line,{points:[c-4,r.height-k.x,c,r.height-k.x],stroke:s.d1.lineColor,strokeWidth:h}),g.createElement(Je.Label,{x:c-4,y:r.height-V.x},g.createElement(Je.Tag,{pointerDirection:"right",pointerWidth:s.tag.width,pointerHeight:s.tag.height,fill:s.background}),g.createElement(Je.Text,{text:p(V?.xData),fill:s.d2.lineColor,padding:3})),g.createElement(Je.Line,{points:[c-4,r.height-V.x,c,r.height-V.x],stroke:s.d2.lineColor,strokeWidth:h})):null)))},TradingViewNext:St,BasicKline:fa,MiniSymbol:n,Icons:l,TooltipContents:c}},5007:(e,t,i)=>{i.r(t),i.d(t,{createStore:()=>a,getCandlestickHistory:()=>l});var r=i(67997),o=i.n(r),n=i(28280);const s=e=>({candlestickHistory:[],setCandlestickHistory:t=>e({candlestickHistory:t})}),a=o()(((e="unspecific-chart-namespace")=>(0,n.Ue)(((...e)=>({...s(...e)}))))),l=e=>[e.candlestickHistory,e.setCandlestickHistory]},79025:(e,t,i)=>{i.r(t),i.d(t,{createStore:()=>s,getCandlestickKey:()=>g,getCandlestickReference:()=>h,getEditingInterval:()=>l,getIntervalConfigOpen:()=>a,getLayoutWidth:()=>m,getLoading:()=>c,getTradingViewReference:()=>d,getTvKey:()=>u});var r=i(67997),o=i.n(r),n=i(28280);const s=o()(((e="unspecific-chart-namespace")=>(0,n.Ue)((e=>({loading:!1,setLoading:t=>e({loading:t}),intervalConfigOpen:!1,setIntervalConfigOpen:t=>e({intervalConfigOpen:t}),editingInterval:!1,setEditingInterval:t=>e({editingInterval:t}),candlestickReference:void 0,setCandlestickReference:t=>e({candlestickReference:t}),tradingViewReference:void 0,setTradingViewReference:t=>e({tradingViewReference:t}),tvKey:1,reloadTv:()=>e((e=>({tvKey:-1*e.tvKey}))),candlestickKey:1,reloadCandlestick:()=>e((e=>({candlestickKey:-1*e.candlestickKey}))),layoutWidth:0,setLayoutWidth:t=>e({layoutWidth:t})}))))),a=e=>[e.intervalConfigOpen,e.setIntervalConfigOpen],l=e=>[e.editingInterval,e.setEditingInterval],c=e=>[e.loading,e.setLoading],h=e=>[e.candlestickReference,e.setCandlestickReference],d=e=>[e.tradingViewReference,e.setTradingViewReference],u=e=>[e.tvKey,e.reloadTv],g=e=>[e.candlestickKey,e.reloadCandlestick],m=e=>[e.layoutWidth,e.setLayoutWidth]},75343:(e,t,i)=>{i.r(t),i.d(t,{ChartMode:()=>n,DisplayIntervals:()=>r,OrderMarkOption:()=>o,OriginalChartStyle:()=>c.oX,PriceType:()=>s,SeriesStyle:()=>l,Tabs:()=>a,createStore:()=>m,getActiveTab:()=>L,getChartMode:()=>C,getInterval:()=>b,getLastSelectedMiniMultiChartWindow:()=>p,getMiniMultiChartWindows:()=>f,getOrderMarkOptions:()=>V,getOriginalChartStyle:()=>x,getPriceType:()=>v,getSelectedIntervals:()=>w,getShowExecutionOrder:()=>k,getShowLimitOrder:()=>S,getShowPositionOrder:()=>E,getTrueInterval:()=>A,getTvChartStyle:()=>y});var r,o,n,s,a,l,c=i(9704),h=i(67997),d=i.n(h),u=i(28280),g=i(23852);!function(e){e.Time="Time",e["1s"]="1s",e["1m"]="1m",e["3m"]="3m",e["5m"]="5m",e["15m"]="15m",e["30m"]="30m",e["1h"]="1h",e["2h"]="2h",e["4h"]="4h",e["6h"]="6h",e["8h"]="8h",e["12h"]="12h",e["1d"]="1d",e["3d"]="3d",e["1w"]="1w",e["1M"]="1M"}(r||(r={})),function(e){e[e.Unkonwn=-1]="Unkonwn",e[e.Open=0]="Open",e[e.Position=1]="Position",e[e.Execution=2]="Execution"}(o||(o={})),function(e){e[e.Single=1]="Single",e[e.Four=4]="Four"}(n||(n={})),function(e){e.Last="last",e.Mark="mark",e.Index="index"}(s||(s={})),function(e){e.Origin="origin",e.TradingView="tradingView",e.Depth="depth"}(a||(a={})),function(e){e[e.Bars=0]="Bars",e[e.Candles=1]="Candles",e[e.Line=2]="Line",e[e.Area=3]="Area",e[e.HeikenAshi=8]="HeikenAshi",e[e.HollowCandles=9]="HollowCandles",e[e.Renko=4]="Renko",e[e.Kagi=5]="Kagi",e[e.PointAndFigure=6]="PointAndFigure",e[e.LineBreak=7]="LineBreak"}(l||(l={}));const m=d()(((e="unspecific-chart-storage-name")=>(0,u.Ue)((0,g.tJ)((e=>({lastSelectedMiniMultiChartWindow:0,setLastSelectedMiniMultiChartWindow:t=>e({lastSelectedMiniMultiChartWindow:t}),tvChartStyle:l.Candles,setTvChartStyle:t=>e({tvChartStyle:t}),originalChartStyle:c.oX.CandleBar,setOriginalChartStyle:t=>e({originalChartStyle:t}),chartMode:n.Single,setChartMode:t=>e({chartMode:t}),miniMultiChartWindows:["","","",""],setMiniMultiChartWindows:t=>e({miniMultiChartWindows:t}),emptyMiniMultiChartWindowByIndex:t=>e((e=>({miniMultiChartWindows:e.miniMultiChartWindows.map(((e,i)=>t===i?"":e))}))),setMiniMultiChartWindowsWithState:e,interval:r["1d"],setInterval:t=>e({interval:t}),selectedIntervals:[r.Time,r["1s"],r["15m"],r["1h"],r["4h"],r["1d"],r["1w"]],setSelectedIntervals:t=>e({selectedIntervals:t}),priceType:s.Last,setPriceType:t=>e({priceType:t}),activeTab:a.Origin,setActiveTab:t=>e({activeTab:t}),showLimitOrder:!1,setShowLimitOrder:t=>e({showLimitOrder:t}),toggleShowLimitOrder:()=>e((e=>({showLimitOrder:!e.showLimitOrder}))),showPositionOrder:!1,setShowPositionOrder:t=>e({showPositionOrder:t}),toggleShowPositionOrder:()=>e((e=>({showPositionOrder:!e.showPositionOrder}))),showExecutionOrder:!1,setShowExecutionOrder:t=>e({showExecutionOrder:t}),toggleShowExecutionOrder:()=>e((e=>({showExecutionOrder:!e.showExecutionOrder})))})),{name:e,version:20220921,migrate:e=>({...e,selectedIntervals:[...e.selectedIntervals,r["1s"]]})})))),p=e=>[e.lastSelectedMiniMultiChartWindow,e.setLastSelectedMiniMultiChartWindow],y=e=>[e.tvChartStyle,e.setTvChartStyle],x=e=>[e.originalChartStyle,e.setOriginalChartStyle],f=e=>[e.miniMultiChartWindows,e.setMiniMultiChartWindows,e.emptyMiniMultiChartWindowByIndex,e.setMiniMultiChartWindowsWithState],C=e=>[e.chartMode,e.setChartMode],b=e=>[e.interval,e.setInterval],w=e=>[e.selectedIntervals,e.setSelectedIntervals],v=e=>[e.priceType,e.setPriceType],L=e=>[e.activeTab,e.setActiveTab],S=e=>[e.showLimitOrder,e.setShowLimitOrder,e.toggleShowLimitOrder],E=e=>[e.showPositionOrder,e.setShowPositionOrder,e.toggleShowPositionOrder],k=e=>[e.showExecutionOrder,e.setShowExecutionOrder,e.toggleShowExecutionOrder],V=e=>[e.showLimitOrder?o.Open:o.Unkonwn,e.showPositionOrder?o.Position:o.Unkonwn,e.showExecutionOrder?o.Execution:o.Unkonwn].filter((e=>e!==o.Unkonwn)),A=e=>e.interval===r.Time?r["1m"]:e.interval},20324:(e,t,i)=>{i.d(t,{z:()=>n});var r=i(96832),o=i(39378);const n=(e,...t)=>{const i=(0,r.useRef)((()=>{}));return i.current=e,(0,r.useCallback)((0,o.throttle)((function(...e){return i.current.apply(this,e)}),...t),[])}},83065:(e,t,i)=>{i.d(t,{D:()=>r});const r=(e,t)=>{const[i]=/(#\w+)/g.exec(e)||[];return i?((e,t)=>{const i=e.replace("#","");return`rgba(${parseInt(i.substring(0,2),16)},${parseInt(i.substring(2,4),16)},${parseInt(i.substring(4,6),16)},${t})`})(i,t):e}},23632:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 8v11H3V8h3l3-3h6l3 3h3zm-9 2a2.5 2.5 0 110 5 2.5 2.5 0 010-5z",fill:"currentColor"}))},62493:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zM10.75 8.5V6h2.5v2.5h-2.5zm0 9.5v-7h2.5v7h-2.5z",fill:"currentColor"}))},68960:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-10.25 1.25V18h2.5v-4.75H18v-2.5h-4.75V6h-2.5v4.75H6v2.5h4.75z",fill:"currentColor"}))},90154:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 3h14v18l-3.5-3-3.5 3-3.5-3L5 21V3zm3 4h4v2.5H8V7zm4 5H8v2.5h4V12zm2-5h2.5v2.5H14V7zm2.5 5H14v2.5h2.5V12z",fill:"currentColor"}))},71245:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 6h-7.79a4.001 4.001 0 00-7.42 0H3v3h2.79a4.001 4.001 0 007.42 0H21V6zm-10.21 9H3v3h7.79a4.001 4.001 0 007.42 0H21v-3h-2.79a4.001 4.001 0 00-7.42 0z",fill:"currentColor"}))},86032:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{d:"M14.121 12l3.44-3.44L21 12V3h-9l3.44 3.44L12 9.878l2.121 2.12zM3 12l3.44 3.44L9.878 12 12 14.12l-3.44 3.44L12 21H3v-9z",fill:"currentColor"}))},61942:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(96832),o=i(415);const n=e=>r.createElement(o.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},r.createElement("path",{d:"M4.621 21.5l3.44-3.439 3.439 3.44v-9h-9l3.44 3.439-3.44 3.44 2.121 2.12zM12.5 2.5l3.44 3.44 3.439-3.44L21.5 4.622l-3.44 3.44L21.5 11.5h-9v-9z",fill:"currentColor"}))}}]);