"use strict";(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[6935],{1138:(e,t,s)=>{s.d(t,{F:()=>l});var n=s(41367);const c="undefined"==typeof window,i={query:"screen and (max-width: 767px)"},r={query:"screen and (max-width: 1023px)"},o={query:"screen and (max-width: 1279px)"},a={query:"screen and (max-width: 1439px)"},u={query:"screen and (max-width: 1920px)"};function l(){if(c)return{isMobile:!1,isIPad:!1,is13Desk:!1,isLeastWebSize:!1,isScreenDesk:!1};const e=(0,n.useMediaQuery)(i),t=(0,n.useMediaQuery)(r),s=(0,n.useMediaQuery)(o);return{isMobile:e,isIPad:t,is13Desk:(0,n.useMediaQuery)(a),isLeastWebSize:s,isScreenDesk:(0,n.useMediaQuery)(u)}}},47176:(e,t,s)=>{s.d(t,{Fg:()=>l});var n=s(96832),c=s(74958);const i=e=>e.cookies||{},r="dark",o="light",a="theme",u="shouldResetTradingView",l=()=>{const{cookies:e,saveCookie:t}=(()=>{const e=(0,n.useRef)(null),t=(0,c.I0)();return e.current=(0,c.v9)(i),{cookies:e.current,saveCookie:(0,n.useCallback)(((s,n)=>{const c="function"==typeof n?n(e.current[s]):n;t.cookies.save({key:s,value:c})}),[])}})(),s=(0,n.useCallback)((()=>JSON.parse(localStorage.getItem(u)||"0")),[]),l=(0,n.useCallback)((()=>{const e=s();localStorage.setItem(u,JSON.stringify(e+1))}),[s]);return{isLight:e[a]!==r,shouldResetTradingViewKey:u,getThemeCounter:s,incThemeCounter:l,toggleTheme:(0,n.useCallback)((()=>{t(a,(e=>e!==o?o:r)),l()}),[l])}}},59487:(e,t,s)=>{s.d(t,{Z:()=>c});var n=s(96832);const c=function(e,t){var s=(0,n.useRef)((function(){}));(0,n.useEffect)((function(){s.current=e})),(0,n.useEffect)((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},16935:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var n=s(58138),c=s(96832),i=s(86282),r=s(1138),o=s(49247),a=s(72249),u=s(39378),l=s(47176),d=s(59487),g=s(88594),f=s(12560);const x="t.third";let h,b;const p=Array.from({length:4},(()=>x));var m=s(19805);const j={mx:"10px",alignItems:"center",bg:"moduleBg",width:"auto","& .tips":{fontSize:"12px",ml:"10px",letterSpacing:"0.32px"},"& .disconnectedTips":{color:"t.secondary"},"& .stableTips":{color:"t.buy"},"& .reconnectingTips":{color:"primary"}},y=c.memo((({status:e,connectingDeco:t})=>{const{getI18n:s}=(0,m.yk)();switch(e){case"disconnected":return(0,n.jsx)(o.Z,Object.assign({className:"tips disconnectedTips"},{children:s("disconnected",{defaultValue:"Disconnected"})}));case"slow":return(0,n.jsx)(o.Z,Object.assign({className:"tips stableTips"},{children:s("unstableConnection",{defaultValue:"Unstable connection"})}));case"stable":return(0,n.jsx)(o.Z,Object.assign({className:"tips stableTips"},{children:s("stableConnection",{defaultValue:"Stable Connection"})}));case"reconnecting":return(0,n.jsxs)(o.Z,Object.assign({className:"tips reconnectingTips"},{children:[s("reconnection",{defaultValue:"Connecting"}),t]}));default:return(0,n.jsx)(o.Z,{className:"tips"})}})),w=c.memo((({colorList:e})=>(0,n.jsxs)("svg",Object.assign({width:"16",height:"12",viewBox:"0 0 16 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[(0,n.jsx)("rect",{y:"9.667",width:"1.67",height:"2.5",fill:e[0]}),(0,n.jsx)("rect",{x:"4.44446",y:"5.667",width:"1.66667",height:"6.67",fill:e[1]}),(0,n.jsx)("rect",{x:"8.88892",y:"3",width:"1.66667",height:"10.83",fill:e[2]}),(0,n.jsx)("rect",{x:"13.3333",width:"1.66667",height:"15",fill:e[3]})]})))),k=function(){const{status:e,colorList:t,connectingDeco:s}=(({themeColor:e="buy"})=>{const t=Array.from({length:4},(()=>e)),s=(0,l.Fg)().isLight?g.ib:g.Cs,[n,i]=(0,c.useState)(""),[r,o]=(0,c.useState)(""),[a,m]=(0,c.useState)(!0),j=(0,c.useRef)(0),[y,w]=(0,c.useState)("connected"===n?t:p),[k,S]=(0,c.useState)(0),v=(0,f.l6)(!0);(0,c.useEffect)((()=>v.getStreamTickers().subscribe((()=>{h=Date.now()}))),[]);const C=(0,c.useRef)(new Set([]));return(0,c.useEffect)((()=>(0,f.l6)(!0).getOrderbookStatusStream().subscribe((({status:e})=>{C.current.has(e)?m("connected"===e):C.current.add(e)}))),[y,m]),(0,d.Z)((()=>{if(j.current>10)return i("disconnected"),void w(p);"reconnecting"===n?j.current+=1:j.current=0}),a?null:1e3),(0,c.useEffect)((()=>(0,f.l6)(!0).getSocketEventsStream().subscribe((({event:e})=>{"reConnected"===e&&(j.current=0,i("reconnecting"))})))),(0,d.Z)((()=>{h&&Date.now()-h>=5e3&&b!==h?(b=h,w([e,e,e,x]),i("slow")):(w(t),i("stable"))}),a?1e3:null),(0,d.Z)((()=>{const e=Array.from({length:4},((e,t)=>t<=k?"primary":x));S((k+1)%4),o(` ${Array.from({length:(k+1)%4},(()=>".")).join("")}`),i("reconnecting"),w(e)}),!a&&j.current<=10?500:null),{status:n,colorList:y.map((e=>(0,u.get)(s.colors,e,e))),connectingDeco:r}})({themeColor:"buy"});return(0,n.jsxs)(a.Z,Object.assign({sx:j},{children:[(0,n.jsx)(w,{colorList:t}),(0,n.jsx)(y,{status:e,connectingDeco:s})]}))};var S=s(57018);const v={justifyContent:"space-between",height:"24px",width:"100vw",bg:"moduleBg",position:"fixed",bottom:"0px",zIndex:"100",borderTop:"1px solid",borderColor:"overallBg",display:"flex"},C={justifyContent:"flex-end",bg:"moduleBg",width:"100%",display:"flex",padding:["15px 0","0","0"],flexShrink:"0",position:"fixed",bottom:"0px",zIndex:2},O=({sx:e={}})=>(0,n.jsx)(i.Z,{sx:Object.assign(Object.assign({},C),e)}),T=function({sx:e={}}){const{isMobile:t}=(0,r.F)();return t?(0,n.jsx)(O,{sx:e}):(0,n.jsx)(i.Z,Object.assign({sx:Object.assign(Object.assign({},v),e),id:"trade-footer"},{children:(0,n.jsx)(S.Z,Object.assign({name:"connectStatus"},{children:(0,n.jsx)(k,{})}))}))}}}]);