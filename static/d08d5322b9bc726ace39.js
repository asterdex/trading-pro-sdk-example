"use strict";(self.webpackChunkaden_trade_sdk=self.webpackChunkaden_trade_sdk||[]).push([[1606],{79686:(e,t,n)=>{n.d(t,{JU:()=>j});var i=n(51485),a=n(72249),o=n(49247),r=n(10600),s=n(72729),l=n(91531),c=n(91163),d=n(75402),u=n(96832),p=n(2237),h=n(29543);const m=({onClose:e,title:t,message:n,okText:i})=>u.createElement(a.Z,{flexDirection:"column",alignItems:"center",width:["calc(100vw - 32px)","360px","360px"],maxWidth:"360px",p:"28px 24px",textAlign:"center",bg:"interactiveBg"},u.createElement(l.Z,{size:85,mb:"16px"}),u.createElement(o.Z,{variant:"headline6",mb:"xs",color:"t.primary"},t),u.createElement(o.Z,{variant:"body2",color:"t.secondary",mb:"md",textAlign:"center",maxHeight:"140px",overflowY:"auto",overflowX:"hidden",px:"2px",sx:{wordBreak:"break-word"}},n),u.createElement(r.Z,{sz:"normal",flex:"1",width:1,height:"40px",onClick:e},i));let[x,f,b,g,w]=[!1,"",!1,!1,!1];const j=({autoWarn:e=!0,sourceCode:t="",i18n:n}={autoWarn:!0,sourceCode:""})=>{const[a,o]=(0,u.useState)(!1),[r,l]=(0,u.useState)(0),[j,C]=(0,u.useState)(!1),k=((e,t)=>{const{t:n}=(0,p.$)("cloud-tdk",t?{i18n:t}:void 0);return(0,u.useMemo)((()=>"US"===e?{title:n("us-security-notice-title","US users notice"),message:n("us-security-notice-desc",'Citizens of the United States and users who are based in or living in any state in the country (collectively referred to as "US users") are prohibited from accessing the ApolloX platform. If you are a US user, you are not allowed to access the platform or bypass the platform restriction.'),okText:n("us-security-notice-OK","OK")}:{title:n("common-security-notice-title","Restricted areas users notice"),message:u.createElement(h.c,{t:n,i18nKey:"common-security-notice-desc",components:{MoreLink:u.createElement(s.Z,{target:"_blank",sx:{color:"t.link",display:"inline-block",cursor:"pointer","&:hover":{color:"t.linkHover"}},href:"https://apollox-finance.gitbook.io/apollox-finance/about-us/privacy-policy/restriction"})},defaults:"Users who are based in or living in any restricted areas are prohibited from accessing the ApolloX platform. If you are a restricted area user, you are not allowed to access the platform or bypass the platform restriction. <MoreLink>Click to see restriction area list.</MoreLink>"}),okText:n("us-security-notice-OK","OK")}),[e,n])})(f,n),v=(0,u.useCallback)((()=>{if(!x)return;const{close:e}=(0,c.u_)({content:u.createElement(m,{onClose:()=>{o(!0),e()},...k}),needCloseIcon:!1,sx:{p:0,bg:"unset",borderRadius:"8px"}})}),[x,k]),y=(0,u.useCallback)((()=>setTimeout((()=>{l((e=>e+1))}),200)),[]);return(0,u.useEffect)((()=>{(async()=>{if(!d.C||b)return void y();b=!0;const{success:e,data:{isBlocked:n,country:a}}=await(async(e="")=>{let t;try{t=await(0,i.v_)("/bapi/futures/v1/public/future/web3/common-check-ip",{sourceCode:e})}catch(e){t={success:!1}}return t})(t);e&&(x=n,f=a),g=!0,C(!0)})()}),[y,t]),(0,u.useEffect)((()=>{d.C&&(j||!g?j||g||y():C(!0))}),[x,y,r,g,j]),(0,u.useEffect)((()=>{x&&e&&!w&&(v(),w=!0)}),[x,e,v]),(0,u.useMemo)((()=>({isBlockIp:x,isUSIp:"US"===f,checked:j,isClose:a,doShowWarn:v})),[x,f,j,a,v])};new Error("US ip prohibited connect wallet")},470:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(96832),a=n(72249),o=n(86282),r=n(22697),s=n(79457),l=n(73892),c=n(4940),d=n(1515);const u=({isShow:e,variant:t,getValid:n,customIcon:o})=>{const r={info:s.Z,error:l.Z,warning:s.Z,success:c.Z}[t],d=o&&n(o)?i.cloneElement(o,{size:20,...o.props},[]):i.createElement(r,{size:20});return e?i.createElement(a.Z,{sx:{width:"24px",height:"24px",mr:"xs",justifyContent:"center",alignItems:"center",flexShrink:0}},d):null},p=({isShow:e,onClose:t})=>e?i.createElement(a.Z,{sx:{width:"24px",height:"24px",justifyContent:"center",alignItems:"center",color:"t.disabled",marginLeft:"auto"}},i.createElement(d.Z,{size:18,onClick:t,cursor:"pointer"})):null,h=(0,i.forwardRef)((({children:e,icon:t,variant:n="warning",closable:r=!1,showIcon:s=!0,onClose:l,title:c,insideCenter:d=!1,__css:h,...m},x)=>i.createElement(a.Z,{tx:"alertV2",variant:n,alignItems:"flex-start",ref:x,width:"100%",__css:{p:"ls",...h},...m},i.createElement(a.Z,{justifyContent:d?"center":"",flex:"1",alignItems:"flex-start"},i.createElement(u,{isShow:s,variant:n,getValid:i.isValidElement,customIcon:t}),i.createElement(o.Z,{__css:{wordBreak:"break-word",flexShrink:1,height:"auto",lineHeight:"24px",width:d?"auto":"100%",color:`alertV2.${n}FontColor`}},c&&i.createElement(o.Z,{as:"p",__css:{fontWeight:"medium"}},c),e)),i.createElement(p,{isShow:r,onClose:l})))),m=(0,i.forwardRef)((({enablePortal:e,container:t,topOfPage:n,__css:a,...o},s)=>n||e||t?i.createElement(r.ZP,{container:t},i.createElement(h,{__css:n?{position:"fixed",top:0,left:0,zIndex:"alert",borderRadius:0,...a}:{},...o,ref:s})):i.createElement(h,{...o})));m.displayName="AlertV2";const x=m},91835:(e,t,n)=>{n.d(t,{Z:()=>p});var i=n(96832),a=n(13326),o=n(97715),r=n(415);const s=e=>i.createElement(r.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},i.createElement("path",{fillRule:"evenodd",d:"M11 5a6 6 0 110 12 6 6 0 010-12zm8 6a8 8 0 10-3.094 6.32l3.973 3.973a1 1 0 001.414-1.414l-3.973-3.973A7.965 7.965 0 0019 11z",clipRule:"evenodd"})),l=e=>i.createElement(r.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},i.createElement("path",{d:"M12 10.586l5.95-5.95a1 1 0 111.414 1.414L13.414 12l5.95 5.95a1 1 0 01-1.414 1.414L12 13.414l-5.95 5.95a1 1 0 01-1.414-1.414l5.95-5.95-5.95-5.95A1 1 0 116.05 4.636l5.95 5.95z"})),c={"&::placeholder":{fontSize:0,color:"t.disabled"}},d={"& input":{fontSize:0,mt:"-5px"},lineHeight:1.5,height:"24px"},u=(0,i.forwardRef)((({sx:e,value:t,search:n,placeholder:r,onFocus:u,onBlur:p},h)=>{const[m,x]=(0,i.useState)(t);return(0,a.Z)((()=>n(m)),100,[m]),i.createElement(o.Z,{className:"trade-widget-search",ref:h,prefix:i.createElement(s,{size:20,color:"t.disabled"}),defaultValue:t,value:m,labelFixed:!0,placeholder:r,onChange:e=>x(e.target.value),sx:c,"data-testid":"searchInput",boxProps:{sx:{...d,...e}},...m.length>0&&{suffix:i.createElement(l,{fontSize:16,color:"t.disabled",onClick:()=>x("")})},onFocus:u,onBlur:p})})),p=i.memo(u)},79457:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(96832),a=n(415);const o=e=>i.createElement(a.Z,{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...e},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zm-1.25-5.5V18h2.5v-2.5h-2.5zm0-9.5v7h2.5V6h-2.5z",fill:"currentColor"}))},13326:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(96832);function a(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var a=function(e,t){void 0===t&&(t=0);var n=(0,i.useRef)(!1),a=(0,i.useRef)(),o=(0,i.useRef)(e),r=(0,i.useCallback)((function(){return n.current}),[]),s=(0,i.useCallback)((function(){n.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){n.current=!0,o.current()}),t)}),[t]),l=(0,i.useCallback)((function(){n.current=null,a.current&&clearTimeout(a.current)}),[]);return(0,i.useEffect)((function(){o.current=e}),[e]),(0,i.useEffect)((function(){return s(),l}),[t]),[r,l,s]}(e,t),o=a[0],r=a[1],s=a[2];return(0,i.useEffect)(s,n),[o,r]}},1678:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var i=n(92336),a=n(58138),o=n(71796),r=n(68150),s=n(88927),l=n(49247),c=n(736),d=n(35116),u=n(470),p=n(52367),h=n(39378),m=n(96832),x=n(51285),f=n(63152),b=n(4337),g=n(32187),w=n(56265),j=n(37025),C=n(9500),k=n(41018),v=n(26262);const y=Object.assign(Object.assign({},C.i),{height:["100%","auto"]}),S=({visible:e,onClose:t,defaultCoin:n,getI18n:g,refreshBalance:C=(()=>null),sx:S={},dialogSx:T={},unlimitWithdrawAssets:Z=[]})=>{const[O]=(0,j.WS)(),{chainId:W}=(0,p.dc)(),B=(0,m.useRef)(n||b.J$),_=(0,v.c0)(),[E,I]=(0,m.useState)(0),D=(0,v.r9)(),[z,M]=(0,m.useState)(-1),[N,L]=(0,m.useState)(-1),A=(0,m.useMemo)((()=>(0,h.debounce)((()=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){if(e){let e=yield(0,o.yd)({assetName:B.current},_);const t=yield(0,o.BQ)();if(!_){const{data:{chainWithdrawLimit:n}}=yield(0,r.zZ)({currency:B.current,chainId:W});e=B.current===b.J$?Math.min(e,Number(n)-t):Math.min(e,Number(n)),e=e<0?0:e}if(Z.includes(B.current)||_)(0,x.unstable_batchedUpdates)((()=>{I(e),L(t),M(-1)}));else{const{data:{userRemainingLimit:n,totalRemainingLimit:i}}=yield(0,r.pp)(!1);(0,x.unstable_batchedUpdates)((()=>{I(e),L(t),M(Math.min(n,i)||0)}))}}}))),500)),[B,e,_,W]),R=(0,m.useCallback)((e=>{B.current=e||b.J$,e?A():(I(0),L(-1),M(-1))}),[A]);(0,m.useEffect)((()=>{e&&R(n||b.J$)}),[e,n,R]);const V=(0,m.useCallback)((({coin:e,amount:n})=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){if(O)try{yield O.checkExchangeBalance(e,n),O.withdraw(e,n,{afterWithdraw:C}),t()}catch(e){if(e.i18n){const t=e;(0,d.i)({message:g(t.i18n,t.defaultI18n),okText:g("dex-dialog-ok","Ok"),cancelText:""})}}}))),[O,t]),F=(0,m.useMemo)((()=>D?[(0,a.jsx)(k.Y,{label:g("dex-withdraw-from","Withdraw from"),getI18n:g,onChangeType:A},"tradeType")]:[]),[g]);return(0,a.jsxs)(s.Z,Object.assign({sx:Object.assign(Object.assign({},y),T),visible:e},{children:[(0,a.jsxs)(l.Z,Object.assign({variant:"headline6",className:"title"},{children:[g("Withdraw",{defaultValue:"Withdraw"}),(0,a.jsx)(c.Z,{className:"close",onClick:t})]})),(0,a.jsx)(w.Z,{available:E,maxWithdraw:z,realizedPnl:N,onConfirm:V,onChangeCoin:R,defaultCoin:n||b.J$,getI18n:g,type:f.C.Withdraw,bottom:(0,a.jsxs)(u.Z,Object.assign({mt:"20px",variant:"info"},{children:[(0,a.jsx)(l.Z,Object.assign({fontSize:"14px",fontWeight:"500"},{children:g("wallet-reject-alert-title",{defaultValue:"Withdrawal Precautions"})})),(0,a.jsx)(l.Z,Object.assign({fontSize:"12px"},{children:g("wallet-reject-alert-content",{defaultValue:"Please make sure your wallet has enough GAS fee to complete the withdraw."})})),(0,a.jsx)(l.Z,Object.assign({fontSize:"12px"},{children:g("wallet-reject-alert-content-2",{defaultValue:"If you click “Reject” or “Withdrawal Failed” in the wallet, the assets will be returned within 60 minutes, please be patient."})}))]})),suffixFields:F,sx:S})]}))},T=e=>{var{tradeType:t=v.v3.Futures,isSupportSpot:n=!0,sourceCode:o}=e,r=(0,i.__rest)(e,["tradeType","isSupportSpot","sourceCode"]);return(0,a.jsx)(g.m,{children:(0,a.jsx)(v.B9,Object.assign({tradeType:t,isSupportSpot:n,visible:r.visible,sourceCode:o},{children:(0,a.jsx)(S,Object.assign({},r))}))})}},6540:(e,t,n)=>{n.d(t,{gl:()=>pe,v3:()=>oe.v3,bO:()=>be}),n(1678),n(86334);var i=n(92336),a=n(58138),o=n(96832),r=n(79686),s=n(72249),l=n(86282),c=n(49247),d=n(10600),u=n(33687),p=n(37218),h=n(57110),m=n(214),x=n(65871),f=n(97715),b=n(71882),g=n(29543),w=n(33837),j=n(4337),C=n(27005),k=n(68150),v=n(49241),y=n(3470);const S={sx:{".bn-input-suffix":{mr:0},"&:not(.bn-input-status-disabled):hover, .bn-input-status-focus":{border:"none",borderBottom:"1px solid",borderColor:"primary"},borderRadius:0,border:"none",width:"100%",height:"40px",margin:"0",borderBottom:"1px solid",borderColor:e=>(0,w.DZ)(e.colors.t.third,.3),boxShadow:"unset",input:{boxShadow:"unset",textAlign:"left",fontSize:"16px","&::placeholder":{color:e=>(0,w.DZ)(e.colors.t.third,.5),fontSize:"16px"}}}},T={"&::placeholder":{textAlign:"left !important"},border:"none !important",MozAppearance:"textfield","::-webkit-outer-spin-button, ::-webkit-inner-spin-button":{WebkitAppearance:"none"}},Z={border:"none !important",fontSize:"14px",bg:"inputBg",".bn-input-prefix":{display:"flex",alignItems:"center","> label":{height:"22px"}},".bn-input-suffix":{display:"flex",alignItems:"center",height:"100%",marginLeft:"4px"},"> .bn-input-status-disabled":{bg:"transparent !important","> input::placeholder":{color:"t.placeholder"}}},O=({type:e,value:t,onChange:n,available:i,maxWithdraw:o,realizedPnl:r,asset:u,precision:p=8,getI18n:h,maxDeposit:m,t:w,disabled:O=!1,residualDeposit:W=-1})=>{const B=(0,v.w)({oldValue:t,precision:p}),_=Number(-1===o?i:Math.min(o,Number(i))),E=Number(t)>Number(i),I=W>=0&&Number(t)>W,D=o>=0&&Number(t)>o,{data:z}=(0,C.useQuery)([j.pW.GET_DEX_WITHDRAW_LIMIT],(()=>(0,k.pp)(!1)));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,Object.assign({mb:"12px",sx:Z},{children:(0,a.jsx)(f.Z,{type:"number",inputMode:"decimal",sx:T,value:t,onChange:e=>n(B(e.currentTarget.value)),boxProps:S,variant:"inline",labelFixed:!0,error:E||I,placeholder:h("Amount"),disabled:O,suffix:(0,a.jsxs)(s.Z,Object.assign({alignItems:"center"},{children:[(0,a.jsx)(d.Z,Object.assign({px:"8px",type:"button",variant:"quiet",onClick:()=>{n((0,b.GW)(_,p).toString())}},{children:(0,a.jsx)(c.Z,Object.assign({variant:"body1",color:"t.yellow"},{children:h("MAX")}))})),(0,a.jsx)(c.Z,Object.assign({as:"span",variant:"body1",color:"t.primary"},{children:u}))]}))})})),(0,a.jsx)(c.Z,Object.assign({variant:"caption",color:"t.secondary",mb:"4px"},{children:`${h("availableBalance",{defaultValue:"Available Balance"})}: ${i} ${u}`})),(()=>{switch(e){case"deposit":return I?(0,a.jsx)(c.Z,Object.assign({variant:"caption",color:"t.sell"},{children:(0,a.jsx)(g.c,{t:w,i18nKey:"futures-trade-deposit-residual-hint",defaults:"You can have a maximum of {{maxDeposit}} {{coin}} in your account as margin asset.",values:{maxDeposit:m,coin:u}})})):E?(0,a.jsx)(c.Z,Object.assign({variant:"caption",color:"t.sell",mb:"4px"},{children:h("insufficientBalance",{defaultValue:"Insufficient balance"})})):null;case"withdraw":return(0,a.jsxs)(a.Fragment,{children:[E&&(0,a.jsx)(c.Z,Object.assign({variant:"caption",color:"t.sell",mb:"4px"},{children:h("insufficientBalance",{defaultValue:"Insufficient balance"})})),-1!==r&&u===j.J$&&(0,a.jsxs)(s.Z,Object.assign({alignItems:"center"},{children:[(0,a.jsx)(x.Z,Object.assign({arrow:!0,tip:h("wallet-withdraw-amount-24h-pnl-tip",{defaultValue:"Realized profits within 24 hours will be temporarily frozen and will be automatically unlocked over time."}),placement:"top"},{children:(0,a.jsxs)(c.Z,Object.assign({color:"t.secondary",variant:"caption",sx:{cursor:"pointer",borderBottom:"1px dotted",borderColor:"t.secondary"}},{children:[h("wallet-withdraw-amount-24h-pnl",{defaultValue:"24-hour realized profit"}),":"]}))})),(0,a.jsxs)(c.Z,Object.assign({color:"t.secondary",variant:"caption"},{children:[" ",`${(0,y.Bz)(r,p).toString()} ${u}`]}))]})),-1!==o&&z&&(0,a.jsx)(c.Z,Object.assign({variant:"caption",color:D?"t.sell":"t.secondary",mt:"4px"},{children:h("dailyWithDrawLimitation",{defaultValue:"Daily withdrawal limitation: {{remaining}} / {{total}} USD",remaining:(0,y.uf)(z.data.userRemainingLimit,2,3),total:(0,y.uf)(z.data.userLimit,2,3)})}))]});default:return null}})()]})};var W=n(415);const B=e=>o.createElement(W.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},o.createElement("path",{d:"M17.879 7.707a1 1 0 111.414 1.414l-6.586 6.586a1 1 0 01-1.414 0L4.707 9.121a1 1 0 111.415-1.414L12 13.586l5.879-5.879z"}));var _=n(37544),E=n(91835),I=n(37025),D=n(62629),z=n(71796),M=n(52367);const N=({coins:e})=>{const[t,{isReady:n}]=(0,I.WS)(),i=(0,C.useQueries)(e.map((e=>({queryKey:[j.pW.GET_WALLET_BALANCE,e.code],queryFn:()=>null==t?void 0:t.getWalletBalance(e.code),enabled:Boolean(t)&&n}))));return(0,o.useMemo)((()=>i.reduce(((t,n,i)=>{const a=e[i];return n.data?Object.assign(Object.assign({},t),{[a.code]:(0,y.HV)(n.data,a.decimals)}):t}),{})),[e,i])},L=({coins:e})=>{const{chainId:t}=(0,M.dc)(),n=(0,C.useQueries)(e.map((e=>({queryKey:[j.pW.GET_MAX_WITHDRAW_AMOUNT,e.code],queryFn:()=>Promise.all([(0,z.yd)({assetName:e.code},!1),(0,k.zZ)({currency:e.code,chainId:t})]),enabled:Boolean(t)}))));return(0,o.useMemo)((()=>n.reduce(((t,n,i)=>{const a=e[i];if(!n.data)return t;const[o,r]=n.data,s=Math.min(o,Number(r.data.chainWithdrawLimit));return Object.assign(Object.assign({},t),{[a.code]:(0,y.HV)(s,a.decimals)})}),{})),[e,n,t])},A={width:"24px",height:"24px",marginRight:"8px"},R={mt:0,height:"40px",border:"none",width:"100%",borderRadius:"16px",bg:"inputBg",".bn-input-prefix":{my:"0px",display:"flex",alignItems:"center",svg:{fill:"t.placeholder",fontSize:"16px"}},"& input":{width:"80%",fontSize:"14px",lineHeight:"20px","&::placeholder":{color:"t.placeholder"}}},V=(0,o.memo)((({coin:e,onClick:t})=>{const n=(0,h.h)();return(0,a.jsxs)(s.Z,Object.assign({alignItems:"center",sx:{cursor:"pointer"},onClick:t},{children:[e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:e.logo,style:A}),(0,a.jsx)(c.Z,Object.assign({color:"t.primary",variant:"subtitle2"},{children:(0,h.D)(e.name,n)}))]}),(0,a.jsx)(B,{width:"16px",height:"16px",ml:"4px",color:"t.primary"})]}))})),F=(0,o.memo)((({type:e,getI18n:t,coins:n,onOptionClick:i})=>{const r=(0,h.h)(),[d,u]=(0,o.useState)(""),p=(0,o.useMemo)((()=>n.filter((e=>{const{name:t}=e||{},n=new RegExp((0,D.hr)(d),"i").test((0,h.D)(t,r));return!d||n}))),[d,n,r]),m=(({coins:e,type:t})=>("deposit"===t?N:L)({coins:e}))({coins:n,type:e});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,Object.assign({mb:"16px"},{children:(0,a.jsx)(E.Z,{value:d,search:u,placeholder:t("search",{defaultValue:"Search"}),sx:R})})),(0,a.jsxs)(s.Z,Object.assign({justifyContent:"space-between",alignItems:"center",mb:"16px"},{children:[(0,a.jsx)(c.Z,Object.assign({color:"t.third",variant:"caption"},{children:t("pair",{defaultValue:"Pair"})})),(0,a.jsx)(c.Z,Object.assign({color:"t.third",variant:"caption"},{children:t("Available",{defaultValue:"Available"})}))]})),(0,a.jsx)(l.Z,Object.assign({height:"360px",overflow:"auto"},{children:(0,a.jsx)(l.Z,Object.assign({pb:"16px"},{children:p.map((e=>(0,a.jsxs)(s.Z,Object.assign({onClick:()=>i(e.code),justifyContent:"space-between",alignItems:"center",py:"16px"},{children:[(0,a.jsxs)(s.Z,Object.assign({alignItems:"center"},{children:[(0,a.jsx)("img",{src:e.logo,style:A}),(0,a.jsx)(c.Z,Object.assign({color:"t.primary",variant:"subtitle1"},{children:(0,h.D)(e.name,r)}))]})),(0,a.jsx)(c.Z,Object.assign({color:"t.primary",variant:"body1"},{children:m[e.code]||"--"}))]}),e.code)))}))}))]})})),$=(0,o.memo)((({value:e,onChange:t,getI18n:n,type:i,onSelectTokenOptionClick:r=(()=>null),onSelectTokenDrawerPopup:s=(()=>null),onSelectTokenButtonClick:l=(()=>null)})=>{const d=(0,I.v8)(),u=(0,o.useMemo)((()=>d.find((t=>t.code===e))),[d]),[p,h]=(0,o.useState)(!1),m=(0,o.useCallback)((e=>{r({token:e}),t(e),h(!1)}),[t]);return(0,o.useEffect)((()=>{p&&s()}),[p]),(0,o.useEffect)((function(){d.length&&!d.find((t=>t.code===e))&&t(d.find((e=>e.code===j.J$))?j.J$:d[0].code)}),[e,d,t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V,{coin:u,onClick:()=>{h(!0),l()}}),(0,a.jsxs)(_.ZP.Modal,Object.assign({visible:p},{children:[(0,a.jsx)(_.ZP.ModalTitle,{title:(0,a.jsx)(c.Z,Object.assign({color:"t.primary"},{children:n("selectToken",{defaultValue:"Select Token"})})),variant:"center",onClose:()=>h(!1)}),p&&(0,a.jsx)(F,{type:i,getI18n:n,coins:d,onOptionClick:m})]}))]})})),P={width:"100%",borderTop:"1px solid",borderColor:"t.third",mt:"20px",mb:"8px"},U=()=>(0,a.jsx)(l.Z,{sx:P}),J={bg:e=>(0,w.DZ)(e.colors.t.third,.08),borderRadius:"12px"},G=(0,o.memo)((({children:e})=>(0,a.jsx)(l.Z,Object.assign({sx:J},{children:e})))),H=({children:e})=>(0,a.jsx)(l.Z,Object.assign({p:"12px"},{children:e})),Q={bg:"inputBg",borderRadius:"12px",p:"12px"},K=({children:e})=>(0,a.jsx)(l.Z,Object.assign({sx:Q},{children:e})),X={height:"32px",width:"100%","&:active:not(:disabled):not(.inactive)":{bg:"transparent !important"}},q=(0,o.memo)((({t:e,onClick:t})=>(0,a.jsx)(d.Z,Object.assign({type:"button",variant:"quiet",sz:"normal",sx:X,onClick:t},{children:(0,a.jsx)(c.Z,Object.assign({as:"span",color:"t.third",variant:"caption"},{children:(0,a.jsx)(g.c,{t:e,i18nKey:"futures-trade-wantToWithDrawButton",components:{highlight:(0,a.jsx)(c.Z,{as:"span",color:"t.yellow"})},defaults:"Want to withdraw? <highlight>Here</highlight>"})}))})))),Y=e=>o.createElement(W.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},o.createElement("path",{fillRule:"evenodd",d:"M7.071 6.343C8.6 4.815 9.881 4 12 4a8.001 8.001 0 017.938 7.002c.069.548.51.998 1.062.998s1.005-.449.95-.999C21.45 5.947 17.187 2 12 2 9.147 2 7.386 3.2 5.657 4.929L4 6.586V4a1 1 0 00-2 0v5a1 1 0 001 1h5a1 1 0 000-2H5.414l1.657-1.657zm9.858 11.314C15.4 19.185 14.119 20 12 20a8.001 8.001 0 01-7.938-7.002C3.993 12.45 3.552 12 3 12s-1.005.449-.95.999C2.55 18.053 6.813 22 12 22c2.852 0 4.614-1.2 6.343-2.929L20 17.414V20a1 1 0 102 0v-5a1 1 0 00-1-1h-5a1 1 0 100 2h2.586l-1.657 1.657z",clipRule:"evenodd"})),ee={animation:"rotation 2s infinite linear","@keyframes rotation":{"0%":{transform:"rotate(0)"},"50%":{transform:"rotate(-180deg)"},"100%":{transform:"rotate(-359deg)"}}},te=(0,o.memo)((e=>{var{isLoading:t=!1,children:n}=e,o=(0,i.__rest)(e,["isLoading","children"]);return(0,a.jsx)(d.Z,Object.assign({},o,{children:t?(0,a.jsx)(Y,{fontSize:"20px",sx:ee}):n}))})),ne={display:"flex",justifyContent:"space-between",gap:"16px",button:{width:"100% !important"}},ie=({available:e,maxWithdraw:t=-1,residualDeposit:n=-1,realizedPnl:i=-1,onChangeCoin:x,onConfirm:f,defaultCoin:b=j.J$,maxDeposit:g=1/0,type:w,getI18n:C,additionCoins:k=[],disabled:v,topfoldUI:S,onConnectWalletButtonClick:T,onWithdrawButtonClick:Z,t:W,isSubmitting:B,isDrawerLayout:_,onSelectTokenOptionClick:E,onSelectTokenDrawerPopup:D,onSelectTokenButtonClick:z,prefixButtons:M=[]})=>{const N=(0,h.h)(),[L,A]=(0,o.useState)(""),[R,V]=(0,o.useState)(b),F=(0,I.W4)(R),P=(0,y.HV)(e,F),{i18n:J}=(0,p.oo)(),{sourceCode:Q=""}=u.brokerBackendConfig,{isBlockIp:X,doShowWarn:Y}=(0,r.JU)({autoWarn:!1,i18n:J,sourceCode:Q});let ee=Number(P);t>=0?ee=Math.min(Number(P),t):n>=0&&(ee=Math.min(ee,n));const ie=v||!t||!Number(e)||!Number(L)||Number(L||0)>ee,ae=(0,m._n)();return(0,o.useEffect)((()=>{A("")}),[R]),(0,a.jsxs)(s.Z,Object.assign({height:_?"360px":"auto",flexDirection:"column",justifyContent:_?"space-between":"flex-start"},{children:[(0,a.jsxs)(l.Z,Object.assign({mb:"20px"},{children:[(0,a.jsxs)(G,{children:[(0,a.jsx)(H,{children:S}),ae&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(K,{children:[(0,a.jsx)(l.Z,Object.assign({mb:"12px"},{children:(0,a.jsx)($,{value:R,onChange:(e="")=>{x(e),V(e)},getI18n:C,type:w,onSelectTokenOptionClick:E,onSelectTokenDrawerPopup:D,onSelectTokenButtonClick:z})})),(0,a.jsx)(O,{t:W,maxWithdraw:t,realizedPnl:i,value:L,onChange:A,available:P,asset:(0,h.D)(R,N),type:w,getI18n:C,precision:F,maxDeposit:g,residualDeposit:n,disabled:B})]})})]}),"withdraw"===w&&(0,a.jsx)(c.Z,Object.assign({variant:"caption",color:"t.third",mt:"8px"},{children:C("wallet-reject-alert-content-2",{defaultValue:'If you click "reject" in your wallet, your asset will remain locked and refunded later.'})}))]})),(0,a.jsxs)(l.Z,{children:[ae?(0,a.jsxs)(l.Z,Object.assign({sx:M.length>0?ne:null},{children:[M.length>0&&M,(0,a.jsx)(te,Object.assign({disabled:ie,onClick:()=>f({coin:R,amount:L},(()=>A(""))),type:"button",sz:"normal",width:"100%",isLoading:B},{children:"deposit"===w?C("Deposit",{defaultValue:"Deposit"}):C("Withdraw",{defaultValue:"Withdraw"})}))]})):(0,a.jsx)(d.Z,Object.assign({onClick:!0===X?Y:T,type:"button",sz:"normal",width:"100%"},{children:C("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"})})),ae&&"function"==typeof Z&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U,{}),(0,a.jsx)(q,{t:W,onClick:Z})]})]})]}))};var ae=n(32187),oe=n(26262),re=n(58732),se=n(77837),le=n.n(se),ce=n(80880),de=n(59712);const ue=({isDrawerLayout:e,defaultCoin:t,getI18n:n,t:r,additionCoins:s,disabled:l,topfoldUI:c,onConnectWalletButtonClick:d,onWithdrawButtonClick:u,onTransactionSuccess:p,onTransactionFail:h,onDepositButtonClick:x,onSelectTokenOptionClick:f,onSelectTokenDrawerPopup:g,onSelectTokenButtonClick:w})=>{const{isSubmitting:k,available:v,onConfirm:y,onChangeCoin:S,residualDeposit:T,maxDeposit:Z,token:O}=(({defaultCoin:e,onTransactionSuccess:t=(()=>null),onTransactionFail:n=(()=>null),onDepositButtonClick:a=(()=>null)})=>{var r;const[s]=(0,I.WS)(),[l,c]=(0,o.useState)(e||j.J$),[d,u]=(0,o.useState)("0"),p=(0,oe.r9)(),h=(0,oe.fF)(),x=(0,m._n)(),[f,g]=(0,o.useState)(!1),{data:w,refetch:k,actualData:v}=(0,ce.i)(h&&x,l),{data:y,refetch:S}=(0,ce.I)(h&&x),T=(null===(r=null==y?void 0:y.data)||void 0===r?void 0:r.reduce(((e,t)=>(e[t.asset]=Number(t.walletBalance),e)),{}))||{},Z=(0,o.useMemo)((()=>le()((()=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){if(!s)return;const e=yield s.getWalletBalance(l);u(e)}))),500)),[l,s]),O=(()=>{const e=(0,C.useQueryClient)();return({token:t,depositAmount:n})=>{e.setQueryData([j.pW.GET_RESIDUAL_DEPOSIT,t,!0],(e=>(0,b.h9)(e,n).toFixed(j.zo))),e.setQueryData([j.pW.GET_FUTURES_USER_BALANCE,!0],(e=>{var i;return(null==e?void 0:e.data)?{data:null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.map((e=>e.asset!==t?e:Object.assign(Object.assign({},e),{walletBalance:(0,b.PD)(e.walletBalance,n).toFixed(8)})))}:e}))}})(),W=(0,o.useCallback)((({coin:e,amount:o},r)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){if(s){a({coin:e,amount:o}),g(!0);try{const n=yield s.getWalletBalance(e);if(u(n),Number(n)<Number(o))throw new Error("Please enter an amount less than the max deposit amount.");yield s.deposit(e,o),null==t||t({coin:e,amount:o}),w>-1&&O({token:e,depositAmount:o})}catch(t){null==n||n({coin:e,amount:o,message:t.message})}finally{try{yield Z(),"function"==typeof r&&r()}catch(e){de.warn(e)}g(!1)}}}))),[s,w]);return(0,o.useEffect)((function(){x&&(Z(),h&&(!v||w>-1)&&(k(),S()))}),[x,h,l,Z,k,S]),{isSupportSpot:p,available:d,onConfirm:W,onChangeCoin:c,residualDeposit:w,isSubmitting:f,maxDeposit:w>=0?w+T[l]:1/0,token:l}})({defaultCoin:t,onTransactionSuccess:p,onTransactionFail:h,onDepositButtonClick:x}),{approveButton:W,allowance:B,needApprove:_}=(0,re.j)({getI18n:n,coin:O,visible:!0});return(0,a.jsx)(ie,{t:r,topfoldUI:c,onConnectWalletButtonClick:d,onWithdrawButtonClick:u,available:v,defaultCoin:O,type:"deposit",onConfirm:y,onChangeCoin:S,getI18n:n,maxDeposit:Z,residualDeposit:T,additionCoins:s,disabled:l||_&&0===Number(B),isSubmitting:k,isDrawerLayout:e,onSelectTokenOptionClick:f,onSelectTokenDrawerPopup:g,onSelectTokenButtonClick:w,prefixButtons:_&&0===Number(B)?[W]:[]})},pe=e=>{var{tradeType:t=oe.v3.Futures,isSupportSpot:n=!0,sourceCode:o}=e,r=(0,i.__rest)(e,["tradeType","isSupportSpot","sourceCode"]);return(0,a.jsx)(ae.m,{children:(0,a.jsx)(oe.B9,Object.assign({tradeType:t,isSupportSpot:n,sourceCode:o},{children:(0,a.jsx)(ue,Object.assign({},r))}))})};var he=n(39378),me=n(51285),xe=n(59712);const fe=({isDrawerLayout:e,defaultCoin:t,getI18n:n,t:r,refreshBalance:s=(()=>null),unlimitWithdrawAssets:l=[],additionCoins:c=[],topfoldUI:d,onConnectWalletButtonClick:u,onTransactionSuccess:p,onTransactionFail:h,onWithdrawButtonClick:m,onSelectTokenOptionClick:x,onSelectTokenDrawerPopup:f,onSelectTokenButtonClick:b})=>{const{available:g,maxWithdraw:w,realizedPnl:v,onConfirm:y,changeCoin:S,isSubmitting:T}=(({defaultCoin:e,refreshBalance:t=(()=>null),unlimitWithdrawAssets:n=[],onTransactionSuccess:a=(()=>null),onTransactionFail:r=(()=>null),onWithdrawButtonClick:s=(()=>null)})=>{const[l]=(0,I.WS)(),{chainId:c}=(0,M.dc)(),d=(0,o.useRef)(e||j.J$),u=(0,oe.c0)(),[p,h]=(0,o.useState)(0),m=(0,oe.r9)(),[x,f]=(0,o.useState)(-1),[b,g]=(0,o.useState)(-1),[w,v]=(0,o.useState)(!1),y=(0,C.useQueryClient)(),S=(0,o.useMemo)((()=>(0,he.debounce)((()=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){let e=yield(0,z.yd)({assetName:d.current},u);const t=yield(0,z.BQ)();if(!u){const{data:{chainWithdrawLimit:n}}=yield(0,k.zZ)({currency:d.current,chainId:c});e=d.current===j.J$?Math.min(e,Number(n)-t):Math.min(e,Number(n)),e=e<0?0:e}if(n.includes(d.current)||u)(0,me.unstable_batchedUpdates)((()=>{h(e),g(t),f(-1)}));else{const{data:{userRemainingLimit:n,totalRemainingLimit:i}}=yield(0,k.pp)(!1);(0,me.unstable_batchedUpdates)((()=>{h(e),g(t),f(Math.min(n,i)||0)}))}}))),500)),[d,u,c]),T=(0,o.useCallback)((e=>{d.current=e||j.J$,e?S():(h(0),g(-1),f(-1))}),[S]);return(0,o.useEffect)((()=>{T(e||j.J$)}),[e,T]),{available:p,isSupportSpot:m,maxWithdraw:x,realizedPnl:b,onConfirm:(0,o.useCallback)((({coin:e,amount:n},o)=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){if(l){s({coin:e,amount:n}),v(!0);try{yield l.checkExchangeBalance(e,n),yield l.withdraw(e,n,{afterWithdraw:t}),null==a||a({coin:e,amount:n})}catch(t){null==r||r({coin:e,amount:n,message:t.message})}finally{try{yield S(),y.invalidateQueries(j.pW.GET_DEX_WITHDRAW_LIMIT),y.invalidateQueries([j.pW.GET_MAX_WITHDRAW_AMOUNT,e]),y.invalidateQueries([j.pW.GET_RESIDUAL_DEPOSIT,e]),y.invalidateQueries(j.pW.GET_FUTURES_USER_BALANCE),"function"==typeof o&&o()}catch(e){xe.warn(e)}v(!1)}}}))),[l]),fetchAmount:S,changeCoin:T,isSubmitting:w}})({defaultCoin:t,refreshBalance:s,unlimitWithdrawAssets:l,onTransactionSuccess:p,onTransactionFail:h,onWithdrawButtonClick:m});return(0,a.jsx)(ie,{t:r,topfoldUI:d,onConnectWalletButtonClick:u,available:g,maxWithdraw:w,realizedPnl:v,onConfirm:y,onChangeCoin:S,defaultCoin:t||j.J$,getI18n:n,type:"withdraw",additionCoins:c,isSubmitting:T,isDrawerLayout:e,onSelectTokenOptionClick:x,onSelectTokenDrawerPopup:f,onSelectTokenButtonClick:b})},be=e=>{var{tradeType:t=oe.v3.Futures,isSupportSpot:n=!0,sourceCode:o}=e,r=(0,i.__rest)(e,["tradeType","isSupportSpot","sourceCode"]);return(0,a.jsx)(ae.m,{children:(0,a.jsx)(oe.B9,Object.assign({tradeType:t,isSupportSpot:n,sourceCode:o},{children:(0,a.jsx)(fe,Object.assign({},r))}))})}},29788:(e,t,n)=>{n.d(t,{L:()=>b});var i=n(58138),a=n(72249),o=n(49247),r=n(96832),s=n(415);const l=e=>r.createElement(s.Z,{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M13.293 16.879a1 1 0 001.414 1.414l5.586-5.586a1 1 0 000-1.414l-5.586-5.586a1 1 0 10-1.414 1.414l3.879 3.88H4a1 1 0 100 2h13.172l-3.88 3.878z"}));var c=n(91401),d=n(33687),u=n(37218);const{liteConfig:p}=d.brokerConfig,h={width:"24px",height:"24px",bg:"line",boxShadow:"elevation2",justifyContent:"center",alignItems:"center",borderRadius:"50%","&:not(:first-of-type)":{mr:"-8px"},img:{width:"16px",height:"16px"},"&.exchangeLogo":{img:{width:"20px",height:"20px",position:"relative"}}},m=({src:e,className:t})=>(0,i.jsx)(a.Z,Object.assign({sx:h,className:t},{children:(0,i.jsx)("img",{src:e})})),x=(0,r.memo)((()=>(0,i.jsxs)(a.Z,Object.assign({flexDirection:"row-reverse"},{children:[(0,i.jsx)(a.Z,Object.assign({sx:h},{children:(0,i.jsx)(o.Z,Object.assign({fontSize:"20px",color:"t.primary"},{children:"···"}))})),(0,i.jsx)(m,{src:c.hb}),(0,i.jsx)(m,{src:c.SZ}),(0,i.jsx)(m,{src:c.yW})]})))),f=(0,r.memo)((()=>(0,i.jsx)(m,{className:"exchangeLogo",src:p.walletLogoUrl}))),b=(0,r.memo)((({direction:e})=>{const{getI18n:t}=(0,u.yk)(),n="deposit"===e;return(0,i.jsxs)(a.Z,Object.assign({flexDirection:n?"row":"row-reverse",justifyContent:n?"flex-start":"flex-end"},{children:[(0,i.jsxs)(a.Z,Object.assign({flexDirection:"column",alignItems:"flex-start"},{children:[(0,i.jsx)(x,{}),(0,i.jsx)(o.Z,Object.assign({color:"t.third",variant:"caption",mt:"4px"},{children:t("yourOwnDefiWallet",{defaultValue:"Your Own DeFi Wallet"})}))]})),(0,i.jsx)(l,{color:"alertYellowBg",fontSize:"18px",mx:"20px",mt:"4px"}),(0,i.jsxs)(a.Z,Object.assign({flexDirection:"column",alignItems:"flex-start"},{children:[(0,i.jsx)(f,{}),(0,i.jsx)(o.Z,Object.assign({color:"t.third",variant:"caption",mt:"4px"},{children:`${p.walletName} ${t("perpWallet",{defaultValue:"Perp Wallet"})}`}))]}))]}))}))},1606:(e,t,n)=>{n.d(t,{I:()=>x});var i=n(58138),a=n(49247),o=n(52367),r=n(96832),s=n(33687),l=n(30334),c=n(76124),d=n(6540),u=n(37218),p=n(85535),h=n(29788);const{liteConfig:{walletName:m}}=s.brokerConfig,x=(0,r.memo)((({onWithdrawButtonClick:e,isDrawerLayout:t=!1,defaultToken:n,isGuide:r})=>{const{getI18n:s,t:x}=(0,p.s)(),{getI18n:f}=(0,u.yk)(),{showWalletConnectDialog:b}=(0,o.dc)(),{onTransactionButtonClick:g,onTransactionSuccess:w,onTransactionFail:j}=(0,c.z)({isDrawerLayout:t,type:"deposit",isGuide:r}),{onSelectTokenOptionClick:C,onSelectTokenDrawerPopup:k,onSelectTokenButtonClick:v}=(0,l.u)({isDrawerLayout:t});return(0,i.jsx)(d.gl,{onSelectTokenButtonClick:v,onSelectTokenDrawerPopup:k,onSelectTokenOptionClick:C,onWithdrawButtonClick:g,onTransactionSuccess:w,onTransactionFail:j,isDrawerLayout:t,defaultCoin:n||"BNB",getI18n:s,tradeType:d.v3.Futures,isSupportSpot:!1,t:x,topfoldUI:(0,i.jsxs)(i.Fragment,{children:[!t&&(0,i.jsx)(a.Z,Object.assign({color:"alertYellowBg",variant:"body2",mb:"12px"},{children:f("youNeedToDeposit",{defaultValue:"Before you can start trading, you need to deposit tokens into your {{brokerName}} perpetual wallet.",brokerName:m})})),(0,i.jsx)(h.L,{direction:"deposit"})]}),onConnectWalletButtonClick:b,onWithdrawButtonClick:e})}))},30334:(e,t,n)=>{n.d(t,{u:()=>o});var i=n(96832),a=n(37218);const o=({isDrawerLayout:e=!1})=>{const{trackWebClickWithWalletAddress:t}=(0,a.fM)(),{trackPopupViewWithWalletAddress:n}=(0,a.$S)(),o=(0,i.useCallback)((()=>{t({pageName:"liteMode",$element_id:"switchToken",$element_name:e?"transferModule":"tradeModule"})}),[t,e]);return{onSelectTokenOptionClick:(0,i.useCallback)((({token:e})=>{t({pageName:"liteMode",$element_id:"selectToken",title:e})}),[t]),onSelectTokenDrawerPopup:(0,i.useCallback)((()=>{n({pageName:"liteMode",$element_id:"switchTokenPopups"})}),[n]),onSelectTokenButtonClick:o}}},76124:(e,t,n)=>{n.d(t,{z:()=>o});var i=n(96832),a=n(37218);const o=({type:e,isGuide:t})=>{const{trackWebClickWithWalletAddress:n}=(0,a.fM)(),o="deposit"===e;return{onTransactionButtonClick:(0,i.useCallback)((({coin:e,amount:i})=>{o&&n({pageName:"advancedMode",$element_id:"deposit",$element_type:t?"Guide":"Normal",$element_content:i,title:e})}),[n,o,t]),onTransactionSuccess:(0,i.useCallback)((({coin:e,amount:t})=>{o&&n({pageName:"advancedMode",$element_id:"depositResponse",$element_content:t,title:e,status:"success"})}),[n,o]),onTransactionFail:(0,i.useCallback)((({coin:e,amount:t,message:i})=>{o&&n({pageName:"advancedMode",$element_id:"depositResponse",$element_content:t,title:e,status:"fail",error:i})}),[n,o])}}}}]);