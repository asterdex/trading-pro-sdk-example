"use strict";(self.webpackChunkaden_trade_sdk=self.webpackChunkaden_trade_sdk||[]).push([[1799],{1699:(e,s,t)=>{t.d(s,{Z:()=>r});var a=t(96832),n=t(86282),i=t(72249);const o=(0,a.forwardRef)((({defaultChecked:e=!1,checked:s,size:t=24,color:o="primaryGradient",onClick:r,onChange:l,name:c,disabled:d,icon:u=null,reverseDirection:h,...g},p)=>{const{current:m}=a.useRef(null!=s),[x,b]=a.useState(e);m&&s!==x&&b(void 0!==s&&s);let f=Math.abs(t),j=Math.round(5*f/3);const M=18*f/24,y=f/24*3;return a.createElement(n.Z,{ref:p,as:"button",type:"button",role:"switch",style:{direction:"ltr"},disabled:d,"aria-checked":x,onClick:e=>{if(d)return;let s=!x;m||b(s),e.target.checked=s,r&&r(e),l&&l(e)},...g,sx:{cursor:"pointer",appearance:"none",m:0,p:0,width:j,height:f,bg:e=>e.colors&&e.colors.line,backgroundImage:e=>e.colors&&e.colors.line,border:"none",borderRadius:9999,"&[aria-checked=true]":{bg:e=>e.colors&&e.colors[o]||o,backgroundImage:e=>e.colors&&e.colors[o]},":focus":{outline:"none"},":disabled":{cursor:"not-allowed",opacity:.7}}},a.createElement(i.Z,{style:{transform:x?`translateX(${h?0:j-2*y-M}px)`:`translateX(${h?j-2*y-M:0}px)`},sx:{mx:`${y}px`,width:M,height:M,borderRadius:9999,boxShadow:"card",bg:"t.white",transitionProperty:"transform, border-color",transitionTimingFunction:"ease-in-out",transitionDuration:"0.2s",justifyContent:"center",alignItems:"center"}},u),a.createElement(n.Z,{as:"input",type:"checkbox","data-bn-type":"checkbox",onChange:()=>{},name:c,checked:x,__css:{display:"none"}}))}));o.displayName="Switch";const r=o},32646:(e,s,t)=>{t.r(s),t.d(s,{AssetModeDialog:()=>I,AssetModeForm:()=>F,AssetModeFormComponent:()=>E,PositionSideForm:()=>P,default:()=>D});var a=t(92336),n=t(58138),i=t(88927),o=t(49247),r=t(86282),l=t(72249),c=t(1699),d=t(10600),u=t(76041),h=t(72729),g=t(31781),p=t(36829),m=t(86041),x=t(1515),b=t(96832),f=t(29543),j=t(3087),M=t(37218),y=t(47834),O=t(3362),C=t(214);const k={bg:"orderformBg",width:["calc(100vw - 32px)","384px"],position:"relative",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.02)",borderRadius:"4px",userSelect:"none",padding:"24px",".desc":{fontSize:"sm",mb:"24px",color:"t.third",wordBreak:"break-word",lineHeight:"20px"},".cancel-button-container":{width:["calc(100vw - 32px)","164px"],height:"40px",borderRadius:"4px",button:{padding:0}},".confirm-button-container":{width:["calc(100vw - 32px)","164px"],height:"40px",borderRadius:"4px",button:{padding:0}}};var v=t(41500);const S=(0,O.nM)(),Z={LIMIT:"limit",MARKET:"market",STOP:"stopLimit",STOP_MARKET:"stopMarket",TRAILING_STOP_MARKET:"trailingStopMarket"},A=[{i18n:"order-confirmation",defaultI18n:"Order Confirmation",key:"oc"},{i18n:"position-mode",defaultI18n:"Position Mode",key:"pm"},{i18n:"assetMode",defaultI18n:"Asset Mode",key:"am"}],w={bg:"modalBg",width:["calc(100vw - 32px)","640px"],height:"560px",position:"relative",boxShadow:"elevation3",borderRadius:"4px",userSelect:"none",".header-container":{px:["16px","md"],pt:["16px","20px"],pb:["0px","20px"],height:"64px",borderBottomWidth:["0px","0.5px"],borderBottomStyle:["none","solid"],borderBottomColor:"line"},".header-title":{fontSize:"plus",color:"t.primary"},".header-close":{color:"t.third",fontSize:"24px",cursor:"pointer",":hover":{color:"t.primary"}},".desc":{fontSize:"14px",lineHeight:"18px",color:"t.third",ml:"25px",mt:"8px",whiteSpace:"pre-line"},".label":{color:"t.primary",fontSize:"md",fontWeight:500},".content":{fontSize:"sm",lineHeight:"20px",letterSpacing:"0.16px",color:"t.secondary",mt:"40px"},".switch-container":{flexDirection:"column",justifyContent:"center",minHeight:"40px",borderBottom:"1px solid",borderColor:"line",py:"10px",":first-child":{pt:"0px"}},".switch-header":{width:"100%",justifyContent:"space-between","button[aria-checked=false]":{bg:"bg3"}}},I=({confirmVisible:e,setConfirmVisible:s})=>{const t=(0,j.I0)(),{getI18n:a}=(0,M.yk)(),{t:u}=(0,M.oz)(),h=(0,v.I)((e=>e.assetMode)),[g,p]=(0,b.useState)(!1),{setMessageInfo:m}=(0,C.YT)(),x=(0,C.$J)(),y=(0,b.useRef)({});Object.values(x).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:s}=e;return!y.current[s]&&(y.current[s]=e,!0)}return!1}));const S=Boolean(Object.values(y.current).filter((e=>e.isolated&&"BOTH"===e.positionSide)).length),Z=(0,b.useCallback)((e=>t.preference.changeAssetMode({joinMargin:e})),[t.preference]),A=(0,b.useCallback)(((e,s)=>t.marginType.changeMarginType({marginType:s?O.Yl.CROSSED:O.Yl.ISOLATED,symbol:e})),[t.marginType]);return(0,n.jsxs)(i.Z,Object.assign({visible:e,sx:k},{children:[(0,n.jsx)(o.Z,Object.assign({className:"desc"},{children:(0,n.jsx)(f.c,{t:u,i18nKey:(0,M.rI)("isolatedAssetModeDes"),defaults:"Isolated margin positions are not supported under the Multi-Assets Mode. Please adjust all USDⓈ-M Futures positions to cross margin mode in order to activate Multi-Assets Mode.",components:{text:(0,n.jsx)(o.Z,{}),jump:(0,n.jsx)(o.Z,{tx:"tradingRules.dialog",variant:"viewMore",sx:{mt:"0 !important",display:"inline"}})},values:{isolatedMode:a("isolatedMode",{defaultValue:"Isolated Mode"}),crossMode:a("crossMode",{defaultValue:"Cross Mode"})}})})),(0,n.jsxs)(r.Z,Object.assign({mb:"24px",overflowY:"auto",maxHeight:"300px",width:"100%",pr:"12px"},{children:[Object.values(y.current).map((e=>{const{isolated:s,symbol:t,id:i}=e,o=s?a("headerIsolated",{defaultValue:"Isolated"}):a("header-Cross",{defaultValue:"Cross"});return(0,n.jsxs)(l.Z,Object.assign({mb:"8px",justifyContent:"space-between"},{children:[(0,n.jsx)(l.Z,Object.assign({mb:0,className:"desc"},{children:t})),(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(l.Z,Object.assign({mb:0,mr:"8px",className:"desc",fontSize:"12px"},{children:o})),(0,n.jsx)(c.Z,{sx:{"& div":{backgroundColor:"#FFFFFF"},"& input":{backgroundColor:"#C1C6CD"}},checked:!s,onChange:()=>{g||(p(!0),A(t,s).then((t=>{(null==t?void 0:t.marginType)&&(e.isolated=!s,m({header:a("changeMarginModeTitle",{defaultValue:"Adjust Margin"}),message:a("changeMarginModeSuccess",{defaultValue:"change margin mode success"}),variant:"success"})),p(!1)})))},name:i,color:"t.buy",size:16})]})]}),i)})),(0,n.jsx)(l.Z,Object.assign({fontSize:"12px",color:"t.sell"},{children:a("switchCrossMode",{defaultValue:"*Please switch all positions to cross mode."})}))]})),(0,n.jsxs)(l.Z,Object.assign({width:"100%",justifyContent:"space-around"},{children:[(0,n.jsx)("div",Object.assign({className:"cancel-button-container"},{children:(0,n.jsx)(d.Z,Object.assign({variant:"default",colorStyle:"secondary",height:40,width:"100%",onClick:()=>{s(!1)}},{children:a("cancelBtnText",{defaultValue:"Cancel"})}))})),(0,n.jsx)("div",Object.assign({className:"confirm-button-container"},{children:(0,n.jsx)(d.Z,Object.assign({height:40,width:"100%",disabled:S,onClick:()=>{g||(p(!0),Z(h).then((e=>{const{success:t}=e;t&&m({header:a("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:a("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}),s(!1),p(!1)})))}},{children:a("PreferenceConfirm",{defaultValue:"Confirm"})}))}))]}))]}))},V=()=>{const{getI18n:e}=(0,M.yk)();return e(S?"settingDelivery":"settingPerpetual",{defaultValue:S?"This setting is only apply for Delivery Futures.":"This setting is only apply for Perpetual Futures."})},P=()=>{const e=(0,j.I0)(),{positionMode:s=!1}=(0,C.F7)(),{getI18n:t}=(0,M.yk)(),{enqueueNotification:a}=(0,g.Z)(),i=V(),c=(0,b.useCallback)((s=>e.preference.changePositionMode({dualSidePosition:s})),[e.preference]),d=(0,b.useCallback)((e=>{s!==e&&c(e).then((e=>{const{success:s}=e;s&&a({header:t("AdjustPositionMode",{defaultValue:"Adjust Position Mode"}),message:t("AdjustPositionModeSuccess",{defaultValue:"Position mode adjusted successfully."}),variant:"success"})}))}),[c,a,t,s]);return(0,n.jsxs)(r.Z,{children:[(0,n.jsxs)(r.Z,Object.assign({mt:"27px","data-testid":"One-wayMode"},{children:[(0,n.jsx)(u.ZP,Object.assign({name:"positionSide",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===s,onCheckedChange:()=>{d(!1)}},{children:(0,n.jsx)(r.Z,Object.assign({className:"label"},{children:t("OneWayPosition",{defaultValue:"One-way Mode"})}))})),(0,n.jsx)(o.Z,Object.assign({className:"desc"},{children:t("OneWayModeDes",{defaultValue:""})}))]})),(0,n.jsxs)(r.Z,Object.assign({mt:"27px","data-testid":"HedgeMode"},{children:[(0,n.jsx)(u.ZP,Object.assign({name:"positionSide",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===s,onCheckedChange:()=>{d(!0)}},{children:(0,n.jsx)(r.Z,Object.assign({className:"label"},{children:t("TwoWayPosition",{defaultValue:"Hedge Mode"})}))})),(0,n.jsx)(o.Z,Object.assign({className:"desc"},{children:t("TwoWayModeDes",{defaultValue:""})}))]})),(0,n.jsxs)(l.Z,Object.assign({className:"content"},{children:[t("AdjustPositionModeDes",{defaultValue:""})," ",i]}))]})},T=({name:e,label:s,checked:t,onChange:a,children:i})=>(0,b.useMemo)((()=>(0,n.jsxs)(l.Z,Object.assign({className:"switch-container"},{children:[(0,n.jsxs)(l.Z,Object.assign({className:"switch-header"},{children:[(0,n.jsx)(o.Z,Object.assign({className:"label"},{children:s})),(0,n.jsx)(c.Z,{color:"primary",checked:t,onChange:a,name:e,size:16})]})),i]}))),[t,i,s,e,a]),N=()=>{const e=(0,b.useRef)(["LIMIT","MARKET","STOP","STOP_MARKET","TRAILING_STOP_MARKET"]),{orderConfirmation:s}=(0,C.F7)(),{getI18n:t}=(0,M.yk)(),{setMessageInfo:a}=(0,C.YT)(),i=V(),o=(0,j.I0)(),c=(0,b.useCallback)((e=>o.preference.changeOrderConfirmation(e)),[o.preference]),d=(0,b.useCallback)((e=>{c(e).then((e=>{const{success:n}=e;n?a({header:t("changeOrderConfirmation",{defaultValue:"Change Order Confirmation"}),message:t("changeOrderConfirmationSuccess",{defaultValue:"Change Order Confirmation successfully."}),variant:"success"}):c(s)}))}),[c,a,t,s]);return(0,n.jsxs)(r.Z,{children:[e.current.map((e=>(0,n.jsx)(T,{name:e,label:`${t(Z[e],{defaultValue:""})}   ${t("Order",{defaultValue:"Order"})}`,checked:s[e]||!1,onChange:t=>{const{target:a}=t;d(Object.assign(Object.assign({},s),{[e]:a.checked}))}},e))),(0,n.jsxs)(l.Z,Object.assign({className:"content",sx:{lineHeight:["20px","16px"]}},{children:[t("order-confirmation-content",{defaultValue:""})," ",i]}))]})},E=({setConfirmVisible:e,setAssetMode:s,isolatedPositionFlag:t=!1})=>{const a=(0,j.I0)(),{assetMode:i}=(0,C.F7)(),{getI18n:c,t:d}=(0,M.yk)(),{enqueueNotification:p}=(0,g.Z)(),[m,x]=(0,b.useState)(!1),y=(0,b.useCallback)((e=>a.preference.changeAssetMode({joinMargin:e})),[a.preference]),k=(0,b.useCallback)((a=>{if(!m){if(t)return e(!0),void s(a);x(!0),y(a).then((e=>{const{success:t}=e;t?p({header:c("adjustAssetMode",{defaultValue:"Adjust Asset Mode"}),message:c("adjustAssetModeSuccess",{defaultValue:"Asset mode adjusted successfully."}),variant:"success"}):s(a),x(!1)})).catch((()=>{x(!1),s(a)}))}}),[m,t,p,s,e,y,c]);return(0,n.jsxs)(r.Z,{children:[(0,n.jsxs)(r.Z,Object.assign({mb:"27px"},{children:[(0,n.jsx)(u.ZP,Object.assign({name:"assetMode",value:"false",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!1===i,onChange:()=>{k(!1)}},{children:(0,n.jsx)(r.Z,Object.assign({className:"label"},{children:c("singleAsset",{defaultValue:"Single-Asset Mode"})}))})),(0,n.jsx)(o.Z,Object.assign({className:"desc"},{children:c("singleAssetDes",{defaultValue:"Supports USDⓈ-M Futures trading by only using the single margin asset of the symbol. \n PNL of the same margin asset positions can be offset. \n Supports Cross Margin Mode and Isolated Margin Mode."})}))]})),(0,n.jsxs)(r.Z,Object.assign({mb:"27px"},{children:[(0,n.jsx)(u.ZP,Object.assign({name:"assetMode",value:"true",sx:{svg:{borderWidth:"1px"},color:"t.primary"},checked:!0===i,onChange:()=>{k(!0)}},{children:(0,n.jsx)(r.Z,Object.assign({className:"label"},{children:c("multiAssets",{defaultValue:"Multi-Assets Mode"})}))})),(0,n.jsx)(o.Z,Object.assign({className:"desc"},{children:c("multiAssetsDes",{defaultValue:"USDⓈ-M Futures trading across multiple margin assets. \n PNL can be offset among the different margin asset positions. \n Only supports Cross Margin Mode."})}))]})),(0,n.jsx)(l.Z,Object.assign({className:"content",flexDirection:"column"},{children:(0,n.jsx)(f.c,{t:d,i18nKey:(0,M.rI)("assetModeDes"),defaults:"<text>If there are open positions or open orders in USDⓈ-M Futures, Multi-Assets Mode cannot be activated. Multi-Assets Mode only applies to USDⓈ-M Futures.</text> <text>Before activating Multi-Assets Mode, please read the <jump>{{guide}}</jump> in detail to better manage USDⓈ-M Futures account risk accordingly when using Multi-Assets Mode.</text>",components:{text:(0,n.jsx)(o.Z,{mt:"8px"}),jump:(0,n.jsx)(h.Z,{href:O.Wh.ASSETS_MODE,sx:{color:"primary",mt:"0 !important",display:"inline"},target:"_blank"})},values:{guide:c("guide",{defaultValue:"guide"})}})}))]})},F=b.memo(E),R=e=>{var{tabKey:s}=e,t=(0,a.__rest)(e,["tabKey"]);switch(s){case"pm":return(0,n.jsx)(P,{});case"oc":return(0,n.jsx)(N,{});case"am":return(0,n.jsx)(F,Object.assign({},t));default:return null}},D=(0,b.forwardRef)(((e,s)=>{const{getI18n:t}=(0,M.yk)(),[a,c]=(0,b.useState)({defaultActiveKey:"oc"}),{defaultActiveKey:d="oc"}=a,[u,h]=(0,b.useState)(!1),[g,f]=(0,b.useState)(d),j=(0,b.useCallback)((()=>{h(!1)}),[h]),O=(0,v.I)((e=>e.visible)),k=(0,v.I)((e=>e.setVisible)),Z=(0,v.I)((e=>e.setAssetMode)),{multiAssetMarginEnable:V=!1}=(0,C.F7)(),P=(0,C.$J)(),T=new Set,N=Object.values(P).filter((e=>{if(e.isolated&&"BOTH"===e.positionSide){const{symbol:s}=e;return!T.has(s)&&(T.add(s),!0)}return!1})),E=Boolean(N.length),F=(0,b.useCallback)((e=>{h(!0),c(e)}),[h,c]);return(0,b.useImperativeHandle)(s,(()=>({showPreferencePanel:F}))),(0,b.useEffect)((()=>y.ee.on("SHOW_PREFERENCE_PANEL",(e=>{F({defaultActiveKey:e})}))),[F]),(0,b.useEffect)((()=>y.ee.on("CLOSE_PREFERENCE_PANEL",(()=>{j()}))),[j]),(0,b.useEffect)((()=>{f(d)}),[d]),(0,b.useMemo)((()=>u||O?(0,n.jsxs)(r.Z,{children:[(0,n.jsxs)(i.Z,Object.assign({visible:u,sx:w,onMaskClick:j},{children:[(0,n.jsxs)(l.Z,Object.assign({alignItems:"center",justifyContent:"space-between",className:"header-container"},{children:[(0,n.jsx)(o.Z,Object.assign({className:"header-title"},{children:t("preference",{defaultValue:"Preference"})})),(0,n.jsx)(x.Z,{className:"header-close",onClick:j})]})),(0,n.jsxs)(l.Z,Object.assign({sx:{height:"496px"}},{children:[(0,n.jsx)(p.Z,Object.assign({size:"large",variant:"vertical",defaultActiveKey:g,controlledKey:g,onChange:e=>f(e)},{children:A.map((({i18n:e,defaultI18n:s,key:a})=>"am"!==a||!S&&V?(0,n.jsx)(m.Z,{tab:(0,n.jsx)(o.Z,Object.assign({variant:"subtitle2",marginRight:"24px",minWidth:"120px"},{children:t(e,{defaultValue:s})})),tabKey:a},a):(0,n.jsx)(n.Fragment,{})))})),(0,n.jsx)(r.Z,Object.assign({sx:{borderLeft:"0.5px solid",borderColor:"line",overflowY:"auto"},px:"24px",py:"24px",height:"100%",flex:"1"},{children:(0,n.jsx)(R,Object.assign({tabKey:g},{setConfirmVisible:k,setAssetMode:Z,isolatedPositionFlag:E}))}))]}))]})),(0,n.jsx)(I,{confirmVisible:O,setConfirmVisible:k})]}):null),[u,O,j,t,g,k,Z,E,V])}))},41500:(e,s,t)=>{t.d(s,{I:()=>a});const a=(0,t(9076).Ue)((e=>({visible:!1,setVisible:s=>e((()=>({visible:s}))),assetMode:!1,setAssetMode:s=>e((()=>({assetMode:s})))})))}}]);