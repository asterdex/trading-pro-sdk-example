(self.webpackChunkaden_trade_sdk=self.webpackChunkaden_trade_sdk||[]).push([[9954],{93400:(e,t,i)=>{"use strict";i.d(t,{a:()=>R,H:()=>T});var n=i(86282),s=i(69625),r=i(87608),a=i.n(r),l=i(85466),o=i.n(l),c=i(45563),d=i.n(c),m=i(14633),h=i.n(m),u=i(96832),g=i(96056),p=i(10012);const f={fontSize:0,textAlign:"center",padding:"8px 6px",color:"t.third"},y=(0,u.memo)((({children:e,...t})=>u.createElement(n.Z,{sx:f,className:"emptyLine",...t},e)));var x=i(51285),v=i(73246);const b={position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},S=(0,u.memo)((function({show:e=!0,fullScreen:t=!1,inner:i,children:n,zIndex:s}){if(!e)return n||null;const r=u.createElement(v.Z,{sx:{zIndex:s||"100",...b}});return t?u.createElement(u.Fragment,null,n,u.createElement("div",{style:{position:i?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",background:"radial-gradient(rgba(0, 0, 0, 0.05) 30%, transparent)",zIndex:2e3}},r)):u.createElement(u.Fragment,null,n,r)}));let C;S.show=({fullScreen:e=!1}={})=>{C||(C=document.createElement("div"),document.body.appendChild(C)),x.render(u.createElement(S,{fullScreen:e}),C)},S.hide=()=>{C&&x.render(u.createElement(S,{show:!1}),C)};const E=S;var j=i(21039),w=i(46631),k=i(2237);const M=()=>{const e=(()=>{const{i18n:e}=(0,k.$)();return e.language||"undefined"!=typeof window&&window.localStorage.i18nextLng||"en"})();return(0,w.yV)(e)};p.t7.displayName="FixedSizeList";const T=(0,u.memo)((({className:e,children:t,...i})=>{const n=a()("list-item-entity",e);return u.createElement(u.Fragment,null,u.createElement("div",{className:n,...i},t),u.createElement(s.xB,{styles:{".list-item-entity":{display:"flex",alignItems:"center",justifyContent:" space-between",flex:1}}}))})),I=()=>{},[D,H]=[38,40];class O extends u.Component{constructor(e){super(e),this.state={isScrolling:!1,isHover:!1,activeId:0,scrollOffset:0},this.renderItem=({index:e,style:t})=>{const{dataSource:i,itemElement:n,openShotCut:r}=this.props,{activeId:a}=this.state,l=!!r&&a===e;return u.createElement(u.Fragment,null,u.createElement("div",{style:t,className:"list-item-container"},u.createElement(n,{...i[e],activeId:a,active:l})),u.createElement(s.xB,{styles:{".list-item-container":{display:"flex",alignItems:"center",overflowX:"hidden"}}}))},this.renderChild=()=>{const{dataSource:e=[],itemKey:t,itemHeight:i,loading:n=!1,loadWithContent:s=!1,direction:r,listSx:a={},emptyText:l,emptyChildren:o}=this.props,{isScrolling:c}=this.state,d=!n&&0===e.length;this.ListStyle={direction:r,...a};const m=u.createElement(g.ZP,{className:"list-auto-sizer"},(({width:n,height:s})=>u.createElement(p.t7,{style:{direction:r,...a},className:"fixed-size-list",width:n,height:s,itemCount:e.length,itemSize:i,itemData:e,itemKey:t,overscanCount:c?10:1,outerRef:this.outerListRef,innerRef:this.innerListRef,useIsScrolling:!0},this.renderItem)));return n?s?u.createElement(u.Fragment,null,u.createElement(E,{fullScreen:!0,inner:!0}),m):u.createElement(E,{fullScreen:!0,inner:!0}):d?u.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1}},o||(l?u.createElement(y,null,l):null)):m},this.handleScroll=h()(this.handleScroll.bind(this),200),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.keyScroll=this.keyScroll.bind(this),this.outerListRef=u.createRef(null),this.innerListRef=u.createRef(null),this.maxHeight=e.itemHeight,this.minHeight=.1,this.eventAttached=!1,this.keys={[D]:0,[H]:0}}componentDidMount(){this.props.openShotCut&&(this.eventAttached=!0,document.addEventListener("keydown",this.handleKeyDown),this.keyScroll())}componentDidUpdate(){this.props.openShotCut&&(this.eventAttached||document.addEventListener("keydown",this.handleKeyDown),this.keyScroll())}componentWillUnmount(){this.eventAttached&&(this.eventAttached=!1,document.removeEventListener("keydown",this.handleKeyDown)),this.clearTimer()}shouldComponentUpdate(e,t){return o()(e.dataSource,this.props.dataSource)?e.loading!==this.props.loading||e.itemHeight!==this.props.itemHeight||e.listSx!==this.props.listSx||e.emptyChildren!==this.props.emptyChildren:!(t.isScrolling&&this.state.isScrolling||t.isHover!==this.state.isHover)}handleMouseEnter(){this.setState({isHover:!0})}handleMouseLeave(){this.setState({isHover:!1})}handleScroll(){this.state.isHover&&(this.setState({isScrolling:!0}),this.clearTimer(),this.timer=setTimeout((()=>{this.setState({isScrolling:!1})}),1e3))}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}handleKeyDown(e){const{keyCode:t,metaKey:i,ctrlKey:n}=e,{itemHeight:s,dataSource:r,openShotCut:a,onKeyDownCallback:l,tradeType:o}=this.props,{activeId:c}=this.state;if(a&&(13===t||t===D||t===H)&&(e&&e.preventDefault(),e.stopPropagation(),this.keys={[D]:Math.max(this.minHeight,this.state.scrollOffset-s),[H]:Math.min(this.state.scrollOffset+s,this.maxHeight)},this.keys[t]&&this.scrollItem(this.keys[t]),13===t)){const e=r.filter(((e,t)=>t===c)),t=e.length?e[0]:{};d()(l)&&l({data:t,metaKey:i,ctrlKey:n,tradeType:o})}}keyScroll(){this.innerListRef.current&&(this.maxHeight=this.innerListRef.current.style.height.replace("px","")||this.props.itemHeight),this.outerListRef.current&&this.outerListRef.current.scrollTo({left:0,top:this.state.scrollOffset,behavior:"auto"})}scrollItem(e){this.setState({activeId:Math.floor(e/this.props.itemHeight),scrollOffset:e})}render(){const{variant:e,sx:t,tx:i,scrollPerf:s=!0}=this.props;return u.createElement(n.Z,{onScroll:s?this.handleScroll:I,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,__css:{position:"relative",display:"flex",flexDirection:"column",flexGrow:1},className:"list-container",variant:e,sx:t,tx:i},this.renderChild())}}const R=(e=>{const t=t=>{const i=(()=>{const e=M();return(0,j.cp)(e)})();return u.createElement(e,{...t,direction:i})};return t.displayName=`WithDirection(${e.displayName||e.name||"Component"})`,t})(O)},40721:(e,t,i)=>{"use strict";function n(e,t="yyyy-MM-dd hh:mm",i=!1){const n=i?{"M+":e.getUTCMonth()+1,"d+":e.getUTCDate(),"h+":e.getUTCHours(),"m+":e.getUTCMinutes(),"s+":e.getUTCSeconds(),"q+":Math.floor((e.getUTCMonth()+3)/3),S:e.getUTCMilliseconds()}:{"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};let s=t;return/(y+)/.test(t)&&(s=t.replace(RegExp.$1,`${e.getFullYear()}`.substr(4-RegExp.$1.length))),Object.keys(n).forEach((e=>{new RegExp(`(${e})`).test(s)&&(s=s.replace(RegExp.$1,1===RegExp.$1.length?n[e]:`00${n[e]}`.substr(`${n[e]}`.length)))})),s}i.d(t,{v:()=>n})},85466:(e,t,i)=>{var n=i(34662);e.exports=function(e,t){return n(e,t)}},14633:(e,t,i)=>{var n=i(77837),s=i(93702);e.exports=function(e,t,i){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return s(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),n(e,t,{leading:r,maxWait:t,trailing:a})}},29954:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var n=i(58138),s=i(96832),r=i(41367),a=i(72249),l=i(49247);const o=[70,75,60],c=e=>`${o[e]||0}px`,d=s.memo((({headers:e})=>s.createElement(a.Z,{sx:{alignItems:"center",justifyContent:"space-between","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end"},"> div":{textAlign:"center",alignItems:"center",justifyContent:"center"},px:["0","sm"],py:"8px"}},e.map(((e,t)=>s.createElement(a.Z,{key:t,className:e.area,sx:{userSelect:"none",height:"16px"},style:{minWidth:c(t)}},s.createElement(l.Z,{title:e.text,sx:{fontSize:0,color:"t.third"}},e.text))))))),m={"& .trade-list-item":{padding:"0 12px 0 16px !important",cursor:"pointer",fontSize:0,fontWeight:"normal","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end",color:"t.secondary"},"&-buy .price":{color:"t.buy"},"&-sell .price":{color:"t.sell"},"& .text":{color:"t.secondary"},"& .time":{color:"t.secondary"},"@media screen and (max-width: 768px)":{padding:"0 !important"}}};var h=i(93400);const u=s.memo((({trades:e,loading:t,itemHeight:i=18,tradeItem:n,emptyText:r})=>s.createElement(h.a,{sx:m,dataSource:e,loading:t,itemElement:n,itemHeight:i,emptyText:r})));var g=i(40721);const p=s.memo((({price:e,buyerIsMaker:t,quantity:i,tradeTime:n,formatPrice:r=!0,formatQty:a,formatDate:l=!0,formatMi:o,formatTk:d,onRowClick:m,side:u})=>{const p=void 0===t?u.toLocaleLowerCase():t?"sell":"buy",f=(0,s.useCallback)((()=>{m({price:e,side:p})}),[e,p]);return s.createElement(h.H,{className:`trade-list-item trade-list-item-${p}`,onClick:f},s.createElement("div",{className:"price left",style:{minWidth:c(0)}},r?d(e):e),s.createElement("div",{className:"text right",style:{minWidth:c(1)}},a?o(i):i),s.createElement("div",{className:"text right",style:{minWidth:c(2)}},l?(0,g.v)(new Date(n),"hh:mm:ss"):n))})),f=(e,t)=>t[e].tradeId,y=s.memo((({trades:e,loading:t,itemHeight:i,formatTk:n,formatMi:r,formatQty:a=!0,onRowClick:l,headers:o,emptyText:c})=>{const m=s.useMemo((()=>e=>s.createElement(p,{formatQty:a,formatMi:r,formatTk:n,onRowClick:l,...e})),[r,n,l,a]);return s.createElement(s.Fragment,null,s.createElement(d,{headers:o}),s.createElement(u,{trades:e,loading:t,itemHeight:i,tradeItem:m,itemKey:f,emptyText:c}))}));var x=i(214),v=i(32515);const b={pl:0,px:["0","sm"],py:"8px",width:"100%",alignItems:"center",justifyContent:"space-between","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end"},"> div":{textAlign:"center",alignItems:"center",justifyContent:"center"}},S=s.memo((({headers:e})=>(0,n.jsx)(a.Z,Object.assign({sx:b},{children:e.map((({text:e,area:t},i)=>(0,n.jsx)(a.Z,Object.assign({className:t,sx:{userSelect:"none",height:"24px",flex:1}},{children:(0,n.jsx)(l.Z,Object.assign({title:e,variant:"layouts.ellipsis",sx:{fontSize:0,color:"t.third"}},{children:e}))}),i)))}))));var C=i(28399);const E=Math.floor(16.5),j={cursor:"pointer",fontSize:0,fontWeight:"normal",".trade-list-item":{padding:"0 12px 0 16px","& .left":{textAlign:"left",justifyContent:"flex-start"},"& .right":{textAlign:"right",justifyContent:"flex-end",color:"t.grey300"},"&-buy .price":{color:"buy"},"&-sell .price":{color:"sell"},"& .text":{color:"orderBook.rowColor"},"& .time":{color:"t.grey300"}}},w=s.memo((({trades:e,loading:t,tradeItem:i,itemHeight:a=18})=>{const l=(0,r.useMediaQuery)({query:C.is}),o=(0,s.useMemo)((()=>l?e.reverse().slice(0,E):e.reverse()),[e,l]);return(0,n.jsx)(h.a,{sx:j,dataSource:o,loading:t,itemElement:i,itemHeight:a})}));var k=i(59712);const M=({price:e})=>{k.info(e)},T=e=>`${e}`,I=(0,s.createContext)({formatTk:T,formatMi:T,onItemClick:M});var D=i(37218);s.memo((({price:e,buyerIsMaker:t,quantity:i,tradeTime:r,formatPrice:a=!0,formatQty:l=!0,formatDate:o=!0})=>{const{formatMi:c,formatTk:d,onItemClick:m}=(0,s.useContext)(I),u=t?"sell":"buy";return(0,n.jsxs)(h.H,Object.assign({className:`trade-list-item trade-list-item-${u}`,onClick:()=>{m({price:e,side:u})}},{children:[(0,n.jsx)("div",Object.assign({className:"price left",style:{flex:1}},{children:a?d(e):e})),(0,n.jsx)("div",Object.assign({className:"text right",style:{flex:1}},{children:l?c(i):i})),(0,n.jsx)("div",Object.assign({className:"text right",style:{flex:1}},{children:o?(0,g.v)(new Date(r),"hh:mm:ss"):r}))]}))})),s.memo((({headers:e,trades:t,loading:i,tradeItem:s,itemHeight:r,formatMi:a,formatTk:l,onItemClick:o=M})=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S,{headers:e}),(0,n.jsx)(I.Provider,Object.assign({value:{formatMi:a,formatTk:l,onItemClick:o}},{children:(0,n.jsx)(w,{trades:t,loading:i,tradeItem:s,itemHeight:r})}))]})));var H=i(47834),O=i(3362),R=i(82597),A=i(92336),N=i(69009),L=i(43485);const $=(e,t)=>{const{trades:i}=e,{trade:n,limit:s,fresh:r}=t.payload||{};return{update:Date.now(),trades:r?[]:i.concat(n).slice(-s)}},Z={a:"aggTradeId",f:"firstTradeId",l:"lastTradeId",p:"price",T:"tradeTime",q:"quantity",m:"buyerIsMaker"},K=({symbol:e,limit:t=80,stream:i,isDelivery:n=!1})=>{const{value:r,loading:a,updateTime:l}=function(e,t,i){const n=(0,s.useRef)(0),r=(()=>{const e=(0,s.useRef)(!1);return(0,s.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,s.useCallback)((()=>e.current),[])})(),[a,l]=(0,s.useState)(Date.now()),[o,c]=(0,s.useState)(Object.assign({loading:!0,updateTime:Date.now()},i));return(0,s.useEffect)((()=>{const t=++n.current;!1===o.loading&&c(Object.assign(Object.assign({},o),{loading:!0})),e().then((e=>{const s=null==typeof e?null==i?void 0:i.value:e;r()&&t===n.current&&c({value:s,loading:!1,error:null,updateTime:Date.now()})})).catch((e=>{r()&&t===n.current&&c(Object.assign(Object.assign({},i),{loading:!1,error:e,updateTime:Date.now()}))}))}),[...t,a]),Object.assign(Object.assign({},o),{onRefresh:()=>l(Date.now)})}((()=>(0,A.__awaiter)(void 0,void 0,void 0,(function*(){const i=yield(0,N.A3)(n?L.P.DAPI:L.P.FAPI,{symbol:e,limit:t}),s=Object.keys(Z);return(i||[]).map((t=>s.reduce(((e,i)=>{const n=Z[i];return Object.assign(Object.assign({},e),{[n]:t[i]})}),{symbol:e})))}))),[e],{value:[]}),{update:o,trades:c}=(({symbol:e,limit:t=80,stream:i,snap:n=!0})=>{const r={update:Date.now(),trades:[]},[a,l]=(0,s.useReducer)($,r),o=(0,s.useCallback)(((e,i)=>{const n=Array.isArray(e)?e:[e];l({payload:{trade:n,limit:t,fresh:i}})}),[l,t]);return(0,s.useEffect)((()=>{if(o([],!0),i){const t="function"==typeof i.getStreamTradeSnap&&n?"getStreamTradeSnap":"getStreamTrade";return i[t](e).subscribe((e=>{o(e,!1)}))}}),[i,e,n]),Object.assign({},a)})({symbol:e,limit:t,stream:i});return{loading:a,updateTime:l,streamTimeStamp:o,trades:[...r,...c].slice(-t)}},P=Math.floor(16.5),_=s.memo((({sx:e={}})=>{const[t,i]=(0,x.z4)(),{getI18n:a}=(0,D.ZK)("trd-trades"),{formatMi:l,formatTk:o}=(0,x.mC)(),{isCoinUnit:c}=(0,x.QV)(),{marginAsset:d,tickSize:m}=(0,x.j2)(),h=(0,R.p)(m),[u,g]=i,p=(0,s.useMemo)((()=>[{text:`${a("price",{defaultValue:"Price"})}(${g})`,area:"left"},{text:`${a("amount",{defaultValue:"Amount"})}(${c?u:d})`,area:"right"},{text:a("time",{defaultValue:"Time"}),area:"right"}]),[a,g,u,d,c]),{trades:f,loading:b}=K({symbol:t,stream:(0,O.BN)(),isDelivery:!1}),S=(0,s.useCallback)((e=>{H.ee.emit("UPDATE_ORDER_PRICE_INPUT",String(e.price))}),[]),E=(0,s.useMemo)((()=>a("common-nodata",{defaultValue:"No Data"})),[]),j=(0,r.useMediaQuery)({query:C.is}),w=(0,s.useMemo)((()=>(j?f.reverse().slice(0,P):f.slice().reverse()).map((e=>{const{quantity:t,price:i}=e,n=c?t:(0,x.WA)({quantity:t,price:i,precision:h,format:!1});return Object.assign(Object.assign({},e),{quantity:n})}))),[f,j,h]);return(0,n.jsx)(v.Z,Object.assign({sx:Object.assign({px:"0",pb:"12px",width:"100%"},e)},{children:(0,n.jsx)(y,{headers:p,trades:w,loading:b,itemHeight:20,formatMi:l,formatTk:o,formatQty:c,onRowClick:S,emptyText:E})}))}))},28399:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>h,c9:()=>o,g8:()=>c,is:()=>d});var n=i(92336),s=i(58138),r=i(96832),a=i(86282),l=i(41367);const o="screen and (min-width: 1024px)",c="screen and (min-width: 768px) and (max-width: 1023px)",d="screen and (max-width: 767px)",m=(0,r.memo)((e=>{var{mediaQuery:t,children:i}=e,o=(0,n.__rest)(e,["mediaQuery","children"]);const c=(0,l.useMediaQuery)({query:t||"(max-width: -1)"})||void 0===t;return(0,r.useMemo)((()=>c?(0,s.jsx)(a.Z,Object.assign({sx:{width:"100%",height:"100%",display:"none",[`@media ${t}`]:{display:"block"}}},o,{children:i})):null),[c,i,o,t])})),h=(0,r.memo)(m)},32515:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var n=i(58138),s=(i(96832),i(72249));function r(e){return(0,n.jsx)(s.Z,Object.assign({__css:{flexDirection:"column",height:"100%",px:"sm"}},e))}}}]);